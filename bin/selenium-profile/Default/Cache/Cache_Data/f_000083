var version="1.2.0.55";
/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(d,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?c(d,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return c(b)}:c(d)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return !m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(k.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++){if(d=b.apply(a[e],c),d===!1){break}}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1){break}}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d){a[e++]=b[d++]}if(c!==c){while(void 0!==b[d]){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return +new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a){return d}if(1!==(k=b.nodeType)&&9!==k){return[]}if(p&&!e){if(f=_.exec(a)){if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode){return d}if(h.id===j){return d.push(h),d}}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j){return d.push(h),d}}}else{if(f[2]){return I.apply(d,b.getElementsByTagName(a)),d}if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){return I.apply(d,b.getElementsByClassName(j)),d}}}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--){o[l]=s+qb(o[l])}w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x){try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},B=b?function(a,b){if(a===b){return l=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b){return l=!0,0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0}if(f===g){return kb(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){i.unshift(c)}while(h[d]===i[d]){d++}return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b))){try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}}else{if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b)){break}}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=lb(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=mb(b)}function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter){!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d]){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d]){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++){fb(a,b[d],c)}return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)}})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return !g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++){if(c=d.relative[a[i].type]){m=[rb(sb(m),c)]}else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++){if(d.relative[a[e].type]){break}}return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||0.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++]){if(o(l,g,h)){i.push(l);break}}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++]){o(r,s,g,h)}if(f){if(p>0){while(q--){r[q]||s[q]||(s[q]=G.call(i))}}s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--){f=wb(b[c]),f[u]?d.push(f):e.push(f)}f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b){return e}n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type]){break}if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a){return I.apply(e,f),e}break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b)){return m.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return m.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(v.test(b)){return m.filter(b,a,c)}b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++){if(m.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){m.find(a,d[b],c)}return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return !!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||x).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b)){for(c in b){m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return x.find(a)}this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c))){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(m.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body){return setTimeout(m.ready)}m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H){if(H=m.Deferred(),"complete"===y.readyState){setTimeout(m.ready)}else{if(y.addEventListener){y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1)}else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}}}return H.promise(b)};var K="undefined",L;for(L in m(k)){break}k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else{c=void 0}}return c}function P(a){var b;for(b in a){if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--){delete d[b[e]]}if(c?!P(d):!m.isEmptyObject(d)){return}}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--){g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])))}m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c){m.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return !0}function bb(){return !1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--){f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--){if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--){g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){m.event.remove(a,o+b[j],c,d,!0)}}}m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped()){b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void (this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=bb}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b))}}return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++){m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){m.event.add(b,c,h[c][d])}}}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events){m.removeEvent(b,d,e.handle)}b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a))){for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g){d[g]&&Bb(e,d[g])}}if(b){if(c){for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++){Ab(e,d[g])}}else{Ab(a,f)}}return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++){if(f=a[q],f||0===f){if("object"===m.type(f)){m.merge(p,f.nodeType?[f]:f)}else{if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--){h=h.lastChild}if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--){m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++]){if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++]){ob.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++){if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild){a.removeChild(a.firstChild)}a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0}if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p)){return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++){d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++){d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")))}}i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a){return a}a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c){return c?void delete this.get:(this.get=b).apply(this,arguments)}}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--){if(b=Tb[e]+c,b in a){return b}}return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)))}return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e)){return e}d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+T[d]+b]=f[d]||f[d-2]||f[0]}return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++){f[b[g]]=m.css(a,b[g],!1,d)}return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,m.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=T[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||m.style(a,d)}else{j=void 0}}if(m.isEmptyObject(o)){"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j)}else{r?"hidden" in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o){m.style(a,b,o[b])}});for(d in o){g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function jc(a,b){var c,d,e,f,g;for(c in a){if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++){if(d=dc[f].call(j,a,k,j.opts)){return d}}return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)}},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&cc.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--){if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType){while(c=f[e++]){d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)}}},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void (a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++]){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=m.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?m.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0){return !0}}return !1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c)){while(d=f[e++]){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t){return v}h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a)){return this.each(function(b){m(this).wrapAll(a.call(this,b))})}if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return !m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b)){m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==m.type(b)){d(a,b)}else{for(e in b){Vc(a+"["+e+"]",b[e],c,d)}}}}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a)){m.each(a,function(){e(this.name,this.value)})}else{for(c in a){Vc(c,a[c],b,e)}}return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc){Xc[a](void 0,!0)}}),k.cors=!!Yc&&"withCredentials" in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd){return bd.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using" in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position")){a=a.offsetParent}return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void (f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});var Base=function(){};Base.extend=function(b,e){var f=Base.prototype.extend;Base._prototyping=true;var d=new this;f.call(d,b);d.base=function(){};delete Base._prototyping;var c=d.constructor;var a=d.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==a){this._constructing=true;c.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||f).call(arguments[0],d)}}}};a.ancestor=this;a.extend=this.extend;a.forEach=this.forEach;a.implement=this.implement;a.prototype=d;a.toString=this.toString;a.valueOf=function(g){return(g=="object")?a:c.valueOf()};f.call(a,e);if(typeof a.init=="function"){a.init()}return a};Base.prototype={extend:function(b,h){if(arguments.length>1){var e=this[b];if(e&&(typeof h=="function")&&(!e.valueOf||e.valueOf()!=h.valueOf())&&/\bbase\b/.test(h)){var a=h.valueOf();h=function(){var k=this.base||Base.prototype.base;this.base=e;var i=a.apply(this,arguments);this.base=k;return i};h.valueOf=function(i){return(i=="object")?h:a};h.toString=Base.toString}this[b]=h}else{if(b){var g=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){g=this.extend||g}var d={toSource:null};var f=["constructor","toString","valueOf"];var c=Base._prototyping?0:1;while(j=f[c++]){if(b[j]!=d[j]){g.call(this,j,b[j])}}for(var j in b){if(!d[j]){g.call(this,j,b[j])}}}}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,d,c){for(var b in a){if(this.prototype[b]===undefined){d.call(c,a[b],b,a)}}},implement:function(){for(var a=0;a<arguments.length;a++){if(typeof arguments[a]=="function"){arguments[a](this.prototype)}else{this.prototype.extend(arguments[a])}}return this},toString:function(){return String(this.valueOf())}});
/*! head.core - v1.0.2 */
(function(I,D){function F(a){T[T.length]=a}function K(b){var a=new RegExp(" ?\\b"+b+"\\b");R.className=R.className.replace(a,"")}function G(d,b){for(var a=0,c=d.length;a<c;a++){b.call(d,d[a],a)}}function j(){var a,c,b,d;R.className=R.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,"");a=I.innerWidth||R.clientWidth;c=I.outerWidth||I.screen.width;C.screen.innerWidth=a;C.screen.outerWidth=c;F("w-"+a);G(L.screens,function(e){a>e?(L.screensCss.gt&&F("gt-"+e),L.screensCss.gte&&F("gte-"+e)):a<e?(L.screensCss.lt&&F("lt-"+e),L.screensCss.lte&&F("lte-"+e)):a===e&&(L.screensCss.lte&&F("lte-"+e),L.screensCss.eq&&F("e-q"+e),L.screensCss.gte&&F("gte-"+e))});b=I.innerHeight||R.clientHeight;d=I.outerHeight||I.screen.height;C.screen.innerHeight=b;C.screen.outerHeight=d;C.feature("portrait",b>a);C.feature("landscape",b<a)}function m(){I.clearTimeout(S);S=I.setTimeout(j,50)}var z=I.document,q=I.navigator,x=I.location,R=z.documentElement,T=[],L={screens:[240,320,480,640,768,800,1024,1280,1440,1680,1920],screensCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!1},browsers:[{ie:{min:6,max:11}}],browserCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!0},html5:!0,page:"-page",section:"-section",head:"head"},B,C,E,A,H,M,J,Q,O,N,U,P,S;if(I.head_conf){for(B in I.head_conf){I.head_conf[B]!==D&&(L[B]=I.head_conf[B])}}C=I[L.head]=function(){C.ready.apply(null,arguments)};C.feature=function(c,b,a){return c?(Object.prototype.toString.call(b)==="[object Function]"&&(b=b.call()),F((b?"":"no-")+c),C[c]=!!b,a||(K("no-"+c),K(c),C.feature()),C):(R.className+=" "+T.join(" "),T=[],C)};C.feature("js",!0);E=q.userAgent.toLowerCase();A=/mobile|android|kindle|silk|midp|phone|(windows .+arm|touch)/.test(E);C.feature("mobile",A,!0);C.feature("desktop",!A,!0);E=/(chrome|firefox)[ \/]([\w.]+)/.exec(E)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(E)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(E)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(E)||/(msie) ([\w.]+)/.exec(E)||/(trident).+rv:(\w.)+/.exec(E)||[];H=E[1];M=parseFloat(E[2]);switch(H){case"msie":case"trident":H="ie";M=z.documentMode||M;break;case"firefox":H="ff";break;case"ipod":case"ipad":case"iphone":H="ios";break;case"webkit":H="safari"}for(C.browser={name:H,version:M},C.browser[H]=!0,J=0,Q=L.browsers.length;J<Q;J++){for(O in L.browsers[J]){if(H===O){for(F(O),N=L.browsers[J][O].min,U=L.browsers[J][O].max,P=N;P<=U;P++){M>P?(L.browserCss.gt&&F("gt-"+O+P),L.browserCss.gte&&F("gte-"+O+P)):M<P?(L.browserCss.lt&&F("lt-"+O+P),L.browserCss.lte&&F("lte-"+O+P)):M===P&&(L.browserCss.lte&&F("lte-"+O+P),L.browserCss.eq&&F("eq-"+O+P),L.browserCss.gte&&F("gte-"+O+P))}}else{F("no-"+O)}}}F(H);F(H+parseInt(M,10));L.html5&&H==="ie"&&M<9&&G("abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|progress|section|summary|time|video".split("|"),function(a){z.createElement(a)});G(x.pathname.split("/"),function(d,a){if(this.length>2&&this[a+1]!==D){a&&F(this.slice(a,a+1).join("-").toLowerCase()+L.section)}else{var b=d||"index",c=b.indexOf(".");c>0&&(b=b.substring(0,c));R.id=b.toLowerCase()+L.page;a||F("root"+L.section)}});C.screen={height:I.screen.height,width:I.screen.width};j();S=0;I.addEventListener?I.addEventListener("resize",m,!1):I.attachEvent("onresize",m)})(window);
/*! head.css3 - v1.0.0 */
(function(g,y){function w(c){for(var a in c){if(k[c[a]]!==y){return !0}}return !1}function b(e){var c=e.charAt(0).toUpperCase()+e.substr(1),a=(e+" "+v.join(c+" ")+c).split(" ");return !!w(a)}var m=g.document,d=m.createElement("i"),k=d.style,z=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),v="Webkit Moz O ms Khtml".split(" "),j=g.head_conf&&g.head_conf.head||"head",x=g[j],p={gradient:function(){var a="background-image:";return k.cssText=(a+z.join("gradient(linear,left top,right bottom,from(#9f9),to(#fff));"+a)+z.join("linear-gradient(left top,#eee,#fff);"+a)).slice(0,-a.length),!!k.backgroundImage},rgba:function(){return k.cssText="background-color:rgba(0,0,0,0.5)",!!k.backgroundColor},opacity:function(){return d.style.opacity===""},textshadow:function(){return k.textShadow===""},multiplebgs:function(){k.cssText="background:url(https://),url(https://),red url(https://)";var a=(k.background||"").match(/url/g);return Object.prototype.toString.call(a)==="[object Array]"&&a.length===3},boxshadow:function(){return b("boxShadow")},borderimage:function(){return b("borderImage")},borderradius:function(){return b("borderRadius")},cssreflections:function(){return b("boxReflect")},csstransforms:function(){return b("transform")},csstransitions:function(){return b("transition")},touch:function(){return"ontouchstart" in g},retina:function(){return g.devicePixelRatio>1},fontface:function(){var a=x.browser.name,c=x.browser.version;switch(a){case"ie":return c>=9;case"chrome":return c>=13;case"ff":return c>=6;case"ios":return c>=5;case"android":return !1;case"webkit":return c>=5.1;case"opera":return c>=10;default:return !1}}};for(var q in p){p[q]&&x.feature(q,p[q].call(),!0)}x.feature()})(window);
/*! head.load - v1.0.3 */
(function(S,L){function I(){}function K(d,b){if(d){typeof d=="object"&&(d=[].slice.call(d));for(var a=0,c=d.length;a<c;a++){b.call(d,d[a],a)}}}function C(c,a){var b=Object.prototype.toString.call(a).slice(8,-1);return a!==L&&a!==null&&b===c}function M(a){return C("Function",a)}function ag(a){return C("Array",a)}function P(d){var b=d.split("/"),a=b[b.length-1],c=a.indexOf("?");return c!==-1?a.substring(0,c):a}function Z(a){(a=a||I,a._done)||(a(),a._done=1)}function E(h,b,c,a){var d=typeof h=="object"?h:{test:h,success:!b?!1:ag(b)?b:[b],failure:!c?!1:ag(c)?c:[c],callback:a||I},g=!!d.test;return g&&!!d.success?(d.success.push(d.callback),W.load.apply(null,d.success)):g||!d.failure?a():(d.failure.push(d.callback),W.load.apply(null,d.failure)),W}function J(d){var b={},a,c;if(typeof d=="object"){for(a in d){!d[a]||(b={name:a,url:d[a]})}}else{b={name:P(d),url:d}}return(c=ae[b.name],c&&c.url===b.url)?c:(ae[b.name]=b,b)}function H(b){b=b||ae;for(var a in b){if(b.hasOwnProperty(a)&&b[a].state!==T){return !1}}return !0}function q(a){a.state=B;K(a.onpreload,function(b){b.call()})}function R(a){a.state===L&&(a.state=V,a.onpreload=[],F({url:a.url,type:"cache"},function(){q(a)}))}function A(){var d=arguments,a=d[d.length-1],b=[].slice.call(d,1),c=b[0];return(M(a)||(a=null),ag(d[0]))?(d[0].push(a),W.load.apply(null,d[0]),W):(c?(K(b,function(e){M(e)||!e||R(J(e))}),af(J(d[0]),M(c)?c:function(){W.load.apply(null,b)})):af(J(d[0])),W)}function D(){var c=arguments,a=c[c.length-1],b={};return(M(a)||(a=null),ag(c[0]))?(c[0].push(a),W.load.apply(null,c[0]),W):(K(c,function(d){d!==a&&(d=J(d),b[d.name]=d)}),K(c,function(d){d!==a&&(d=J(d),af(d,function(){H(b)&&Z(a)}))}),W)}function af(b,a){if(a=a||I,b.state===T){a();return}if(b.state===aa){W.ready(b.name,a);return}if(b.state===V){b.onpreload.push(function(){af(b,a)});return}b.state=aa;F(b,function(){b.state=T;a();K(X[b.name],function(c){Z(c)});Q&&H()&&K(X.ALL,function(c){Z(c)})})}function j(b){b=b||"";var a=b.split("?")[0].split(".");return a[a.length-1].toLowerCase()}function F(c,b){function l(e){e=e||S.event;a.onload=a.onreadystatechange=a.onerror=null;b()}function n(e){e=e||S.event;(e.type==="load"||/loaded|complete/.test(a.readyState)&&(!N.documentMode||N.documentMode<9))&&(S.clearTimeout(c.errorTimeout),S.clearTimeout(c.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,b())}function g(){if(c.state!==T&&c.cssRetries<=20){for(var e=0,h=N.styleSheets.length;e<h;e++){if(N.styleSheets[e].href===a.href){n({type:"load"});return}}c.cssRetries++;c.cssTimeout=S.setTimeout(g,250)}}var a,d,k;b=b||I;d=j(c.url);d==="css"?(a=N.createElement("link"),a.type="text/"+(c.type||"css"),a.rel="stylesheet",a.href=c.url,c.cssRetries=0,c.cssTimeout=S.setTimeout(g,500)):(a=N.createElement("script"),a.type="text/"+(c.type||"javascript"),a.src=c.url);a.onload=a.onreadystatechange=n;a.onerror=l;a.async=!1;a.defer=!1;c.errorTimeout=S.setTimeout(function(){l({type:"timeout"})},7000);k=N.head||N.getElementsByTagName("head")[0];k.insertBefore(a,k.lastChild)}function x(){for(var b,a=N.getElementsByTagName("script"),d=0,c=a.length;d<c;d++){if(b=a[d].getAttribute("data-headjs-load"),!!b){W.load(b);return}}}function z(f,b){var a,d,c;return f===N?(Q?Z(b):ad.push(b),W):(M(f)&&(b=f,f="ALL"),ag(f))?(a={},K(f,function(e){a[e]=ae[e];W.ready(e,function(){H(a)&&Z(b)})}),W):typeof f!="string"||!M(b)?W:(d=ae[f],d&&d.state===T||f==="ALL"&&H()&&Q)?(Z(b),W):(c=X[f],c?c.push(b):c=X[f]=[b],W)}function ab(){if(!N.body){S.clearTimeout(W.readyTimeout);W.readyTimeout=S.setTimeout(ab,50);return}Q||(Q=!0,x(),K(ad,function(a){Z(a)}))}function U(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",U,!1),ab()):N.readyState==="complete"&&(N.detachEvent("onreadystatechange",U),ab())}var N=S.document,ad=[],X={},ae={},G="async" in N.createElement("script")||"MozAppearance" in N.documentElement.style||S.opera,Q,Y=S.head_conf&&S.head_conf.head||"head",W=S[Y]=S[Y]||function(){W.ready.apply(null,arguments)},V=1,B=2,aa=3,T=4,O;if(N.readyState==="complete"){ab()}else{if(N.addEventListener){N.addEventListener("DOMContentLoaded",U,!1),S.addEventListener("load",ab,!1)}else{N.attachEvent("onreadystatechange",U);S.attachEvent("onload",ab);O=!1;try{O=!S.frameElement&&N.documentElement}catch(ac){}O&&O.doScroll&&function m(){if(!Q){try{O.doScroll("left")}catch(a){S.clearTimeout(W.readyTimeout);W.readyTimeout=S.setTimeout(m,50);return}ab()}}()}}W.load=W.js=G?D:A;W.test=E;W.ready=z;W.ready(N,function(){H()&&K(X.ALL,function(a){Z(a)});W.feature&&W.feature("domloaded",!0)})})(window);
/*! URI.js v1.14.1 http://medialize.github.io/URI.js/ */
(function(b,a){"object"===typeof exports?module.exports=a(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],a):b.URI=a(b.punycode,b.IPv6,b.SecondLevelDomains,b)})(this,function(Q,j,O,L){function V(e,d){if(!(this instanceof V)){return new V(e,d)}void 0===e&&(e="undefined"!==typeof location?location.href+"":"");this.href(e);return void 0!==d?this.absoluteTo(d):this}function c(d){return d.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function b(d){return void 0===d?"Undefined":String(Object.prototype.toString.call(d)).slice(8,-1)}function N(d){return"Array"===b(d)}function S(g,f){var l,k;if(N(f)){l=0;for(k=f.length;l<k;l++){if(!S(g,f[l])){return !1}}return !0}var h=b(f);l=0;for(k=g.length;l<k;l++){if("RegExp"===h){if("string"===typeof g[l]&&g[l].match(f)){return !0}}else{if(g[l]===f){return !0}}}return !1}function T(f,e){if(!N(f)||!N(e)||f.length!==e.length){return !1}f.sort();e.sort();for(var h=0,g=f.length;h<g;h++){if(f[h]!==e[h]){return !1}}return !0}function R(d){return escape(d)}function a(d){return encodeURIComponent(d).replace(/[!'()*]/g,R).replace(/\*/g,"%2A")}function i(d){return function(e,f){if(void 0===e){return this._parts[d]||""}this._parts[d]=e||null;this.build(!f);return this}}function H(e,d){return function(g,f){if(void 0===g){return this._parts[e]||""}null!==g&&(g+="",g.charAt(0)===d&&(g=g.substring(1)));this._parts[e]=g;this.build(!f);return this}}var P=L&&L.URI;V.version="1.14.1";var U=V.prototype,J=Object.prototype.hasOwnProperty;V._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:V.duplicateQueryParameters,escapeQuerySpace:V.escapeQuerySpace}};V.duplicateQueryParameters=!1;V.escapeQuerySpace=!0;V.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;V.idn_expression=/[^a-z0-9\.-]/i;V.punycode_expression=/(xn--)/i;V.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;V.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;V.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;V.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};V.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};V.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;V.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};V.getDomAttribute=function(e){if(e&&e.nodeName){var d=e.nodeName.toLowerCase();return"input"===d&&"image"!==e.type?void 0:V.domAttributes[d]}};V.encode=a;V.decode=decodeURIComponent;V.iso8859=function(){V.encode=escape;V.decode=unescape};V.unicode=function(){V.encode=a;V.decode=decodeURIComponent};V.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};V.encodeQuery=function(e,d){var f=V.encode(e+"");void 0===d&&(d=V.escapeQuerySpace);return d?f.replace(/%20/g,"+"):f};V.decodeQuery=function(e,d){e+="";void 0===d&&(d=V.escapeQuerySpace);try{return V.decode(d?e.replace(/\+/g,"%20"):e)}catch(f){return e}};V.recodePath=function(e){e=(e+"").split("/");for(var d=0,f=e.length;d<f;d++){e[d]=V.encodePathSegment(V.decode(e[d]))}return e.join("/")};V.decodePath=function(e){e=(e+"").split("/");for(var d=0,f=e.length;d<f;d++){e[d]=V.decodePathSegment(e[d])}return e.join("/")};var o={encode:"encode",decode:"decode"},F,M=function(e,d){return function(g){try{return V[d](g+"").replace(V.characters[e][d].expression,function(h){return V.characters[e][d].map[h]})}catch(f){return g}}};for(F in o){V[F+"PathSegment"]=M("pathname",o[F])}V.encodeReserved=M("reserved","encode");V.parse=function(e,d){var f;d||(d={});f=e.indexOf("#");-1<f&&(d.fragment=e.substring(f+1)||null,e=e.substring(0,f));f=e.indexOf("?");-1<f&&(d.query=e.substring(f+1)||null,e=e.substring(0,f));"//"===e.substring(0,2)?(d.protocol=null,e=e.substring(2),e=V.parseAuthority(e,d)):(f=e.indexOf(":"),-1<f&&(d.protocol=e.substring(0,f)||null,d.protocol&&!d.protocol.match(V.protocol_expression)?d.protocol=void 0:"//"===e.substring(f+1,f+3)?(e=e.substring(f+3),e=V.parseAuthority(e,d)):(e=e.substring(f+1),d.urn=!0)));d.path=e;return d};V.parseHost=function(f,e){var h=f.indexOf("/"),g;-1===h&&(h=f.length);"["===f.charAt(0)?(g=f.indexOf("]"),e.hostname=f.substring(1,g)||null,e.port=f.substring(g+2,h)||null,"/"===e.port&&(e.port=null)):f.indexOf(":")!==f.lastIndexOf(":")?(e.hostname=f.substring(0,h)||null,e.port=null):(g=f.substring(0,h).split(":"),e.hostname=g[0]||null,e.port=g[1]||null);e.hostname&&"/"!==f.substring(h).charAt(0)&&(h++,f="/"+f);return f.substring(h)||"/"};V.parseAuthority=function(e,d){e=V.parseUserinfo(e,d);return V.parseHost(e,d)};V.parseUserinfo=function(e,d){var g=e.indexOf("/"),f=e.lastIndexOf("@",-1<g?g:e.length-1);-1<f&&(-1===g||f<g)?(g=e.substring(0,f).split(":"),d.username=g[0]?V.decode(g[0]):null,g.shift(),d.password=g[0]?V.decode(g.join(":")):null,e=e.substring(f+1)):(d.username=null,d.password=null);return e};V.parseQuery=function(k,d){if(!k){return{}}k=k.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!k){return{}}for(var s={},r=k.split("&"),q=r.length,m,n,h=0;h<q;h++){m=r[h].split("="),n=V.decodeQuery(m.shift(),d),m=m.length?V.decodeQuery(m.join("="),d):null,J.call(s,n)?("string"===typeof s[n]&&(s[n]=[s[n]]),s[n].push(m)):s[n]=m}return s};V.build=function(e){var d="";e.protocol&&(d+=e.protocol+":");e.urn||!d&&!e.hostname||(d+="//");d+=V.buildAuthority(e)||"";"string"===typeof e.path&&("/"!==e.path.charAt(0)&&"string"===typeof e.hostname&&(d+="/"),d+=e.path);"string"===typeof e.query&&e.query&&(d+="?"+e.query);"string"===typeof e.fragment&&e.fragment&&(d+="#"+e.fragment);return d};V.buildHost=function(e){var d="";if(e.hostname){d=V.ip6_expression.test(e.hostname)?d+("["+e.hostname+"]"):d+e.hostname}else{return""}e.port&&(d+=":"+e.port);return d};V.buildAuthority=function(d){return V.buildUserinfo(d)+V.buildHost(d)};V.buildUserinfo=function(e){var d="";e.username&&(d+=V.encode(e.username),e.password&&(d+=":"+V.encode(e.password)),d+="@");return d};V.buildQuery=function(k,d,s){var r="",q,m,n,h;for(m in k){if(J.call(k,m)&&m){if(N(k[m])){for(q={},n=0,h=k[m].length;n<h;n++){void 0!==k[m][n]&&void 0===q[k[m][n]+""]&&(r+="&"+V.buildQueryParameter(m,k[m][n],s),!0!==d&&(q[k[m][n]+""]=!0))}}else{void 0!==k[m]&&(r+="&"+V.buildQueryParameter(m,k[m],s))}}}return r.substring(1)};V.buildQueryParameter=function(e,d,f){return V.encodeQuery(e,f)+(null!==d?"="+V.encodeQuery(d,f):"")};V.addQuery=function(e,d,g){if("object"===typeof d){for(var f in d){J.call(d,f)&&V.addQuery(e,f,d[f])}}else{if("string"===typeof d){void 0===e[d]?e[d]=g:("string"===typeof e[d]&&(e[d]=[e[d]]),N(g)||(g=[g]),e[d]=(e[d]||[]).concat(g))}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}};V.removeQuery=function(h,d,q){var n;if(N(d)){for(q=0,n=d.length;q<n;q++){h[d[q]]=void 0}}else{if("object"===typeof d){for(n in d){J.call(d,n)&&V.removeQuery(h,n,d[n])}}else{if("string"===typeof d){if(void 0!==q){if(h[d]===q){h[d]=void 0}else{if(N(h[d])){n=h[d];var m={},k,l;if(N(q)){for(k=0,l=q.length;k<l;k++){m[q[k]]=!0}}else{m[q]=!0}k=0;for(l=n.length;k<l;k++){void 0!==m[n[k]]&&(n.splice(k,1),l--,k--)}h[d]=n}}}else{h[d]=void 0}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")}}}};V.hasQuery=function(f,d,k,h){if("object"===typeof d){for(var g in d){if(J.call(d,g)&&!V.hasQuery(f,g,d[g])){return !1}}return !0}if("string"!==typeof d){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")}switch(b(k)){case"Undefined":return d in f;case"Boolean":return f=Boolean(N(f[d])?f[d].length:f[d]),k===f;case"Function":return !!k(f[d],d,f);case"Array":return N(f[d])?(h?S:T)(f[d],k):!1;case"RegExp":return N(f[d])?h?S(f[d],k):!1:Boolean(f[d]&&f[d].match(k));case"Number":k=String(k);case"String":return N(f[d])?h?S(f[d],k):!1:f[d]===k;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};V.commonPath=function(f,e){var h=Math.min(f.length,e.length),g;for(g=0;g<h;g++){if(f.charAt(g)!==e.charAt(g)){g--;break}}if(1>g){return f.charAt(0)===e.charAt(0)&&"/"===f.charAt(0)?"/":""}if("/"!==f.charAt(g)||"/"!==e.charAt(g)){g=f.substring(0,g).lastIndexOf("/")}return f.substring(0,g+1)};V.withinString=function(x,w,v){v||(v={});var u=v.start||V.findUri.start,s=v.end||V.findUri.end,t=v.trim||V.findUri.trim,n=/[a-z0-9-]=["']?$/i;for(u.lastIndex=0;;){var r=u.exec(x);if(!r){break}r=r.index;if(v.ignoreHtml){var d=x.slice(Math.max(r-3,0),r);if(d&&n.test(d)){continue}}var d=r+x.slice(r).search(s),q=x.slice(r,d).replace(t,"");v.ignore&&v.ignore.test(q)||(d=r+q.length,q=w(q,r,d,x),x=x.slice(0,r)+q+x.slice(d),u.lastIndex=r+q.length)}u.lastIndex=0;return x};V.ensureValidHostname=function(d){if(d.match(V.invalid_hostname_characters)){if(!Q){throw new TypeError('Hostname "'+d+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available')}if(Q.toASCII(d).match(V.invalid_hostname_characters)){throw new TypeError('Hostname "'+d+'" contains characters other than [A-Z0-9.-]')}}};V.noConflict=function(d){if(d){return d={URI:this.noConflict()},L.URITemplate&&"function"===typeof L.URITemplate.noConflict&&(d.URITemplate=L.URITemplate.noConflict()),L.IPv6&&"function"===typeof L.IPv6.noConflict&&(d.IPv6=L.IPv6.noConflict()),L.SecondLevelDomains&&"function"===typeof L.SecondLevelDomains.noConflict&&(d.SecondLevelDomains=L.SecondLevelDomains.noConflict()),d}L.URI===this&&(L.URI=P);return this};U.build=function(d){if(!0===d){this._deferred_build=!0}else{if(void 0===d||this._deferred_build){this._string=V.build(this._parts),this._deferred_build=!1}}return this};U.clone=function(){return new V(this)};U.valueOf=U.toString=function(){return this.build(!1)._string};U.protocol=i("protocol");U.username=i("username");U.password=i("password");U.hostname=i("hostname");U.port=i("port");U.query=H("query","?");U.fragment=H("fragment","#");U.search=function(e,d){var f=this.query(e,d);return"string"===typeof f&&f.length?"?"+f:f};U.hash=function(e,d){var f=this.fragment(e,d);return"string"===typeof f&&f.length?"#"+f:f};U.pathname=function(e,d){if(void 0===e||!0===e){var f=this._parts.path||(this._parts.hostname?"/":"");return e?V.decodePath(f):f}this._parts.path=e?V.recodePath(e):"/";this.build(!d);return this};U.path=U.pathname;U.href=function(f,d){var l;if(void 0===f){return this.toString()}this._string="";this._parts=V._parts();var k=f instanceof V,h="object"===typeof f&&(f.hostname||f.path||f.pathname);f.nodeName&&(h=V.getDomAttribute(f),f=f[h]||"",h=!1);!k&&h&&void 0!==f.pathname&&(f=f.toString());if("string"===typeof f||f instanceof String){this._parts=V.parse(String(f),this._parts)}else{if(k||h){for(l in k=k?f._parts:f,k){J.call(this._parts,l)&&(this._parts[l]=k[l])}}else{throw new TypeError("invalid input")}}this.build(!d);return this};U.is=function(v){var u=!1,t=!1,s=!1,q=!1,r=!1,n=!1,d=!1,m=!this._parts.urn;this._parts.hostname&&(m=!1,t=V.ip4_expression.test(this._parts.hostname),s=V.ip6_expression.test(this._parts.hostname),u=t||s,r=(q=!u)&&O&&O.has(this._parts.hostname),n=q&&V.idn_expression.test(this._parts.hostname),d=q&&V.punycode_expression.test(this._parts.hostname));switch(v.toLowerCase()){case"relative":return m;case"absolute":return !m;case"domain":case"name":return q;case"sld":return r;case"ip":return u;case"ip4":case"ipv4":case"inet4":return t;case"ip6":case"ipv6":case"inet6":return s;case"idn":return n;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return d}return null};var K=U.protocol,I=U.port,G=U.hostname;U.protocol=function(e,d){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(V.protocol_expression))){throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}return K.call(this,e,d)};U.scheme=U.protocol;U.port=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/)))){throw new TypeError('Port "'+e+'" contains characters other than [0-9]')}return I.call(this,e,d)};U.hostname=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0!==e){var f={};V.parseHost(e,f);e=f.hostname}return G.call(this,e,d)};U.host=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0===e){return this._parts.hostname?V.buildHost(this._parts):""}V.parseHost(e,this._parts);this.build(!d);return this};U.authority=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0===e){return this._parts.hostname?V.buildAuthority(this._parts):""}V.parseAuthority(e,this._parts);this.build(!d);return this};U.userinfo=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0===e){if(!this._parts.username){return""}var f=V.buildUserinfo(this._parts);return f.substring(0,f.length-1)}"@"!==e[e.length-1]&&(e+="@");V.parseUserinfo(e,this._parts);this.build(!d);return this};U.resource=function(e,d){var f;if(void 0===e){return this.path()+this.search()+this.hash()}f=V.parse(e);this._parts.path=f.path;this._parts.query=f.query;this._parts.fragment=f.fragment;this.build(!d);return this};U.subdomain=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0===e){if(!this._parts.hostname||this.is("IP")){return""}var f=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,f)||""}f=this._parts.hostname.length-this.domain().length;f=this._parts.hostname.substring(0,f);f=new RegExp("^"+c(f));e&&"."!==e.charAt(e.length-1)&&(e+=".");e&&V.ensureValidHostname(e);this._parts.hostname=this._parts.hostname.replace(f,e);this.build(!d);return this};U.domain=function(e,d){if(this._parts.urn){return void 0===e?"":this}"boolean"===typeof e&&(d=e,e=void 0);if(void 0===e){if(!this._parts.hostname||this.is("IP")){return""}var f=this._parts.hostname.match(/\./g);if(f&&2>f.length){return this._parts.hostname}f=this._parts.hostname.length-this.tld(d).length-1;f=this._parts.hostname.lastIndexOf(".",f-1)+1;return this._parts.hostname.substring(f)||""}if(!e){throw new TypeError("cannot set domain empty")}V.ensureValidHostname(e);!this._parts.hostname||this.is("IP")?this._parts.hostname=e:(f=new RegExp(c(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(f,e));this.build(!d);return this};U.tld=function(e,d){if(this._parts.urn){return void 0===e?"":this}"boolean"===typeof e&&(d=e,e=void 0);if(void 0===e){if(!this._parts.hostname||this.is("IP")){return""}var f=this._parts.hostname.lastIndexOf("."),f=this._parts.hostname.substring(f+1);return !0!==d&&O&&O.list[f.toLowerCase()]?O.get(this._parts.hostname)||f:f}if(e){if(e.match(/[^a-zA-Z0-9-]/)){if(O&&O.is(e)){f=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(f,e)}else{throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]')}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}f=new RegExp(c(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(f,e)}}else{throw new TypeError("cannot set TLD empty")}this.build(!d);return this};U.directory=function(e,d){if(this._parts.urn){return void 0===e?"":this}if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname){return""}if("/"===this._parts.path){return"/"}var f=this._parts.path.length-this.filename().length-1,f=this._parts.path.substring(0,f)||(this._parts.hostname?"/":"");return e?V.decodePath(f):f}f=this._parts.path.length-this.filename().length;f=this._parts.path.substring(0,f);f=new RegExp("^"+c(f));this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e));e&&"/"!==e.charAt(e.length-1)&&(e+="/");e=V.recodePath(e);this._parts.path=this._parts.path.replace(f,e);this.build(!d);return this};U.filename=function(f,d){if(this._parts.urn){return void 0===f?"":this}if(void 0===f||!0===f){if(!this._parts.path||"/"===this._parts.path){return""}var h=this._parts.path.lastIndexOf("/"),h=this._parts.path.substring(h+1);return f?V.decodePathSegment(h):h}h=!1;"/"===f.charAt(0)&&(f=f.substring(1));f.match(/\.?\//)&&(h=!0);var g=new RegExp(c(this.filename())+"$");f=V.recodePath(f);this._parts.path=this._parts.path.replace(g,f);h?this.normalizePath(d):this.build(!d);return this};U.suffix=function(f,d){if(this._parts.urn){return void 0===f?"":this}if(void 0===f||!0===f){if(!this._parts.path||"/"===this._parts.path){return""}var h=this.filename(),g=h.lastIndexOf(".");if(-1===g){return""}h=h.substring(g+1);h=/^[a-z0-9%]+$/i.test(h)?h:"";return f?V.decodePathSegment(h):h}"."===f.charAt(0)&&(f=f.substring(1));if(h=this.suffix()){g=f?new RegExp(c(h)+"$"):new RegExp(c("."+h)+"$")}else{if(!f){return this}this._parts.path+="."+V.recodePath(f)}g&&(f=V.recodePath(f),this._parts.path=this._parts.path.replace(g,f));this.build(!d);return this};U.segment=function(k,h,r){var q=this._parts.urn?":":"/",n=this.path(),l="/"===n.substring(0,1),n=n.split(q);void 0!==k&&"number"!==typeof k&&(r=h,h=k,k=void 0);if(void 0!==k&&"number"!==typeof k){throw Error('Bad segment "'+k+'", must be 0-based integer')}l&&n.shift();0>k&&(k=Math.max(n.length+k,0));if(void 0===h){return void 0===k?n:n[k]}if(null===k||void 0===n[k]){if(N(h)){n=[];k=0;for(var m=h.length;k<m;k++){if(h[k].length||n.length&&n[n.length-1].length){n.length&&!n[n.length-1].length&&n.pop(),n.push(h[k])}}}else{if(h||"string"===typeof h){""===n[n.length-1]?n[n.length-1]=h:n.push(h)}}}else{h?n[k]=h:n.splice(k,1)}l&&n.unshift("");return this.path(n.join(q),r)};U.segmentCoded=function(f,d,l){var k,h;"number"!==typeof f&&(l=d,d=f,f=void 0);if(void 0===d){f=this.segment(f,d,l);if(N(f)){for(k=0,h=f.length;k<h;k++){f[k]=V.decode(f[k])}}else{f=void 0!==f?V.decode(f):void 0}return f}if(N(d)){for(k=0,h=d.length;k<h;k++){d[k]=V.decode(d[k])}}else{d="string"===typeof d||d instanceof String?V.encode(d):d}return this.segment(f,d,l)};var p=U.query;U.query=function(f,d){if(!0===f){return V.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}if("function"===typeof f){var h=V.parseQuery(this._parts.query,this._parts.escapeQuerySpace),g=f.call(this,h);this._parts.query=V.buildQuery(g||h,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!d);return this}return void 0!==f&&"string"!==typeof f?(this._parts.query=V.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!d),this):p.call(this,f,d)};U.setQuery=function(f,d,l){var k=V.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof f||f instanceof String){k[f]=void 0!==d?d:null}else{if("object"===typeof f){for(var h in f){J.call(f,h)&&(k[h]=f[h])}}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}this._parts.query=V.buildQuery(k,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof f&&(l=d);this.build(!l);return this};U.addQuery=function(f,d,h){var g=V.parseQuery(this._parts.query,this._parts.escapeQuerySpace);V.addQuery(g,f,void 0===d?null:d);this._parts.query=V.buildQuery(g,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof f&&(h=d);this.build(!h);return this};U.removeQuery=function(f,d,h){var g=V.parseQuery(this._parts.query,this._parts.escapeQuerySpace);V.removeQuery(g,f,d);this._parts.query=V.buildQuery(g,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof f&&(h=d);this.build(!h);return this};U.hasQuery=function(f,d,h){var g=V.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return V.hasQuery(g,f,d,h)};U.setSearch=U.setQuery;U.addSearch=U.addQuery;U.removeSearch=U.removeQuery;U.hasSearch=U.hasQuery;U.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};U.normalizeProtocol=function(d){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!d));return this};U.normalizeHostname=function(d){this._parts.hostname&&(this.is("IDN")&&Q?this._parts.hostname=Q.toASCII(this._parts.hostname):this.is("IPv6")&&j&&(this._parts.hostname=j.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!d));return this};U.normalizePort=function(d){"string"===typeof this._parts.protocol&&this._parts.port===V.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!d));return this};U.normalizePath=function(h){if(this._parts.urn||!this._parts.path||"/"===this._parts.path){return this}var d,n=this._parts.path,m="",k,l;"/"!==n.charAt(0)&&(d=!0,n="/"+n);n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");d&&(m=n.substring(1).match(/^(\.\.\/)+/)||"")&&(m=m[0]);for(;;){k=n.indexOf("/..");if(-1===k){break}else{if(0===k){n=n.substring(3);continue}}l=n.substring(0,k).lastIndexOf("/");-1===l&&(l=k);n=n.substring(0,l)+n.substring(k+3)}d&&this.is("relative")&&(n=m+n.substring(1));n=V.recodePath(n);this._parts.path=n;this.build(!h);return this};U.normalizePathname=U.normalizePath;U.normalizeQuery=function(d){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(V.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!d));return this};U.normalizeFragment=function(d){this._parts.fragment||(this._parts.fragment=null,this.build(!d));return this};U.normalizeSearch=U.normalizeQuery;U.normalizeHash=U.normalizeFragment;U.iso8859=function(){var e=V.encode,d=V.decode;V.encode=escape;V.decode=decodeURIComponent;this.normalize();V.encode=e;V.decode=d;return this};U.unicode=function(){var e=V.encode,d=V.decode;V.encode=a;V.decode=unescape;this.normalize();V.encode=e;V.decode=d;return this};U.readable=function(){var k=this.clone();k.username("").password("").normalize();var d="";k._parts.protocol&&(d+=k._parts.protocol+"://");k._parts.hostname&&(k.is("punycode")&&Q?(d+=Q.toUnicode(k._parts.hostname),k._parts.port&&(d+=":"+k._parts.port)):d+=k.host());k._parts.hostname&&k._parts.path&&"/"!==k._parts.path.charAt(0)&&(d+="/");d+=k.path(!0);if(k._parts.query){for(var r="",q=0,m=k._parts.query.split("&"),n=m.length;q<n;q++){var l=(m[q]||"").split("="),r=r+("&"+V.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(r+="="+V.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}d+="?"+r.substring(1)}return d+=V.decodeQuery(k.hash(),!0)};U.absoluteTo=function(f){var d=this.clone(),l=["protocol","username","password","hostname","port"],k,h;if(this._parts.urn){throw Error("URNs do not have any generally defined hierarchical components")}f instanceof V||(f=new V(f));d._parts.protocol||(d._parts.protocol=f._parts.protocol);if(this._parts.hostname){return d}for(k=0;h=l[k];k++){d._parts[h]=f._parts[h]}d._parts.path?".."===d._parts.path.substring(-2)&&(d._parts.path+="/"):(d._parts.path=f._parts.path,d._parts.query||(d._parts.query=f._parts.query));"/"!==d.path().charAt(0)&&(f=f.directory(),d._parts.path=(f?f+"/":"")+d._parts.path,d.normalizePath());d.build();return d};U.relativeTo=function(h){var d=this.clone().normalize(),n,m,k,l;if(d._parts.urn){throw Error("URNs do not have any generally defined hierarchical components")}h=(new V(h)).normalize();n=d._parts;m=h._parts;k=d.path();l=h.path();if("/"!==k.charAt(0)){throw Error("URI is already relative")}if("/"!==l.charAt(0)){throw Error("Cannot calculate a URI relative to another relative URI")}n.protocol===m.protocol&&(n.protocol=null);if(n.username===m.username&&n.password===m.password&&null===n.protocol&&null===n.username&&null===n.password&&n.hostname===m.hostname&&n.port===m.port){n.hostname=null,n.port=null}else{return d.build()}if(k===l){return n.path="",d.build()}h=V.commonPath(d.path(),h.path());if(!h){return d.build()}m=m.path.substring(h.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");n.path=m+n.path.substring(h.length);return d.build()};U.equals=function(f){var d=this.clone();f=new V(f);var n={},m={},l={},k;d.normalize();f.normalize();if(d.toString()===f.toString()){return !0}n=d.query();m=f.query();d.query("");f.query("");if(d.toString()!==f.toString()||n.length!==m.length){return !1}n=V.parseQuery(n,this._parts.escapeQuerySpace);m=V.parseQuery(m,this._parts.escapeQuerySpace);for(k in n){if(J.call(n,k)){if(!N(n[k])){if(n[k]!==m[k]){return !1}}else{if(!T(n[k],m[k])){return !1}}l[k]=!0}}for(k in m){if(J.call(m,k)&&!l[k]){return !1}}return !0};U.duplicateQueryParameters=function(d){this._parts.duplicateQueryParameters=!!d;return this};U.escapeQuerySpace=function(d){this._parts.escapeQuerySpace=!!d;return this};return V});(function(b,a){"object"===typeof exports?module.exports=a(require("./URI")):"function"===typeof define&&define.amd?define(["./URI"],a):b.URITemplate=a(b.URI,b)})(this,function(e,c){function b(j){if(b._cache[j]){return b._cache[j]}if(!(this instanceof b)){return new b(j)}this.expression=j;b._cache[j]=this;return this}function f(j){this.data=j;this.cache={}}var g=c&&c.URITemplate,a=Object.prototype.hasOwnProperty,i=b.prototype,h={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};b._cache={};b.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g;b.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/;b.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/;b.expand=function(t,p){var o=h[t.operator],n=o.named?"Named":"Unnamed",u=t.variables,v=[],m,q,j;for(j=0;q=u[j];j++){m=p.get(q.name),m.val.length?v.push(b["expand"+n](m,o,q.explode,q.explode&&o.separator||",",q.maxlength,q.name)):m.type&&v.push("")}return v.length?o.prefix+v.join(o.separator):""};b.expandNamed=function(A,y,x,p,B,E){var v="",z=y.encode;y=y.empty_name_separator;var j=!A[z].length,C=2===A.type?"":e[z](E),D,o,k;o=0;for(k=A.val.length;o<k;o++){B?(D=e[z](A.val[o][1].substring(0,B)),2===A.type&&(C=e[z](A.val[o][0].substring(0,B)))):j?(D=e[z](A.val[o][1]),2===A.type?(C=e[z](A.val[o][0]),A[z].push([C,D])):A[z].push([void 0,D])):(D=A[z][o][1],2===A.type&&(C=A[z][o][0])),v&&(v+=p),x?v+=C+(y||D?"=":"")+D:(o||(v+=e[z](E)+(y||D?"=":"")),2===A.type&&(v+=C+","),v+=D)}return v};b.expandUnnamed=function(z,x,w,p,o){var C="",v=x.encode;x=x.empty_name_separator;var y=!z[v].length,j,A,B,k;B=0;for(k=z.val.length;B<k;B++){o?A=e[v](z.val[B][1].substring(0,o)):y?(A=e[v](z.val[B][1]),z[v].push([2===z.type?e[v](z.val[B][0]):void 0,A])):A=z[v][B][1],C&&(C+=p),2===z.type&&(j=o?e[v](z.val[B][0].substring(0,o)):z[v][B][0],C+=j,C=w?C+(x||A?"=":""):C+","),C+=A}return C};b.noConflict=function(){c.URITemplate===b&&(c.URITemplate=g);return b};i.expand=function(n){var m="";this.parts&&this.parts.length||this.parse();n instanceof f||(n=new f(n));for(var l=0,j=this.parts.length;l<j;l++){m+="string"===typeof this.parts[l]?this.parts[l]:b.expand(this.parts[l],n)}return m};i.parse=function(){var x=this.expression,v=b.EXPRESSION_PATTERN,p=b.VARIABLE_PATTERN,o=b.VARIABLE_NAME_PATTERN,m=[],A=0,n,w,j;for(v.lastIndex=0;;){w=v.exec(x);if(null===w){m.push(x.substring(A));break}else{m.push(x.substring(A,w.index)),A=w.index+w[0].length}if(!h[w[1]]){throw Error('Unknown Operator "'+w[1]+'" in "'+w[0]+'"')}if(!w[3]){throw Error('Unclosed Expression "'+w[0]+'"')}n=w[2].split(",");for(var y=0,z=n.length;y<z;y++){j=n[y].match(p);if(null===j){throw Error('Invalid Variable "'+n[y]+'" in "'+w[0]+'"')}if(j[1].match(o)){throw Error('Invalid Variable Name "'+j[1]+'" in "'+w[0]+'"')}n[y]={name:j[1],explode:!!j[3],maxlength:j[4]&&parseInt(j[4],10)}}if(!n.length){throw Error('Expression Missing Variable(s) "'+w[0]+'"')}m.push({expression:w[0],operator:w[1],variables:n})}m.length||m.push(x);this.parts=m;return this};f.prototype.get=function(n){var m=this.data,l={type:0,val:[],encode:[],encodeReserved:[]},j;if(void 0!==this.cache[n]){return this.cache[n]}this.cache[n]=l;m="[object Function]"===String(Object.prototype.toString.call(m))?m(n):"[object Function]"===String(Object.prototype.toString.call(m[n]))?m[n](n):m[n];if(void 0!==m&&null!==m){if("[object Array]"===String(Object.prototype.toString.call(m))){j=0;for(n=m.length;j<n;j++){void 0!==m[j]&&null!==m[j]&&l.val.push([void 0,String(m[j])])}l.val.length&&(l.type=3)}else{if("[object Object]"===String(Object.prototype.toString.call(m))){for(j in m){a.call(m,j)&&void 0!==m[j]&&null!==m[j]&&l.val.push([j,String(m[j])])}l.val.length&&(l.type=2)}else{l.type=1,l.val.push([void 0,String(m)])}}}return l};e.expand=function(l,k){var j=(new b(l)).expand(k);return new e(j)};return b});var EventTarget=Base.extend({constructor:function(){this._listeners={}},addListener:function(a,b){if(typeof this._listeners[a]=="undefined"){this._listeners[a]=[]}this._listeners[a].push(b)},fire:function(d){if(typeof d=="string"){d={type:d}}if(!d.target){d.target=this}if(!d.type){throw new Error("Event object missing 'type' property.")}if(this._listeners[d.type] instanceof Array){var c=this._listeners[d.type];for(var b=0,a=c.length;b<a;b++){c[b].call(this,d)}}},removeListener:function(d,e){if(this._listeners[d] instanceof Array){var c=this._listeners[d];for(var b=0,a=c.length;b<a;b++){if(c[b]===e){c.splice(b,1);break}}}}});var EventTargetArgs=EventTarget.extend({fire:function(e,b){if(typeof e=="string"){e={type:e}}if(!e.target){e.target=this}if(!e.type){throw new Error("Event object missing 'type' property.")}if(this._listeners[e.type] instanceof Array){var d=this._listeners[e.type];for(var c=0,a=d.length;c<a;c++){d[c].call(this,e,b)}}}});
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var ac=navigator.appVersion;var aa=navigator.userAgent;var Y=/Chrome/i.test(ac);var Z=/Firefox/i.test(aa);var ad=/Safari/i.test(ac)&&!/Chrome/i.test(ac);if(Y||Z||ad){return}var ae=j.getElementsByTagName("body")[0];var ab=C(r);ab.setAttribute("type",q);var af=ae.appendChild(ab);if(af){var X=0;(function(){if(typeof af.GetVariable!=D){var ag=af.GetVariable("$version");if(ag){ag=ag.split(" ")[1].split(",");aa.pv=[parseInt(ag[0],10),parseInt(ag[1],10),parseInt(ag[2],10)]}}else{if(X<10){X++;setTimeout(arguments.callee,10);return}}ae.removeChild(ab);af=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();Date.now=Date.now||function(){return +new Date};var WebVTTParser=function(){this.XML_FILENAME="cc.vtt";this.parse=function(h,i){var p=/\r\n|\r|\n/,j=Date.now(),s=0,a=h.split(p),t=false,d=[],e=[];function b(v,u){e.push({message:v,line:s+1,col:u})}var g=a[s],r=g.length,k="WEBVTT",n=0,o=k.length;if(g[0]==="\ufeff"){n=1;o+=1}if(r<o||Util.indexOf(k,g)!==0+n||r>o&&g[o]!==" "&&g[o]!=="\t"){b('No valid signature. (File needs to start with "WEBVTT".)')}s++;while(a[s]!=""&&a[s]!=undefined){b("No blank line after the signature.");if(Util.indexOf("-->",a[s])!=-1){t=true;break}s++}while(a[s]!=undefined){var f;while(!t&&a[s]==""){s++}if(!t&&a[s]==undefined){break}f={id:"",startTime:0,endTime:0,pauseOnExit:false,direction:"horizontal",snapToLines:true,linePosition:"auto",textPosition:50,size:100,alignment:"middle",text:"",tree:null};var l=true;if(Util.indexOf("-->",a[s])==-1){f.id=a[s];if(/^NOTE($|[ \t])/.test(f.id)){s++;while(a[s]!=""&&a[s]!=undefined){if(Util.indexOf("-->",a[s])!=-1){b("Cannot have timestamp in a comment.")}s++}continue}s++;if(a[s]==""||a[s]==undefined){b("Cue identifier cannot be standalone.");continue}if(Util.indexOf("-->",a[s])==-1){l=false;b("Cue identifier needs to be followed by timestamp.")}}t=false;var q=new WebVTTCueTimingsAndSettingsParser(a[s],b);var c=0;if(d.length>0){c=d[d.length-1].startTime}if(l&&!q.parse(f,c)){f=null;s++;while(a[s]!=""&&a[s]!=undefined){if(Util.indexOf("-->",a[s])!=-1){t=true;break}s++}continue}s++;while(a[s]!=""&&a[s]!=undefined){if(Util.indexOf("-->",a[s])!=-1){b("Blank line missing before cue.");t=true;break}if(f.text!=""){f.text+="\n"}f.text+=a[s];s++}var m=new WebVTTCueTextParser(f.text,b,i);f.tree=m.parse(f.startTime,f.endTime);d.push(f)}d.sort(function(v,u){if(v.startTime<u.startTime){return -1}if(v.startTime>u.startTime){return 1}if(v.endTime>u.endTime){return -1}if(v.endTime<u.endTime){return 1}return 0});return{cues:d,errors:e,time:Date.now()-j}}};var WebVTTCueTimingsAndSettingsParser=function(k,c){var h=/[\u0020\t\f]/,a=/[^\u0020\t\f]/,k=k,g=0,b=function(l){c(l,g+1)},j=true;function i(l){while(Util.charAt(k,g)!=undefined&&l.test(Util.charAt(k,g))){g++}}function f(l){var m="";while(Util.charAt(k,g)!=undefined&&l.test(Util.charAt(k,g))){m+=Util.charAt(k,g);g++}return m}function d(){var l="minutes",p,o,n,m;if(Util.charAt(k,g)==undefined){b("No timestamp found.");return}if(!/\d/.test(Util.charAt(k,g))){b("Timestamp must start with a character in the range 0-9.");return}p=f(/\d/);if(p.length>2||parseInt(p,10)>59){l="hours"}if(Util.charAt(k,g)!=":"){b("No time unit separator found.");return}g++;o=f(/\d/);if(o.length!=2){b("Must be exactly two digits.");return}if(l=="hours"||Util.charAt(k,g)==":"){if(Util.charAt(k,g)!=":"){b("No seconds found or minutes is greater than 59.");return}g++;n=f(/\d/);if(n.length!=2){b("Must be exactly two digits.");return}}else{n=o;o=p;p="0"}if(Util.charAt(k,g)!="."){b('No decimal separator (".") found.');return}g++;m=f(/\d/);if(m.length!=3){b("Milliseconds must be given in three digits.");return}if(parseInt(o,10)>59){b("You cannot have more than 59 minutes.");return}if(parseInt(n,10)>59){b("You cannot have more than 59 seconds.");return}return parseInt(p,10)*60*60+parseInt(o,10)*60+parseInt(n,10)+parseInt(m,10)/1000}function e(n,l){var r=n.split(h),m=[];for(var p=0;p<r.length;p++){if(r[p]==""){continue}var o=Util.indexOf(":",r[p]),q=r[p].slice(0,o);value=r[p].slice(o+1);if(Util.indexOf(q,m)!=-1){b("Duplicate setting.")}m.push(q);if(value==""){b("No value for setting defined.");return}if(q=="vertical"){if(value!="rl"&&value!="lr"){b("Writing direction can only be set to 'rl' or 'rl'.");continue}l.direction=value}else{if(q=="line"){if(!/\d/.test(value)){b("Line position takes a number or percentage.");continue}if(Util.indexOf("=",value,1)!=-1){b("Line position can only have '-' at the start.");continue}if(Util.indexOf("%",value)!=-1&&Util.indexOf("%",value)!=value.length-1){b("Line position can only have '%' at the end.");continue}if(value[0]=="-"&&value[value.length-1]=="%"){b("Line position cannot be a negative percentage.");continue}if(value[value.length-1]=="%"){if(parseInt(value,10)>100){b("Line position cannot be >100%.");continue}l.snapToLines=false}l.linePosition=parseInt(value,10)}else{if(q=="position"){if(value[value.length-1]!="%"){b("Text position must be a percentage.");continue}if(parseInt(value,10)>100){b("Size cannot be >100%.");continue}l.textPosition=parseInt(value,10)}else{if(q=="size"){if(value[value.length-1]!="%"){b("Size must be a percentage.");continue}if(parseInt(value,10)>100){b("Size cannot be >100%.");continue}l.size=parseInt(value,10)}else{if(q=="align"){var s=["start","middle","end","left","right"];if(Util.indexOf(value,s)==-1){b("Alignment can only be set to one of "+s.join(", ")+".");continue}l.alignment=value}else{b("Invalid setting.")}}}}}}}this.parse=function(l,m){i(h);l.startTime=d();if(l.startTime==undefined){return}if(l.startTime<m){b("Start timestamp is not greater than or equal to start timestamp of previous cue.")}if(a.test(Util.charAt(k,g))){b("Timestamp not separated from '-->' by whitespace.")}i(h);if(Util.charAt(k,g)!="-"){b("No valid timestamp separator found.");return}g++;if(Util.charAt(k,g)!="-"){b("No valid timestamp separator found.");return}g++;if(Util.charAt(k,g)!=">"){b("No valid timestamp separator found.");return}g++;if(a.test(Util.charAt(k,g))){b("'-->' not separated from timestamp by whitespace.")}i(h);l.endTime=d();if(l.endTime==undefined){return}if(l.endTime<=l.startTime){b("End timestamp is not greater than start timestamp.")}if(a.test(Util.charAt(k,g))){j=false}i(h);e(k.substring(g),l);return true};this.parseTimestamp=function(){var l=d();if(Util.charAt(k,g)!=undefined){b("Timestamp must not have trailing characters.");return}return l}};var WebVTTCueTextParser=function(b,c,e){var b=b,f=0,d=function(g){if(e=="metadata"){return}c(g,f+1)};this.parse=function(o,h){var q={children:[]},n=q,p=[];function l(r){n.children.push({type:"object",name:r[1],classes:r[2],children:[],parent:n});n=n.children[n.children.length-1]}function j(r){var s=n;while(s){if(s.name==r){return true}s=s.parent}return}while(Util.charAt(b,f)!=undefined){var i=a();if(i[0]=="text"){n.children.push({type:"text",value:i[1],parent:n})}else{if(i[0]=="start tag"){if(e=="chapters"){d("Start tags not allowed in chapter title text.")}var g=i[1];if(g!="v"&&g!="lang"&&i[3]!=""){d("Only <v> and <lang> can have an annotation.")}if(g=="c"||g=="i"||g=="b"||g=="u"||g=="ruby"){l(i)}else{if(g=="rt"&&n.name=="ruby"){l(i)}else{if(g=="v"){if(j("v")){d("<v> cannot be nested inside itself.")}l(i);n.value=i[3];if(!i[3]){d("<v> requires an annotation.")}}else{if(g=="lang"){l(i);n.value=i[3]}else{d("Incorrect start tag.")}}}}}else{if(i[0]=="end tag"){if(e=="chapters"){d("End tags not allowed in chapter title text.")}if(i[1]==n.name){n=n.parent}else{if(i[1]=="ruby"&&n.name=="rt"){n=n.parent.parent}else{d("Incorrect end tag.")}}}else{if(i[0]=="timestamp"){if(e=="chapters"){d("Timestamp not allowed in chapter title text.")}var k=new WebVTTCueTimingsAndSettingsParser(i[1],d),m=k.parseTimestamp();if(m!=undefined){if(m<=o||m>=h){d("Timestamp must be between start timestamp and end timestamp.")}if(p.length>0&&p[p.length-1]>=m){d("Timestamp must be greater than any previous timestamp.")}n.children.push({type:"timestamp",value:m,parent:n});p.push(m)}}}}}}while(n.parent){if(n.name!="v"){d("Required end tag missing.")}n=n.parent}return q};function a(){var j="data",g="",h="",i=[];while(Util.charAt(b,f-1)!=undefined||f==0){var k=Util.charAt(b,f);if(j=="data"){if(k=="&"){h=k;j="escape"}else{if(k=="<"&&g==""){j="tag"}else{if(k=="<"||k==undefined){return["text",g]}else{g+=k}}}}else{if(j=="escape"){if(k=="&"){d("Incorrect escape.");g+=h;h=k}else{if(/[abglmnsprt]/.test(k)){h+=k}else{if(k==";"){if(h=="&amp"){g+="&"}else{if(h=="&lt"){g+="<"}else{if(h=="&gt"){g+=">"}else{if(h=="&lrm"){g+="\u200e"}else{if(h=="&rlm"){g+="\u200f"}else{if(h=="&nbsp"){g+="\u00A0"}else{d("Incorrect escape.");g+=h+";"}}}}}}j="data"}else{if(k=="<"||k==undefined){d("Incorrect escape.");g+=h;return["text",g]}else{d("Incorrect escape.");g+=h+k;j="data"}}}}}else{if(j=="tag"){if(k=="\t"||k=="\n"||k=="\f"||k==" "){j="start tag annotation"}else{if(k=="."){j="start tag class"}else{if(k=="/"){j="end tag"}else{if(/\d/.test(k)){g=k;j="timestamp tag"}else{if(k==">"||k==undefined){if(k==">"){f++}return["start tag","",[],""]}else{g=k;j="start tag"}}}}}}else{if(j=="start tag"){if(k=="\t"||k=="\f"||k==" "){j="start tag annotation"}else{if(k=="\n"){h=k;j="start tag annotation"}else{if(k=="."){j="start tag class"}else{if(k==">"||k==undefined){if(k==">"){f++}return["start tag",g,[],""]}else{g+=k}}}}}else{if(j=="start tag class"){if(k=="\t"||k=="\f"||k==" "){i.push(h);h="";j="start tag annotation"}else{if(k=="\n"){i.push(h);h=k;j="start tag annotation"}else{if(k=="."){i.push(h);h=""}else{if(k==">"||k==undefined){if(k==">"){f++}i.push(h);return["start tag",g,i,""]}else{h+=k}}}}}else{if(j=="start tag annotation"){if(k==">"||k==undefined){if(k==">"){f++}h=Util.filter(h.split(/[\u0020\t\f\r\n]+/),function(l){if(l){return true}}).join(" ");return["start tag",g,i,h]}else{h+=k}}else{if(j=="end tag"){if(k==">"||k==undefined){if(k==">"){f++}return["end tag",g]}else{g+=k}}else{if(j=="timestamp tag"){if(k==">"||k==undefined){if(k==">"){f++}return["timestamp",g]}else{g+=k}}else{d("Never happens.")}}}}}}}}f++}}};var WebVTTSerializer=function(){function b(d){var c="";for(var e=0;e<d.length;e++){var f=d[e];if(f.type=="text"){c+=f.value}else{if(f.type=="object"){c+="<"+f.name;if(f.classes){for(var g=0;g<f.classes.length;g++){c+="."+f.classes[g]}}if(f.value){c+=" "+f.value}c+=">";if(f.children){c+=b(f.children)}c+="</"+f.name+">"}else{c+="<"+f.value+">"}}}return c}function a(c){return c.startTime+" "+c.endTime+"\n"+b(c.tree.children)+"\n\n"}this.serialize=function(d){var c="";for(var e=0;e<d.length;e++){c+=a(d[e])}return c}};
/*! JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 60 */
(function(global,jQuery,undefined){if(jQuery&&jQuery.render||global.jsviews){return}var versionNumber="v1.0.0-beta",$,jsvStoreName,rTag,rTmplString,indexStr,delimOpenChar0="{",delimOpenChar1="{",delimCloseChar0="}",delimCloseChar1="}",linkChar="^",rPath=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rParams=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,rNewLine=/[ \t]*(\r\n|\n|\r)/g,rUnescapeQuotes=/\\(['"])/g,rEscapeQuotes=/['"\\]/g,rBuildHash=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,rTestElseIf=/^if\s/,rFirstElem=/<(\w+)[>\s]/,rAttrEncode=/[\x00`><"'&]/g,rIsHtml=/[\x00`><\"'&]/,rHasHandlers=/^on[A-Z]|^convert(Back)?$/,rHtmlEncode=rAttrEncode,autoTmplName=0,viewId=0,charEntities={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},htmlStr="html",tmplAttr="data-jsv-tmpl",$render={},jsvStores={template:{compile:compileTmpl},tag:{compile:compileTag},helper:{},converter:{}},$views={jsviews:versionNumber,settings:function(settings){$extend($viewsSettings,settings);dbgMode($viewsSettings._dbgMode);if($viewsSettings.jsv){$viewsSettings.jsv()}},sub:{View:View,Err:JsViewsError,tmplFn:tmplFn,cvt:convertArgs,parse:parseParams,extend:$extend,syntaxErr:syntaxError,onStore:{},_lnk:retVal,_ths:tagHandlersFromProps},map:dataMap,_cnvt:convertVal,_tag:renderTag,_err:error};function tagHandlersFromProps(tag,tagCtx){for(var prop in tagCtx.props){if(rHasHandlers.test(prop)){tag[prop]=tagCtx.props[prop]}}}function retVal(val){return val}function dbgBreak(val){eval("debugger");return val}function dbgMode(debugMode){$viewsSettings._dbgMode=debugMode;indexStr=debugMode?"Unavailable (nested view): use #getIndex()":"";$tags("dbg",$helpers.dbg=$converters.dbg=debugMode?dbgBreak:retVal)}function JsViewsError(message){this.name=($.link?"JsViews":"JsRender")+" Error";this.message=message||this.name}function $extend(target,source){var name;for(name in source){target[name]=source[name]}return target}function $isFunction(ob){return typeof ob==="function"}(JsViewsError.prototype=new Error()).constructor=JsViewsError;function $viewsDelimiters(openChars,closeChars,link){if(!$sub.rTag||openChars){delimOpenChar0=openChars?openChars.charAt(0):delimOpenChar0;delimOpenChar1=openChars?openChars.charAt(1):delimOpenChar1;delimCloseChar0=closeChars?closeChars.charAt(0):delimCloseChar0;delimCloseChar1=closeChars?closeChars.charAt(1):delimCloseChar1;linkChar=link||linkChar;openChars="\\"+delimOpenChar0+"(\\"+linkChar+")?\\"+delimOpenChar1;closeChars="\\"+delimCloseChar0+"\\"+delimCloseChar1;rTag="(?:(?:(\\w+(?=[\\/\\s\\"+delimCloseChar0+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+delimCloseChar0+"]|\\"+delimCloseChar0+"(?!\\"+delimCloseChar1+"))*?)";$sub.rTag=rTag+")";rTag=new RegExp(openChars+rTag+"(\\/)?|(?:\\/(\\w+)))"+closeChars,"g");rTmplString=new RegExp("<.*>|([^\\\\]|^)[{}]|"+openChars+".*"+closeChars)}return[delimOpenChar0,delimOpenChar1,delimCloseChar0,delimCloseChar1,linkChar]}function getView(inner,type){if(!type){type=inner;inner=undefined}var views,i,l,found,view=this,root=!type||type==="root";if(inner){found=view.type===type?view:undefined;if(!found){views=view.views;if(view._.useKey){for(i in views){if(found=views[i].get(inner,type)){break}}}else{for(i=0,l=views.length;!found&&i<l;i++){found=views[i].get(inner,type)}}}}else{if(root){while(view.parent.parent){found=view=view.parent}}else{while(view&&!found){found=view.type===type?view:undefined;view=view.parent}}}return found}function getNestedIndex(){var view=this.get("item");return view?view.index:undefined}getNestedIndex.depends=function(){return[this.get("item"),"index"]};function getIndex(){return this.index}getIndex.depends=function(){return["index"]};function getHelper(helper){var wrapped,view=this,ctx=view.linkCtx,res=(view.ctx||{})[helper];if(res===undefined&&ctx&&ctx.ctx){res=ctx.ctx[helper]}if(res===undefined){res=$helpers[helper]}if(res){if($isFunction(res)&&!res._wrp){wrapped=function(){return res.apply((!this||this===global)?view:this,arguments)};wrapped._wrp=true;$extend(wrapped,res)}}return wrapped||res}function convertVal(converter,view,tagCtx,onError){var tag,value,boundTag=+tagCtx===tagCtx&&view.tmpl.bnds[tagCtx-1],linkCtx=view.linkCtx;onError=onError!==undefined&&{props:{},args:[onError]};tagCtx=onError||(boundTag?boundTag(view.data,view,$views):tagCtx);value=tagCtx.args[0];if(converter||boundTag){tag=linkCtx&&linkCtx.tag;if(!tag){tag={_:{inline:!linkCtx,bnd:boundTag},tagName:":",cvt:converter,flow:true,tagCtx:tagCtx,_is:"tag"};if(linkCtx){linkCtx.tag=tag;tag.linkCtx=linkCtx;tagCtx.ctx=extendCtx(tagCtx.ctx,linkCtx.view.ctx)}$sub._lnk(tag)}tag._er=onError&&value;tagHandlersFromProps(tag,tagCtx);tagCtx.view=view;tag.ctx=tagCtx.ctx||{};delete tagCtx.ctx;view._.tag=tag;value=convertArgs(tag,tag.convert||converter!=="true"&&converter)[0];value=boundTag&&view._.onRender?view._.onRender(value,view,boundTag):value;view._.tag=undefined}return value!=undefined?value:""}function convertArgs(tag,converter){var tagCtx=tag.tagCtx,view=tagCtx.view,args=tagCtx.args;converter=converter&&(""+converter===converter?(view.getRsc("converters",converter)||error("Unknown converter: '"+converter+"'")):converter);args=!args.length&&!tagCtx.index?[view.data]:converter?args.slice():args;if(converter){if(converter.depends){tag.depends=$sub.getDeps(tag.depends,tag,converter.depends,converter)}args[0]=converter.apply(tag,args)}return args}function getResource(resourceType,itemName){var res,store,view=this;while((res===undefined)&&view){store=view.tmpl[resourceType];res=store&&store[itemName];view=view.parent}return res||$views[resourceType][itemName]}function renderTag(tagName,parentView,tmpl,tagCtxs,isUpdate,onError){var tag,tags,attr,parentTag,i,l,itemRet,tagCtx,tagCtxCtx,content,tagDef,callInit,mapDef,thisMap,args,props,initialTmpl,ret="",linkCtx=parentView.linkCtx||0,ctx=parentView.ctx,parentTmpl=tmpl||parentView.tmpl,boundTag=+tagCtxs===tagCtxs&&parentTmpl.bnds[tagCtxs-1];if(tagName._is==="tag"){tag=tagName;tagName=tag.tagName;tagCtxs=tag.tagCtxs}tag=tag||linkCtx.tag;onError=onError!==undefined&&(ret+=onError,[{props:{},args:[]}]);tagCtxs=onError||(boundTag?boundTag(parentView.data,parentView,$views):tagCtxs);l=tagCtxs.length;for(i=0;i<l;i++){if(!i&&(!tmpl||!tag)){tagDef=parentView.getRsc("tags",tagName)||error("Unknown tag: {{"+tagName+"}}")}tagCtx=tagCtxs[i];if(!linkCtx.tag||tag._er){content=tagCtx.tmpl;content=tagCtx.content=content&&parentTmpl.tmpls[content-1];$extend(tagCtx,{tmpl:(tag?tag:tagDef).template||content,render:renderContent,index:i,view:parentView,ctx:extendCtx(tagCtx.ctx,ctx)})}if(tmpl=tagCtx.props.tmpl){tmpl=""+tmpl===tmpl?parentView.getRsc("templates",tmpl)||$templates(tmpl):tmpl;tagCtx.tmpl=tmpl}if(!tag){if(tagDef._ctr){tag=new tagDef._ctr();callInit=!!tag.init}else{$sub._lnk(tag={render:tagDef.render})}tag._={inline:!linkCtx};if(linkCtx){linkCtx.tag=tag;tag.linkCtx=linkCtx}if(tag._.bnd=boundTag||linkCtx.fn){tag._.arrVws={}}else{if(tag.dataBoundOnly){error("{^{"+tagName+"}} tag must be data-bound")}}tag.tagName=tagName;tag.parent=parentTag=ctx&&ctx.tag;tag._is="tag";tag._def=tagDef;tag.tagCtxs=tagCtxs}tagCtx.tag=tag;if(tag.dataMap&&tag.tagCtxs){tagCtx.map=tag.tagCtxs[i].map}if(!tag.flow){tagCtxCtx=tagCtx.ctx=tagCtx.ctx||{};tags=tag.parents=tagCtxCtx.parentTags=ctx&&extendCtx(tagCtxCtx.parentTags,ctx.parentTags)||{};if(parentTag){tags[parentTag.tagName]=parentTag}tags[tag.tagName]=tagCtxCtx.tag=tag}}parentView._.tag=tag;if(!(tag._er=onError)){tagHandlersFromProps(tag,tagCtxs[0]);tag.rendering={};for(i=0;i<l;i++){tagCtx=tag.tagCtx=tag.tagCtxs[i];props=tagCtx.props;args=convertArgs(tag,tag.convert);if(mapDef=props.dataMap||tag.dataMap){if(args.length||props.dataMap){thisMap=tagCtx.map;if(!thisMap||thisMap.src!==args[0]||isUpdate){if(thisMap&&thisMap.src){thisMap.unmap()}thisMap=tagCtx.map=mapDef.map(args[0],props)}args=[thisMap.tgt]}}tag.ctx=tagCtx.ctx;if(!i&&callInit){initialTmpl=tag.template;tag.init(tagCtx,linkCtx,tag.ctx);callInit=undefined;if(tag.template!==initialTmpl){tag._.tmpl=tag.template}if(linkCtx){linkCtx.attr=tag.attr=linkCtx.attr||tag.attr}}itemRet=undefined;if(tag.render){itemRet=tag.render.apply(tag,args)}args=args.length?args:[parentView];itemRet=itemRet!==undefined?itemRet:tagCtx.render(args[0],true)||(isUpdate?undefined:"");ret=ret?ret+(itemRet||""):itemRet}delete tag.rendering}tag.tagCtx=tag.tagCtxs[0];tag.ctx=tag.tagCtx.ctx;if(tag._.inline&&(attr=tag.attr)&&attr!==htmlStr){ret=attr==="text"?$converters.html(ret):""}return boundTag&&parentView._.onRender?parentView._.onRender(ret,parentView,boundTag):ret}function View(context,type,parentView,data,template,key,contentTmpl,onRender){var views,parentView_,tag,self=this,isArray=type==="array",self_={key:0,useKey:isArray?0:1,id:""+viewId++,onRender:onRender,bnds:{}};self.data=data;self.tmpl=template,self.content=contentTmpl;self.views=isArray?[]:{};self.parent=parentView;self.type=type||"top";self._=self_;self.linked=!!onRender;if(parentView){views=parentView.views;parentView_=parentView._;if(parentView_.useKey){views[self_.key="_"+parentView_.useKey++]=self;self.index=indexStr;self.getIndex=getNestedIndex;tag=parentView_.tag;self_.bnd=isArray&&(!tag||!!tag._.bnd&&tag)}else{views.splice(self_.key=self.index=key,0,self)}self.ctx=context||parentView.ctx}else{self.ctx=context}}View.prototype={get:getView,getIndex:getIndex,getRsc:getResource,hlp:getHelper,_is:"view"};function compileChildResources(parentTmpl){var storeName,resources,resourceName,resource,settings,compile,onStore;for(storeName in jsvStores){settings=jsvStores[storeName];if((compile=settings.compile)&&(resources=parentTmpl[storeName+"s"])){for(resourceName in resources){resource=resources[resourceName]=compile(resourceName,resources[resourceName],parentTmpl);if(resource&&(onStore=$sub.onStore[storeName])){onStore(resourceName,resource,compile)}}}}}function compileTag(name,tagDef,parentTmpl){var init,tmpl;if($isFunction(tagDef)){tagDef={depends:tagDef.depends,render:tagDef}}else{if(tagDef.baseTag){tagDef.flow=!!tagDef.flow;tagDef=$extend($extend({},tagDef.baseTag),tagDef)}if((tmpl=tagDef.template)!==undefined){tagDef.template=""+tmpl===tmpl?($templates[tmpl]||$templates(tmpl)):tmpl}if(tagDef.init!==false){init=tagDef._ctr=function(){};(init.prototype=tagDef).constructor=init}}if(parentTmpl){tagDef._parentTmpl=parentTmpl}return tagDef}function compileTmpl(name,tmpl,parentTmpl,options){function tmplOrMarkupFromStr(value){if((""+value===value)||value.nodeType>0){try{elem=value.nodeType>0?value:!rTmplString.test(value)&&jQuery&&jQuery(global.document).find(value)[0]}catch(e){}if(elem){value=$templates[name=name||elem.getAttribute(tmplAttr)];if(!value){name=name||"_"+autoTmplName++;elem.setAttribute(tmplAttr,name);value=$templates[name]=compileTmpl(name,elem.innerHTML,parentTmpl,options)}elem=undefined}return value}}var tmplOrMarkup,elem;tmpl=tmpl||"";tmplOrMarkup=tmplOrMarkupFromStr(tmpl);options=options||(tmpl.markup?tmpl:{});options.tmplName=name;if(parentTmpl){options._parentTmpl=parentTmpl}if(!tmplOrMarkup&&tmpl.markup&&(tmplOrMarkup=tmplOrMarkupFromStr(tmpl.markup))){if(tmplOrMarkup.fn&&(tmplOrMarkup.debug!==tmpl.debug||tmplOrMarkup.allowCode!==tmpl.allowCode)){tmplOrMarkup=tmplOrMarkup.markup}}if(tmplOrMarkup!==undefined){if(name&&!parentTmpl){$render[name]=function(){return tmpl.render.apply(tmpl,arguments)}}if(tmplOrMarkup.fn||tmpl.fn){if(tmplOrMarkup.fn){if(name&&name!==tmplOrMarkup.tmplName){tmpl=extendCtx(options,tmplOrMarkup)}else{tmpl=tmplOrMarkup}}}else{tmpl=TmplObject(tmplOrMarkup,options);tmplFn(tmplOrMarkup.replace(rEscapeQuotes,"\\$&"),tmpl)}compileChildResources(options);return tmpl}}function dataMap(mapDef){function newMap(source,options){this.tgt=mapDef.getTgt(source,options)}if($isFunction(mapDef)){mapDef={getTgt:mapDef}}if(mapDef.baseMap){mapDef=$extend($extend({},mapDef.baseMap),mapDef)}mapDef.map=function(source,options){return new newMap(source,options)};return mapDef}function TmplObject(markup,options){var htmlTag,wrapMap=$viewsSettings.wrapMap||{},tmpl=$extend({markup:markup,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:fastRender},options);if(!options.htmlTag){htmlTag=rFirstElem.exec(markup);tmpl.htmlTag=htmlTag?htmlTag[1].toLowerCase():""}htmlTag=wrapMap[tmpl.htmlTag];if(htmlTag&&htmlTag!==wrapMap.div){tmpl.markup=$.trim(tmpl.markup)}return tmpl}function registerStore(storeName,storeSettings){function theStore(name,item,parentTmpl){var onStore,compile,itemName,thisStore;if(name&&typeof name==="object"&&!name.nodeType&&!name.markup&&!name.getTgt){for(itemName in name){theStore(itemName,name[itemName],item)}return $views}if(item===undefined){item=name;name=undefined}if(name&&""+name!==name){parentTmpl=item;item=name;name=undefined}thisStore=parentTmpl?parentTmpl[storeNames]=parentTmpl[storeNames]||{}:theStore;compile=storeSettings.compile;if(item===null){name&&delete thisStore[name]}else{item=compile?(item=compile(name,item,parentTmpl)):item;name&&(thisStore[name]=item)}if(compile&&item){item._is=storeName}if(item&&(onStore=$sub.onStore[storeName])){onStore(name,item,compile)}return item}var storeNames=storeName+"s";$views[storeNames]=theStore;jsvStores[storeName]=storeSettings}function $fastRender(data,context,noIteration){var tmplElem=this.jquery&&(this[0]||error('Unknown template: "'+this.selector+'"')),tmpl=tmplElem.getAttribute(tmplAttr);return fastRender.call(tmpl?$templates[tmpl]:$templates(tmplElem),data,context,noIteration)}function tryFn(tmpl,data,view){if($viewsSettings._dbgMode){try{return tmpl.fn(data,view,$views)}catch(e){return error(e,view)}}return tmpl.fn(data,view,$views)}function fastRender(data,context,noIteration,parentView,key,onRender){var self=this;if(!parentView&&self.fn._nvw&&!$.isArray(data)){return tryFn(self,data,{tmpl:self})}return renderContent.call(self,data,context,noIteration,parentView,key,onRender)}function renderContent(data,context,noIteration,parentView,key,onRender){var i,l,dataItem,newView,childView,itemResult,swapContent,tagCtx,contentTmpl,tag_,outerOnRender,tmplName,tmpl,noViews,self=this,result="";if(!!context===context){noIteration=context;context=undefined}if(key===true){swapContent=true;key=0}if(self.tag){tagCtx=self;self=self.tag;tag_=self._;tmplName=self.tagName;tmpl=tag_.tmpl||tagCtx.tmpl;noViews=self.attr&&self.attr!==htmlStr,context=extendCtx(context,self.ctx);contentTmpl=tagCtx.content;if(tagCtx.props.link===false){context=context||{};context.link=false}parentView=parentView||tagCtx.view;data=arguments.length?data:parentView}else{tmpl=self}if(tmpl){if(!parentView&&data&&data._is==="view"){parentView=data}if(parentView){contentTmpl=contentTmpl||parentView.content;onRender=onRender||parentView._.onRender;if(data===parentView){data=parentView.data}context=extendCtx(context,parentView.ctx)}if(!parentView||parentView.type==="top"){(context=context||{}).root=data}if(!tmpl.fn){tmpl=$templates[tmpl]||$templates(tmpl)}if(tmpl){onRender=(context&&context.link)!==false&&!noViews&&onRender;outerOnRender=onRender;if(onRender===true){outerOnRender=undefined;onRender=parentView._.onRender}context=tmpl.helpers?extendCtx(tmpl.helpers,context):context;if($.isArray(data)&&!noIteration){newView=swapContent?parentView:(key!==undefined&&parentView)||new View(context,"array",parentView,data,tmpl,key,contentTmpl,onRender);for(i=0,l=data.length;i<l;i++){dataItem=data[i];childView=new View(context,"item",newView,dataItem,tmpl,(key||0)+i,contentTmpl,onRender);itemResult=tryFn(tmpl,dataItem,childView);result+=newView._.onRender?newView._.onRender(itemResult,childView):itemResult}}else{if(parentView||!tmpl.fn._nvw){newView=swapContent?parentView:new View(context,tmplName||"data",parentView,data,tmpl,key,contentTmpl,onRender);if(tag_&&!self.flow){newView.tag=self}}result+=tryFn(tmpl,data,newView)}return outerOnRender?outerOnRender(result,newView):result}}return""}function error(e,view,fallback){var message=$viewsSettings.onError(e,view,fallback);if(""+e===e){throw new $sub.Err(message)}return !view.linkCtx&&view.linked?$converters.html(message):message}function syntaxError(message){error("Syntax error\n"+message)}function tmplFn(markup,tmpl,isLinkExpr,convertBack){function pushprecedingContent(shift){shift-=loc;if(shift){content.push(markup.substr(loc,shift).replace(rNewLine,"\\n"))}}function blockTagCheck(tagName){tagName&&syntaxError('Unmatched or missing tag: "{{/'+tagName+'}}" in template:\n'+markup)}function parseTag(all,bind,tagName,converter,colon,html,comment,codeTag,params,slash,closeBlock,index){if(html){colon=":";converter=htmlStr}slash=slash||isLinkExpr;var pathBindings=(bind||isLinkExpr)&&[[]],props="",args="",ctxProps="",paramsArgs="",paramsProps="",paramsCtxProps="",onError="",useTrigger="",block=!slash&&!colon&&!comment;tagName=tagName||(params=params||"#data",colon);pushprecedingContent(index);loc=index+all.length;if(codeTag){if(allowCode){content.push(["*","\n"+params.replace(rUnescapeQuotes,"$1")+"\n"])}}else{if(tagName){if(tagName==="else"){if(rTestElseIf.test(params)){syntaxError('for "{{else if expr}}" use "{{else expr}}"')}pathBindings=current[7];current[8]=markup.substring(current[8],index);current=stack.pop();content=current[2];block=true}if(params){parseParams(params.replace(rNewLine," "),pathBindings,tmpl).replace(rBuildHash,function(all,onerror,isCtx,key,keyToken,keyValue,arg,param){if(arg){args+=keyValue+",";paramsArgs+="'"+param+"',"}else{if(isCtx){ctxProps+=key+keyValue+",";paramsCtxProps+=key+"'"+param+"',"}else{if(onerror){onError+=keyValue}else{if(keyToken==="trigger"){useTrigger+=keyValue}props+=key+keyValue+",";paramsProps+=key+"'"+param+"',";hasHandlers=hasHandlers||rHasHandlers.test(keyToken)}}}return""}).slice(0,-1);if(pathBindings&&pathBindings[0]){pathBindings.pop()}}newNode=[tagName,converter||!!convertBack||hasHandlers||"",block&&[],parsedParam(paramsArgs,paramsProps,paramsCtxProps),parsedParam(args,props,ctxProps),onError,useTrigger,pathBindings||0];content.push(newNode);if(block){stack.push(current);current=newNode;current[8]=loc}}else{if(closeBlock){blockTagCheck(closeBlock!==current[0]&&current[0]!=="else"&&closeBlock);current[8]=markup.substring(current[8],index);current=stack.pop()}}}blockTagCheck(!current&&closeBlock);content=current[2]}var result,newNode,hasHandlers,allowCode=tmpl&&tmpl.allowCode,astTop=[],loc=0,stack=[],content=astTop,current=[,,astTop];if(isLinkExpr){markup=delimOpenChar0+markup+delimCloseChar1}blockTagCheck(stack[0]&&stack[0][2].pop()[0]);markup.replace(rTag,parseTag);pushprecedingContent(markup.length);if(loc=astTop[astTop.length-1]){blockTagCheck(""+loc!==loc&&(+loc[8]===loc[8])&&loc[0])}if(isLinkExpr){result=buildCode(astTop,markup,isLinkExpr);setPaths(result,astTop[0][7])}else{result=buildCode(astTop,tmpl)}if(result._nvw){result._nvw=!/[~#]/.test(markup)}return result}function setPaths(fn,paths){fn.deps=[];for(var key in paths){if(key!=="_jsvto"&&paths[key].length){fn.deps=fn.deps.concat(paths[key])}}fn.paths=paths}function parsedParam(args,props,ctx){return[args.slice(0,-1),props.slice(0,-1),ctx.slice(0,-1)]}function paramStructure(parts,type){return"\n\t"+(type?type+":{":"")+"args:["+parts[0]+"]"+(parts[1]||!type?",\n\tprops:{"+parts[1]+"}":"")+(parts[2]?",\n\tctx:{"+parts[2]+"}":"")}function parseParams(params,pathBindings,tmpl){function parseTokens(all,lftPrn0,lftPrn,bound,path,operator,err,eq,path2,prn,comma,lftPrn2,apos,quot,rtPrn,rtPrnDot,prn2,space,index,full){operator=operator||"";lftPrn=lftPrn||lftPrn0||lftPrn2;path=path||path2;prn=prn||prn2||"";var expr,isFn,exprFn,fullLength=full.length-1;function parsePath(allPath,not,object,helper,view,viewProperty,pathTokens,leafToken){if(object){if(bindings){if(named==="linkTo"){bindto=pathBindings._jsvto=pathBindings._jsvto||[];bindto.push(path)}if(!named||boundName){bindings.push(path.slice(not.length))}}if(object!=="."){var ret=(helper?'view.hlp("'+helper+'")':view?"view":"data")+(leafToken?(viewProperty?"."+viewProperty:helper?"":(view?"":"."+object))+(pathTokens||""):(leafToken=helper?"":view?viewProperty||"":object,""));ret=ret+(leafToken?"."+leafToken:"");return not+(ret.slice(0,9)==="view.data"?ret.slice(5):ret)}}return allPath}if(err&&!aposed&&!quoted){syntaxError(params)}else{if(bindings&&rtPrnDot&&!aposed&&!quoted){if(!named||boundName||bindto){expr=pathStart[parenDepth];if(fullLength>index-expr){expr=full.slice(expr,index+1);rtPrnDot=delimOpenChar1+":"+expr+" onerror=''"+delimCloseChar0;exprFn=tmplLinks[rtPrnDot];if(!exprFn){tmplLinks[rtPrnDot]=true;tmplLinks[rtPrnDot]=exprFn=tmplFn(rtPrnDot,tmpl||bindings,true);exprFn.paths.push({_jsvOb:exprFn})}if(exprFn!==true){(bindto||bindings).push({_jsvOb:exprFn})}}}}return(aposed?(aposed=!apos,(aposed?all:'"')):quoted?(quoted=!quot,(quoted?all:'"')):((lftPrn?(parenDepth++,pathStart[parenDepth]=index++,lftPrn):"")+(space?(parenDepth?"":(paramIndex=full.slice(paramIndex,index),named?(named=boundName=bindto=false,"\b"):"\b,")+paramIndex+(paramIndex=index+all.length,bindings&&pathBindings.push(bindings=[]),"\b")):eq?(parenDepth&&syntaxError(params),bindings&&pathBindings.pop(),named=path,boundName=bound,paramIndex=index+all.length,bound&&(bindings=pathBindings[named]=[]),path+":"):path?(path.split("^").join(".").replace(rPath,parsePath)+(prn?(fnCall[++parenDepth]=true,path.charAt(0)!=="."&&(pathStart[parenDepth]=index),isFn?"":prn):operator)):operator?operator:rtPrn?((fnCall[parenDepth--]=false,rtPrn)+(prn?(fnCall[++parenDepth]=true,prn):"")):comma?(fnCall[parenDepth]||syntaxError(params),","):lftPrn0?"":(aposed=apos,quoted=quot,'"'))))}}var named,bindto,boundName,quoted,aposed,bindings=pathBindings&&pathBindings[0],paramIndex=0,tmplLinks=tmpl?tmpl.links:bindings&&(bindings.links=bindings.links||{}),fnCall={},pathStart={0:-1},parenDepth=0;return(params+(tmpl?" ":"")).replace(/\)\^/g,").").replace(rParams,parseTokens)}function buildCode(ast,tmpl,isLinkExpr){var i,node,tagName,converter,tagCtx,hasTag,hasEncoder,getsVal,hasCnvt,needView,useCnvt,tmplBindings,pathBindings,params,boundOnErrStart,boundOnErrEnd,tagRender,nestedTmpls,tmplName,nestedTmpl,tagAndElses,content,markup,nextIsElse,oldCode,isElse,isGetVal,tagCtxFn,onError,tagStart,trigger,tmplBindingKey=0,code="",tmplOptions={},l=ast.length;if(""+tmpl===tmpl){tmplName=isLinkExpr?'data-link="'+tmpl.replace(rNewLine," ").slice(1,-1)+'"':tmpl;tmpl=0}else{tmplName=tmpl.tmplName||"unnamed";if(tmpl.allowCode){tmplOptions.allowCode=true}if(tmpl.debug){tmplOptions.debug=true}tmplBindings=tmpl.bnds;nestedTmpls=tmpl.tmpls}for(i=0;i<l;i++){node=ast[i];if(""+node===node){code+='\n+"'+node+'"'}else{tagName=node[0];if(tagName==="*"){code+=";\n"+node[1]+"\nret=ret"}else{converter=node[1];content=node[2];tagCtx=paramStructure(node[3],"params")+"},"+paramStructure(params=node[4]);onError=node[5];trigger=node[6];markup=node[8];if(!(isElse=tagName==="else")){tmplBindingKey=0;if(tmplBindings&&(pathBindings=node[7])){tmplBindingKey=tmplBindings.push(pathBindings)}}if(isGetVal=tagName===":"){if(converter){tagName=converter===htmlStr?">":converter+tagName}}else{if(content){nestedTmpl=TmplObject(markup,tmplOptions);nestedTmpl.tmplName=tmplName+"/"+tagName;buildCode(content,nestedTmpl);nestedTmpls.push(nestedTmpl)}if(!isElse){tagAndElses=tagName;oldCode=code;code=""}nextIsElse=ast[i+1];nextIsElse=nextIsElse&&nextIsElse[0]==="else"}tagStart=onError?";\ntry{\nret+=":"\n+";boundOnErrStart="";boundOnErrEnd="";if(isGetVal&&(pathBindings||trigger||converter&&converter!==htmlStr)){tagCtxFn="return {"+tagCtx+"};";tagRender='c("'+converter+'",view,';tagCtxFn=new Function("data,view,j,u"," // "+tmplName+" "+tmplBindingKey+" "+tagName+"\n"+tagCtxFn);tagCtxFn._er=onError;boundOnErrStart=tagRender+tmplBindingKey+",";boundOnErrEnd=")";tagCtxFn._tag=tagName;if(isLinkExpr){return tagCtxFn}setPaths(tagCtxFn,pathBindings);useCnvt=true}code+=(isGetVal?(isLinkExpr?(onError?"\ntry{\n":"")+"return ":tagStart)+(useCnvt?(useCnvt=undefined,needView=hasCnvt=true,tagRender+(pathBindings?((tmplBindings[tmplBindingKey-1]=tagCtxFn),tmplBindingKey):"{"+tagCtx+"}")+")"):tagName===">"?(hasEncoder=true,"h("+params[0]+")"):(getsVal=true,"((v="+params[0]+')!=null?v:"")')):(needView=hasTag=true,"\n{view:view,tmpl:"+(content?nestedTmpls.length:"0")+","+tagCtx+"},"));if(tagAndElses&&!nextIsElse){code="["+code.slice(0,-1)+"]";tagRender='t("'+tagAndElses+'",view,this,';if(isLinkExpr||pathBindings){code=new Function("data,view,j,u"," // "+tmplName+" "+tmplBindingKey+" "+tagAndElses+"\nreturn "+code+";");code._er=onError;code._tag=tagName;if(pathBindings){setPaths(tmplBindings[tmplBindingKey-1]=code,pathBindings)}if(isLinkExpr){return code}boundOnErrStart=tagRender+tmplBindingKey+",undefined,";boundOnErrEnd=")"}code=oldCode+tagStart+tagRender+(tmplBindingKey||code)+")";pathBindings=0;tagAndElses=0}if(onError){needView=true;code+=";\n}catch(e){ret"+(isLinkExpr?"urn ":"+=")+boundOnErrStart+"j._err(e,view,"+onError+")"+boundOnErrEnd+";}\n"+(isLinkExpr?"":"ret=ret")}}}}code="// "+tmplName+"\nvar v"+(hasTag?",t=j._tag":"")+(hasCnvt?",c=j._cnvt":"")+(hasEncoder?",h=j.converters.html":"")+(isLinkExpr?";\n":',ret=""\n')+(tmplOptions.debug?"debugger;":"")+code+(isLinkExpr?"\n":";\nreturn ret;");try{code=new Function("data,view,j,u",code)}catch(e){syntaxError("Compiled template code:\n\n"+code+'\n: "'+e.message+'"')}if(tmpl){tmpl.fn=code}if(!needView){code._nvw=true}return code}function extendCtx(context,parentContext){return context&&context!==parentContext?(parentContext?$extend($extend({},parentContext),context):context):parentContext&&$extend({},parentContext)}function getCharEntity(ch){return charEntities[ch]||(charEntities[ch]="&#"+ch.charCodeAt(0)+";")}for(jsvStoreName in jsvStores){registerStore(jsvStoreName,jsvStores[jsvStoreName])}var $templates=$views.templates,$converters=$views.converters,$helpers=$views.helpers,$tags=$views.tags,$sub=$views.sub,$viewsSettings=$views.settings;if(jQuery){$=jQuery;$.fn.render=$fastRender;if($.observable){$extend($sub,$.views.sub);$views.map=$.views.map}}else{$=global.jsviews={};$.isArray=Array&&Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}$.render=$render;$.views=$views;$.templates=$templates=$views.templates;$viewsSettings({debugMode:dbgMode,delimiters:$viewsDelimiters,onError:function(e,view,fallback){if(view){e=fallback===undefined?"{Error: "+e+"}":$isFunction(fallback)?fallback(e,view):fallback}return e==undefined?"":e},_dbgMode:true});$tags({"else":function(){},"if":{render:function(val){var self=this,ret=(self.rendering.done||!val&&(arguments.length||!self.tagCtx.index))?"":(self.rendering.done=true,self.selected=self.tagCtx.index,self.tagCtx.render(self.tagCtx.view,true));return ret},onUpdate:function(ev,eventArgs,tagCtxs){var tci,prevArg,different;for(tci=0;(prevArg=this.tagCtxs[tci])&&prevArg.args.length;tci++){prevArg=prevArg.args[0];different=!prevArg!==!tagCtxs[tci].args[0];if((!this.convert&&!!prevArg)||different){return different}}return false},flow:true},"for":{render:function(val){var finalElse,self=this,tagCtx=self.tagCtx,result="",done=0;if(!self.rendering.done){if(finalElse=!arguments.length){val=tagCtx.view.data}if(val!==undefined){result+=tagCtx.render(val,finalElse);done+=$.isArray(val)?val.length:1}if(self.rendering.done=done){self.selected=tagCtx.index}}return result},flow:true},include:{flow:true},"*":{render:retVal,flow:true}});function getTargetProps(source){var key,prop,props=[];if(typeof source==="object"){for(key in source){prop=source[key];if(!prop||!prop.toJSON||prop.toJSON()){if(!$isFunction(prop)){props.push({key:key,prop:prop})}}}}return props}$tags("props",{baseTag:$tags["for"],dataMap:dataMap(getTargetProps)});function htmlEncode(text){return text!=null?rIsHtml.test(text)&&(""+text).replace(rHtmlEncode,getCharEntity)||text:""}$converters({html:htmlEncode,attr:htmlEncode,url:function(text){return text!=undefined?encodeURI(""+text):text===null?text:""}});$viewsDelimiters()})(this,this.jQuery);(function(a4,ao,g){var al=!0,ak=null,aj=!1;function ah(j){return function(){return this[j]}}var aX=this;function ag(k,j){var q=k.split("."),p=aX;!(q[0] in p)&&p.execScript&&p.execScript("var "+q[0]);for(var l;q.length&&(l=q.shift());){!q.length&&void 0!==j?p[l]=j:p=p[l]?p[l]:p[l]={}}}function aC(k,j,l){return k.call.apply(k.bind,arguments)}function ai(k,j,p){if(!k){throw Error()}if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(q,l);return k.apply(j,q)}}return function(){return k.apply(j,arguments)}}function af(k,j,l){af=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aC:ai;return af.apply(ak,arguments)}var h=Date.now||function(){return +new Date};function b(k,j){this.G=k;this.u=j||k;this.z=this.u.document}b.prototype.createElement=function(k,j,p){k=this.z.createElement(k);if(j){for(var l in j){j.hasOwnProperty(l)&&("style"==l?k.style.cssText=j[l]:k.setAttribute(l,j[l]))}}p&&k.appendChild(this.z.createTextNode(p));return k};function a5(k,j,l){k=k.z.getElementsByTagName(j)[0];k||(k=ao.documentElement);k&&k.lastChild&&k.insertBefore(l,k.lastChild)}function ae(k,j){for(var q=k.className.split(/\s+/),p=0,l=q.length;p<l;p++){if(q[p]==j){return}}q.push(j);k.className=q.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function ad(k,j){for(var s=k.className.split(/\s+/),q=[],p=0,l=s.length;p<l;p++){s[p]!=j&&q.push(s[p])}k.className=q.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function aY(k,j){for(var q=k.className.split(/\s+/),p=0,l=q.length;p<l;p++){if(q[p]==j){return al}}return aj}function ac(k){var j=k.u.location.protocol;"about:"==j&&(j=k.G.location.protocol);return"https:"==j?"https:":"http:"}function ab(k,j){var p=k.createElement("link",{rel:"stylesheet",href:j}),l=aj;p.onload=function(){l||(l=al)};p.onerror=function(){l||(l=al)};a5(k,"head",p)}function Q(k,j,t,s){var q=k.z.getElementsByTagName("head")[0];if(q){var p=k.createElement("script",{src:j}),l=aj;p.onload=p.onreadystatechange=function(){if(!l&&(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)){l=al,t&&t(ak),p.onload=p.onreadystatechange=ak,"HEAD"==p.parentNode.tagName&&q.removeChild(p)}};q.appendChild(p);a4.setTimeout(function(){l||(l=al,t&&t(Error("Script load timeout")))},s||5000);return p}return ak}function r(k,j,l){this.w=k;this.S=j;this.za=l}ag("webfont.BrowserInfo",r);r.prototype.pa=ah("w");r.prototype.hasWebFontSupport=r.prototype.pa;r.prototype.qa=ah("S");r.prototype.hasWebKitFallbackBug=r.prototype.qa;r.prototype.ra=ah("za");r.prototype.hasWebKitMetricsBug=r.prototype.ra;function o(k,j,p,l){this.e=k!=ak?k:ak;this.o=j!=ak?j:ak;this.aa=p!=ak?p:ak;this.f=l!=ak?l:ak}var aJ=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;o.prototype.toString=function(){return[this.e,this.o||"",this.aa||"",this.f||""].join("")};function aU(k){k=aJ.exec(k);var j=ak,q=ak,p=ak,l=ak;k&&(k[1]!==ak&&k[1]&&(j=parseInt(k[1],10)),k[2]!==ak&&k[2]&&(q=parseInt(k[2],10)),k[3]!==ak&&k[3]&&(p=parseInt(k[3],10)),k[4]!==ak&&k[4]&&(l=/^[0-9]+$/.test(k[4])?parseInt(k[4],10):k[4]));return new o(j,q,p,l)}function aT(x,w,v,u,t,s,q,p,l,k,j){this.J=x;this.Fa=w;this.ya=v;this.fa=u;this.Da=t;this.ea=s;this.wa=q;this.Ea=p;this.va=l;this.da=k;this.k=j}ag("webfont.UserAgent",aT);aT.prototype.getName=ah("J");aT.prototype.getName=aT.prototype.getName;aT.prototype.oa=ah("ya");aT.prototype.getVersion=aT.prototype.oa;aT.prototype.ka=ah("fa");aT.prototype.getEngine=aT.prototype.ka;aT.prototype.la=ah("ea");aT.prototype.getEngineVersion=aT.prototype.la;aT.prototype.ma=ah("wa");aT.prototype.getPlatform=aT.prototype.ma;aT.prototype.na=ah("va");aT.prototype.getPlatformVersion=aT.prototype.na;aT.prototype.ja=ah("da");aT.prototype.getDocumentMode=aT.prototype.ja;aT.prototype.ia=ah("k");aT.prototype.getBrowserInfo=aT.prototype.ia;function aS(k,j){this.a=k;this.H=j}var am=new aT("Unknown",new o,"Unknown","Unknown",new o,"Unknown","Unknown",new o,"Unknown",void 0,new r(aj,aj,aj));aS.prototype.parse=function(){var k;if(-1!=this.a.indexOf("MSIE")){k=aR(this);var j=aP(this),u=aU(j),t=aO(this.a,/MSIE ([\d\w\.]+)/,1),s=aU(t);k=new aT("MSIE",s,t,"MSIE",s,t,k,u,j,aN(this.H),new r("Windows"==k&&6<=s.e||"Windows Phone"==k&&8<=u.e,aj,aj))}else{if(-1!=this.a.indexOf("Opera")){k:{k="Unknown";var j=aO(this.a,/Presto\/([\d\w\.]+)/,1),u=aU(j),t=aP(this),s=aU(t),q=aN(this.H);u.e!==ak?k="Presto":(-1!=this.a.indexOf("Gecko")&&(k="Gecko"),j=aO(this.a,/rv:([^\)]+)/,1),u=aU(j));if(-1!=this.a.indexOf("Opera Mini/")){var p=aO(this.a,/Opera Mini\/([\d\.]+)/,1),l=aU(p);k=new aT("OperaMini",l,p,k,u,j,aR(this),s,t,q,new r(aj,aj,aj))}else{if(-1!=this.a.indexOf("Version/")&&(p=aO(this.a,/Version\/([\d\.]+)/,1),l=aU(p),l.e!==ak)){k=new aT("Opera",l,p,k,u,j,aR(this),s,t,q,new r(10<=l.e,aj,aj));break k}p=aO(this.a,/Opera[\/ ]([\d\.]+)/,1);l=aU(p);k=l.e!==ak?new aT("Opera",l,p,k,u,j,aR(this),s,t,q,new r(10<=l.e,aj,aj)):new aT("Opera",new o,"Unknown",k,u,j,aR(this),s,t,q,new r(aj,aj,aj))}}}else{/OPR\/[\d.]+/.test(this.a)?k=i(this):/AppleWeb(K|k)it/.test(this.a)?k=i(this):-1!=this.a.indexOf("Gecko")?(k="Unknown",j=new o,u="Unknown",t=aP(this),s=aU(t),q=aj,-1!=this.a.indexOf("Firefox")?(k="Firefox",u=aO(this.a,/Firefox\/([\d\w\.]+)/,1),j=aU(u),q=3<=j.e&&5<=j.o):-1!=this.a.indexOf("Mozilla")&&(k="Mozilla"),p=aO(this.a,/rv:([^\)]+)/,1),l=aU(p),q||(q=1<l.e||1==l.e&&9<l.o||1==l.e&&9==l.o&&2<=l.aa||p.match(/1\.9\.1b[123]/)!=ak||p.match(/1\.9\.1\.[\d\.]+/)!=ak),k=new aT(k,j,u,"Gecko",l,p,aR(this),s,t,aN(this.H),new r(q,aj,aj))):k=am}}return k};function aR(k){var j=aO(k.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);if(""!=j){return/BB\d{2}/.test(j)&&(j="BlackBerry"),j}k=aO(k.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS)/,1);return""!=k?("Mac_PowerPC"==k&&(k="Macintosh"),k):"Unknown"}function aP(k){var j=aO(k.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(j||(j=aO(k.a,/Windows Phone( OS)? ([^;)]+)/,2))||(j=aO(k.a,/(iPhone )?OS ([\d_]+)/,2))){return j}if(j=aO(k.a,/(?:Linux|CrOS) ([^;)]+)/,1)){for(var j=j.split(/\s/),l=0;l<j.length;l+=1){if(/^[\d\._]+$/.test(j[l])){return j[l]}}}return(k=aO(k.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?k:"Unknown"}function i(w){var v=aR(w),u=aP(w),t=aU(u),s=aO(w.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1),q=aU(s),p="Unknown",l=new o,k="Unknown",j=aj;/OPR\/[\d.]+/.test(w.a)?p="Opera":-1!=w.a.indexOf("Chrome")||-1!=w.a.indexOf("CrMo")||-1!=w.a.indexOf("CriOS")?p="Chrome":/Silk\/\d/.test(w.a)?p="Silk":"BlackBerry"==v||"Android"==v?p="BuiltinBrowser":-1!=w.a.indexOf("PhantomJS")?p="PhantomJS":-1!=w.a.indexOf("Safari")?p="Safari":-1!=w.a.indexOf("AdobeAIR")&&(p="AdobeAIR");"BuiltinBrowser"==p?k="Unknown":"Silk"==p?k=aO(w.a,/Silk\/([\d\._]+)/,1):"Chrome"==p?k=aO(w.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=w.a.indexOf("Version/")?k=aO(w.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==p?k=aO(w.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==p?k=aO(w.a,/OPR\/([\d.]+)/,1):"PhantomJS"==p&&(k=aO(w.a,/PhantomJS\/([\d.]+)/,1));l=aU(k);j="AdobeAIR"==p?2<l.e||2==l.e&&5<=l.o:"BlackBerry"==v?10<=t.e:"Android"==v?2<t.e||2==t.e&&1<t.o:526<=q.e||525<=q.e&&13<=q.o;return new aT(p,l,k,"AppleWebKit",q,s,v,t,u,aN(w.H),new r(j,536>q.e||536==q.e&&11>q.o,"iPhone"==v||"iPad"==v||"iPod"==v||"Macintosh"==v))}function aO(k,j,l){return(k=k.match(j))&&k[l]?k[l]:""}function aN(j){if(j.documentMode){return j.documentMode}}function c(j){this.ua=j||"-"}c.prototype.f=function(k){for(var j=[],l=0;l<arguments.length;l++){j.push(arguments[l].replace(/[\W_]+/g,"").toLowerCase())}return j.join(this.ua)};function aM(k,j){this.J=k;this.T=4;this.K="n";var l=(j||"n4").match(/^([nio])([1-9])$/i);l&&(this.K=l[1],this.T=parseInt(l[2],10))}aM.prototype.getName=ah("J");function aK(j){return j.K+j.T}function a7(k){var j=4,p="n",l=ak;k&&((l=k.match(/(normal|oblique|italic)/i))&&l[1]&&(p=l[1].substr(0,1).toLowerCase()),(l=k.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?j=7:/[1-9]00/.test(l[1])&&(j=parseInt(l[1].substr(0,1),10))));return p+j}function a0(k,j,l){this.c=k;this.h=j;this.M=l;this.j="wf";this.g=new c("-")}function aQ(j){ae(j.h,j.g.f(j.j,"loading"));aI(j,"loading")}function aH(j){ad(j.h,j.g.f(j.j,"loading"));aY(j.h,j.g.f(j.j,"active"))||ae(j.h,j.g.f(j.j,"inactive"));aI(j,"inactive")}function aI(k,j,l){if(k.M[j]){if(l){k.M[j](l.getName(),aK(l))}else{k.M[j]()}}}function aG(k,j){this.c=k;this.C=j;this.s=this.c.createElement("span",{"aria-hidden":"true"},this.C)}function aF(k,j){var s;s=[];for(var q=j.J.split(/,\s*/),p=0;p<q.length;p++){var l=q[p].replace(/['"]/g,"");-1==l.indexOf(" ")?s.push(l):s.push("'"+l+"'")}s=s.join(",");q="normal";p=j.T+"00";"o"===j.K?q="oblique":"i"===j.K&&(q="italic");k.s.style.cssText="position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+s+";"+("font-style:"+q+";font-weight:"+p+";")}function aE(j){a5(j.c,"body",j.s)}aG.prototype.remove=function(){var j=this.s;j.parentNode&&j.parentNode.removeChild(j)};function ap(v,u,t,s,q,p,l,k){this.U=v;this.sa=u;this.c=t;this.q=s;this.C=k||"BESbswy";this.k=q;this.F={};this.R=p||5000;this.Y=l||ak;this.B=this.A=ak;v=new aG(this.c,this.C);aE(v);for(var j in aD){aD.hasOwnProperty(j)&&(aF(v,new aM(aD[j],aK(this.q))),this.F[aD[j]]=v.s.offsetWidth)}v.remove()}var aD={Ca:"serif",Ba:"sans-serif",Aa:"monospace"};ap.prototype.start=function(){this.A=new aG(this.c,this.C);aE(this.A);this.B=new aG(this.c,this.C);aE(this.B);this.xa=h();aF(this.A,new aM(this.q.getName()+",serif",aK(this.q)));aF(this.B,new aM(this.q.getName()+",sans-serif",aK(this.q)));e(this)};function a8(k,j,p){for(var l in aD){if(aD.hasOwnProperty(l)&&j===k.F[aD[l]]&&p===k.F[aD[l]]){return al}}return aj}function e(k){var j=k.A.s.offsetWidth,l=k.B.s.offsetWidth;j===k.F.serif&&l===k.F["sans-serif"]||k.k.S&&a8(k,j,l)?h()-k.xa>=k.R?k.k.S&&a8(k,j,l)&&(k.Y===ak||k.Y.hasOwnProperty(k.q.getName()))?aB(k,k.U):aB(k,k.sa):setTimeout(af(function(){e(this)},k),25):aB(k,k.U)}function aB(k,j){k.A.remove();k.B.remove();j(k.q)}function aA(k,j,p,l){this.c=j;this.t=p;this.N=0;this.ba=this.X=aj;this.R=l;this.k=k.k}function a2(v,u,t,s,q){if(0===u.length&&q){aH(v.t)}else{v.N+=u.length;q&&(v.X=q);for(q=0;q<u.length;q++){var p=u[q],l=t[p.getName()],k=v.t,j=p;ae(k.h,k.g.f(k.j,j.getName(),aK(j).toString(),"loading"));aI(k,"fontloading",j);(new ap(af(v.ga,v),af(v.ha,v),v.c,p,v.k,v.R,s,l)).start()}}}aA.prototype.ga=function(k){var j=this.t;ad(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"loading"));ad(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"inactive"));ae(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"active"));aI(j,"fontactive",k);this.ba=al;aV(this)};aA.prototype.ha=function(k){var j=this.t;ad(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"loading"));aY(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"active"))||ae(j.h,j.g.f(j.j,k.getName(),aK(k).toString(),"inactive"));aI(j,"fontinactive",k);aV(this)};function aV(j){0==--j.N&&j.X&&(j.ba?(j=j.t,ad(j.h,j.g.f(j.j,"loading")),ad(j.h,j.g.f(j.j,"inactive")),ae(j.h,j.g.f(j.j,"active")),aI(j,"active")):aH(j.t))}function az(k,j,l){this.G=k;this.V=j;this.a=l;this.O=this.P=0}function ay(k,j){ax.V.Z[k]=j}az.prototype.load=function(k){var j=k.context||this.G;this.c=new b(this.G,j);j=new a0(this.c,j.document.documentElement,k);if(this.a.k.w){var t=this.V,s=this.c,q=[],p;for(p in k){if(k.hasOwnProperty(p)){var l=t.Z[p];l&&q.push(l(k[p],s))}}k=k.timeout;this.O=this.P=q.length;k=new aA(this.a,this.c,j,k);p=0;for(t=q.length;p<t;p++){s=q[p],s.v(this.a,af(this.ta,this,s,j,k))}}else{aH(j)}};az.prototype.ta=function(k,j,q,p){var l=this;p?k.load(function(t,v,u){var s=0==--l.P;s&&aQ(j);setTimeout(function(){a2(q,t,v||{},u||ak,s)},0)}):(k=0==--this.P,this.O--,k&&(0==this.O?aH(j):aQ(j)),a2(q,[],{},ak,k))};var aq=a4,n=(new aS(navigator.userAgent,ao)).parse(),ax=aq.WebFont=new az(a4,new function(){this.Z={}},n);ax.load=ax.load;function aw(k,j){this.c=k;this.d=j}aw.prototype.load=function(k){var j,u,t=this.d.urls||[],s=this.d.families||[];j=0;for(u=t.length;j<u;j++){ab(this.c,t[j])}t=[];j=0;for(u=s.length;j<u;j++){var q=s[j].split(":");if(q[1]){for(var p=q[1].split(","),l=0;l<p.length;l+=1){t.push(new aM(q[0],p[l]))}}else{t.push(new aM(q[0]))}}k(t)};aw.prototype.v=function(k,j){return j(k.k.w)};ay("custom",function(k,j){return new aw(j,k)});function av(k,j){this.c=k;this.d=j;this.m=[]}av.prototype.D=function(j){return ac(this.c)+(this.d.api||"//f.fontdeck.com/s/css/js/")+(this.c.u.location.hostname||this.c.G.location.hostname)+"/"+j+".js"};av.prototype.v=function(k,j){var q=this.d.id,p=this.c.u,l=this;q?(p.__webfontfontdeckmodule__||(p.__webfontfontdeckmodule__={}),p.__webfontfontdeckmodule__[q]=function(t,w){for(var u=0,s=w.fonts.length;u<s;++u){var v=w.fonts[u];l.m.push(new aM(v.name,a7("font-weight:"+v.weight+";font-style:"+v.style)))}j(t)},Q(this.c,this.D(q),function(s){s&&j(aj)})):j(aj)};av.prototype.load=function(j){j(this.m)};ay("fontdeck",function(k,j){return new av(j,k)});function f(k,j,l){this.L=k?k:j+a;this.p=[];this.Q=[];this.ca=l||""}var a="//fonts.googleapis.com/css";f.prototype.f=function(){if(0==this.p.length){throw Error("No fonts to load !")}if(-1!=this.L.indexOf("kit=")){return this.L}for(var k=this.p.length,j=[],l=0;l<k;l++){j.push(this.p[l].replace(/ /g,"+"))}k=this.L+"?family="+j.join("%7C");0<this.Q.length&&(k+="&subset="+this.Q.join(","));0<this.ca.length&&(k+="&text="+encodeURIComponent(this.ca));return k};function a3(j){this.p=j;this.$=[];this.I={}}var aW={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},a6={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},aZ={i:"i",italic:"i",n:"n",normal:"n"},aL=RegExp("^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$");a3.prototype.parse=function(){for(var x=this.p.length,w=0;w<x;w++){var v=this.p[w].split(":"),u=v[0].replace(/\+/g," "),t=["n4"];if(2<=v.length){var s;var q=v[1];s=[];if(q){for(var q=q.split(","),p=q.length,l=0;l<p;l++){var k;k=q[l];if(k.match(/^[\w]+$/)){k=aL.exec(k.toLowerCase());var j=void 0;if(k==ak){j=""}else{j=void 0;j=k[1];if(j==ak||""==j){j="4"}else{var y=a6[j],j=y?y:isNaN(j)?"4":j.substr(0,1)}j=[k[2]==ak||""==k[2]?"n":aZ[k[2]],j].join("")}k=j}else{k=""}k&&s.push(k)}}0<s.length&&(t=s);3==v.length&&(v=v[2],s=[],v=!v?s:v.split(","),0<v.length&&(v=aW[v[0]])&&(this.I[u]=v))}this.I[u]||(v=aW[u])&&(this.I[u]=v);for(v=0;v<t.length;v+=1){this.$.push(new aM(u,t[v]))}}};function au(k,j,l){this.a=k;this.c=j;this.d=l}var an={Arimo:al,Cousine:al,Tinos:al};au.prototype.v=function(k,j){j(k.k.w)};au.prototype.load=function(k){var j=this.c;if("MSIE"==this.a.getName()&&this.d.blocking!=al){var p=af(this.W,this,k),l=function(){j.z.body?p():setTimeout(l,0)};l()}else{this.W(k)}};au.prototype.W=function(k){for(var j=this.c,u=new f(this.d.api,ac(j),this.d.text),t=this.d.families,s=t.length,q=0;q<s;q++){var p=t[q].split(":");3==p.length&&u.Q.push(p.pop());var l="";2==p.length&&""!=p[1]&&(l=":");u.p.push(p.join(l))}t=new a3(t);t.parse();ab(j,u.f());k(t.$,t.I,an)};ay("google",function(k,j){var l=(new aS(navigator.userAgent,ao)).parse();return new au(l,j,k)});function at(k,j){this.c=k;this.d=j}var m={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"};at.prototype.v=function(k,j){return j(k.k.w)};at.prototype.load=function(k){ab(this.c,ac(this.c)+"//webfonts.fontslive.com/css/"+this.d.key+".css");for(var j=this.d.families,q=[],p=0,l=j.length;p<l;p++){q.push.apply(q,d(j[p]))}k(q)};function d(k){var j=k.split(":");k=j[0];if(j[1]){for(var t=j[1].split(","),j=[],s=0,q=t.length;s<q;s++){var p=t[s];if(p){var l=m[p];j.push(l?l:p)}}t=[];for(s=0;s<j.length;s+=1){t.push(new aM(k,j[s]))}return t}return[new aM(k)]}ay("ascender",function(k,j){return new at(j,k)});function ar(k,j,l){this.a=k;this.c=j;this.d=l;this.m=[]}ar.prototype.v=function(k,j){var s=this,q=s.d.projectId,p=s.d.version;if(q){var l=s.c.u;Q(this.c,s.D(q,p),function(u){if(u){j(aj)}else{if(l["__mti_fntLst"+q]&&(u=l["__mti_fntLst"+q]())){for(var t=0;t<u.length;t++){s.m.push(new aM(u[t].fontfamily))}}j(k.k.w)}}).id="__MonotypeAPIScript__"+q}else{j(aj)}};ar.prototype.D=function(k,j){var p=ac(this.c),l=(this.d.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return p+"//"+l+"/"+k+".js"+(j?"?v="+j:"")};ar.prototype.load=function(j){j(this.m)};ay("monotype",function(k,j){var l=(new aS(navigator.userAgent,ao)).parse();return new ar(l,j,k)});function a1(k,j){this.c=k;this.d=j;this.m=[]}a1.prototype.D=function(k){var j=ac(this.c);return(this.d.api||j+"//use.typekit.net")+"/"+k+".js"};a1.prototype.v=function(k,j){var s=this.d.id,q=this.d,p=this.c.u,l=this;s?(p.__webfonttypekitmodule__||(p.__webfonttypekitmodule__={}),p.__webfonttypekitmodule__[s]=function(t){t(k,q,function(u,z,y){for(var x=0;x<z.length;x+=1){var w=y[z[x]];if(w){for(var v=0;v<w.length;v+=1){l.m.push(new aM(z[x],w[v]))}}else{l.m.push(new aM(z[x]))}}j(u)})},Q(this.c,this.D(s),function(t){t&&j(aj)},2000)):j(aj)};a1.prototype.load=function(j){j(this.m)};ay("typekit",function(k,j){return new a1(j,k)});a4.WebFontConfig&&ax.load(a4.WebFontConfig)})(this,document);
/*!
 * jScrollPane - v2.0.21 - 2015-02-24
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(function(b){b.fn.jScrollPane=function(a){function d(aM,aL){function aK(u){var t,s,r,n,m,i,g=!1,e=!1;if(a2=u,void 0===a1){m=aM.scrollTop(),i=aM.scrollLeft(),aM.css({overflow:"hidden",padding:0}),a0=aM.innerWidth()+bt,aY=aM.innerHeight(),aM.width(a0),a1=b('<div class="jspPane" />').css("padding",ae).append(aM.children()),aX=b('<div class="jspContainer" />').css({width:a0+"px",height:aY+"px"}).append(a1).appendTo(aM)}else{if(aM.css("width",""),g=a2.stickToBottom&&bj(),e=a2.stickToRight&&bh(),n=aM.innerWidth()+bt!=a0||aM.outerHeight()!=aY,n&&(a0=aM.innerWidth()+bt,aY=aM.innerHeight(),aX.css({width:a0+"px",height:aY+"px"})),!n&&bp==aW&&a1.outerHeight()==aV){return void aM.width(a0)}bp=aW,a1.css("width",""),aM.width(a0),aX.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a1.css("overflow","auto"),aW=u.contentWidth?u.contentWidth:a1[0].scrollWidth,aV=a1[0].scrollHeight,a1.css("overflow",""),aU=aW/a0,aT=aV/aY,aS=aT>1,aR=aU>1,aR||aS?(aM.addClass("jspScrollable"),t=a2.maintainPosition&&(bo||aZ),t&&(s=al(),r=ak()),aI(),aG(),aE(),t&&(an(e?aW-a0:s,!1),ao(g?aV-aY:r,!1)),bc(),bg(),a4(),a2.enableKeyboardNavigation&&a9(),a2.clickOnTrack&&az(),a7(),a2.hijackInternalLinks&&a5()):(aM.removeClass("jspScrollable"),a1.css({top:0,left:0,width:aX.width()-bt}),bf(),ba(),a8(),ay()),a2.autoReinitialise&&!ai?ai=setInterval(function(){aK(a2)},a2.autoReinitialiseDelay):!a2.autoReinitialise&&ai&&clearInterval(ai),m&&aM.scrollTop(0)&&ao(m,!1),i&&aM.scrollLeft(0)&&an(i,!1),aM.trigger("jsp-initialised",[aR||aS])}function aI(){aS&&(aX.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),ax=aX.find(">.jspVerticalBar"),ag=ax.find(">.jspTrack"),aQ=ag.find(">.jspDrag"),a2.showArrows&&(a6=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aB(0,-1)).bind("click.jsp",be),aD=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aB(0,1)).bind("click.jsp",be),a2.arrowScrollOnHover&&(a6.bind("mouseover.jsp",aB(0,-1,a6)),aD.bind("mouseover.jsp",aB(0,1,aD))),aC(ag,a2.verticalArrowPositions,a6,aD)),br=aY,aX.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){br-=b(this).outerHeight()}),aQ.hover(function(){aQ.addClass("jspHover")},function(){aQ.removeClass("jspHover")}).bind("mousedown.jsp",function(e){b("html").bind("dragstart.jsp selectstart.jsp",be),aQ.addClass("jspActive");var f=e.pageY-aQ.position().top;return b("html").bind("mousemove.jsp",function(c){av(c.pageY-f,!1)}).bind("mouseup.jsp mouseleave.jsp",aw),!1}),aH())}function aH(){ag.height(br+"px"),bo=0,ac=a2.verticalGutter+ag.outerWidth(),a1.width(a0-ac-bt);try{0===ax.position().left&&a1.css("margin-left",ac+"px")}catch(c){}}function aG(){aR&&(aX.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),ah=aX.find(">.jspHorizontalBar"),ad=ah.find(">.jspTrack"),aO=ad.find(">.jspDrag"),a2.showArrows&&(bd=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aB(-1,0)).bind("click.jsp",be),aJ=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aB(1,0)).bind("click.jsp",be),a2.arrowScrollOnHover&&(bd.bind("mouseover.jsp",aB(-1,0,bd)),aJ.bind("mouseover.jsp",aB(1,0,aJ))),aC(ad,a2.horizontalArrowPositions,bd,aJ)),aO.hover(function(){aO.addClass("jspHover")},function(){aO.removeClass("jspHover")}).bind("mousedown.jsp",function(e){b("html").bind("dragstart.jsp selectstart.jsp",be),aO.addClass("jspActive");var f=e.pageX-aO.position().left;return b("html").bind("mousemove.jsp",function(c){at(c.pageX-f,!1)}).bind("mouseup.jsp mouseleave.jsp",aw),!1}),bs=aX.innerWidth(),aF())}function aF(){aX.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){bs-=b(this).outerWidth()}),ad.width(bs+"px"),aZ=0}function aE(){if(aR&&aS){var e=ad.outerHeight(),f=ag.outerWidth();br-=e,b(ah).find(">.jspCap:visible,>.jspArrow").each(function(){bs+=b(this).outerWidth()}),bs-=f,aY-=f,a0-=e,ad.parent().append(b('<div class="jspCorner" />').css("width",e+"px")),aH(),aF()}aR&&a1.width(aX.outerWidth()-bt+"px"),aV=a1.outerHeight(),aT=aV/aY,aR&&(bn=Math.ceil(1/aU*bs),bn>a2.horizontalDragMaxWidth?bn=a2.horizontalDragMaxWidth:bn<a2.horizontalDragMinWidth&&(bn=a2.horizontalDragMinWidth),aO.width(bn+"px"),bl=bs-bn,ar(aZ)),aS&&(bm=Math.ceil(1/aT*br),bm>a2.verticalDragMaxHeight?bm=a2.verticalDragMaxHeight:bm<a2.verticalDragMinHeight&&(bm=a2.verticalDragMinHeight),aQ.height(bm+"px"),aP=br-bm,au(bo))}function aC(i,h,n,m){var l,k="before",j="after";"os"==h&&(h=/Mac/.test(navigator.platform)?"after":"split"),h==k?j=h:h==j&&(k=h,l=n,n=m,m=l),i[k](n)[j](m)}function aB(f,e,g){return function(){return aA(f,e,this,g),this.blur(),!1}}function aA(j,q,p,o){p=b(p).addClass("jspActive");var n,m,l=!0,k=function(){0!==j&&bi.scrollByX(j*a2.arrowButtonSpeed),0!==q&&bi.scrollByY(q*a2.arrowButtonSpeed),m=setTimeout(k,l?a2.initialDelay:a2.arrowRepeatFreq),l=!1};k(),n=o?"mouseout.jsp":"mouseup.jsp",o=o||b("html"),o.bind(n,function(){p.removeClass("jspActive"),m&&clearTimeout(m),m=null,o.unbind(n)})}function az(){ay(),aS&&ag.bind("mousedown.jsp",function(j){if(void 0===j.originalTarget||j.originalTarget==j.currentTarget){var q,p=b(this),o=p.offset(),n=j.pageY-o.top-bo,m=!0,l=function(){var c=p.offset(),h=j.pageY-c.top-bm/2,g=aY*a2.scrollPagePercent,f=aP*g/(aV-aY);if(0>n){bo-f>h?bi.scrollByY(-g):av(h)}else{if(!(n>0)){return void k()}h>bo+f?bi.scrollByY(g):av(h)}q=setTimeout(l,m?a2.initialDelay:a2.trackClickRepeatFreq),m=!1},k=function(){q&&clearTimeout(q),q=null,b(document).unbind("mouseup.jsp",k)};return l(),b(document).bind("mouseup.jsp",k),!1}}),aR&&ad.bind("mousedown.jsp",function(j){if(void 0===j.originalTarget||j.originalTarget==j.currentTarget){var q,p=b(this),o=p.offset(),n=j.pageX-o.left-aZ,m=!0,l=function(){var c=p.offset(),h=j.pageX-c.left-bn/2,g=a0*a2.scrollPagePercent,f=bl*g/(aW-a0);if(0>n){aZ-f>h?bi.scrollByX(-g):at(h)}else{if(!(n>0)){return void k()}h>aZ+f?bi.scrollByX(g):at(h)}q=setTimeout(l,m?a2.initialDelay:a2.trackClickRepeatFreq),m=!1},k=function(){q&&clearTimeout(q),q=null,b(document).unbind("mouseup.jsp",k)};return l(),b(document).bind("mouseup.jsp",k),!1}})}function ay(){ad&&ad.unbind("mousedown.jsp"),ag&&ag.unbind("mousedown.jsp")}function aw(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),aQ&&aQ.removeClass("jspActive"),aO&&aO.removeClass("jspActive")}function av(e,c){aS&&(0>e?e=0:e>aP&&(e=aP),void 0===c&&(c=a2.animateScroll),c?bi.animate(aQ,"top",e,au):(aQ.css("top",e),au(e)))}function au(g){void 0===g&&(g=aQ.position().top),aX.scrollTop(0),bo=g||0;var k=0===bo,j=bo==aP,i=g/aP,h=-i*(aV-aY);(aN!=k||af!=j)&&(aN=k,af=j,aM.trigger("jsp-arrow-change",[aN,af,aj,aa])),aq(k,j),a1.css("top",h),aM.trigger("jsp-scroll-y",[-h,k,j]).trigger("scroll")}function at(e,c){aR&&(0>e?e=0:e>bl&&(e=bl),void 0===c&&(c=a2.animateScroll),c?bi.animate(aO,"left",e,ar):(aO.css("left",e),ar(e)))}function ar(g){void 0===g&&(g=aO.position().left),aX.scrollTop(0),aZ=g||0;var k=0===aZ,j=aZ==bl,i=g/bl,h=-i*(aW-a0);(aj!=k||aa!=j)&&(aj=k,aa=j,aM.trigger("jsp-arrow-change",[aN,af,aj,aa])),ap(k,j),a1.css("left",h),aM.trigger("jsp-scroll-x",[-h,k,j]).trigger("scroll")}function aq(e,c){a2.showArrows&&(a6[e?"addClass":"removeClass"]("jspDisabled"),aD[c?"addClass":"removeClass"]("jspDisabled"))}function ap(e,c){a2.showArrows&&(bd[e?"addClass":"removeClass"]("jspDisabled"),aJ[c?"addClass":"removeClass"]("jspDisabled"))}function ao(f,e){var g=f/(aV-aY);av(g*aP,e)}function an(f,e){var g=f/(aW-a0);at(g*bl,e)}function am(E,D,C){var B,A,z,y,x,w,v,u,t,s=0,r=0;try{B=b(E)}catch(q){return}for(A=B.outerHeight(),z=B.outerWidth(),aX.scrollTop(0),aX.scrollLeft(0);!B.is(".jspPane");){if(s+=B.position().top,r+=B.position().left,B=B.offsetParent(),/^body|html$/i.test(B[0].nodeName)){return}}y=ak(),w=y+aY,y>s||D?u=s-a2.horizontalGutter:s+A>w&&(u=s-aY+A+a2.horizontalGutter),isNaN(u)||ao(u,C),x=al(),v=x+a0,x>r||D?t=r-a2.horizontalGutter:r+z>v&&(t=r-a0+z+a2.horizontalGutter),isNaN(t)||an(t,C)}function al(){return -a1.position().left}function ak(){return -a1.position().top}function bj(){var c=aV-aY;return c>20&&c-ak()<10}function bh(){var c=aW-a0;return c>20&&c-al()<10}function bg(){aX.unbind(bk).bind(bk,function(i,h,n,m){aZ||(aZ=0),bo||(bo=0);var l=aZ,k=bo,j=i.deltaFactor||a2.mouseWheelSpeed;return bi.scrollBy(n*j,-m*j,!1),l==aZ&&k==bo})}function bf(){aX.unbind(bk)}function be(){return !1}function bc(){a1.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(c){am(c.target,!1)})}function ba(){a1.find(":input,a").unbind("focus.jsp")}function a9(){function j(){var e=aZ,c=bo;switch(i){case 40:bi.scrollByY(a2.keyboardSpeed,!1);break;case 38:bi.scrollByY(-a2.keyboardSpeed,!1);break;case 34:case 32:bi.scrollByY(aY*a2.scrollPagePercent,!1);break;case 33:bi.scrollByY(-aY*a2.scrollPagePercent,!1);break;case 39:bi.scrollByX(a2.keyboardSpeed,!1);break;case 37:bi.scrollByX(-a2.keyboardSpeed,!1)}return h=e!=aZ||c!=bo}var i,h,g=[];aR&&g.push(ah[0]),aS&&g.push(ax[0]),a1.focus(function(){aM.focus()}),aM.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(c){if(c.target===this||g.length&&b(c.target).closest(g).length){var f=aZ,e=bo;switch(c.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=c.keyCode,j();break;case 35:ao(aV-aY),i=null;break;case 36:ao(0),i=null}return h=c.keyCode==i&&f!=aZ||e!=bo,!h}}).bind("keypress.jsp",function(c){return c.keyCode==i&&j(),!h}),a2.hideFocus?(aM.css("outline","none"),"hideFocus" in aX[0]&&aM.attr("hideFocus",!0)):(aM.css("outline",""),"hideFocus" in aX[0]&&aM.attr("hideFocus",!1))}function a8(){aM.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function a7(){if(location.hash&&location.hash.length>1){var f,i,h=escape(location.hash.substr(1));try{f=b("#"+h+', a[name="'+h+'"]')}catch(g){return}f.length&&a1.find(h)&&(0===aX.scrollTop()?i=setInterval(function(){aX.scrollTop()>0&&(am(f,!0),b(document).scrollTop(aX.position().top),clearInterval(i))},50):(am(f,!0),b(document).scrollTop(aX.position().top)))}}function a5(){b(document.body).data("jspHijack")||(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(u){var t,s,r,q,p,o,n=this.href.substr(0,this.href.indexOf("#")),m=location.href;if(-1!==location.href.indexOf("#")&&(m=location.href.substr(0,location.href.indexOf("#"))),n===m){t=escape(this.href.substr(this.href.indexOf("#")+1));try{s=b("#"+t+', a[name="'+t+'"]')}catch(l){return}s.length&&(r=s.closest(".jspScrollable"),q=r.data("jsp"),q.scrollToElement(s,!0),r[0].scrollIntoView&&(p=b(window).scrollTop(),o=s.offset().top,(p>o||o>p+b(window).height())&&r[0].scrollIntoView()),u.preventDefault())}}))}function a4(){var h,g,l,k,j,i=!1;aX.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var c=e.originalEvent.touches[0];h=al(),g=ak(),l=c.pageX,k=c.pageY,j=!1,i=!0}).bind("touchmove.jsp",function(m){if(i){var f=m.originalEvent.touches[0],e=aZ,c=bo;return bi.scrollTo(h+l-f.pageX,g+k-f.pageY),j=j||Math.abs(l-f.pageX)>5||Math.abs(k-f.pageY)>5,e==aZ&&c==bo}}).bind("touchend.jsp",function(){i=!1}).bind("click.jsp-touchclick",function(){return j?(j=!1,!1):void 0})}function a3(){var e=ak(),f=al();aM.removeClass("jspScrollable").unbind(".jsp"),aM.replaceWith(bq.append(a1.children())),bq.scrollTop(e),bq.scrollLeft(f),ai&&clearInterval(ai)}var a2,a1,a0,aY,aX,aW,aV,aU,aT,aS,aR,aQ,aP,bo,aO,bl,aZ,ax,ag,ac,br,bm,a6,aD,ah,ad,bs,bn,bd,aJ,ai,ae,bt,bp,bi=this,aN=!0,aj=!0,af=!1,aa=!1,bq=aM.clone(!1,!1).empty(),bk=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===aM.css("box-sizing")?(ae=0,bt=0):(ae=aM.css("paddingTop")+" "+aM.css("paddingRight")+" "+aM.css("paddingBottom")+" "+aM.css("paddingLeft"),bt=(parseInt(aM.css("paddingLeft"),10)||0)+(parseInt(aM.css("paddingRight"),10)||0)),b.extend(bi,{reinitialise:function(c){c=b.extend({},a2,c),aK(c)},scrollToElement:function(f,e,g){am(f,e,g)},scrollTo:function(f,e,g){an(f,g),ao(e,g)},scrollToX:function(e,c){an(e,c)},scrollToY:function(e,c){ao(e,c)},scrollToPercentX:function(e,c){an(e*(aW-a0),c)},scrollToPercentY:function(e,c){ao(e*(aV-aY),c)},scrollBy:function(f,e,g){bi.scrollByX(f,g),bi.scrollByY(e,g)},scrollByX:function(f,e){var h=al()+Math[0>f?"floor":"ceil"](f),g=h/(aW-a0);at(g*bl,e)},scrollByY:function(f,e){var h=ak()+Math[0>f?"floor":"ceil"](f),g=h/(aV-aY);av(g*aP,e)},positionDragX:function(e,c){at(e,c)},positionDragY:function(e,c){av(e,c)},animate:function(g,f,j,i){var h={};h[f]=j,g.animate(h,{duration:a2.animateDuration,easing:a2.animateEase,queue:!1,step:i})},getContentPositionX:function(){return al()},getContentPositionY:function(){return ak()},getContentWidth:function(){return aW},getContentHeight:function(){return aV},getPercentScrolledX:function(){return al()/(aW-a0)},getPercentScrolledY:function(){return ak()/(aV-aY)},getIsScrollableH:function(){return aR},getIsScrollableV:function(){return aS},getContentPane:function(){return a1},scrollToBottom:function(c){av(aP,c)},hijackInternalLinks:b.noop,destroy:function(){a3()}}),aK(aL)}return a=b.extend({},b.fn.jScrollPane.defaults,a),b.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed}),this.each(function(){var f=b(this),c=f.data("jsp");c?c.reinitialise(a):(b("script",f).filter('[type="text/javascript"],:not([type])').remove(),c=new d(f,a),f.data("jsp",c))})},b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}});
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var f=c.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var m=k.length;m;){this.addEventListener(k[--m],l,false)}}else{this.onmousewheel=l}c.data(this,"mousewheel-line-height",f.getLineHeight(this));c.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var m=k.length;m;){this.removeEventListener(k[--m],l,false)}}else{this.onmousewheel=null}},getLineHeight:function(i){return parseInt(c(i)["offsetParent" in c.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(i){return c(i).height()},settings:{adjustOldDeltas:true}};c.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function l(i){var n=i||window.event,r=h.call(arguments,1),t=0,p=0,o=0,q=0;i=c.event.fix(n);i.type="mousewheel";if("detail" in n){o=n.detail*-1}if("wheelDelta" in n){o=n.wheelDelta}if("wheelDeltaY" in n){o=n.wheelDeltaY}if("wheelDeltaX" in n){p=n.wheelDeltaX*-1}if("axis" in n&&n.axis===n.HORIZONTAL_AXIS){p=o*-1;o=0}t=o===0?p:o;if("deltaY" in n){o=n.deltaY*-1;t=o}if("deltaX" in n){p=n.deltaX;if(o===0){t=p*-1}}if(o===0&&p===0){return}if(n.deltaMode===1){var s=c.data(this,"mousewheel-line-height");t*=s;o*=s;p*=s}else{if(n.deltaMode===2){var m=c.data(this,"mousewheel-page-height");t*=m;o*=m;p*=m}}q=Math.max(Math.abs(o),Math.abs(p));if(!b||q<b){b=q;if(a(n,q)){b/=40}}if(a(n,q)){t/=40;p/=40;o/=40}t=Math[t>=1?"floor":"ceil"](t/b);p=Math[p>=1?"floor":"ceil"](p/b);o=Math[o>=1?"floor":"ceil"](o/b);i.deltaX=p;i.deltaY=o;i.deltaFactor=b;i.deltaMode=0;r.unshift(i,t,p,o);if(j){clearTimeout(j)}j=setTimeout(g,200);return(c.event.dispatch||c.event.handle).apply(this,r)}function g(){b=null}function a(m,i){return f.settings.adjustOldDeltas&&m.type==="mousewheel"&&i%120===0}}));
/*! jQuery UI - v1.11.4 - 2016-05-09
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(d){function g(l,j){var p,i,m,k=l.nodeName.toLowerCase();return"area"===k?(p=l.parentNode,i=p.name,l.href&&i&&"map"===p.nodeName.toLowerCase()?(m=d("img[usemap='#"+i+"']")[0],!!m&&c(m)):!1):(/^(input|select|textarea|button|object)$/.test(k)?!l.disabled:"a"===k?l.href||j:j)&&c(l)}function c(a){return d.expr.filters.visible(a)&&!d(a).parents().addBack().filter(function(){return"hidden"===d.css(this,"visibility")}).length}d.ui=d.ui||{},d.extend(d.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),d.fn.extend({scrollParent:function(m){var k=this.css("position"),l="absolute"===k,o=m?/(auto|scroll|hidden)/:/(auto|scroll)/,j=this.parents().filter(function(){var a=d(this);return l&&"static"===a.css("position")?!1:o.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==k&&j.length?j:d(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&d(this).removeAttr("id")})}}),d.extend(d.expr[":"],{data:d.expr.createPseudo?d.expr.createPseudo(function(a){return function(e){return !!d.data(e,a)}}):function(k,a,j){return !!d.data(k,j[3])},focusable:function(a){return g(a,!isNaN(d.attr(a,"tabindex")))},tabbable:function(a){var e=d.attr(a,"tabindex"),j=isNaN(e);return(j||e>=0)&&g(a,!j)}}),d("<a>").outerWidth(1).jquery||d.each(["Width","Height"],function(m,k){function l(t,o,r,n){return d.each(q,function(){o-=parseFloat(d.css(t,"padding"+this))||0,r&&(o-=parseFloat(d.css(t,"border"+this+"Width"))||0),n&&(o-=parseFloat(d.css(t,"margin"+this))||0)}),o}var q="Width"===k?["Left","Right"]:["Top","Bottom"],j=k.toLowerCase(),p={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+k]=function(a){return void 0===a?p["inner"+k].call(this):this.each(function(){d(this).css(j,l(this,a)+"px")})},d.fn["outer"+k]=function(a,i){return"number"!=typeof a?p["outer"+k].call(this,a):this.each(function(){d(this).css(j,l(this,a,!0,i)+"px")})}}),d.fn.addBack||(d.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),d("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(d.fn.removeData=function(a){return function(e){return arguments.length?a.call(this,d.camelCase(e)):a.call(this)}}(d.fn.removeData)),d.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),d.fn.extend({focus:function(a){return function(e,j){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){d(i).focus(),j&&j.call(i)},e)}):a.apply(this,arguments)}}(d.fn.focus),disableSelection:function(){var a="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(k){if(void 0!==k){return this.css("zIndex",k)}if(this.length){for(var a,j,l=d(this[0]);l.length&&l[0]!==document;){if(a=l.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(j=parseInt(l.css("zIndex"),10),!isNaN(j)&&0!==j)){return j}l=l.parent()}}return 0}}),d.ui.plugin={add:function(m,k,l){var o,j=d.ui[m].prototype;for(o in l){j.plugins[o]=j.plugins[o]||[],j.plugins[o].push([k,l[o]])}},call:function(l,o,k,m){var p,j=l.plugins[o];if(j&&(m||l.element[0].parentNode&&11!==l.element[0].parentNode.nodeType)){for(p=0;j.length>p;p++){l.options[j[p][0]]&&j[p][1].apply(l.element,k)}}}};var f=0,h=Array.prototype.slice;d.cleanData=function(a){return function(j){var k,m,e;for(e=0;null!=(m=j[e]);e++){try{k=d._data(m,"events"),k&&k.remove&&d(m).triggerHandler("remove")}catch(l){}}a(j)}}(d.cleanData),d.widget=function(u,q,w){var m,v,k,j,t={},p=u.split(".")[0];return u=u.split(".")[1],m=p+"-"+u,w||(w=q,q=d.Widget),d.expr[":"][m.toLowerCase()]=function(a){return !!d.data(a,m)},d[p]=d[p]||{},v=d[p][u],k=d[p][u]=function(a,i){return this._createWidget?(arguments.length&&this._createWidget(a,i),void 0):new k(a,i)},d.extend(k,v,{version:w.version,_proto:d.extend({},w),_childConstructors:[]}),j=new q,j.options=d.widget.extend({},j.options),d.each(w,function(i,a){return d.isFunction(a)?(t[i]=function(){var e=function(){return q.prototype[i].apply(this,arguments)},l=function(n){return q.prototype[i].apply(this,n)};return function(){var r,o=this._super,n=this._superApply;return this._super=e,this._superApply=l,r=a.apply(this,arguments),this._super=o,this._superApply=n,r}}(),void 0):(t[i]=a,void 0)}),k.prototype=d.widget.extend(j,{widgetEventPrefix:v?j.widgetEventPrefix||u:u},t,{constructor:k,namespace:p,widgetName:u,widgetFullName:m}),v?(d.each(v._childConstructors,function(n,a){var l=a.prototype;d.widget(l.namespace+"."+l.widgetName,k,a._proto)}),delete v._childConstructors):q._childConstructors.push(k),d.widget.bridge(u,k),k},d.widget.extend=function(n){for(var k,l,j=h.call(arguments,1),p=0,m=j.length;m>p;p++){for(k in j[p]){l=j[p][k],j[p].hasOwnProperty(k)&&void 0!==l&&(n[k]=d.isPlainObject(l)?d.isPlainObject(n[k])?d.widget.extend({},n[k],l):d.widget.extend({},l):l)}}return n},d.widget.bridge=function(k,a){var j=a.prototype.widgetFullName||k;d.fn[k]=function(e){var m="string"==typeof e,l=h.call(arguments,1),i=this;return m?this.each(function(){var o,p=d.data(this,j);return"instance"===e?(i=p,!1):p?d.isFunction(p[e])&&"_"!==e.charAt(0)?(o=p[e].apply(p,l),o!==p&&void 0!==o?(i=o&&o.jquery?i.pushStack(o.get()):o,!1):void 0):d.error("no such method '"+e+"' for "+k+" widget instance"):d.error("cannot call methods on "+k+" prior to initialization; attempted to call method '"+e+"'")}):(l.length&&(e=d.widget.extend.apply(null,[e].concat(l))),this.each(function(){var n=d.data(this,j);n?(n.option(e||{}),n._init&&n._init()):d.data(this,j,new a(e,this))})),i}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(j,a){a=d(a||this.defaultElement||this)[0],this.element=d(a),this.uuid=f++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=d(),this.hoverable=d(),this.focusable=d(),a!==this&&(d.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===a&&this.destroy()}}),this.document=d(a.style?a.ownerDocument:a.document||a),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this.options=d.widget.extend({},this.options,this._getCreateOptions(),j),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(m,k){var l,q,j,p=m;if(0===arguments.length){return d.widget.extend({},this.options)}if("string"==typeof m){if(p={},l=m.split("."),m=l.shift(),l.length){for(q=p[m]=d.widget.extend({},this.options[m]),j=0;l.length-1>j;j++){q[l[j]]=q[l[j]]||{},q=q[l[j]]}if(m=l.pop(),1===arguments.length){return void 0===q[m]?null:q[m]}q[m]=k}else{if(1===arguments.length){return void 0===this.options[m]?null:this.options[m]}p[m]=k}}return this._setOptions(p),this},_setOptions:function(a){var i;for(i in a){this._setOption(i,a[i])}return this},_setOption:function(a,i){return this.options[a]=i,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!i),i&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(m,k,l){var o,j=this;"boolean"!=typeof m&&(l=k,k=m,m=!1),l?(k=o=d(k),this.bindings=this.bindings.add(k)):(l=k,k=this.element,o=this.widget()),d.each(l,function(n,q){function p(){return m||j.options.disabled!==!0&&!d(this).hasClass("ui-state-disabled")?("string"==typeof q?j[q]:q).apply(j,arguments):void 0}"string"!=typeof q&&(p.guid=q.guid=q.guid||p.guid||d.guid++);var i=n.match(/^([\w:-]*)\s*(.*)$/),a=i[1]+j.eventNamespace,e=i[2];e?o.delegate(e,a,p):k.bind(a,p)})},_off:function(j,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,j.unbind(a).undelegate(a),this.bindings=d(this.bindings.not(j).get()),this.focusable=d(this.focusable.not(j).get()),this.hoverable=d(this.hoverable.not(j).get())},_delay:function(j,l){function a(){return("string"==typeof j?k[j]:j).apply(k,arguments)}var k=this;return setTimeout(a,l||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(i){d(i.currentTarget).addClass("ui-state-hover")},mouseleave:function(i){d(i.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(i){d(i.currentTarget).addClass("ui-state-focus")},focusout:function(i){d(i.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(m,k,l){var q,j,p=this.options[m];if(l=l||{},k=d.Event(k),k.type=(m===this.widgetEventPrefix?m:this.widgetEventPrefix+m).toLowerCase(),k.target=this.element[0],j=k.originalEvent){for(q in j){q in k||(k[q]=j[q])}}return this.element.trigger(k,l),!(d.isFunction(p)&&p.apply(this.element[0],[k].concat(l))===!1||k.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(j,a){d.Widget.prototype["_"+j]=function(i,m,e){"string"==typeof m&&(m={effect:m});var l,k=m?m===!0||"number"==typeof m?a:m.effect||a:j;m=m||{},"number"==typeof m&&(m={duration:m}),l=!d.isEmptyObject(m),m.complete=e,m.delay&&i.delay(m.delay),l&&d.effects&&d.effects.effect[k]?i[j](m):k!==j&&i[k]?i[k](m.duration,m.easing,e):i.queue(function(n){d(this)[j](),e&&e.call(i[0]),n()})}}),d.widget;var b=!1;d(document).mouseup(function(){b=!1}),d.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(e){return a._mouseDown(e)}).bind("click."+this.widgetName,function(e){return !0===d.data(e.target,a.widgetName+".preventClickEvent")?(d.removeData(e.target,a.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(k){if(!b){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(k),this._mouseDownEvent=k;var a=this,j=1===k.which,l="string"==typeof this.options.cancel&&k.target.nodeName?d(k.target).closest(this.options.cancel).length:!1;return j&&!l&&this._mouseCapture(k)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(k)&&this._mouseDelayMet(k)&&(this._mouseStarted=this._mouseStart(k)!==!1,!this._mouseStarted)?(k.preventDefault(),!0):(!0===d.data(k.target,this.widgetName+".preventClickEvent")&&d.removeData(k.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),k.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(a){if(this._mouseMoved){if(d.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button){return this._mouseUp(a)}if(!a.which){return this._mouseUp(a)}}return(a.which||a.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted)},_mouseUp:function(a){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&d.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),b=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}}),d.widget("ui.slider",d.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var m,k,l=this.options,q=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),j="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",p=[];for(k=l.values&&l.values.length||1,q.length>k&&(q.slice(k).remove(),q=q.slice(0,k)),m=q.length;k>m;m++){p.push(j)}this.handles=q.add(d(p.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(a){d(this).data("ui-slider-handle-index",a)})},_createRange:function(){var j=this.options,a="";j.range?(j.range===!0&&(j.values?j.values.length&&2!==j.values.length?j.values=[j.values[0],j.values[0]]:d.isArray(j.values)&&(j.values=j.values.slice(0)):j.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=d("<div></div>").appendTo(this.element),a="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(a+("min"===j.range||"max"===j.range?" ui-slider-range-"+j.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(v){var q,z,m,x,k,j,t,p,y=this,w=this.options;return w.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),q={x:v.pageX,y:v.pageY},z=this._normValueFromMouse(q),m=this._valueMax()-this._valueMin()+1,this.handles.each(function(l){var a=Math.abs(z-y.values(l));(m>a||m===a&&(l===y._lastChangedValue||y.values(l)===w.min))&&(m=a,x=d(this),k=l)}),j=this._start(v,k),j===!1?!1:(this._mouseSliding=!0,this._handleIndex=k,x.addClass("ui-state-active").focus(),t=x.offset(),p=!d(v.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=p?{left:0,top:0}:{left:v.pageX-t.left-x.width()/2,top:v.pageY-t.top-x.height()/2-(parseInt(x.css("borderTopWidth"),10)||0)-(parseInt(x.css("borderBottomWidth"),10)||0)+(parseInt(x.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(v,k,z),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(j){var k={x:j.pageX,y:j.pageY},a=this._normValueFromMouse(k);return this._slide(j,this._handleIndex,a),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(l){var o,k,m,p,j;return"horizontal"===this.orientation?(o=this.elementSize.width,k=l.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(o=this.elementSize.height,k=l.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),m=k/o,m>1&&(m=1),0>m&&(m=0),"vertical"===this.orientation&&(m=1-m),p=this._valueMax()-this._valueMin(),j=this._valueMin()+m*p,this._trimAlignValue(j)},_start:function(j,k){var a={handle:this.handles[k],value:this.value()};return this.options.values&&this.options.values.length&&(a.value=this.values(k),a.values=this.values()),this._trigger("start",j,a)},_slide:function(l,o,k){var m,p,j;this.options.values&&this.options.values.length?(m=this.values(o?0:1),2===this.options.values.length&&this.options.range===!0&&(0===o&&k>m||1===o&&m>k)&&(k=m),k!==this.values(o)&&(p=this.values(),p[o]=k,j=this._trigger("slide",l,{handle:this.handles[o],value:k,values:p}),m=this.values(o?0:1),j!==!1&&this.values(o,k))):k!==this.value()&&(j=this._trigger("slide",l,{handle:this.handles[o],value:k}),j!==!1&&this.value(k))},_stop:function(j,k){var a={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(k),a.values=this.values()),this._trigger("stop",j,a)},_change:function(j,k){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[k],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(k),a.values=this.values()),this._lastChangedValue=k,this._trigger("change",j,a)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(m,k){var l,o,j;if(arguments.length>1){return this.options.values[m]=this._trimAlignValue(k),this._refreshValue(),this._change(null,m),void 0}if(!arguments.length){return this._values()}if(!d.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(m):this.value()}for(l=this.options.values,o=arguments[0],j=0;l.length>j;j+=1){l[j]=this._trimAlignValue(o[j]),this._change(null,j)}this._refreshValue()},_setOption:function(k,a){var j,l=0;switch("range"===k&&this.options.range===!0&&("min"===a?(this.options.value=this._values(0),this.options.values=null):"max"===a&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),d.isArray(this.options.values)&&(l=this.options.values.length),"disabled"===k&&this.element.toggleClass("ui-state-disabled",!!a),this._super(k,a),k){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===a?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),j=0;l>j;j+=1){this._change(null,j)}this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(j){var l,a,k;if(arguments.length){return l=this.options.values[j],l=this._trimAlignValue(l)}if(this.options.values&&this.options.values.length){for(a=this.options.values.slice(),k=0;a.length>k;k+=1){a[k]=this._trimAlignValue(a[k])}return a}return[]},_trimAlignValue:function(j){if(this._valueMin()>=j){return this._valueMin()}if(j>=this._valueMax()){return this._valueMax()}var l=this.options.step>0?this.options.step:1,a=(j-this._valueMin())%l,k=j-a;return 2*Math.abs(a)>=l&&(k+=a>0?l:-l),parseFloat(k.toFixed(5))},_calculateNewMax:function(){var j=this.options.max,l=this._valueMin(),a=this.options.step,k=Math.floor(+(j-l).toFixed(this._precision())/a)*a;j=k+l,this.max=parseFloat(j.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(j){var k=""+j,a=k.indexOf(".");return -1===a?0:k.length-a-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var v,q,y,m,w,k=this.options.range,j=this.options,t=this,p=this._animateOff?!1:j.animate,x={};this.options.values&&this.options.values.length?this.handles.each(function(a){q=100*((t.values(a)-t._valueMin())/(t._valueMax()-t._valueMin())),x["horizontal"===t.orientation?"left":"bottom"]=q+"%",d(this).stop(1,1)[p?"animate":"css"](x,j.animate),t.options.range===!0&&("horizontal"===t.orientation?(0===a&&t.range.stop(1,1)[p?"animate":"css"]({left:q+"%"},j.animate),1===a&&t.range[p?"animate":"css"]({width:q-v+"%"},{queue:!1,duration:j.animate})):(0===a&&t.range.stop(1,1)[p?"animate":"css"]({bottom:q+"%"},j.animate),1===a&&t.range[p?"animate":"css"]({height:q-v+"%"},{queue:!1,duration:j.animate}))),v=q}):(y=this.value(),m=this._valueMin(),w=this._valueMax(),q=w!==m?100*((y-m)/(w-m)):0,x["horizontal"===this.orientation?"left":"bottom"]=q+"%",this.handle.stop(1,1)[p?"animate":"css"](x,j.animate),"min"===k&&"horizontal"===this.orientation&&this.range.stop(1,1)[p?"animate":"css"]({width:q+"%"},j.animate),"max"===k&&"horizontal"===this.orientation&&this.range[p?"animate":"css"]({width:100-q+"%"},{queue:!1,duration:j.animate}),"min"===k&&"vertical"===this.orientation&&this.range.stop(1,1)[p?"animate":"css"]({height:q+"%"},j.animate),"max"===k&&"vertical"===this.orientation&&this.range[p?"animate":"css"]({height:100-q+"%"},{queue:!1,duration:j.animate}))},_handleEvents:{keydown:function(m){var k,l,q,j,p=d(m.target).data("ui-slider-handle-index");switch(m.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(m.preventDefault(),!this._keySliding&&(this._keySliding=!0,d(m.target).addClass("ui-state-active"),k=this._start(m,p),k===!1)){return}}switch(j=this.options.step,l=q=this.options.values&&this.options.values.length?this.values(p):this.value(),m.keyCode){case d.ui.keyCode.HOME:q=this._valueMin();break;case d.ui.keyCode.END:q=this._valueMax();break;case d.ui.keyCode.PAGE_UP:q=this._trimAlignValue(l+(this._valueMax()-this._valueMin())/this.numPages);break;case d.ui.keyCode.PAGE_DOWN:q=this._trimAlignValue(l-(this._valueMax()-this._valueMin())/this.numPages);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(l===this._valueMax()){return}q=this._trimAlignValue(l+j);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(l===this._valueMin()){return}q=this._trimAlignValue(l-j)}this._slide(m,p,q)},keyup:function(j){var a=d(j.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(j,a),this._change(j,a),d(j.target).removeClass("ui-state-active"))}}})});var Util={checkUrlExists:function(b){if(b==null||b.length==0){return false}var a;try{a=$.ajax({type:"GET",url:b,async:false}).status}catch(c){return false}return a!=404&&a!=0},charAt:function(b,a){if(!(typeof b=="string"||b instanceof String)){return}if(skinManager.isIE7()){var c=b.split("");if(c.length<=a){return}return c[a]}else{return b[a]}},replaceCharAtIndex:function(c,a,b){return c.substr(0,a)+b+c.substr(a+b.length)},indexOf:function(c,b,d){if(typeof c==="string"&&typeof b==="string"){if(c.length>b.length){return -1}for(var a=(d||0);a<=(b.length-c.length);a++){if(b.slice(a,a+c.length)==c){return a}}}else{for(var a=(d||0);a<b.length;a++){if(b[a]==c){return a}}}return -1},objectKeys:function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b},filter:function(f,g){if(f===void 0||f===null){throw new TypeError()}var e=Object(f);var a=e.length>>>0;if(typeof g!=="function"){throw new TypeError()}var d=[];var b=arguments.length>=3?arguments[2]:void 0;for(var c=0;c<a;c++){if(c in e){var h=e[c];if(g.call(b,h,c,e)){d.push(h)}}}return d},urlMerge:function(b,a){if(b==undefined||b==null||b.length==0){return""}if(b.slice(-1)!="/"){return b+"/"+a}return b+a},secToTimerString:function(c){c=parseInt(c);var b=parseInt(c/60);c=c-b*60;var a=parseInt(b/60);b=b-a*60;return((a>0)?this.timeToString(a)+":":"")+this.timeToString(b)+":"+this.timeToString(c)},msecToTimerString:function(b){b=Math.floor(b);var a=Math.round(b/1000);return secToTimerString(a)},timeToString:function(a){return((a<10)?"0":"")+a.toString()},getClientX:function(a){if(skinManager.isMobile()){if(a.originalEvent.touches[0]){return a.originalEvent.touches[0].clientX}else{return a.originalEvent.changedTouches[0].clientX}}else{return a.clientX}},getClientY:function(a){if(skinManager.isMobile()){if(a.originalEvent.touches[0]){return a.originalEvent.touches[0].clientY}else{return a.originalEvent.changedTouches[0].clientY}}else{return a.clientY}},isEmbeded:function(){try{return window.self!==window.top}catch(a){return true}},isIE11embedFullScreen:function(){return skinManager.isIE11()&&uniPlayer.getIsFullScreen()&&uniPlayer.isIframe()},getQueryVariable:function(a){var c=window.location.search.substring(1);var d=c.split("&");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(decodeURIComponent(e[0])==a){return decodeURIComponent(e[1])}}},getBooleanValue:function(a){return(a=="1"||a.toLowerCase()=="true")},isFloatEqual:function(d,c,e){return(Math.abs(d-c))<=e},removeURLParameter:function(b,j){var h=b.split("#");var d=h[0].split("?");if(d.length>=2){var f=d.shift();var a=d.join("?");var g=encodeURIComponent(j)+"=";var c=a.split(/[&;]/g);for(var e=c.length;e-->0;){if(c[e].lastIndexOf(g,0)!==-1){c.splice(e,1)}}b=f+(c.length>0?"?"+c.join("&"):"");if(h[1]){b+="#"+h[1]}}return b},appendQueryVariable:function(b,c,d){var a=b.split("?")[1]?"&":"?";b+=(a+c+"="+d);return b},clone:function(d){var e;if(null==d||"object"!=typeof d){return d}if(d instanceof Date){e=new Date();e.setTime(d.getTime());return e}if(d instanceof Array){e=[];for(var c=0,b=d.length;c<b;c++){e[c]=Util.clone(d[c])}return e}if(d instanceof Object){e={};for(var a in d){if(d.hasOwnProperty(a)){e[a]=Util.clone(d[a])}}return e}throw new Error("Unable to copy obj! Its type isn't supported.")}};String.prototype.format=function(){var a=arguments;return this.replace(/\{\{|\}\}|\{(\d+)\}/g,function(b,c){if(b=="{{"){return"{"}if(b=="}}"){return"}"}return a[c]})};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}var Rect=Base.extend({_left:null,_top:null,_right:null,_bottom:null,constructor:function(d,c,b,a){this._left=d;this._top=c;this._right=b;this._bottom=a},width:function(){return this._right-this._left},height:function(){return this._bottom-this._top},union:function(b){var a=new Rect();a._left=this._left<b._left?this._left:b._left;a._top=this._top<b._top?this._top:b._top;a._right=this._right>b._right?this._right:b._right;a._bottom=this._bottom>b._bottom?this._bottom:b._bottom;return a},inflate:function(b){var a=new Rect();a._left=this._left-b;if(a._left<0){a._left=0}a._top=this._top-b;if(a._top<0){a._top=0}a._right=this._right+b;a._bottom=this._bottom+b;return a}});
/*! doc-player - v1.0.1 - 2022-03-15 */
var docPlayerObj=null,docObj=null,DocPlayer=Base.extend({_targetElement:null,_doc:null,_docData:null,_docEventListener:null,_eventTarget:null,_mode:null,_pdfWorkerSrc:null,_cmapUrl:null,constructor:function(){},addEventTarget:function(b){this._eventTarget=b},setPDFWorkerSrc:function(b){this._pdfWorkerSrc=b},setCmapUrl:function(b){this._cmapUrl=b},init:function(f,e,h,g){switch(this._targetElement=f,this._docData=e,this._mode=this.getActualPlayerMode(h),this.initDocEventListener(),this._mode){case DocPlayerMode.PDF:this._doc=new DocPDF,this._doc.setPDFWorkerSrc(this._pdfWorkerSrc),this._doc.setCmapUrl(this._cmapUrl);break;case DocPlayerMode.IMAGE:this._doc=new DocImage}this.setGlobalDocVariable(),this._doc.addEventTarget(this._docEventListener),this._doc.init(f,e,h,g)},getActualPlayerMode:function(b){return this.isPDFDataSetted()&&!this.isImageDataSetted()?DocPlayerMode.PDF:!this.isPDFDataSetted()&&this.isImageDataSetted()?DocPlayerMode.IMAGE:b},isPDFDataSetted:function(){return this._docData._pdfUrl},isImageDataSetted:function(){var b=this._docData._imageList;return b&&b._imageSrcsList&&b._imageSrcsList.length>0},initDocEventListener:function(){this._docEventListener=new EventTargetArgs,this._docEventListener.addListener(DocPlayerEvent.INITIALIZED,this.onDocInitialized),this._docEventListener.addListener(DocPlayerEvent.DOC_LOAD_PROGRESS,this.onDocLoadProgress),this._docEventListener.addListener(DocPlayerEvent.PAGE_RENDERED,this.onDocPageRendered),this._docEventListener.addListener(DocPlayerEvent.PAGE_CHANGE,this.onDocCurrPageChange),this._docEventListener.addListener(DocPlayerEvent.ERROR,this.onDocError)},setGlobalDocVariable:function(){docPlayerObj=this,docObj=this._doc},release:function(){},isInitialized:function(){return !!this._doc&&this._doc.isInitialized()},setPage:function(b){this._doc&&this._doc.setPage(b)},getCurrPageNum:function(){return this._doc?this._doc.getCurrPageNum():0},getTotalPageCnt:function(){return this._doc?this._doc.getTotalPageCnt():0},getDefaultWidth:function(){return this._doc?this._doc.getDefaultWidth():0},getDefaultHeight:function(){return this._doc?this._doc.getDefaultHeight():0},getCurrPageWidth:function(){return this._doc?this._doc.getCurrPageWidth():0},getCurrPageHeight:function(){return this._doc?this._doc.getCurrPageHeight():0},nextPage:function(){this._doc&&this._doc.nextPage()},prevPage:function(){this._doc&&this._doc.prevPage()},upScale:function(){this._doc&&this._doc.upScale()},downScale:function(){this._doc&&this._doc.downScale()},setScale:function(e,d,f){this._doc&&this._doc.setScale(e,d,f)},changeScale:function(e,d,f){this._doc&&this._doc.changeScale(e,d,f)},getCurrScale:function(){return this._doc?this._doc.getCurrScale():0},getCurrRefinedScale:function(){return this._doc?this._doc.getCurrRefinedScale():0},setUseTextLayer:function(b){this._doc&&this._doc.setUseTextLayer(b)},setUsePageMargin:function(b){this._doc&&this._doc.setUsePageMargin(b)},setUseScroll:function(b){this._doc&&this._doc.setUseScroll(b)},getLayoutMode:function(){if(this._doc){return this._doc.getLayoutMode()}},setLayoutMode:function(b){this._doc&&this._doc.setLayoutMode(b)},getPlayerMode:function(){return this._mode},resize:function(){this._doc&&this._doc.resize()},onDocInitialized:function(b){docPlayerObj._eventTarget&&docPlayerObj._eventTarget.fire(DocPlayerEvent.INITIALIZED)},onDocLoadProgress:function(d,c){docPlayerObj._eventTarget&&docPlayerObj._eventTarget.fire(DocPlayerEvent.DOC_LOAD_PROGRESS,c)},onDocPageRendered:function(d,c){docPlayerObj._eventTarget&&docPlayerObj._eventTarget.fire(DocPlayerEvent.PAGE_RENDERED,c)},onDocCurrPageChange:function(d,c){docPlayerObj._eventTarget&&docPlayerObj._eventTarget.fire(DocPlayerEvent.PAGE_CHANGE,c)},onDocError:function(d,c){docPlayerObj._eventTarget&&docPlayerObj._eventTarget.fire(DocPlayerEvent.ERROR,c)}}),DocPlayerMode={IMAGE:"docPlyaerModeImage",PDF:"docPlayerModePdf"},DocPlayerEvent={INITIALIZED:"doc_player_event_initialized",DOC_LOAD_PROGRESS:"doc_load_progress",PAGE_CHANGE:"page_change",PAGE_RENDERED:"page_rendered",ERROR:"error"},DocBase=Base.extend({_targetElement:null,_docData:null,_mode:null,_totalPageCnt:0,_currPageNum:0,_bookCurrPageNum:0,_layoutMode:null,_scale:0,_refinedScale:0,_pages:[],_pageLoadManager:null,_docLayoutManager:null,_docScaleManager:null,_eventTarget:null,_isInitialized:!1,_defaultWidth:null,_defaultHeight:null,_isScalable:!0,_useTextLayer:!0,_useHardCover:!0,_usePageMargin:!0,_useScroll:!0,_topMarginForScrollMode:0,_customPageMargins:{},_customBundleMargins:{},constructor:function(){this._pageLoadManager=new PageLoadManager,this._docLayoutManager=new DocLayoutManager,this._docScaleManager=new DocScaleManager},init:function(f,e,h,g){this._targetElement=f,this._docData=e,this._mode=h,g||(g={}),this._currPageNum=g.page||1,this._scale=g.scale||1,this._refinedScale=this._scale,this._layoutMode=g.layoutMode||DocLayoutMode.DEFAULT,this._topMarginForScrollMode=g.topMarginForScrollMode||0,this._useTextLayer=void 0==g.useTextLayer||g.useTextLayer,this._useHardCover=void 0==g.useHardCover||g.useHardCover,this._docLayoutManager.setUseHardCover(this._useHardCover),this._useScroll=void 0==g.useScroll||g.useScroll,this._customMargins=g._customMargins,this._isScalable=this._layoutMode!=DocLayoutMode.TWO_PAGE_BOOK,this._customPageMargins=g.customPageMargins||{},this._customBundleMargins=g.customBundleMargins||{},this._usePageMargin=void 0==g.usePageMargin||g.usePageMargin,this.setUsePageMargin(this._usePageMargin)},initializeScale:function(d,c){this._docScaleManager.init(this._targetElement,d,c),this._docScaleManager.isValidScale(this._scale)||(this.scale=1),this._refinedScale=this._docScaleManager.refineScale(this._scale)},isInitialized:function(){return this._isInitialized},setPage:function(b){},setBookPage:function(d){if((!this._useHardCover||d!=this._bookCurrPageNum)&&!(d<0)&&!(this._useHardCover&&d>this._totalPageCnt+2)&&(this._useHardCover||!(d>this._totalPageCnt))){0==d&&(d=1);var c;if(this._useHardCover){c=d-2,1!=c&&(c-=c%2),1==d?this._bookCurrPageNum=1:this._bookCurrPageNum=d-d%2}else{if(c=d,1!=c&&(c-=c%2),c==this._bookCurrPageNum){return}this._bookCurrPageNum=c}this.setPage(c),this._useHardCover&&(1!=d&&2!=d||this.getDocLayoutManager().setBookPage(d-2))}},getCurrPageNum:function(){return this._useHardCover||this._layoutMode!=DocLayoutMode.TWO_PAGE_BOOK?this._currPageNum:this._bookCurrPageNum},getTotalPageCnt:function(){return this._totalPageCnt},getDefaultWidth:function(){return this._defaultWidth},getDefaultHeight:function(){return this._defaultHeight},getCurrPageWidth:function(){return this._defaultWidth*this._refinedScale},getCurrPageHeight:function(){return this._defaultHeight*this._refinedScale},nextPage:function(){var b;if(this._layoutMode==DocLayoutMode.TWO_PAGE||this._layoutMode==DocLayoutMode.TWO_PAGE_SCROLL){b=this._currPageNum+2}else{if(this._layoutMode==DocLayoutMode.TWO_PAGE_BOOK){return b=this._bookCurrPageNum+2,void this.setBookPage(b)}b=this._currPageNum+1}this.setPage(b)},prevPage:function(){var b;if(this._layoutMode==DocLayoutMode.TWO_PAGE||this._layoutMode==DocLayoutMode.TWO_PAGE_SCROLL){b=this._currPageNum-2}else{if(this._layoutMode==DocLayoutMode.TWO_PAGE_BOOK){return b=this._bookCurrPageNum-2,void this.setBookPage(b)}b=this._currPageNum-1}b<1||this.setPage(b)},upScale:function(){if(this.isInitialized()){var b=this._docScaleManager.getUpScaleValue(this._scale);this._docScaleManager.isValidScale(b)&&this.setScale(b)}},downScale:function(){if(this.isInitialized()){var b=this._docScaleManager.getDownScaleValue(this._scale);this._docScaleManager.isValidScale(b)&&this.setScale(b)}},setScale:function(b){},getCurrScale:function(){return this._scale},getCurrRefinedScale:function(){return this._refinedScale},setUseTextLayer:function(b){this._useTextLayer=b},resize:function(){this.isInitialized()&&(DocScaleValue.isDocScaleValue(this._scale)&&this.setScale(this._scale),this._docLayoutManager.resize())},getLayoutMode:function(){return this._layoutMode},setLayoutMode:function(b){},addEventTarget:function(b){this._eventTarget=b},getPageObj:function(b){if(this._pages){return this._pages[b]}},getDocLayoutManager:function(){return this._docLayoutManager},getPageLoadManager:function(){return this._pageLoadManager},getRenderCandidatePages:function(r){if(r){for(var q=[],p=0,o=r.length;p<o;p++){q.push(this.getPageObj(r[p]))}for(var n=this.getNumOfPreLoad(),m=r[r.length-1],p=1;p<=n;p++){var l=m+p;if(l>this._totalPageCnt){break}q.push(this.getPageObj(l))}for(var k=r[0],p=1;p<=n;p++){var j=k-p;if(j<1){break}q.push(this.getPageObj(j))}return q}},getNumOfPreLoad:function(){switch(this._layoutMode){case DocLayoutMode.TWO_PAGE:case DocLayoutMode.TWO_PAGE_SCROLL:return 2;case DocLayoutMode.TWO_PAGE_BOOK:return 8;default:return 1}},onCurrPageChanged:function(b){docObj._currPageNum=b,docObj.notifyPageChange(b)},notifyInitialized:function(){this._eventTarget&&this._eventTarget.fire(DocPlayerEvent.INITIALIZED)},notifyDocLoadProgress:function(b){this._eventTarget&&this._eventTarget.fire(DocPlayerEvent.DOC_LOAD_PROGRESS,b)},notifyPageRendered:function(b){this._eventTarget&&this._eventTarget.fire(DocPlayerEvent.PAGE_RENDERED,b)},notifyPageChange:function(b){this._eventTarget&&this._eventTarget.fire(DocPlayerEvent.PAGE_CHANGE,b)},notifyError:function(b){this._eventTarget&&this._eventTarget.fire(DocPlayerEvent.ERROR,b)},setUsePageMargin:function(d){this._usePageMargin=d;for(var c in DocContainerBorderMargin){d?(DocContainerBorderMargin[c]=DefaultDocContainerBorderMargin[c],this._customPageMargins&&this._customPageMargins[c]&&(DocContainerBorderMargin[c]=this._customPageMargins[c])):DocContainerBorderMargin[c]=[0,0,0,0]}for(var c in DocBundleBorderMargin){d?(DocBundleBorderMargin[c]=DefaultDocBundleBorderMargin[c],this._customBundleMargins&&this._customBundleMargins[c]&&(DocContainerBorderMargin[c]=this._customBundleMargins[c])):DocContainerBorderMargin[c]=[0,0,0,0]}this.isInitialized()&&this.setLayoutMode(this._layoutMode)},setUseScroll:function(b){this._useScroll=b,this.isInitialized()&&(this._docLayoutManager.setUseScroll(b),this.setLayoutMode(this._layoutMode))},setScrollVisibilityForMode:function(){var b=$("#doc-player-container");if(b&&this._useScroll){switch(b.css("overflow","auto"),b.css("overflow-x",""),b.css("overflow-y",""),this._scale){case DocScaleValue.FIT_TO_WIDTH:b.css("overflow-x","hidden");break;case DocScaleValue.FIT_TO_SCALE:this._layoutMode==DocLayoutMode.ONE_PAGE||this._layoutMode==DocLayoutMode.TWO_PAGE?b.css("overflow","hidden"):b.css("overflow-x","hidden")}}}},{SCALE_FACTOR:0.1}),DocImage=DocBase.extend({_imageList:null,_scale:null,init:function(f,e,h,g){this.base(f,e,h,g),this.isImageExist(e)},isImageExist:function(f){var e=this,h=f._imageList._imageSrcsList[0][0]._imageSrc;try{"file:"==location.protocol&&e.imageExist()}catch(g){console.log(g)}$.ajax({url:h,type:"GET",error:function(){e.notifyError(DocError.FAIL_TO_LOAD_IMAGE)},success:function(){e.imageExist()}})},imageExist:function(){var d=this._docData;this._imageList=d._imageList,this._totalPageCnt=this._imageList._imageSrcsList.length,this.setDefaultSize(),this.initializeScale(this._defaultWidth,this._defaultHeight),this.initializeLayout(this._defaultWidth,this._defaultHeight),this.initializePageList(),this.setPage(this._currPageNum),this.setScrollVisibilityForMode(),this._isInitialized=!0;var c=this;setTimeout(function(){c.notifyDocLoadProgress(1),c.notifyInitialized()},10)},setDefaultSize:function(){this._defaultWidth=this.getDefaultWidth(this._imageList),this._defaultHeight=this.getDefaultHeight(this._imageList)},getDefaultWidth:function(e){if(this._defaultWidth||!e){return this._defaultWidth}var d=e._imageFormatList;for(var f in d){if("basic"==d[f]._formatName){return d[f]._width}}return -1},getDefaultHeight:function(e){if(this._defaultHeight||!e){return this._defaultHeight}var d=e._imageFormatList;for(var f in d){if("basic"==d[f]._formatName){return d[f]._height}}return -1},initializeLayout:function(d,c){this._docLayoutManager.init(this._targetElement,this._totalPageCnt,d,c,this._topMarginForScrollMode),this._docLayoutManager.setLayoutMode(this._layoutMode),this._docLayoutManager.setScale(this._refinedScale),this._docLayoutManager.setOnScrollTopChangedEvent(this.onLayoutScrollChanged),this._docLayoutManager.setOnPageChangedEvent(this.onCurrPageChanged)},initializePageList:function(){for(var d=1;d<=this._totalPageCnt;d++){var c=new PageImage;c.init(d,this._docLayoutManager.getPageContainer(d),this._refinedScale,"basic",this._imageList._imageFormatList,this._imageList._imageSrcsList[d-1]),c.setOnRenderFinished(this.onPageRenderFinished),this._pages[d]=c}},setPage:function(b){b<1||b>this._totalPageCnt||(this._currPageNum=b,this._docLayoutManager.setPage(b),this.update())},setScale:function(b){this._docScaleManager.isValidScale(b)&&(this._scale=b,this._refinedScale=this._docScaleManager.refineScale(b),this._docLayoutManager.setScale(this._refinedScale),this.reloadBufferPages(this._refinedScale),this.update(),this.setScrollVisibilityForMode())},changeScale:function(e,d,f){this._docScaleManager.isValidScale(e)&&(this._scale=e,this._refinedScale=this._docScaleManager.refineScale(e),this._docLayoutManager.changeScale(this._refinedScale,d,f))},reloadBufferPages:function(e){if(this._pageLoadManager){for(var d=this._pageLoadManager.getBuffer(),f=d.length-1;f>=0;f--){d[f].render(e)}}},setLayoutMode:function(b){this._docLayoutManager&&(this._layoutMode=b,this._docLayoutManager.setLayoutMode(b)),DocScaleValue.isDocScaleValue(this._scale)?this.setScale(this._scale):b==DocLayoutMode.TWO_PAGE_BOOK?this.setScale(DocScaleValue.FIT_TO_SCALE):this.update(),this.setScrollVisibilityForMode()},update:function(){var d=this._docLayoutManager.getVisiblePages(),c=this.getRenderCandidatePages(d);this._pageLoadManager.resizeBuffer(c.length),this._pageLoadManager.renderHighestPriority(c,this._refinedScale)},onLayoutScrollChanged:function(b){docObj.update()},onPageRenderFinished:function(){var e=docObj,d=e._docLayoutManager.getVisiblePages(),f=e.getRenderCandidatePages(d);e._pageLoadManager.renderHighestPriority(f,e._refinedScale)}}),DocPDF=DocBase.extend({_pdfDoc:null,_pdfWorkerSrc:null,_cmapUrl:null,init:function(h,g,l,k){if(this.base(h,g,l,k),!window.pdfjsLib){return void this.notifyError(DocError.PDF_JS_NOT_SUPPORTED)}this._pdfWorkerSrc&&(pdfjsLib.GlobalWorkerOptions.workerSrc=this._pdfWorkerSrc);var j;j=this._cmapUrl?pdfjsLib.getDocument({url:g._pdfUrl,cMapUrl:this._cmapUrl,cMapPacked:!0}):pdfjsLib.getDocument({url:g._pdfUrl});var i=this;j.onProgress=function(b){i.notifyDocLoadProgress(b.loaded/b.total)},j.promise.then(function(b){i.pdfDocumentLoaded(b)})["catch"](function(b){i.notifyError(DocError.FAIL_TO_LOAD_PDF)})},setPDFWorkerSrc:function(b){this._pdfWorkerSrc=b},setCmapUrl:function(b){this._cmapUrl=b},pdfDocumentLoaded:function(b){this._pdfDoc=b,this._totalPageCnt=b.numPages,this.getOnePageInfoForInitialize()},getOnePageInfoForInitialize:function(){this._pdfDoc.getPage(1).then(function(d){var c=d.getViewport({scale:1});this._defaultWidth=c.width,this._defaultHeight=c.height,this.initializeScale(this._defaultWidth,this._defaultHeight),this.initializeLayout(this._defaultWidth,this._defaultHeight),this.initializePageList()}.bind(this))},initializeLayout:function(d,c){this._docLayoutManager.init(this._targetElement,this._pdfDoc.numPages,d,c,this._topMarginForScrollMode),this._docLayoutManager.setLayoutMode(this._layoutMode),this._docLayoutManager.setScale(this._refinedScale),this._docLayoutManager.setOnScrollTopChangedEvent(this.onLayoutScrollChanged),this._docLayoutManager.setOnPageChangedEvent(this.onCurrPageChanged)},initializePageList:function(){for(var d=0,c=1;c<=this._pdfDoc.numPages;c++){this._pdfDoc.getPage(c).then(function(a,e){this.initializePage(a,e),++d==this._pdfDoc.numPages&&this.initializeCompleted()}.bind(this,c))}},initializePage:function(e,d){var f=new PagePDF;f.init(e,this._docLayoutManager.getPageContainer(e),this._refinedScale,this._pdfDoc,d,this.getPagesSmallestImage(e)),f.setOnRenderStarted(this.onPageRenderStarted),f.setOnRenderFinished(this.onPageRenderFinished),this._pages[e]=f},getPagesSmallestImage:function(j){var i=null,p=this._docData._imageList;if(!p){return null}if(!p._imageFormatList){return null}if(!p._imageSrcsList){return null}for(var o=null,n=-1,m=p._imageFormatList.length-1;m>=0;m--){var l=p._imageFormatList[m];(n<0||n>l._height)&&(n=l._height,o=l._formatName)}var k=p._imageSrcsList[j-1];if(!k){return null}for(var m=k.length-1;m>=0;m--){if(k[m]._formatName==o){i=k[m]._imageSrc;break}}return i},initializeCompleted:function(){this._isInitialized=!0,this.setPage(this._currPageNum),this.setScrollVisibilityForMode(),this.notifyInitialized()},setPage:function(b){b<1||b>this._totalPageCnt||(this._currPageNum=b,this._docLayoutManager.setPage(b),this.update())},setLayoutMode:function(b){this._docLayoutManager&&(this._layoutMode=b,this._docLayoutManager.setLayoutMode(b)),DocScaleValue.isDocScaleValue(this._scale)&&this._isScalable?this.setScale(this._scale):b==DocLayoutMode.TWO_PAGE_BOOK?this.setScale(DocScaleValue.FIT_TO_SCALE):this.update(),this.setScrollVisibilityForMode()},setScale:function(e,d,f){this._docScaleManager.isValidScale(e)&&(this._scale=e,this._refinedScale=this._docScaleManager.refineScale(e),this._docLayoutManager.setScale(this._refinedScale,d,f),this.resetAllRenderedPages(),this.update(),this.setScrollVisibilityForMode())},changeScale:function(e,d,f){this._docScaleManager.isValidScale(e)&&(this._scale=e,this._refinedScale=this._docScaleManager.refineScale(e),this._docLayoutManager.changeScale(this._refinedScale,d,f))},resetAllRenderedPages:function(){if(this._pageLoadManager){for(var d=this._pageLoadManager.getBuffer(),c=d.length-1;c>=0;c--){d[c].reset()}}},update:function(){var d=this._docLayoutManager.getVisiblePages(),c=this.getRenderCandidatePages(d);this._pageLoadManager.resizeBuffer(c.length),this._pageLoadManager.renderHighestPriority(c,this._refinedScale)},onPageRenderStarted:function(b){},onPageRenderFinished:function(g,f){var j=docObj,i=j._docLayoutManager.getVisiblePages(),h=j.getRenderCandidatePages(i);j._pageLoadManager.renderHighestPriority(h,j._refinedScale),j.notifyPageRendered(g._pageNum)},onLayoutScrollChanged:function(b){if(docObj._layoutMode!=DocLayoutMode.TWO_PAGE_BOOK){docObj.update()}}}),DocData=Base.extend({_title:null,_author:null,_pdfUrl:null,_imageLists:[]}),DocError={PDF_JS_NOT_SUPPORTED:"pdf_js_not_supported",FAIL_TO_LOAD_PDF:"fail_to_load_pdf",FAIL_TO_LOAD_IMAGE:"fail_to_load_image",IMAGE_NOT_EXIST:"image_not_exist"},DocScaleValue={FIT_TO_SCALE:"fit-to-scale",FIT_TO_WIDTH:"fit-to-width",isDocScaleValue:function(e){for(var d in this){var f=DocScaleValue[d];if("string"==typeof f&&f===e){return !0}}return !1}},DocScaleConfig={MAX_SCALE:4,MIN_SCALE:0.3,SCALE_FACTOR:0.2,SCALE_100PERCENT:96/72},ImageList=Base.extend({_imageFormatList:null,_imageSrcsList:null}),ImageFormat=Base.extend({_formatName:null,_width:null,_height:null}),ImageSrc=Base.extend({_formatName:null,_imageSrc:null}),DocLayoutManager=Base.extend({_targetElement:null,_layoutMode:null,_totalPageCnt:0,_totalPageBundleCnt:0,_currentPageNum:0,_currentTurnPageNum:0,_scale:1,_defaultWidth:0,_defaultHeight:0,_scrollTop:0,_isPageBundled:!1,_display:null,_hardCoverPages:null,_isBookLoaded:!1,_useHardCover:!0,_onScrollTopChanged:0,_onPageChanged:0,_topMarginForScrollMode:0,_allPageContainerDivs:null,_allBundleContainerDivs:null,_allPageBackgroundDivs:null,init:function(g,f,j,i,h){this._targetElement=g,this._totalPageCnt=f,this._totalPageBundleCnt=Math.ceil(f/2),this._defaultWidth=Math.floor(j),this._defaultHeight=Math.floor(i),this._topMarginForScrollMode=h||0,this._scrollTop=0,this._isPageBundled=!1,this.createBaseLayout();this.getDocPlayerContainerElem();this.initScroll()},setOnScrollTopChangedEvent:function(b){this._onScrollTopChanged=b},setOnPageChangedEvent:function(b){this._onPageChanged=b},setUseHardCover:function(b){this._useHardCover=b},createBaseLayout:function(){var r=$("<div>",{id:DocLayoutManager.DOC_PLAYER_CONTAINER}),q=$("<div>",{id:DocLayoutManager.DOC_PLAYER}),p=$("<div>",{"class":DocLayoutManager.TOP_MARGIN_FOR_SCROLL_MODE});r.appendTo(this._targetElement),q.appendTo(r),p.appendTo(q),docObj._mode==DocPlayerMode.IMAGE?q.addClass(DocLayoutManager.PLAYER_MODE_IMAGE):q.addClass(DocLayoutManager.PLAYER_MODE_PDF),this.setUseScroll(docObj._useScroll);for(var o=1;o<=this._totalPageCnt;o++){var n=DocLayoutManager.PAGE_CONTAINER+o.toString(),m=$("<div>",{id:n,"class":DocLayoutManager.PAGE_CONTAINER}).appendTo(q);m.height(this._defaultHeight),m.width(this._defaultWidth),docObj._mode==DocPlayerMode.IMAGE&&(pageBackground=$("<div>",{"class":DocLayoutManager.PAGE_BACKGROUND}).appendTo(m),pageBackground.height(this._defaultHeight),pageBackground.width(this._defaultWidth))}for(var l=1;l<=this._totalPageBundleCnt;l++){var k=DocLayoutManager.BUNDLE_CONTAINER+l.toString(),j=$("<div>",{id:k,"class":DocLayoutManager.BUNDLE_CONTAINER}).appendTo(q);j.hide()}this._allPageContainerDivs=$("."+DocLayoutManager.PAGE_CONTAINER),this._allBundleContainerDivs=$("."+DocLayoutManager.BUNDLE_CONTAINER),this._allPageBackgroundDivs=$("."+DocLayoutManager.PAGE_BACKGROUND)},setUseScroll:function(d){var c=this.getDocPlayerContainerElem();d?c.css("overflow","auto"):c.css("overflow","hidden")},initScroll:function(){var b=this.getDocPlayerContainerElem();$(b).scrollTop(this._scrollTop),$(b).scroll(this.onScroll)},onScroll:function(b){docObj.getDocLayoutManager().setScrollTop($(this).scrollTop())},setScrollTop:function(d){if("number"==typeof d&&this._scrollTop!=d){this._scrollTop=d,this._onScrollTopChanged&&this._onScrollTopChanged(d);var c=this.calcPageNumOfScroll(d);c&&c!=this._currentPageNum&&(this._currentPageNum=c,this._onPageChanged&&this._onPageChanged(c))}},calcPageNumOfScroll:function(b){switch(this._layoutMode){case DocLayoutMode.ONE_PAGE_SCROLL:return this.calcPageNumOfScrollForOnePage(b);case DocLayoutMode.TWO_PAGE_SCROLL:return this.calcPageNumOfScrollForTwoPage(b)}},calcPageNumOfScrollForOnePage:function(f){if(0==f){return 1}if(f==this.getMaxScroll()){return this._totalPageCnt}var e=this.getDocPlayerContainerElem().height(),h=this.getPageContainer(1).outerHeight(!0),g=f+e/2;return Math.ceil((g-this._topMarginForScrollMode)/h)},calcPageNumOfScrollForTwoPage:function(g){if(0==g){return 1}if(g==this.getMaxScroll()){return this._totalPageCnt}var f=this.getDocPlayerContainerElem().height(),j=this.getPageContainer(1).outerHeight(!0),i=g+f/2,h=Math.ceil((i-this._topMarginForScrollMode)/j);return 2*h-1},setLayoutMode:function(e){if(e&&DocLayoutMode.isDocLayoutOption(e)){switch(this._layoutMode==DocLayoutMode.TWO_PAGE_BOOK&&(this.removeBookContainer(),docObj.getDocLayoutManager()._isBookLoaded=!1),this._layoutMode=e,this.initializePageContainerCSS(),this.setBorderMarginForCurrLayoutMode(),this._layoutMode){case DocLayoutMode.ONE_PAGE:this.composeOnePageLayoutMode();break;case DocLayoutMode.ONE_PAGE_SCROLL:this.composeOnePageScrollMode();break;case DocLayoutMode.TWO_PAGE:this.composeTwoPageLayoutMode();break;case DocLayoutMode.TWO_PAGE_SCROLL:this.composeTwoPageScrollMode();break;case DocLayoutMode.TWO_PAGE_BOOK:return void this.composeTwoPageBookMode()}if(this._layoutMode==DocLayoutMode.TWO_PAGE_SCROLL||this._layoutMode==DocLayoutMode.ONE_PAGE_SCROLL){var d=this,f=d._currentPageNum;setTimeout(function(){d.setPage(f)},50)}else{this.setPage(this._currentPageNum)}}},removeBookContainer:function(){this._currentTurnPageNum=0,$(".unibook").turn("destroy").remove(),$("#doc-player-container").remove(),this.createBaseLayout(),this.initScroll(),docObj.initializePageList()},initializePageContainerCSS:function(){var d=this.getAllPageContainer(),c=this.getAllBundleContainer();d.css("border","0px"),d.css("margin","0px"),c.css("border","0px"),c.css("margin","0px"),this.getTopMarginForScrollModeElem().height(0)},setBorderMarginForCurrLayoutMode:function(){var h=this.getAllPageContainer(),g=DocContainerBorderMargin[this._layoutMode][0];h.css("border-top",g+"px solid transparent");var l=DocContainerBorderMargin[this._layoutMode][1];h.css("border-right",l+"px solid transparent");var k=DocContainerBorderMargin[this._layoutMode][2];h.css("border-bottom",k+"px solid transparent");var j=DocContainerBorderMargin[this._layoutMode][3];h.css("border-left",j+"px solid transparent");var i=this.getAllBundleContainer(),g=DocContainerBorderMargin[this._layoutMode][0];i.css("border-top",g+"px solid transparent");var l=DocContainerBorderMargin[this._layoutMode][1];i.css("border-right",l+"px solid transparent");var k=DocContainerBorderMargin[this._layoutMode][2];i.css("border-bottom",k+"px solid transparent");var j=DocContainerBorderMargin[this._layoutMode][3];i.css("border-left",j+"px solid transparent")},composeOnePageLayoutMode:function(){var b=this.getDocPlayerContainerElem();b.removeClass(),b.addClass(DocLayoutManager.DOC_LAYOUT_MODE_ONE_PAGE),this._isPageBundled&&this.unPackPageBundles(),this.getAllPageContainer().hide()},composeOnePageScrollMode:function(){var d=this.getDocPlayerContainerElem();d.removeClass(),d.addClass(DocLayoutManager.DOC_LAYOUT_MODE_ONE_PAGE_SCROLL),this._isPageBundled&&this.unPackPageBundles(),this.getTopMarginForScrollModeElem().height(this._topMarginForScrollMode);var c=this.getAllPageContainer();this.alignHorizontalCenterContainer(c),c.show()},composeTwoPageLayoutMode:function(){var d=this.getDocPlayerContainerElem();d.removeClass(),d.addClass(DocLayoutManager.DOC_LAYOUT_MODE_TWO_PAGE),this._isPageBundled||this.packPageBundles(),this.getAllBundleContainer().hide();var c=this.getAllPageContainer();c.show()},composeTwoPageScrollMode:function(){var e=this.getDocPlayerContainerElem();e.removeClass(),e.addClass(DocLayoutManager.DOC_LAYOUT_MODE_TWO_PAGE_SCROLL),this._isPageBundled||this.packPageBundles(),this.getTopMarginForScrollModeElem().height(this._topMarginForScrollMode);var d=this.getAllPageContainer();d.show();var f=this.getAllBundleContainer();this.alignHorizontalCenterContainer(f),f.show()},composeTwoPageBookMode:function(){var b=this.getDocPlayerContainerElem();b.removeClass(),b.addClass(DocLayoutManager.DOC_LAYOUT_MODE_TWO_PAGE_BOOK),this._isPageBundled&&this.unPackPageBundles(),this.getAllPageContainer().show(),this.packUnibook(),this._useHardCover&&this.renderFrontCover(),$("#doc-player").css("overflow","hidden")},addUnibook:function(){var b=this.getDocPlayerElem();b.prepend($("<div/>",{"class":"unibook"}))},packUnibook:function(){this.addUnibook();var f=$(".unibook");this._useHardCover&&f.append("<div class='hard own-size front-cover'><div class='front-cover-wrapper'><div class='cover-title'></div><div class='side'></div><div class='cover-title-underbar'></div><div class='cover-author'></div><div class='cover-logo'></div></div></div><div class='hard front-side own-size'><div class='depth'></div></div>");for(var e=1;e<=this._totalPageCnt;e++){var h=this.getPageContainer(e);h.appendTo(f)}this._totalPageCnt%2==1&&f.append("<div class='p-2'></div>"),this._useHardCover&&f.append("<div class='hard fixed back-side own-size p-1'> <div class='depth'></div></div>"),this._hardCoverPages=$(".unibook .hard");var g=this;f.turn({elevation:50,pages:docObj._totalPageCnt,acceleration:!this.isChrome(),gradients:!0,duration:1000,when:{start:function(i,d,j){},turning:function(a,l,k){var j=$(this),i=j.turn("page");j.turn("pages"),Number($(".unibook").turn("page"))-2;return l>3&&1==i?(j.turn("page",2).turn("stop").turn("page",l),void a.preventDefault()):(l>=2?$(".unibook .p2").addClass("fixed"):$(".unibook .p2").removeClass("fixed"),l<j.turn("pages")?$(".unibook .p-1").addClass("fixed"):$(".unibook .p-1").removeClass("fixed"),this._display=$(".unibook").turn("display"),l>=2?$(".unibook .p2").addClass("fixed"):$(".unibook .p2").removeClass("fixed"),l<f.turn("pages")?$(".unibook .p-1").addClass("fixed"):$(".unibook .p-1").removeClass("fixed"),void docObj.getDocLayoutManager().updateDepth(l))},turned:function(i,d,m){var l=Number($(".unibook").turn("page"));if(docObj.getDocLayoutManager()._isBookLoaded?(docObj.setBookPage(l),docObj.getDocLayoutManager().updateDepth()):(setTimeout(function(){var b;g._useHardCover?(b=docObj._currPageNum-docObj._currPageNum%2+2,2==b&&(b=3)):(b=docObj._currPageNum-docObj._currPageNum%2,0==b&&(b=1)),docObj._bookCurrPageNum=0,docObj.setBookPage(b),docObj.getDocLayoutManager().updateDepth()},1500),docObj.getDocLayoutManager()._isBookLoaded=!0),$.each($(".page-wrapper"),function(n,c){$(c).find(".gradient").remove()}),1!=d){var k,j;d%2==0?(k=$(".page-wrapper[page="+d+"]"),j=$(".page-wrapper[page="+(d+1)+"]")):(k=$(".page-wrapper[page="+(d-1)+"]"),j=$(".page-wrapper[page="+d+"]")),$("<div/>",{"class":"gradient even"}).appendTo(k),$("<div/>",{"class":"gradient odd"}).appendTo(j)}}}}),this._display=$(".unibook").turn("display")},updateDepth:function(g){var f=$(".unibook"),j=f.turn("page"),i=f.turn("pages"),h=16*Math.min(1,2*j/i);g=g||j,g>5?$(".unibook .p2 .depth").css({width:h,left:20-h}):$(".unibook .p2 .depth").css({width:0}),h=16*Math.min(1,2*(i-j)/i),g<i-3?$(".unibook .p-1 .depth").css({width:h,right:20-h}):$(".unibook .p-1 .depth").css({width:0})},renderFrontCover:function(){this._hardCoverPages[0];$(".unibook .cover-title").text(docObj._docData._title),$(".unibook .cover-title").attr("title",docObj._docData._title),$(".unibook .cover-author").text(docObj._docData._author),$(".unibook .cover-author").attr("title",docObj._docData._author)},packPageBundles:function(){for(var d=(this.getDocPlayerElem(),this.getPageContainer(1),1);d<=this._totalPageBundleCnt;d++){var c=this.getBundleContainer(d);this.getPageContainer(2*d-1).appendTo(c),2*d<=this._totalPageCnt&&this.getPageContainer(2*d).appendTo(c)}this._isPageBundled=!0},unPackPageBundles:function(){for(var e=this.getDocPlayerElem(),d=this.getPageContainer(1),f=this._totalPageCnt;f>=1;f--){var d=this.getPageContainer(f);d.prependTo(e)}this.getTopMarginForScrollModeElem().prependTo(e),this.getAllBundleContainer().hide(),this._isPageBundled=!1},setPage:function(b){if(!(b<1||b>this._totalPageCnt)){switch(this._currentPageNum=b,this._layoutMode){case DocLayoutMode.ONE_PAGE:this.setPageForOnePageMode(b);break;case DocLayoutMode.ONE_PAGE_SCROLL:this.setPageForOnePageScrollMode(b);break;case DocLayoutMode.TWO_PAGE:this.setPageForTwoPageMode(b);break;case DocLayoutMode.TWO_PAGE_SCROLL:this.setPageForTwoPageScrollMode(b);break;case DocLayoutMode.TWO_PAGE_BOOK:this.setPageForTwoPageBookMode(b)}}},setPageForOnePageMode:function(d){this._currentPageNum=d,this.getAllPageContainer().hide();var c=$("#"+DocLayoutManager.PAGE_CONTAINER+d.toString());c.show(),this.alignCenterContainer(c)},setPageForOnePageScrollMode:function(g){var f=this.getDocPlayerContainerElem().height(),j=this.getPageContainer(1).outerHeight(!0),i=(g-1)*j+this._topMarginForScrollMode,h=(f-j)/2;h=h<0?0:h,this.getDocPlayerContainerElem().scrollTop(i-h)},setPageForTwoPageMode:function(e){this._currentPageNum=e;var d=Math.ceil(e/2);this.getAllBundleContainer().hide();var f=this.getBundleContainer(d);f.show(),this.alignCenterContainer(f)},setPageForTwoPageScrollMode:function(g){var f=this.getDocPlayerContainerElem().height(),j=this.getBundleContainer(1).outerHeight(!0),i=(Math.ceil(g/2)-1)*j+this._topMarginForScrollMode,h=(f-j)/2;h=h<0?0:h,this.getDocPlayerContainerElem().scrollTop(i-h)},setPageForTwoPageBookMode:function(b){this._onPageChanged&&this._onPageChanged(b),this.setBookPage(b)},setBookPage:function(b){this._currentTurnPageNum!=b&&(this._currentTurnPageNum=b,this._useHardCover?$(".unibook").turn("hasPage",b+2)&&$(".unibook").turn("page",b+2):$(".unibook").turn("hasPage",b)&&$(".unibook").turn("page",b))},nextPage:function(){!this._layoutMode!=DocLayoutMode.TWO_PAGE_BOOK&&$(".unibook").turn("next")},prevPage:function(){!this._layoutMode!=DocLayoutMode.TWO_PAGE_BOOK&&$(".unibook").turn("prev")},alignCenterContainer:function(b){b&&(this.alignVerticalCenterContainer(b),this.alignHorizontalCenterContainer(b))},alignVerticalCenterContainer:function(g){var f=this.getDocPlayerElem(),j=f.height(),i=g.outerHeight(),h=(j-i)/2;h=h<0?0:h,g.css("margin-top",h.toString()+"px")},alignHorizontalCenterContainer:function(g){var f=this.getDocPlayerElem(),j=f.width(),i=g.outerWidth(),h=(j-i)/2;h=h<0?0:h,g.css("margin-left",h.toString()+"px")},getVisiblePages:function(){switch(this._layoutMode){case DocLayoutMode.ONE_PAGE:return this.getVisiblePagesForOnePageMode();case DocLayoutMode.ONE_PAGE_SCROLL:return this.getVisiblePagesForOnePageScrollMode();case DocLayoutMode.TWO_PAGE:return this.getVisiblePagesForTwoPageMode();case DocLayoutMode.TWO_PAGE_SCROLL:return this.getVisiblePagesForTwoPageScrollMode();case DocLayoutMode.TWO_PAGE_BOOK:return this.getVisiblePagesForTwoPageBookMode()}return[]},getVisiblePagesForOnePageMode:function(){return[this._currentPageNum]},getVisiblePagesForOnePageScrollMode:function(){var t=[],s=this.getDocPlayerContainerElem(),r=s.scrollTop(),q=s.height(),p=this.getPageContainer(1).outerHeight(!0),o=r-this._topMarginForScrollMode;o=o<0?0:o;var n=r+q-this._topMarginForScrollMode;n=n<0?0:n;for(var m=1+Math.floor(o/p),l=Math.ceil(n/p),k=m;k<=l&&k<=this._totalPageCnt;k++){t.push(k)}return t},getVisiblePagesForTwoPageMode:function(){var d=this._currentPageNum-(this._currentPageNum%2?0:1),c=[d];return d+1<=this._totalPageCnt&&c.push(d+1),c},getVisiblePagesForTwoPageScrollMode:function(){var v=[],u=this.getDocPlayerContainerElem(),t=u.scrollTop(),s=u.height(),r=this.getBundleContainer(1).height(),q=t-this._topMarginForScrollMode;q=q<0?0:q;var p=t+s-this._topMarginForScrollMode;p=p<0?0:p;for(var o=1+Math.floor(q/r),n=Math.ceil(p/r),m=o;m<=n&&m<=this._totalPageBundleCnt;m++){var l=2*m-1;v.push(l),l+1<=this._totalPageCnt&&v.push(l+1)}return v},getVisiblePagesForTwoPageBookMode:function(){var d=this._currentPageNum-(this._currentPageNum%2?0:1),c=[d];return d+1<=this._totalPageCnt&&c.push(d+1),c},resize:function(){switch(navigator.appVersion.indexOf("MSIE 7.")!=-1?this.getDocPlayerElem().width(this.getPlayerWidthForIE7()):this.getDocPlayerElem().css("width","100%"),this._layoutMode){case DocLayoutMode.ONE_PAGE:this.resizeForOnePageMode();break;case DocLayoutMode.ONE_PAGE_SCROLL:this.resizeForOnePageScrollMode();break;case DocLayoutMode.TWO_PAGE:this.resizeForTwoPageMode();break;case DocLayoutMode.TWO_PAGE_SCROLL:this.resizeForTwoPageScrollMode();break;case DocLayoutMode.TWO_PAGE_BOOK:this.resizeForTwoPageBookMode()}},getPlayerWidthForIE7:function(){var e=this.getDocPlayerContainerElem(),d=e.width(),f=e.get(0).scrollHeight>e.get(0).clientHeight;return f&&(d-=17),d},resizeForOnePageMode:function(){this.alignCenterContainer(this.getPageContainer(this._currentPageNum))},resizeForOnePageScrollMode:function(){this.alignHorizontalCenterContainer(this.getAllPageContainer())},resizeForTwoPageMode:function(){this.alignCenterContainer(this.getBundleContainer(Math.ceil(this._currentPageNum/2)))},resizeForTwoPageScrollMode:function(){this.alignHorizontalCenterContainer(this.getAllBundleContainer())},resizeForTwoPageBookMode:function(){$(".unibook").turn("center");var f=this.getDocPlayerElem(),e=f.height(),h=$(".unibook").outerHeight(),g=(e-h)/2;g<53?g=35:g<70&&(g=e-h-70),$(".unibook").css("margin-top",g.toString()+"px"),this.alignHorizontalCenterContainer($(".unibook"))},setScale:function(v,u,t){u||(u=0),t||(t=0),this._scrollTop=$(this.getDocPlayerContainerElem()).scrollTop();var s=this._scale;this._scale=v;var r=Math.floor(this._defaultWidth*v),q=Math.floor(this._defaultHeight*v);this._layoutMode==DocLayoutMode.TWO_PAGE_BOOK&&(this._hardCoverPages&&(this._hardCoverPages.width(r+20),this._hardCoverPages.height(q+20)),$(".unibook").turn("size",2*r,q),$(".unibook .depth").css("background-size","32px "+String(q+8)+"px"),$(".unibook .depth").height(q+8));var p=this.getAllPageContainer(),o=this.getAllBundleContainer();if(this.initializeMarginForAlign(p,o),p.width(r),p.height(q),docObj._mode==DocPlayerMode.IMAGE){var n=this.getAllPageBackgroundElem();n.width(r),n.height(q)}if(o.width(2*p.outerWidth()),o.height(p.outerHeight()),this.resize(),s>0&&"number"==typeof s){var m=this.getScrollTop(s,this._scale,t),l=this.getScrollLeft(s,this._scale,u);$(this.getDocPlayerContainerElem()).scrollTop(m),$(this.getDocPlayerContainerElem()).scrollLeft(l)}},getScrollTop:function(r,q,p){var o=docObj._currPageNum,n=this._scrollTop,m=parseInt($(".page-container").css("border-top-width")),l=o*m,k=parseInt($(".top-margin-for-scroll-mode").height()),j=q/r*(n-k+p-l)+l-p+k;return j},getScrollLeft:function(h,g,l){var k=$(this.getDocPlayerContainerElem()).scrollLeft(),j=parseInt($(".page-container").css("border-top-width")),i=g/h*(k-j+l)-l+j;return i},changeScale:function(g,f,j){this.setScale(g,f,j);for(var i=docObj._pages,h=0;h<i.length;h++){i[h]&&i[h].fitImage()}},initializeMarginForAlign:function(d,c){d.css("margin","0px"),c.css("margin","0px")},getPageContainer:function(b){return $("#"+DocLayoutManager.PAGE_CONTAINER+b.toString())},getAllPageContainer:function(){return this._allPageContainerDivs?this._allPageContainerDivs:$("."+DocLayoutManager.PAGE_CONTAINER)},getBundleContainer:function(b){return $("#"+DocLayoutManager.BUNDLE_CONTAINER+b.toString())},getAllBundleContainer:function(){return this._allBundleContainerDivs?this._allBundleContainerDivs:$("."+DocLayoutManager.BUNDLE_CONTAINER)},getMaxScroll:function(){var b=this.getDocPlayerContainerElem();if(b){return b.prop("scrollHeight")-b.height()}},getDocPlayerContainerElem:function(){return $("#"+DocLayoutManager.DOC_PLAYER_CONTAINER)},getAllPageBackgroundElem:function(){return this._allPageBackgroundDivs?this._allPageBackgroundDivs:$("."+DocLayoutManager.PAGE_BACKGROUND)},getDocPlayerElem:function(){return $("#"+DocLayoutManager.DOC_PLAYER)},getTopMarginForScrollModeElem:function(){return $("."+DocLayoutManager.TOP_MARGIN_FOR_SCROLL_MODE)},isChrome:function(){return navigator.userAgent.indexOf("Chrome")!=-1}},{TOP_MARGIN_FOR_SCROLL_MODE:"top-margin-for-scroll-mode",DOC_PLAYER_CONTAINER:"doc-player-container",DOC_PLAYER:"doc-player",PAGE_CONTAINER:"page-container",PAGE_BACKGROUND:"page-background",BUNDLE_CONTAINER:"bundle-container",PLAYER_MODE_IMAGE:"player-mode-image",PLAYER_MODE_PDF:"player-mode-pdf",DOC_LAYOUT_MODE_ONE_PAGE:"doc-layout-mode-one-page",DOC_LAYOUT_MODE_ONE_PAGE_SCROLL:"doc-layout-mode-one-page-scroll",DOC_LAYOUT_MODE_TWO_PAGE:"doc-layout-mode-two-page",DOC_LAYOUT_MODE_TWO_PAGE_SCROLL:"doc-layout-mode-two-page-scroll"}),DocLayoutMode={DEFAULT:"one_page",ONE_PAGE:"one_page",ONE_PAGE_SCROLL:"one_page_scroll",TWO_PAGE:"two_page",TWO_PAGE_SCROLL:"two_page_scroll",TWO_PAGE_BOOK:"two_page_book",isDocLayoutOption:function(e){for(var d in this){var f=DocLayoutMode[d];if("string"==typeof f&&f===e){return !0}}return !1}},DocContainerBorderMargin={one_page:[],one_page_scroll:[],two_page:[],two_page_scroll:[],two_page_book:[]},DefaultDocContainerBorderMargin={one_page:[10,10,10,10],one_page_scroll:[1,10,1,10],two_page:[1,1,1,1],two_page_scroll:[1,1,1,1],two_page_book:[0,0,0,0]},DocBundleBorderMargin={one_page:[],one_page_scroll:[],two_page:[],two_page_scroll:[],two_page_book:[]},DefaultDocBundleBorderMargin={one_page:[0,0,0,0],one_page_scroll:[0,0,0,0],two_page:[10,10,10,10],two_page_scroll:[0,10,0,10],two_page_book:[0,0,0,0]},DocScaleManager=Base.extend({_targetElement:null,_defaultWidth:0,_defaultHeight:0,init:function(e,d,f){this._targetElement=$(e),this._defaultWidth=Math.floor(d),this._defaultHeight=Math.floor(f)},refineScale:function(b){if("number"==typeof b){return b}switch(b){case DocScaleValue.FIT_TO_SCALE:return this.calcScaleValueForFitToScale();case DocScaleValue.FIT_TO_WIDTH:return this.calcScaleValueForFitToWidth()}},calcScaleValueForFitToScale:function(){var d=(DocLayoutManager.BORDER_MARGIN_SIZE,Math.floor(this.getTargetWidth())),c=Math.floor(this.getTargetHeight());return docObj._layoutMode==DocLayoutMode.TWO_PAGE_BOOK&&(d-=70,c-=85),d/c>this._defaultWidth/this._defaultHeight?c/this._defaultHeight:(d=this.reflectScrollWidth(d),d/this._defaultWidth)},calcScaleValueForFitToWidth:function(){var b=(DocLayoutManager.BORDER_MARGIN_SIZE,Math.floor(this.getTargetWidth()));return b=this.reflectScrollWidth(b),b/this._defaultWidth},reflectScrollWidth:function(g){if(!docObj._useScroll){return g}var f=g/this._defaultWidth,j=1;docObj._layoutMode!=DocLayoutMode.TWO_PAGE_SCROLL&&docObj._layoutMode!=DocLayoutMode.ONE_PAGE_SCROLL||(j=docObj._totalPageCnt);var i=f*this._defaultHeight*j;if(i>this.getTargetHeight()){var h=this.getScrollWidth();docObj._layoutMode!=DocLayoutMode.TWO_PAGE_SCROLL&&docObj._layoutMode!=DocLayoutMode.TWO_PAGE||(h/=2),g-=h}return g},getTargetWidth:function(){var d=DocContainerBorderMargin[docObj._layoutMode],c=DocBundleBorderMargin[docObj._layoutMode];switch(docObj._layoutMode){case DocLayoutMode.TWO_PAGE:case DocLayoutMode.TWO_PAGE_SCROLL:return(this.getElementWidth(this.getTargetElement())-c[1]-c[3]-2*d[0]-2*d[2])/2;case DocLayoutMode.ONE_PAGE:case DocLayoutMode.ONE_PAGE_SCROLL:return this.getElementWidth(this.getTargetElement())-d[1]-d[3];case DocLayoutMode.TWO_PAGE_BOOK:return this.getElementWidth(this.getTargetElement())/2-20}},getTargetHeight:function(){var d=DocContainerBorderMargin[docObj._layoutMode],c=DocBundleBorderMargin[docObj._layoutMode];switch(docObj._layoutMode){case DocLayoutMode.TWO_PAGE:case DocLayoutMode.TWO_PAGE_SCROLL:return this.getElementHeight(this.getTargetElement())-c[0]-c[2]-d[0]-d[2];case DocLayoutMode.ONE_PAGE:case DocLayoutMode.ONE_PAGE_SCROLL:return this.getElementHeight(this.getTargetElement())-d[0]-d[2];case DocLayoutMode.TWO_PAGE_BOOK:return this.getElementHeight(this.getTargetElement())-20}},getElementWidth:function(b){return $(b)[0].getBoundingClientRect().width?$(b)[0].getBoundingClientRect().width:$(b)[0].getBoundingClientRect().right-$(b)[0].getBoundingClientRect().left},getElementHeight:function(b){return $(b)[0].getBoundingClientRect().height?$(b)[0].getBoundingClientRect().height:$(b)[0].getBoundingClientRect().bottom-$(b)[0].getBoundingClientRect().top},isValidScale:function(b){return"number"==typeof b?b>=DocScaleConfig.MIN_SCALE&&b<=DocScaleConfig.MAX_SCALE:DocScaleValue.isDocScaleValue(b)},getUpScaleValue:function(d){var c=this.refineScale(d)+DocScaleConfig.SCALE_FACTOR;return Number(c.toFixed(1))},getDownScaleValue:function(d){var c=this.refineScale(d)-DocScaleConfig.SCALE_FACTOR;return Number(c.toFixed(1))},getTargetElement:function(){return this._targetElement},getScrollWidth:function(){var d=/Safari/i.test(navigator.appVersion)&&!/Chrome/i.test(navigator.appVersion),c=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);return d||c?4:20}}),PageLoadManager=Base.extend({_buffer:[],_bufferSize:0,constructor:function(){this._buffer=[],this._bufferSize=PageLoadManager.MIN_BUFFER_SIZE},renderHighestPriority:function(e,d){var f=this.getHighestPriority(e);f&&(f.render(d),this.addPageToBuffer(f))},getHighestPriority:function(e){if(e){for(var d=null,f=e.length-1;f>=0;f--){if(!e[f]){return null}e[f]._renderState==PageRenderState.IDLE?d=e[f]:this.increasePriority(e[f])}return d}},addPageToBuffer:function(d){var c=this.indexOf(d,this._buffer);c>=0&&this._buffer.splice(c,1),this._buffer.push(d),this._buffer.length>PageLoadManager.BUFFER_SIZE&&(releasePage=this._buffer.shift(),releasePage.release())},resizeBuffer:function(b){for(this._bufferSize=Math.max(PageLoadManager.MIN_BUFFER_SIZE,2*b);this._buffer.length>this._bufferSize;){releasePage=this._buffer.shift(),releasePage.release()}},getBuffer:function(){return this._buffer},clearBuffer:function(){for(;this._buffer.length>0;){var b=this._buffer.pop();b.release()}},increasePriority:function(d){var c=this.indexOf(d,this._buffer);c==-1?console.log("it isnt in buffer but didnot rendered"):(this._buffer.splice(c,1),this._buffer.push(d))},indexOf:function(f,e,h){if("string"==typeof f&&"string"==typeof e){if(f.length>e.length){return -1}for(var g=h||0;g<=e.length-f.length;g++){if(e.slice(g,g+f.length)==f){return g}}}else{for(var g=h||0;g<e.length;g++){if(e[g]==f){return g}}}return -1}},{MIN_BUFFER_SIZE:10}),PageBase=Base.extend({_container:null,_pageNum:0,_renderingTask:null,_renderState:null,_scale:1,_onRenderFinished:null,_onRenderStarted:null,_loadingIcon:null,init:function(e,d,f){this._pageNum=e,this._container=d,this._scale=f||1,this._loadingIcon=this.appendLoadingIcon(),this._renderState=PageRenderState.IDLE},render:function(b){},setOnRenderStarted:function(b){this._onRenderStarted=b},setOnRenderFinished:function(b){this._onRenderFinished=b},setScale:function(b){this._scale=b},appendLoadingIcon:function(){if(!this._loadingIcon){this._loadingIcon=$("<div>",{"class":PageBase.LOADING_ICON_CONTAINER_IDENTIFIER}),this._container.append(this._loadingIcon);var b=$("<div>",{"class":PageBase.LOADING_ICON_IDENTIFIER});this._loadingIcon.append(b)}return this._loadingIcon},removeLoadingIcon:function(){this._loadingIcon&&$(this._loadingIcon).remove(),this._loadingIcon=null},release:function(){}},{LOADING_ICON_CONTAINER_IDENTIFIER:"doc-page-loading-icon-container",LOADING_ICON_IDENTIFIER:"doc-page-loading-icon"}),PageRenderState={IDLE:"idle",RENDERING:"rendering",RENDERED:"rendered"},PageImage=PageBase.extend({_imageSrcs:null,_frontElem:null,_bakElem:null,_formatList:null,_formatName:null,_defaultWidth:null,_defaultHeight:null,_currentWidth:null,_currentHeight:null,_currentMarginLeft:null,_currentMarginTop:null,_targetImageWidth:null,_targetImageHeight:null,_targetOffsetLeft:null,_targetOffsetTop:null,_animationTimer:null,_animationDuration:500,_animationDevide:50,_unitIndex:null,_nextScale:null,_imgLoadCheckTimer:null,init:function(h,g,l,k,j,i){this.base(h,g,l),this._imageSrcs=i,this._formatList=j,this._formatName=k,this._scale=l;this._defaultWidth=Number(docObj._defaultWidth),this._currentWidth=this._defaultWidth*l,this._defaultHeight=Number(docObj._defaultHeight),this._currentHeight=this._defaultHeight*l},getFormatIndex:function(e){var d=this._container.width();for(var f in this._formatList){if(this._formatList[f]._width>d){return this._formatIndex=Number(f),this._formatIndex}}return this._formatIndex=this._formatList.length-1,this._formatIndex},render:function(h){if(this._renderState==PageRenderState.RENDERING){return void (this._nextScale=h)}this._renderState==PageRenderState.IDLE?this._frontElem=this.appendLoadingIcon():this._frontElem=this._imageElem,this._renderState=PageRenderState.RENDERING;var g=this.getFormatIndex(h),l=this._imageSrcs[g]._imageSrc;this._imageId="img"+this._pageNum.toString();var k=$("<img>",{id:this._imageId,draggable:"false",unselectable:"on"});this._currentWidth=this._defaultWidth*h,this._currentHeight=this._defaultHeight*h,this._frontElem.width(this._currentWidth),this._frontElem.height(this._currentHeight),k.width(this._currentWidth),k.height(this._currentHeight),k.hide(),k.appendTo(this._container);var j=this;this._bakElem=k;var i=0;this._imgLoadCheckTimer=setInterval(function(){j.checkImgLoadComplete(j._frontElem,j._bakElem,++i)},200),k.bind("load",function(){j.onLoadComplete(j._frontElem,j._bakElem,-1)}),k.bind("error",function(){docObj.notifyError(DocError.IMAGE_NOT_EXIST)}),k.attr("src",l),this._imageElem=k},release:function(){if(this._renderState!=PageRenderState.IDLE){for(var d=$(this._container).children(),c=0;c<d.length;c++){$(d[c]).hasClass(DocLayoutManager.PAGE_BACKGROUND)||$(d[c]).remove()}this._loadingIcon=null,this._renderState=PageRenderState.IDLE}},fitImage:function(){this._imageElem&&($(this._imageElem).width(this._container.width()),$(this._imageElem).height(this._container.height()))},setScale:function(b){this._targetImageWidth=this._defaultWidth*b,this._targetImageHeight=this._defaultHeight*b,this._imageElem.width(this._targetImageWidth),this._imageElem.height(this._targetImageHeight)},changeScale:function(e){if(null!=this._animationTimer){return void (this._nextScale=e)}var d=$(this._container).width(),f=$(this._container).height();this._targetImageWidth=this._defaultWidth*e,this._targetImageHeight=this._defaultHeight*e,this._targetOffsetLeft=(d-this._targetImageWidth)/2,this._targetOffsetTop=(f-this._targetImageHeight)/2,this._unitIndex=0,this.unitChange(),this._animationTimer=setInterval(this.unitChange,this._pageNum,this._animationDuration/this._animationDevide)},unitChange:function(){var g=docObj._pages[docObj._currPageNum];if(g._unitIndex>g._animationDevide){return void g.stopChange()}g._unitIndex+=1;var f=g._currentWidth+(g._targetImageWidth-g._currentWidth)*(g._unitIndex/g._animationDevide),j=g._currentHeight+(g._targetImageHeight-g._currentHeight)*(g._unitIndex/g._animationDevide),i=($(g._container).width()-f)/2;$(g._container).width()>$(window).width()&&(i=($(window).width()-f)/2),f>$(window).width()&&(i=$(g._container).width()<$(window).width()?-($(window).width()-$(g._container).width())/2:0);var h=($(g._container).height()-j)/2;$(g._container).height()>$(window).height()&&(h=($("#player").height()-j)/2),j>$(window).height()&&(h=$(g._container).height()<$(window).height()?-($(window).height()-$(g._container).height())/2:0),$("#"+g._imageId).width(f),$("#"+g._imageId).height(j),$("#"+g._imageId).css("margin-left",i+"px"),$("#"+g._imageId).css("margin-top",h+"px"),g._currentWidth=f,g._currentHeight=j},stopChange:function(){var b=docObj._pages[docObj._currPageNum];return clearInterval(b._animationTimer),b._animationTimer=null,b._currentWidth=b._targetImageWidth,b._currentHeight=b._targetImageHeight,null!=b._nextScale?(b.changeScale(b._nextScale),void (b._nextScale=null)):void b.changeProfile()},changeProfile:function(){if(this._currentWidth>this._formatList[this._formatIndex]._width&&this._formatList.length-1!=this._formatIndex){var b=(this._formatList[this._formatIndex]._width+this._formatList[Number(this._formatIndex)+1]._width)/2;this._currentWidth>b&&this.setProfile(this._formatIndex+1)}else{if(0!=this._formatIndex){var b=(this._formatList[this._formatIndex]._width+this._formatList[Number(this._formatIndex)-1]._width)/2;this._currentWidth<b&&this.setProfile(this._formatIndex-1)}}},setProfile:function(e){this._renderState=PageRenderState.RENDERING;var d;d=this._imageSrcs[e]._imageSrc,this._formatIndex=e,this._bakImageId="bakimg"+this._pageNum.toString();var f=$("<img>",{id:this._bakImageId,draggable:"false",unselectable:"on"});f.appendTo(this._container),f.hide(),f.bind("load",this.onLoadComplete),f.attr("src",d),f.width(this._currentWidth),f.height(this._currentHeight),this._renderState=PageRenderState.RENDERED},checkImgLoadComplete:function(f,e,h){var g=e[0];!g.complete&&h<15||this.onLoadComplete(f,e)},onLoadComplete:function(f,e){this._imgLoadCheckTimer&&(clearInterval(this._imgLoadCheckTimer),this._imgLoadCheckTimer=null),e.unbind("load");var h=docObj._pages[docObj._currPageNum];if(f.hide(),e.show(),f.remove(),this._renderState=PageRenderState.RENDERED,null!=this._nextScale){var g=this._nextScale;return this._nextScale=null,void this.render(g)}this._onRenderFinished&&this._onRenderFinished(h,!0)}}),PagePDF=PageBase.extend({_pdfDoc:null,_pdfPage:null,_canvas:null,_textLayer:null,_zoomLayer:null,_backgroundImgUrl:null,init:function(h,g,l,k,j,i){this.base(h,g,l),this._pdfDoc=k,this._pdfPage=j,this._backgroundImgUrl=i},render:function(e){if(this._renderState==PageRenderState.IDLE){if(this._backgroundImgUrl){var d='url("'+this._backgroundImgUrl+'")';this._container.css("background-image")!=d&&this._container.css("background-image",d)}this._renderState=PageRenderState.RENDERING,this._scale=e;var f=this;setTimeout(function(){f._onRenderStarted&&f._onRenderStarted(f)},10),this.renderCanvas(),this._loadingIcon&&$(this._loadingIcon).remove(),this._loadingIcon=null}},renderCanvas:function(){var i=PagePDF.CANVAS_IDENTIFIER+this._pageNum.toString(),h=$("<canvas>",{id:i,"class":PagePDF.CANVAS_IDENTIFIER});h.appendTo(this._container);var n=h[0];this._canvas=n;var m=n.getContext("2d"),l=this._pdfPage.getViewport({scale:this._scale});n.height=l.height,n.width=l.width,$(n).hide();var k={canvasContext:m,viewport:l},j=this;this._renderingTask=this._pdfPage.render(k),this._renderingTask.promise.then(function(){j._renderState==PageRenderState.RENDERING&&(j._renderingTask=null,docObj._useTextLayer&&j.renderTextLayer(),j.processRenderCompleted())})},fitImage:function(){this._canvas&&($(this._canvas).width(this._container.width()),$(this._canvas).height(this._container.height()))},renderTextLayer:function(){var e=PagePDF.TEXT_LAYER_IDENTIFIER+this._pageNum.toString(),d=$("<div>",{id:e,"class":PagePDF.TEXT_LAYER_IDENTIFIER});d.appendTo(this._container),this._textLayer=d;var f=this;this._pdfPage.getTextContent({normalizeWhitespace:!0}).then(function(b){if(f._renderState!=PageRenderState.IDLE){var g=document.createDocumentFragment(),c=pdfjsLib.renderTextLayer({textContent:b,container:g,viewport:f._pdfPage.getViewport({scale:f._scale}),textDivs:[]});f._renderingTask=c,c.promise.then(function(){$(d).append(g)})}})},processRenderCompleted:function(){this._renderingTask=null,this._renderState=PageRenderState.RENDERED,this._zoomLayer&&$(this._zoomLayer).remove(),this._zoomLayer=this._canvas,$(this._canvas).show(),this._onRenderFinished&&this._onRenderFinished(this,!0)},release:function(){this._zoomLayer=null,this.reset(),this._container.css("background-image","")},reset:function(){this._renderingTask&&(this._renderingTask.cancel(),this._renderingTask=null);for(var e=$(this._container).children(),d=e.length-1;d>=0;d--){var f=e[d];this._zoomLayer!=f&&$(f).remove()}this._canvas&&!this._zoomLayer&&(this._canvas.width=0,this._canvas.height=0,delete this.canvas),this._canvas=null,this._textLayer=null,this._loadingIcon=null,this._zoomLayer&&($(this._zoomLayer).width(this._container.width()),$(this._zoomLayer).height(this._container.height())),this._loadingIcon=this.appendLoadingIcon(),this._renderState=PageRenderState.IDLE},setPdfPage:function(b){this._pdfPage=b}},{CANVAS_IDENTIFIER:"canvas",TEXT_LAYER_IDENTIFIER:"text-layer"});$.ajaxSetup({cache:false});var launcher=new function(){this.runBase=function(){initialize()},this.runWithIntergratedContentInfo=function(b,c,a){if(c==undefined){c=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYER_SETTINGS)}if(a==undefined){a=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENT)}if(c==undefined||a==undefined){return}this.runBase();UniPlayerUriConfiguration.uniPlayerSettingsUri=c;UniPlayerUriConfiguration.contentUri=a;uniPlayerApp.run(b)},this.run=function(b,d,a,c){if(d==undefined){d=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYER_SETTINGS)}if(a==undefined){a=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENT)}if(c==undefined){c=Util.getQueryVariable(UniPlayerSettingsQueryName.SERVICE_ROOT)}if(d==undefined||a==undefined){return}this.runBase();UniPlayerUriConfiguration.uniPlayerSettingsUri=d;UniPlayerUriConfiguration.contentUri=a;UniPlayerUriConfiguration.serviceRootUri=c;uniPlayerApp.run(b)},this.runWithFullUri=function(b,d,e,a,c){if(d==undefined){d=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYER_SETTINGS)}if(e==undefined){e=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYING_INFO)}if(a==undefined){a=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENT_METADATA)}if(c==undefined){c=Util.getQueryVariable(UniPlayerSettingsQueryName.SERVICE_ROOT)}if(d==undefined||e==undefined){return}this.runBase();UniPlayerUriConfiguration.uniPlayerSettingsUri=d;UniPlayerUriConfiguration.contentPlayingInfoUri=e;UniPlayerUriConfiguration.contentMetadataUri=a;UniPlayerUriConfiguration.serviceRootUri=c;uniPlayerApp.run(b)},this.runModule=function(b,c,a){if(c==undefined){c=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYER_SETTINGS)}if(a==undefined){a=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENT)}if(c==undefined||a==undefined){return}this.runBase();UniPlayerUriConfiguration.uniPlayerSettingsUri=c;UniPlayerUriConfiguration.contentUri=a;uniPlayerApp.runModule(b)};this.runCaptionScript=function(b,d,a,c,e){if(d==undefined){d=Util.getQueryVariable(UniPlayerSettingsQueryName.PLAYER_SETTINGS)}if(a==undefined){a=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENT)}if(c==undefined){c=Util.getQueryVariable(UniPlayerSettingsQueryName.SERVICE_ROOT)}if(d==undefined||a==undefined){return}this.runBase();UniPlayerUriConfiguration.uniPlayerSettingsUri=d;UniPlayerUriConfiguration.contentUri=a;UniPlayerUriConfiguration.serviceRootUri=c;uniPlayerApp.runCaptionScript(b,e)}};function initialize(){uniPlayerApp=new UniPlayerApp();skinManager=new SkinManager();apiManager=new ApiManager();noteManager=new NoteManager();cookieManager=new CookieManager();localizeManager=new LocalizeManager()}function initUniPlayerMedia(){uniPlayer=new UniPlayerMedia()}function initUniPlayerDoc(){uniPlayer=new UniPlayerDoc()}function loadUniPlayerCscript(){var d=uniPlayerConfig._uniPlayerSettingsData.playerUri;var c=Date.now();var a=Util.urlMerge(d,"custom/uniplayer_cscript.js");var b=Util.urlMerge(d,"api-component/uniplayer_cscript.js");if(Util.checkUrlExists(a)){head.load(a+"?_="+c)}else{head.load(b)}}function Request(a){return Util.getQueryVariable(a)}var uniPlayerApp;var uniPlayer;var skinManager;var apiManager;var cookieManager;var noteManager;var localizeManager;var uniPlayerConfig;var uniPlayerData;var UniPlayerApp=Base.extend({_targetElement:null,constructor:function(){uniPlayerConfig=new UniPlayerConfig();uniPlayerData=new UniPlayerData()},run:function(a){uniPlayerApp._targetElement=a;uniPlayerConfig.organizeContentPlayingInfo(uniPlayerApp.onContentPlayingInfoOrganized)},runModule:function(a){uniPlayerConfig.setModule(true);this.run(a)},runCaptionScript:function(a,b){uniPlayerConfig.setIsFitToElement(true);uniPlayerConfig.setUseCaptionScript(true);if(b){uniPlayerConfig.setFullScreenElementId(b)}this.run(a)},onContentPlayingInfoOrganized:function(){localizeManager.initialize();uniPlayerApp.loadLibrariesForHls(function(){uniPlayerApp.loadLibrariesForHammer(function(){if(uniPlayerApp.needDocLibrary()){uniPlayerApp.loadLibrariesForDoc()}else{uniPlayerApp.runUniPlayer()}})})},loadLibrariesForHls:function(c){if(skinManager.isLowIE()){c();return}var a=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var b=Util.urlMerge(a,"external-library/hls.js/hls.min.js?version=0.12.4");head.load(b,function(d){c()})},loadLibrariesForHammer:function(c){if(false==skinManager.isMobile()){c();return}var a=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var b=Util.urlMerge(a,"external-library/hammer.js/hammer.min.js?version=2.0.8");head.load(b,function(d){c()})},needDocLibrary:function(){var e=uniPlayerConfig.getContentPlayingInfoData();var d=e.storyList;var a=false;if(e.contentType==ContentType.SHAREDOCS){a=true}else{for(var b=0,c=d.length;b<c;b++){if(d[b].storyType==ContentType.SYNCVIDEO||d[b].storyType==ContentType.SYNCAUDIO){a=true;break}}}return a},loadLibrariesForDoc:function(){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var a=Util.urlMerge(b,"external-library/pdf.js/pdf.js?version=2.6.347");if(skinManager.isPDFSupported()){head.load(a,function(c){uniPlayerApp.loadTurnJS()})}else{uniPlayerApp.loadTurnJS()}},loadTurnJS:function(){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var a=Util.urlMerge(b,"external-library/pdf.js/turn.min.js");if(skinManager.isLowIE()){a=Util.urlMerge(b,"external-library/pdf.js/turn.html4.min.js")}head.load(a,function(c){uniPlayerApp.runUniPlayer()})},runUniPlayer:function(){var a=uniPlayerConfig.getContentPlayingInfoData().contentType;switch(a){case ContentType.AUDIO:case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:case ContentType.SYNCVIDEO:case ContentType.SYNCAUDIO:case ContentType.UPF:initUniPlayerMedia();break;case ContentType.SHAREDOCS:initUniPlayerDoc();break;default:uniPlayerApp.appAlert("content type error");return}uniPlayer.run(uniPlayerApp._targetElement)},appAlert:function(a){$(uniPlayerApp._targetElement).html("<h1 style='padding: 20px; color:white;'>"+a+"</h1>")}},{VIEW_MODE_NORMAL:"normal",VIEW_MODE_POPUP:"popup",VIEW_MODE_LOCAL:"local",VIEW_MODE_MODULE:"module"});var bcChapterVertical;var bcChapterHorizontal;var bcPlayController;var UniPlayer=Base.extend({});var audioPlayer;var videoPlayer;var syncDocPlayer;var contentPlayer;var videoPlayerLayout;var storyWorker;var bcContentMetadata;var bcFrontScreen;var bcClosedCaption;var bcMediaScript;var UniPlayerMedia=UniPlayer.extend({_uniPlayerSettingsData:null,_contentPlayingInfoData:null,_contentMetadata:null,_serviceRoot:null,_targetElement:null,_layoutList:[],_chapterList:null,_closedCaptionList:null,_isSpecificRatio:false,_slideListInfo:null,_eventList:null,_noteData:null,_uniPlayerEventTarget:null,_volume:1,_playbackRate:1,_profile:null,_isRestartReady:false,_isControllerUpdated:false,_isFullScreen:false,_enterTrueFullScreen:null,_exitTrueFullScreen:null,_vcUniPlayerLayout:null,_hasStarted:false,_showInlineCaptionInFullScreen:false,_html5MediaPlayable:false,_storyIntialTime:0,_isInitialPlaying:true,_layoutSettingData:{},_syncVideoMobileStartModeBySetting:null,_isStartWithMixedMedia:false,_errSkipAudioTime:0,_errSkipAudioCount:0,constructor:function(){this._uniPlayerEventTarget=new EventTargetArgs();storyWorker=new StoryWorker();bcContentMetadata=new BCContentMetadata(this._uniPlayerEventTarget);bcFrontScreen=new BCFrontScreen(this._uniPlayerEventTarget);bcChapterVertical=new BCChapterVerticalMedia(this._uniPlayerEventTarget);bcChapterHorizontal=new BCChapterHorizontal(this._uniPlayerEventTarget);bcPlayController=new BCPlayControllerMedia(this._uniPlayerEventTarget);bcClosedCaption=new BCClosedCaption();bcMediaScript=new BCMediaScript()},run:function(a){loadUniPlayerCscript();uniPlayer._targetElement=a;uniPlayer.loadUniPlayerLayout()},loadUniPlayerLayout:function(){this._vcUniPlayerLayout=new VCUniPlayerLayoutMedia();this._vcUniPlayerLayout.load(uniPlayer._targetElement,uniPlayerConfig._uniPlayerSettingsData.skinUri,uniPlayerConfig._skinTargetDevice,uniPlayer.onUniPlayerLayoutLoadCompleted)},onUniPlayerLayoutLoadCompleted:function(){uniPlayer.initFullScreenEvents();if(skinManager.isMobile()){uniPlayer._html5MediaPlayable=true;uniPlayer.startUniPlayer()}else{uniPlayer.testHTML5MediaPlayable()}},testHTML5MediaPlayable:function(){HTML5MediaTester.checkHTML5MediaPlayble(uniPlayer.onHTML5MediaTestCompleted)},onHTML5MediaTestCompleted:function(a){uniPlayer._html5MediaPlayable=a;uniPlayer.startUniPlayer()},prepareMediaElements:function(a){var c=$(UniPlayerMedia.MEDIA_ELEMENT_CLASS).length;var f=0;var e=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var d=Util.urlMerge(e,"preloader.mp4");for(var b=0;b<c;b++){$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[b].src=d;$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[b].load();$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[b].volume=0;$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[b].play();setTimeout(function(g){$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[g].pause();$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[g].volume=1;$(UniPlayerMedia.MEDIA_ELEMENT_CLASS)[g].src="";if((++f)==c){if(a){a()}}},200,b)}},startUniPlayer:function(){if(typeof afterWinLoad==="function"){try{afterWinLoad()}catch(a){}}uniPlayer.applyCookieValue();uniPlayer.firePlayerLoaded();uniPlayer.attachEvent();uniPlayer.initSyncVideoStartLayout();bcContentMetadata.initialize(uniPlayerConfig.getContentMetadata());bcChapterVertical.initialize(uniPlayerConfig.getChapterList());bcChapterHorizontal.initialize(uniPlayerConfig.getChapterList());bcClosedCaption.initialize();bcMediaScript.initialize(uniPlayerConfig.getMediaScriptList());bcPlayController.initialize(uniPlayerConfig.getContentPlayingInfoData().contentDuration);bcPlayController.selectPlaybackRate(uniPlayer.getPlaybackRate());bcPlayController.setVolume(uniPlayer.getVolume());bcFrontScreen.initialize();uniPlayerData.initialize(uniPlayerConfig.getChapterList(),uniPlayerConfig.getContentPlayingInfoData());if(typeof afterWinLoadComplete==="function"){try{afterWinLoadComplete()}catch(a){}}uniPlayer.onResize();if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){uniPlayer.setIsFullScreen(true)}if(false==skinManager.isMobile()&&(true==uniPlayerConfig.getUniPlayerSettingsData().autoPlay||uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_MODULE)){uniPlayer.startUniPlayerPrepare();if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_MODULE){storyWorker.playStory(0,0,false)}else{storyWorker.playStory(0,0,true)}}else{if(uniPlayer.isAndroidInitialEnterFullScreenMode()){storyWorker.playStory(0,0,true)}else{bcFrontScreen.showFrontScreen()}}},initSyncVideoStartLayout:function(){var a=uniPlayer.getSyncVideoInitLayoutName();if(!a){return}if(skinManager.isDesktop()){uniPlayer.initSyncVideoDesktopStartLayout(a)}else{uniPlayer.initSyncVideoMobileStartLayout(a)}},initSyncVideoDesktopStartLayout:function(b){var e=SyncVideoLayoutOptionList[b.toLowerCase()];if(!e){return}var c=uniPlayerConfig.getLayoutList(ContentType.SYNCVIDEO);var d=new LayoutSettingData();d._mainMediaWidth=c[e._layoutIndex]._mainMediaWidth;d._subMediaWidth=c[e._layoutIndex]._subMediaWidth;d._isSwapped=e._isSwapped;if(d._isSwapped){var a=d._mainMediaWidth;d._mainMediaWidth=d._subMediaWidth;d._subMediaWidth=a}uniPlayer.setLayoutSettingData(ContentType.SYNCVIDEO,d)},initSyncVideoMobileStartLayout:function(a){if(uniPlayerConfig.getFirstStoryPlayingInfo().storyType!=ContentType.SYNCVIDEO){return}if(a==SyncVideoLayoutNameTable.MAX_SLIDE){uniPlayer._syncVideoMobileStartModeBySetting=SyncVideoMobilePlayMode.SLIDE}else{if(a==SyncVideoLayoutNameTable.MAX_VIDEO){uniPlayer._syncVideoMobileStartModeBySetting=SyncVideoMobilePlayMode.VIDEO}}},applyCookieValue:function(){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_MODULE){return}var a=cookieManager.getCookie(CookieManager.PLAYBACK_RATE);if(a!=""){uniPlayer._playbackRate=parseFloat(a).toFixed(2)}var b=cookieManager.getCookie(CookieManager.VOLUME);if(b!=""){uniPlayer._volume=parseFloat(b).toFixed(1)}var h=cookieManager.getCookie(CookieManager.PROFILE_ID);if(h!=""){uniPlayer._profile=h}if(uniPlayerConfig.getUniPlayerSettingsData().useLocalContinue){var d=uniPlayerConfig.getContentPlayingInfoData().contentStartTime;var c=uniPlayerConfig.getContentPlayingInfoData().contentEndTime;if(d==-1&&c==-1){var g=uniPlayerConfig.getContentPlayingInfoData().getContentId();var f=CookieManager.LAST_TIME+g;var e=cookieManager.getCookie(f);if(e!=""&&!uniPlayerConfig.getUniPlayerSettingsData().seekLimited){uniPlayerConfig.getContentPlayingInfoData().contentStartTime=parseFloat(e)}}}},startUniPlayerPrepare:function(){uniPlayer.fireDoStart();bcPlayController.showPlayController();bcPlayController.setIsPlaying(true)},attachEvent:function(){window.onresize=this.onResize;this.attachContentPlayerEvents();this.attachUniPlayerLayoutEvents();this.attachContentMetadataEvents();this.attachFrontScreenEvents();this.attachPlayControllerEvents();this.attachChapterEvents()},attachContentPlayerEvents:function(){this._uniPlayerEventTarget.addListener(ContentPlayerEvent.METADATA_LOADED,this.onPlayerMetadataLoaded);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.TIME_UPDATE,this.onPlayerTimeUpdate);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.BUFFERED,this.onPlayerBuffered);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.STATE_CHANGE,this.onPlayerStateChange);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.PLAYER_MOUSE_MOVE,this.onPlayerMouseMove);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.PLAYER_MOUSE_LEAVE,this.onPlayerMouseLeave);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.ENTIRE_AREA_CLICK,this.onEntireAreaClick);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.PLAYER_AREA_TOUCHED,this.onPlayerAreaTouhced);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.ERROR_OCCURED,this.onErrorOccured);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.PLAY_ENDED,this.onStoryPlayEnded);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.HAS_STARTED,this.onHasStarted);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.LAYOUT_CHANGED,this.onLayoutChanged);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.RELOAD_PLAYER,this.onReloadPlayer);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.CHANGE_TO_FLASH,this.onChangeToFlash);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._uniPlayerEventTarget.addListener(ContentPlayerEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged)},attachUniPlayerLayoutEvents:function(){this._uniPlayerEventTarget.addListener(VCUniPlayerLayoutEvent.PLAYER_RESTART,this.onPlayerRestart);this._uniPlayerEventTarget.addListener(VCUniPlayerLayoutEvent.PLAYER_PLAY,this.onPlayerPlay);this._vcUniPlayerLayout.addEventListener(this._uniPlayerEventTarget)},attachContentMetadataEvents:function(){this._uniPlayerEventTarget.addListener(VCContentMetadataEvent.SHOW_CHAPTER_VERTICAL,this.onShowChapterVertical);this._uniPlayerEventTarget.addListener(VCContentMetadataEvent.HIDE_CHAPTER_VERTICAL,this.onHideChapterVertical)},attachFrontScreenEvents:function(){this._uniPlayerEventTarget.addListener(VCFrontScreenEvent.PLAY_SELECTED,this.onFrontScreenPlaySelected);this._uniPlayerEventTarget.addListener(VCFrontScreenEvent.PLAY_OPTION_SELECTED,this.onFrontScreenPlayOptionSelected);this._uniPlayerEventTarget.addListener(VCFrontScreenEvent.PLAY_MIXED_SELECTED,this.onFrontScreenPlayMixedSelected)},attachPlayControllerEvents:function(){this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.PLAY,this.onPlayControllerPlay);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.PAUSE,this.onPlayControllerPause);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SEEK_START,this.onPlayControllerSeekStart);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SEEK_END,this.onPlayControllerSeekEnd);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SWAP_VIDEO,this.onPlayControllerSwapVideo);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SWAP_SYNCDOC,this.onPlayControllerSwapSyncDoc);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.FULL_SCREEN,this.onPlayControllerReqFullScreen);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.CLOSE_FULL_SCREEN,this.onPlayControllerCloseFullScreen);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.CHANGE_VOLUME,this.onPlayControllerChangeVolume);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.CHANGE_PLAYBACK_RATE,this.onPlayControllerChangePlaybackRate);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.CHANGE_PROFILE,this.onPlayControllerChangeProfile);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SHOW_CC,this.onPlayControllerShowCC);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.HIDE_CC,this.onPlayControllerHideCC);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.CC_ITEM_SELECTED,this.onPlayControllerCCItemSelected);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SHOW_CHAPTER,this.onShowChapterVertical);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.HIDE_CHAPTER,this.onHideChapterVertical);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.RELOAD_PLAYER,this.onPlayControllerReloadPlayer);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SWAP_MIXED_VIDEO,this.onPlayControllerSwapMixedVideo);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SWAP_MULTI_VIDEO,this.onPlayControllerSwapMultiVideo);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SHOW_MEDIA_SCRIPT,this.onPlayControllerShowMediaScript);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.HIDE_MEDIA_SCRIPT,this.onPlayControllerHideMediaScript);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.SHOW_CAPTION_SCRIPT,this.onPlayControllerShowCaptionScript);this._uniPlayerEventTarget.addListener(VCPlayControllerEvent.HIDE_CAPTION_SCRIPT,this.onPlayControllerHideCaptionScript)},attachChapterEvents:function(){this._uniPlayerEventTarget.addListener(VCChapterEvent.SEEK,this.onChapterSeek)},setChannel:function(a){if(contentPlayer){contentPlayer.setChannel(a)}},runContent:function(b,a){switch(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType){case ContentType.AUDIO:audioPlayer=new BCAudioPlayer();contentPlayer=audioPlayer;break;case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:videoPlayer=new BCVideoPlayer();contentPlayer=videoPlayer;break;case ContentType.SYNCVIDEO:case ContentType.SYNCAUDIO:syncDocPlayer=new SyncDocPlayer();contentPlayer=syncDocPlayer;break}if(skinManager.isMobile()){switch(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType){case ContentType.AUDIO:break;case ContentType.VIDEO2:case ContentType.VIDEO3:if(uniPlayer.hasStarted()){uniPlayer._mobileStartPlayMode=VideoType.MAIN_MEDIA}videoPlayer.setStartVideoType(uniPlayer._mobileStartPlayMode);bcPlayController.setCurrVideoType(uniPlayer._mobileStartPlayMode);break;case ContentType.SYNCVIDEO:if(uniPlayer.hasStarted()){uniPlayer._mobileStartPlayMode=SyncVideoMobilePlayMode.SLIDE}syncDocPlayer.setMobileStartPlayMode(uniPlayer._mobileStartPlayMode);bcPlayController.setPlayMode(uniPlayer._mobileStartPlayMode);break;case ContentType.SYNCAUDIO:bcPlayController.setFullScreenBtnOfSyncVideoPlayMode(SyncVideoMobilePlayMode.SLIDE);break}}if(!uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro&&uniPlayer._isStartWithMixedMedia){uniPlayerConfig.getMediaChannelConfig().setUseMixedMedia(true);bcPlayController.getPlayController().setIsMixed(true);uniPlayer._isStartWithMixedMedia=false}if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){bcPlayController.setSeekable(false)}if(false==uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){bcChapterHorizontal.showChapter();bcChapterHorizontal.resize()}if(uniPlayerConfig.getClosedCaptionList()){bcClosedCaption.setData(uniPlayerConfig.getClosedCaptionList())}if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.AUDIO){bcChapterHorizontal.hideChapter();bcClosedCaption.hideClosedCaption()}bcPlayController.updateControllerForCurrentStory();bcContentMetadata.updateMenuBtnForCurrentStory();contentPlayer.setUniPlayerEventTarget(uniPlayer._uniPlayerEventTarget);if(skinManager.isMobile()){uniPlayer.initFullScreenEvents()}if(uniPlayerConfig.getContentPlayingInfoData().isExistsProfileList){if(uniPlayer.getProfile()==null){var c=uniPlayerConfig.getCurrentStoryPlayingInfo().getDefaultProfileName();uniPlayer.setProfile(c)}else{uniPlayerConfig.getCurrentStoryPlayingInfo().setProfile(uniPlayer.getProfile())}bcPlayController.setProfileName(uniPlayer.getProfile())}if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){bcPlayController.getPlayController().hideChapterBtn();bcPlayController.getPlayController().hideMediaScriptBtn()}if(uniPlayer.isAndroidInitialEnterFullScreenMode()){uniPlayer._storyIntialTime=b;uniPlayer._isInitialPlaying=a;bcFrontScreen.showFrontScreen();uniPlayer.startUniPlayerPrepare();$(LayoutIdTable.VIDEO_PLAYER).show();$(LayoutIdTable.VIDEO_PLAYER_PLAY).show()}else{contentPlayer.run(b,a)}},releasePlayer:function(){if(contentPlayer==null){return}contentPlayer.release();contentPlayer=null},isTimeInCurrentStory:function(a){return storyWorker.isTimeInCurrentStory(a)},isCurrentStoryFirstStory:function(){return storyWorker.isCurrentStoryFirstStory()},isCurrentStoryLastStory:function(){return storyWorker.isCurrentStoryLastStory()},isMobileIntroShowing:function(){return uniPlayer.getVCUniPlayerLayout().isMobileIntroShowing()},needToShowMobileIntro:function(){if(!uniPlayer.isCurrentStoryFirstStory()){return false}var a=uniPlayerConfig.getUniPlayerSettingsData().introImage;return(a!=null)&&skinManager.isMobile()},showMobileImageIntro:function(){var a=uniPlayerConfig.getUniPlayerSettingsData().introImage;uniPlayer.getVCUniPlayerLayout().showImageIntro(a.uri);setTimeout(function(){uniPlayer.getVCUniPlayerLayout().hideImageIntro();if(contentPlayer){contentPlayer.notifyMobileIntroHidden()}},a.duration)},onResize:function(){uniPlayer.setIsSpecificRatio();if(uniPlayer._vcUniPlayerLayout){uniPlayer._vcUniPlayerLayout.resize(uniPlayerConfig.getViewMode())}if(bcContentMetadata){bcContentMetadata.resize()}if(bcFrontScreen){bcFrontScreen.resize()}if(bcChapterVertical){bcChapterVertical.resize()}if(bcChapterHorizontal){bcChapterHorizontal.resize()}if(bcClosedCaption){bcClosedCaption.resize()}if(bcPlayController){bcPlayController.resize()}if(bcMediaScript){bcMediaScript.resize()}if(contentPlayer){contentPlayer.resize()}if(!skinManager.isMobile()){if(uniPlayer.isHidePlayControllerMode()){uniPlayer.hideCoveringControlsDesktop()}else{if(uniPlayer._hasStarted){$(LayoutIdTable.PLAY_CONTROLLER).hide().show(0)}bcClosedCaption.adjustCaptionVerticalPosition(true)}}},onPlayerMetadataLoaded:function(g,f){var b=contentPlayer.getStandardDuration();var d=(uniPlayerConfig.getContentPlayingInfoData().storyList[0].isIntro)?1:0;var i=true;if(false==skinManager.isMobile()){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){i=false}else{if(contentPlayer.getStandardDuration()==0){var a=uniPlayerConfig.getContentPlayingInfoData().storyList.length;var c=(uniPlayerConfig.getUniPlayerSettingsData().introVideoUri==null)?false:true;if(c){a--}if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.VIDEO1&&a==1){i=false;var h=uniPlayerConfig.getCurrentStoryPlayingInfo();h.startTimeOnContent=h.originalStartTimeOnContent=0;h.endTimeOnContent=h.originalEndTimeOnContent=f;h.storyDuration=h.originalStoryDuration=f}}}}if(false==uniPlayer._isControllerUpdated){if(i){bcPlayController.setDuration(b)}else{bcPlayController.setDuration(f)}}if(false==uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro&&false==uniPlayer._isControllerUpdated){uniPlayer._isControllerUpdated=true;uniPlayerData.setSeekLimit()}},onPlayerTimeUpdate:function(f,d){var c=d;if(uniPlayer.isIntergratedController()){c=uniPlayerConfig.getCurrentStoryPlayingInfo().startTimeOnContent+d}uniPlayerData.updateCurrentTime(c);bcPlayController.setCurrentTime(c);bcChapterVertical.chapterTimeUpdate(c);bcChapterHorizontal.chapterTimeUpdate(c);if(uniPlayerConfig.getContentPlayingInfoData().captionUri!=null){bcClosedCaption.syncCaption(c)}else{bcClosedCaption.syncCaption(d)}if(uniPlayerConfig.getUniPlayerSettingsData().useLocalContinue){var h=uniPlayerConfig.getContentPlayingInfoData().getContentId();var g=CookieManager.LAST_TIME+h;var b=new Date();var a=b.getTime();a+=365*24*3600*1000;b.setTime(a);cookieManager.setCookie(g,c,b)}try{if(!uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){uniPlayer.fireTimeUpdate()}}catch(f){}if(uniPlayer._errSkipAudioTime!=0&&Math.abs(uniPlayer._errSkipAudioTime-d)>1){uniPlayer._errSkipAudioTime=0;uniPlayer._errSkipAudioCount=0}},onPlayerBuffered:function(b,a){if(uniPlayer.isIntergratedController()){a=a+uniPlayerConfig.getCurrentStoryPlayingInfo().startTimeOnContent}bcPlayController.setBuffered(a)},onPlayerStateChange:function(b,a){uniPlayer.firePlayStateChange(a)},onPlayerMouseMove:function(){uniPlayer.showCoveringControlsDesktop()},onPlayerMouseLeave:function(){uniPlayer.hideCoveringControlsDesktop()},onEntireAreaClick:function(){if(bcPlayController.getPlayController()._playbackRateManipulated){bcPlayController.getPlayController()._playbackRateManipulated=false}else{bcPlayController.getPlayController().hidePlaybackRateSetBox()}if(bcPlayController.getPlayController()._ccManipulated){bcPlayController.getPlayController()._ccManipulated=false}else{bcPlayController.getPlayController().hideCCSetBox()}if(bcPlayController.getPlayController()._profileManipulated){bcPlayController.getPlayController()._profileManipulated=false}else{bcPlayController.getPlayController().hideProfileSetBox()}if(bcPlayController.getPlayController()._swapSelectManipulated){bcPlayController.getPlayController()._swapSelectManipulated=false}else{bcPlayController.getPlayController().hideSwapSelectBox()}},onPlayerAreaTouhced:function(){uniPlayer.showCoveringControls()},onErrorOccured:function(c,a){var b="";switch(a){case 1:b="The fetching process for the media resource was aborted by the user agent at the user's request.";break;case 2:b="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";break;case 3:b="An error of some description occurred while decoding the media resource, after the resource was established to be usable.";break;case 4:b="The media resource indicated by the src attribute was not suitable.";break}uniPlayer.setIsFixCoveringControllMode(true);uniPlayer.getVCUniPlayerLayout().showErrorMessage(b);contentPlayer.release()},onStoryPlayEnded:function(){contentPlayer.pause();if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){bcPlayController.setSeekable(true)}if(skinManager.isIPhoneOrIPod()){if(uniPlayer._exitTrueFullScreen){uniPlayer._exitTrueFullScreen()}}if(uniPlayer.isCurrentStoryLastStory()){uniPlayer.showCoveringControls();uniPlayer._isRestartReady=true;uniPlayer.getVCUniPlayerLayout().showRestartBtn();bcPlayController.showRestartBtn();uniPlayer.fireContentEnd()}else{storyWorker.playNextStory()}},onReloadPlayer:function(a){uniPlayer.reloadCurrentStory(false)},reloadCurrentStory:function(a){var d=uniPlayerConfig.getMediaChannelConfig();if(!d.isChannelReduced()&&!d.getUseMixedMedia()&&!a){return}var c=contentPlayer.getCurrentTime();var b=contentPlayer.isPlayCommandGiven();this.releasePlayer();d.setUseMixedMedia(a);d.initialize(uniPlayerConfig.getCurrentStoryPlayingInfo());uniPlayer.initLayoutSettingData();this.runContent(c,b)},onChangeToFlash:function(a){uniPlayer.failToViewContents()},onSkipAudioError:function(d){var a=contentPlayer.getCurrentTime();var b=a+0.5;if(b>uniPlayerConfig.getContentPlayingInfoData().contentDuration){return}if(Math.abs(uniPlayer._errSkipAudioTime-a)<1){uniPlayer._errSkipAudioCount++}uniPlayer._errSkipAudioTime=a;if(uniPlayer._errSkipAudioCount>10){uniPlayer.failToViewContents();return}var c=contentPlayer.isPlayCommandGiven();c=true;uniPlayer.releasePlayer();uniPlayer.runContent(b,c)},onPlaybackRateChanged:function(b,a){if(a>uniPlayerConfig.getUniPlayerSettingsData().maxPlaybackRate){uniPlayer.invalidPbrate()}},onHasStarted:function(){uniPlayer._hasStarted=true;uniPlayer.showCoveringControls()},onPlayerRestart:function(){uniPlayer._isRestartReady=false;uniPlayer.getVCUniPlayerLayout().hideRestartBtn();bcPlayController.hideRestartBtn();uniPlayer.restartPlayer(0)},restartPlayer:function(d){uniPlayer._isRestartReady=false;uniPlayer.getVCUniPlayerLayout().hideRestartBtn();bcPlayController.hideRestartBtn();uniPlayer.initLayoutSettingData();uniPlayer.initSyncVideoStartLayout();var c=storyWorker.getStoryIdxOfTime(d);var a=uniPlayerConfig.getContentPlayingInfoData();var b=d-a.storyList[c].startTimeOnContent;storyWorker.playStory(c,b,true);bcPlayController.setIsPlaying(true);bcPlayController.setIsControllable(true)},onPlayerPlay:function(){uniPlayer.play()},onShowChapterVertical:function(){bcChapterVertical.showChapter();uniPlayer.onResize()},onHideChapterVertical:function(){bcChapterVertical.hideChapter();uniPlayer.onResize()},onFrontScreenPlaySelected:function(){if(!uniPlayer._html5MediaPlayable){window.location.href=uniPlayerConfig.getUniPlayerSettingsData().flashErrorPageUri;return}uniPlayer.hideFrontScreenAndLaunchPlayer();if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP&&skinManager.isMobile()){uniPlayer._mobileStartPlayMode=Util.getQueryVariable(UniPlayerSettingsQueryName.VIDEO_TYPE);if(!uniPlayer._mobileStartPlayMode){uniPlayer._mobileStartPlayMode=Util.getQueryVariable(UniPlayerSettingsQueryName.SYNC_VIDEO_MOBILE_PLAY_MODE)}}if(uniPlayer._syncVideoMobileStartModeBySetting){uniPlayer._mobileStartPlayMode=uniPlayer._syncVideoMobileStartModeBySetting}},onFrontScreenPlayOptionSelected:function(c,b){if(!uniPlayer._html5MediaPlayable){window.location.href=uniPlayerConfig.getUniPlayerSettingsData().flashErrorPageUri;return}var a=uniPlayerConfig.getCurrentStoryPlayingInfo().storyType;if(uniPlayer.isAndroidInitialEnterFullScreenMode()){videoPlayer.setStartVideoType(b);bcPlayController.setCurrVideoType(b)}else{uniPlayer._mobileStartPlayMode=b}uniPlayer.hideFrontScreenAndLaunchPlayer()},onFrontScreenPlayMixedSelected:function(a){if(!uniPlayer._html5MediaPlayable){window.location.href=uniPlayerConfig.getUniPlayerSettingsData().flashErrorPageUri;return}uniPlayer._isStartWithMixedMedia=true;uniPlayer.hideFrontScreenAndLaunchPlayer()},hideFrontScreenAndLaunchPlayer:function(){bcFrontScreen.hideFrontScreen();uniPlayer.startUniPlayerPrepare();uniPlayer.getVCUniPlayerLayout().showLoadingState();if(uniPlayer.needToShowMobileIntro()){uniPlayer.showMobileImageIntro()}if(uniPlayer.isAndroidInitialEnterFullScreenMode()){contentPlayer.run(uniPlayer._storyIntialTime,uniPlayer._isInitialPlaying);uniPlayer.requestFullScreen()}else{if(skinManager.isMobile()){uniPlayer.prepareMediaElements(uniPlayer.launchContentPlayer)}else{uniPlayer.launchContentPlayer()}}},launchContentPlayer:function(){storyWorker.playStory(0,0,true)},onPlayControllerPlay:function(a){uniPlayer.play()},onPlayControllerPause:function(a){uniPlayer.pause()},onPlayControllerSeekStart:function(a){contentPlayer.seekStart()},onPlayControllerSeekEnd:function(b,a){if(uniPlayer._isRestartReady){uniPlayer.restartPlayer(a)}else{uniPlayer.seek(a)}},onPlayControllerSwapVideo:function(b,a){contentPlayer.swapVideo(a)},onPlayControllerSwapSyncDoc:function(a){contentPlayer.swapSyncDoc()},onPlayControllerReqFullScreen:function(a){uniPlayer.requestFullScreen()},onPlayControllerCloseFullScreen:function(a){uniPlayer.closeFullScreen()},onPlayControllerChangeVolume:function(b,a){uniPlayer.setVolume(a);contentPlayer.changeVolume(a)},onPlayControllerChangePlaybackRate:function(b,a){uniPlayer.setPlaybackRate(a);contentPlayer.changePlaybackRate(a)},onPlayControllerChangeProfile:function(b,a){uniPlayer.setProfile(a);contentPlayer.changeProfile(a)},onPlayControllerShowCC:function(a){if(uniPlayerConfig.getClosedCaptionList()==null){return}bcClosedCaption.showClosedCaption()},onPlayControllerHideCC:function(a){bcClosedCaption.hideClosedCaption()},onPlayControllerCCItemSelected:function(b,a){bcClosedCaption.setIdx(a)},onPlayControllerReloadPlayer:function(a){uniPlayer.reloadCurrentStory(false)},onPlayControllerSwapMixedVideo:function(a){var b=uniPlayerConfig.getMediaChannelConfig();uniPlayer.reloadCurrentStory(true)},onPlayControllerSwapMultiVideo:function(a){var b=uniPlayerConfig.getMediaChannelConfig();uniPlayer.reloadCurrentStory(false)},onPlayControllerShowMediaScript:function(a){if(skinManager.isMobile()){uniPlayer.pause()}bcMediaScript.showMediaScript();uniPlayer.onResize()},onPlayControllerHideMediaScript:function(a){bcMediaScript.hideMediaScript();uniPlayer.onResize()},onPlayControllerShowCaptionScript:function(a){apiManager.getPlayerEvent().showCaptionScript()},onPlayControllerHideCaptionScript:function(a){apiManager.getPlayerEvent().hideCaptionScript()},onChapterSeek:function(b,a){if(skinManager.isMobile()){bcChapterVertical.hideChapter()}if(uniPlayer._isRestartReady){uniPlayer.restartPlayer(a)}else{uniPlayer.seek(a)}if(skinManager.isIPhoneOrIPod()&&contentPlayer){contentPlayer.play()}},play:function(){bcPlayController.setIsPlaying(true);contentPlayer.play();if(contentPlayer.needCentralPlayBtn()&&uniPlayer.getVCUniPlayerLayout().isPlayBtnShown()){uniPlayer.getVCUniPlayerLayout().hidePlayBtn()}},pause:function(a){if(skinManager.isMobile()){uniPlayer.showCoveringControls()}bcPlayController.setIsPlaying(false);if(!a){contentPlayer.pause()}if(contentPlayer.needCentralPlayBtn()){uniPlayer.getVCUniPlayerLayout().showPlayBtn()}},seek:function(a){if(uniPlayer.isIntergratedController()&&!uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){if(!uniPlayer.isTimeInCurrentStory(a)){uniPlayer.seekToOtherStory(a,contentPlayer.isPlayCommandGiven());return}a=a-uniPlayerConfig.getCurrentStoryPlayingInfo().startTimeOnContent;contentPlayer.seek(a)}},seekToOtherStory:function(c,b){var a=storyWorker.getStoryIdxOfTime(c);if(a==-1){return}c=c-uniPlayerConfig.getContentPlayingInfoData().storyList[a].startTimeOnContent;bcPlayController.setIsPlaying(b);storyWorker.playStory(a,c,b)},seekWithUpdateCumulativeTime:function(a){uniPlayerData.seekWithUpdateCumulativeTime(a)},cancelDuplicateContents:function(){uniPlayer.getVCUniPlayerLayout().hidePlayer();var a=localizeManager.getStringResource();uniPlayer.getVCUniPlayerLayout().showPlayerErrorMessage(uniPlayer.getTargetElement(),a.CancelDuplicateContents);uniPlayer.releasePlayer()},warnDuplicateContents:function(){if(skinManager.isMobile()){var a=localizeManager.getStringResource();uniPlayer.getVCUniPlayerLayout().showErrorMessage(a.WarnDuplicateContents)}else{uniPlayer.getVCUniPlayerLayout().warnDuplicateContents()}},invalidPbrate:function(){uniPlayer.pause();uniPlayer.setPlaybackRate(1);contentPlayer.changePlaybackRate(1);bcPlayController.selectPlaybackRate(1);var a=localizeManager.getStringResource();uniPlayer.alert(a.InvalidPlaybackRate)},failToViewContents:function(){var a=localizeManager.getStringResource();if(skinManager.isMobile()){uniPlayer.setIsFixCoveringControllMode(true);uniPlayer.getVCUniPlayerLayout().showErrorMessage(a.FailToViewContents);contentPlayer.release()}else{uniPlayer.getVCUniPlayerLayout().hidePlayer();uniPlayer.getVCUniPlayerLayout().showPlayerErrorMessage(uniPlayer.getTargetElement(),a.FailToViewContents);uniPlayer.releasePlayer()}},hideCaptionScript:function(){bcPlayController.hideCaptionScript()},firePlayerLoaded:function(){apiManager.getPlayerEvent().playerLoaded()},fireDoStart:function(){apiManager.getPlayerEvent().doStart()},firePlayStateChange:function(a){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().playStateChange(a)},fireTimeUpdate:function(){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().timeUpdate()},fireContentEnd:function(){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().contentEnd()},firePlayerActivated:function(){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().playerActivated()},firePlayerDeactivated:function(){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().playerDeactivated()},fireGoToSlide:function(){if(uniPlayerConfig.getCurrentStoryPlayingInfo().isIntro){return}apiManager.getPlayerEvent().goToSlide()},getTargetElement:function(){return this._targetElement},getVCUniPlayerLayout:function(){return this._vcUniPlayerLayout},setVolume:function(a){this._volume=a;cookieManager.setCookie(CookieManager.VOLUME,a)},getVolume:function(a){return this._volume},setPlaybackRate:function(a){this._playbackRate=a;cookieManager.setCookie(CookieManager.PLAYBACK_RATE,a)},getPlaybackRate:function(){return parseFloat(this._playbackRate).toFixed(2)},setProfile:function(a){this._profile=a;cookieManager.setCookie(CookieManager.PROFILE_ID,a)},getProfile:function(){return this._profile},getIsRestartReady:function(){return this._isRestartReady},setIsFullScreen:function(a){this._isFullScreen=a;bcPlayController.setIsFullScreen(a)},getIsFullScreen:function(){return this._isFullScreen},setIsSpecificRatio:function(){var c=$(window).outerWidth();var b=$(window).outerHeight();if(uniPlayerConfig.getIsFitToElement()){c=$(uniPlayer.getTargetElement()).innerWidth();b=$(uniPlayer.getTargetElement()).innerHeight()}var a=c/b;this._isSpecificRatio=(Util.isFloatEqual(a,3/2,0.025)||Util.isFloatEqual(a,4/3,0.025)||Util.isFloatEqual(a,16/9,0.025))},isSpecificRatio:function(){return uniPlayer._isSpecificRatio},isIntergratedController:function(){return true},hasStarted:function(){return uniPlayer._hasStarted},initFullScreenEvents:function(){uniPlayer._enterTrueFullScreen=null;uniPlayer._exitTrueFullScreen=null;var c="uni-player";if(uniPlayerConfig.getFullScreenElementId()){c=uniPlayerConfig.getFullScreenElementId()}var b=document.getElementById(c);if(b.requestFullscreen&&document.fullscreenEnabled){uniPlayer._enterTrueFullScreen=b.requestFullscreen.bind(b);uniPlayer._exitTrueFullScreen=document.exitFullscreen.bind(document);document.addEventListener("fullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(b.mozRequestFullScreen&&document.mozFullScreenEnabled){uniPlayer._enterTrueFullScreen=b.mozRequestFullScreen.bind(b);uniPlayer._exitTrueFullScreen=document.mozCancelFullScreen.bind(document);document.addEventListener("mozfullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(b.webkitRequestFullScreen&&document.webkitFullscreenEnabled){uniPlayer._enterTrueFullScreen=b.webkitRequestFullScreen.bind(b);uniPlayer._exitTrueFullScreen=document.webkitCancelFullScreen.bind(document);document.addEventListener("webkitfullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(b.msRequestFullscreen&&document.msFullscreenEnabled){uniPlayer._enterTrueFullScreen=b.msRequestFullscreen.bind(b);uniPlayer._exitTrueFullScreen=document.msExitFullscreen.bind(document);document.addEventListener("MSFullscreenChange",uniPlayer.onFullScreenChange,false)}}}}if(skinManager.isMobile()&&this._enterTrueFullScreen==null){var a=$(uniPlayer.getCurrentMobileVideoClassName())[0];if(a&&a.webkitEnterFullScreen){uniPlayer._enterTrueFullScreen=a.webkitEnterFullScreen.bind(a);uniPlayer._exitTrueFullScreen=a.webkitExitFullScreen.bind(a);uniPlayer._showInlineCaptionInFullScreen=true;a.addEventListener("webkitbeginfullscreen",uniPlayer.onMobileVideoFullScreenBegin);a.addEventListener("webkitendfullscreen",uniPlayer.onMobileVideoFullScreenEnd)}}},requestFullScreen:function(){if(skinManager.isMobile()&&uniPlayer.needToShowPopUpFullScreen()){uniPlayer.openNewFullScreenWindow();uniPlayer.releasePlayer();return}if(uniPlayer._enterTrueFullScreen){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){return}uniPlayer._enterTrueFullScreen();uniPlayer.setIsFullScreen(true)}else{if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){return}if(!bcFrontScreen.isOn()){uniPlayer.openNewFullScreenWindow()}uniPlayer.releasePlayer()}},needToShowPopUpFullScreen:function(){if(skinManager.isDesktop()){return uniPlayer.needToShowDesktopPopUpFullScreen()}else{return uniPlayer.needToShowMobilePopUpFullScreen()}},needToShowDesktopPopUpFullScreen:function(){if(skinManager.isDesktop()&&!uniPlayer._enterTrueFullScreen){return true}return false},needToShowMobilePopUpFullScreen:function(){var b=this.isIframe();var c=uniPlayer.isMobileSlideMode();var a=(skinManager.isAndroidBrowser()&&b&&c);if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.VIDEO1&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls&&skinManager.isAndroidBrowser()){a=false}needPopUpForIOS=(skinManager.isIOS()&&b&&c);return(a||needPopUpForIOS)},isMobileSlideMode:function(){var a=uniPlayerConfig.getCurrentStoryPlayingInfo().storyType;return(a==ContentType.SYNCVIDEO&&bcPlayController.getSyncDocPlayMode()==SyncVideoMobilePlayMode.SLIDE)||a==ContentType.SYNCAUDIO},closeFullScreen:function(){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){window.close();return}if(uniPlayer._exitTrueFullScreen){uniPlayer.setIsFullScreen(false);uniPlayer._exitTrueFullScreen()}},onMobileVideoFullScreenBegin:function(a){if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){return}if(uniPlayer._showInlineCaptionInFullScreen){bcClosedCaption.showHTML5InlineCaptionForMobile(uniPlayer.getCurrentMobileVideoClassName())}},onMobileVideoFullScreenEnd:function(a){if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){return}uniPlayer.pause(skinManager.isAndroid());uniPlayer.setIsFullScreen(false);if(uniPlayer._showInlineCaptionInFullScreen){bcClosedCaption.hideHTML5InlineCaptionForMobile(uniPlayer.getCurrentMobileVideoClassName())}},getCurrentMobileVideoClassName:function(){switch(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType){case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:return UniPlayerMedia.MOBILE_VIDEO_CONTENT_VIDEO_CLASS;case ContentType.SYNCAUDIO:case ContentType.SYNCVIDEO:return UniPlayerMedia.MOBILE_SYNCDOC_CONTENT_VIDEO_CLASS}return null},isIframe:function(){var a=false;try{a=window.self!=window.top}catch(b){a=false}return a},onFullScreenChange:function(a){if(document.fullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){uniPlayer.setIsFullScreen(true);bcContentMetadata.hideCommonsRelatedButtons()}else{uniPlayer.setIsFullScreen(false);bcContentMetadata.showCommonsRelatedButtons()}uniPlayer.onResize()},openNewFullScreenWindow:function(){uniPlayer.pause();uniPlayer.setIsFullScreen(false);var b=uniPlayerConfig.getCurrentStoryPlayingInfo().startTimeOnContent+contentPlayer.getCurrentTime();b=b.toFixed(2);var d=document.URL;d=Util.removeURLParameter(d,ContentPlayingInfoQueryName.CONTENT_START_TIME);d=Util.removeURLParameter(d,ContentPlayingInfoQueryName.CONTENT_START_TIME_LEGACY);d=Util.removeURLParameter(d,ContentPlayingInfoQueryName.CONTENT_END_TIME);d=Util.removeURLParameter(d,ContentPlayingInfoQueryName.CONTENT_END_TIME_LEGACY);var g=d.indexOf("?")==-1?"?":"&";d+=(g+ContentPlayingInfoQueryName.CONTENT_START_TIME+"="+b);if(uniPlayerData._seekLimit){d+=("&"+ContentPlayingInfoQueryName.CONTENT_END_TIME+"="+uniPlayerData.getCumulativePlayedTime())}else{d+=("&"+ContentPlayingInfoQueryName.CONTENT_END_TIME+"=-8888")}d=Util.removeURLParameter(d,UniPlayerSettingsQueryName.USE_CONTINUE_MSG);d=Util.removeURLParameter(d,UniPlayerSettingsQueryName.VIEW_MODE);d=Util.removeURLParameter(d,UniPlayerSettingsQueryName.AUTO_PLAY);d+=("&"+UniPlayerSettingsQueryName.USE_CONTINUE_MSG+"=false");d+=("&"+UniPlayerSettingsQueryName.VIEW_MODE+"="+UniPlayerApp.VIEW_MODE_POPUP);d+=("&"+UniPlayerSettingsQueryName.AUTO_PLAY+"=true");if(skinManager.isMobile()){var h=uniPlayerConfig.getCurrentStoryPlayingInfo().storyType;switch(h){case ContentType.VIDEO2:case ContentType.VIDEO3:d=Util.removeURLParameter(d,UniPlayerSettingsQueryName.VIDEO_TYPE);d+=("&"+UniPlayerSettingsQueryName.VIDEO_TYPE+"="+contentPlayer.getVideoPlay().getCurrentVideoType());break;case ContentType.SYNCVIDEO:d=Util.removeURLParameter(d,UniPlayerSettingsQueryName.SYNC_VIDEO_MOBILE_PLAY_MODE);d+=("&"+UniPlayerSettingsQueryName.SYNC_VIDEO_MOBILE_PLAY_MODE+"="+contentPlayer.getSyncDocPlay().getPlayMode());break}window.open(d,"_blank");uniPlayer.setIsFullScreen(false);return}var e=window.open(d,"_blank","channelmode=yes,scrollbars=no,resizable=yes");uniPlayer.firePlayerDeactivated();var i=null;var f=null;var c=window.setInterval(function a(){try{if(e==null||e.closed){window.clearInterval(c);if(i!=null){bcPlayController.setIsPlaying(true);var k=uniPlayerConfig.getContentPlayingInfoData().contentDuration;if(i>k){i=k}uniPlayer.seekToOtherStory(i,true);if(uniPlayerConfig.getUniPlayerSettingsData().seekLimited){uniPlayerData.setCumulativePlayedTime(f)}}uniPlayer.setIsFullScreen(false);uniPlayer.firePlayerActivated()}if(typeof e.apiManager!="undefined"){i=e.apiManager.getContentApi().getCurrentTime();f=e.apiManager.getContentApi().getCumulativePlayedTime()}}catch(j){}},100)},showCoveringControls:function(){if(skinManager.isMobile()){uniPlayer.showCoveringControlsMobile()}else{uniPlayer.showCoveringControlsDesktop()}},showCoveringControlsMobile:function(){bcPlayController.showPlayController();bcClosedCaption.adjustCaptionVerticalPosition(true);if(contentPlayer.showSyncBtn){contentPlayer.showSyncBtn()}if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.AUDIO){bcContentMetadata.hideContentMetadata()}else{bcContentMetadata.showContentMetadata()}}if(!skinManager.isIPhoneOrIPod()&&!uniPlayer._isFixCoveringControllMode){clearTimeout(uniPlayer._hideCoveringControlsMobileTimer);uniPlayer.startHideCoveringControlsMobileTimer()}},showCoveringControlsDesktop:function(){if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.AUDIO){bcContentMetadata.hideContentMetadata()}else{bcContentMetadata.showContentMetadata()}}contentPlayer.showLayoutSetElements();if(uniPlayer.isHidePlayControllerMode()){bcPlayController.showPlayController();bcClosedCaption.adjustCaptionVerticalPosition(true)}clearTimeout(uniPlayer._hideCoveringControlsDesktopTimer);if(!uniPlayer._isFixCoveringControllMode){uniPlayer.startHideCoveringControlsDesktopTimer()}},hideCoveringControlsMobile:function(){if(uniPlayer._isFixCoveringControllMode){return}if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.AUDIO){return}if(!uniPlayer.isCoveringControlsMobileHideable()){clearTimeout(uniPlayer._hideCoveringControlsMobileTimer);uniPlayer.startHideCoveringControlsMobileTimer();return}bcPlayController.hidePlayController();bcClosedCaption.adjustCaptionVerticalPosition(false);bcContentMetadata.hideContentMetadata();if(contentPlayer.hideSyncBtn){contentPlayer.hideSyncBtn()}},hideCoveringControlsDesktop:function(){clearTimeout(uniPlayer._hideCoveringControlsDesktopTimer);if(uniPlayer._isFixCoveringControllMode){return}if(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType==ContentType.AUDIO){return}if(!uniPlayer.isCoveringControlsHideable()){uniPlayer.startHideCoveringControlsDesktopTimer();return}bcContentMetadata.hideContentMetadata();contentPlayer.hideLayoutSetElements();if(uniPlayer.isHidePlayControllerMode()){bcPlayController.hidePlayController();bcClosedCaption.adjustCaptionVerticalPosition(false)}},isCoveringControlsMobileHideable:function(){return !(!contentPlayer||!contentPlayer.isPlayCommandGiven()||!contentPlayer.isFirstReadyToPlay()||contentPlayer.isSwapping()||uniPlayer.getVCUniPlayerLayout().isRestartBtnShown()||uniPlayer.isMobileIntroShowing()||(contentPlayer&&contentPlayer.isSyncMode&&!contentPlayer.isSyncMode())||bcChapterVertical.isChapterShown()||bcPlayController.isSeeking()||bcPlayController.isCCSetBoxShown()||bcPlayController.isProfileSetBoxShown()||bcPlayController.isSwapSelectBoxShown())},isCoveringControlsHideable:function(){if(contentPlayer==null){return false}var a=bcChapterVertical.isChapterShown()||uniPlayer.getVCUniPlayerLayout().isRestartBtnShown()||bcContentMetadata.isMouseOver()||contentPlayer.isLayoutAdjusting()||contentPlayer.isMouseOverSeparator()||contentPlayer.isMouseOverLayoutSetBox()||bcChapterHorizontal.isMouseOver();if(uniPlayer.isHidePlayControllerMode()){a=a||bcPlayController.isCCSetBoxShown()||bcPlayController.isPlaybackRateSetBoxShown()||bcPlayController.isProfileSetBoxShown()||bcPlayController.isMouseOver()}return !a},startHideCoveringControlsMobileTimer:function(){uniPlayer._hideCoveringControlsMobileTimer=setTimeout(function(){uniPlayer.hideCoveringControlsMobile()},3000)},startHideCoveringControlsDesktopTimer:function(){uniPlayer._hideCoveringControlsDesktopTimer=setTimeout(function(){uniPlayer.hideCoveringControlsDesktop()},3000)},setIsFixCoveringControllMode:function(a){uniPlayer._isFixCoveringControllMode=a;clearTimeout(uniPlayer._hideCoveringControlsMobileTimer);clearTimeout(uniPlayer._hideCoveringControlsDesktopTimer);uniPlayer.showCoveringControls()},isHidePlayControllerMode:function(){if(skinManager.isMobile()){return true}var c=uniPlayerConfig.getUniPlayerSettingsData().useControllerAutoHide;var b=(uniPlayer.isSpecificRatio()&&c)||(uniPlayer.getIsFullScreen()&&c)||(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP)||(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_MODULE);var a=(contentPlayer&&contentPlayer.isSyncMode&&!contentPlayer.isSyncMode());return b&&!a},isAndroidInitialEnterFullScreenMode:function(){var b=(uniPlayerConfig.getContentPlayingInfoData().storyList.length==1);var a;switch(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType){case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:a=true;break;default:a=false;break}return(uniPlayerConfig.getUniPlayerSettingsData().useAndroidEnterFullScreen&&b&&skinManager.isAndroid()&&a)},onLayoutChanged:function(b,a){uniPlayer.setLayoutSettingData(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType,a)},setLayoutSettingData:function(a,b){if(!a){return}uniPlayer._layoutSettingData[a]=b},getLayoutSettingData:function(){var a=uniPlayerConfig.getMediaChannelConfig().getContentType();if(!a){return null}return uniPlayer._layoutSettingData[a]},initLayoutSettingData:function(){uniPlayer._layoutSettingData={}},getSyncVideoInitLayoutName:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(!a){return}if(skinManager.isMobile()){return a.syncVideoInitLayoutMobile}else{return a.syncVideoInitLayoutDesktop}},setCenterPlayBtnVisibility:function(){if(!contentPlayer||!contentPlayer.isMobileSlidePlayingMode){return}if(contentPlayer.isMobileSlidePlayingMode()&&!contentPlayer.isSyncMode()){uniPlayer.getVCUniPlayerLayout().setPlayBtnInvisible()}else{uniPlayer.getVCUniPlayerLayout().setPlayBtnVisibile()}},confirm:function(e,c,b,a,d){uniPlayer.getVCUniPlayerLayout().showConfirmDialog(e,c,b,a,d);if(skinManager.isMobile()){setTimeout(function(){if(uniPlayer.getIsFullScreen()){uniPlayer.closeFullScreen()}},500)}},alert:function(c,b,a){uniPlayer.getVCUniPlayerLayout().showAlertDialog(c,b,a);if(skinManager.isMobile()){setTimeout(function(){if(uniPlayer.getIsFullScreen()){uniPlayer.closeFullScreen()}},500)}}},{MOBILE_VIDEO_CONTENT_VIDEO_CLASS:".vc-vplay-video",MOBILE_SYNCDOC_CONTENT_VIDEO_CLASS:".vc-sdvideo-video",MEDIA_ELEMENT_CLASS:".vc-media-element",VIDEO_PLAYER_CLASS:"video-player",SYNCDOC_PLAYER_CLASS:"syncdoc-player"});var UniPlayerDoc=UniPlayer.extend({_targetElement:null,_uniPlayerEventTarget:null,_enterTrueFullScreen:null,_exitTrueFullScreen:null,_docPlayerInitialized:false,_docLayoutMode:null,_lastHideToolTriggerTime:-1,_mobileControllerHideTimeout:null,_mobileScaleList:[0.3,0.4,0.5,0.6,0.7,0.9,1.1,1.3,1.5,2,2.5],_currMobileScaleIdx:0,constructor:function(){this._uniPlayerEventTarget=new EventTargetArgs();bcPlayController=new BCPlayControllerDoc(this._uniPlayerEventTarget);bcChapterVertical=new BCChapterVerticalDoc(this._uniPlayerEventTarget);docPlayer=new DocPlayer()},run:function(a){loadUniPlayerCscript();uniPlayer._targetElement=a;uniPlayer.loadUniPlayerLayout()},loadUniPlayerLayout:function(){var a=uniPlayerConfig.getUniPlayerSettingsData().skinUri;var b=skinManager.getSkinTargetDevice();this._vcUniPlayerLayout=new VCUniPlayerLayoutDoc();this._vcUniPlayerLayout.load(uniPlayer._targetElement,a,b,uniPlayer.onUniPlayerLayoutLoadCompleted)},onUniPlayerLayoutLoadCompleted:function(){uniPlayer.organizeStoryInfo()},organizeStoryInfo:function(){uniPlayerConfig.organizeCurrStoryPlayingInfo(uniPlayer.onStoryInfoOrganized,uniPlayerConfig.getCurrentStoryPlayingInfo())},onStoryInfoOrganized:function(){uniPlayer.startUniPlayer()},attachEvent:function(){window.onresize=this.onWindowResize;this.attachDocPlayerEvents();this.attachUniPlayerLayoutEvents();this.attachPlayControllerEvents();this.attachChapterEvents();this.attachFullScreenEvents()},attachDocPlayerEvents:function(){uniPlayer._uniPlayerEventTarget.addListener(DocPlayerEvent.INITIALIZED,uniPlayer.onDocPlayerInitialized);uniPlayer._uniPlayerEventTarget.addListener(DocPlayerEvent.DOC_LOAD_PROGRESS,uniPlayer.onDocLoadProgress);uniPlayer._uniPlayerEventTarget.addListener(DocPlayerEvent.PAGE_RENDERED,uniPlayer.onDocPlayerPageRendered);uniPlayer._uniPlayerEventTarget.addListener(DocPlayerEvent.PAGE_CHANGE,uniPlayer.onDocPlayerCurrPageChange);uniPlayer._uniPlayerEventTarget.addListener(DocPlayerEvent.ERROR,uniPlayer.onDocPlayerError)},attachUniPlayerLayoutEvents:function(){if(skinManager.isMobile()){this._uniPlayerEventTarget.addListener(VCUniPlayerDocLayoutEvent.PLAYER_TOUCHED,this.onMobilePlayerTouched)}this._vcUniPlayerLayout.addEventListener(this._uniPlayerEventTarget)},attachPlayControllerEvents:function(){uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.PREV_PAGE,this.onPrevPage);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.NEXT_PAGE,this.onNextPage);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_PAGE,this.onChangePage);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.ZOOM_IN,this.onZoomIn);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.ZOOM_OUT,this.onZoomOut);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_SCALE,this.onChangeScale);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.SET_SCALE,this.onSetScale);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_SCALE_MODE,this.onChangeScaleMode);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,this.onChangeViewMode);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.SHOW_CHAPTER,this.onShowChapter);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.HIDE_CHAPTER,this.onHideChapter);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.FULL_SCREEN,this.onReqFullScreen);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CLOSE_FULL_SCREEN,this.onCloseFullScreen);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.TOOLS_MOUSE_OVER,this.onToolsMouseOver);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.TOOLS_MOUSE_LEAVE,this.onToolsMouseLeave);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_TO_EBOOK_MODE,this.onChangeToEbookMode);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.CHANGE_TO_NORMAL_MODE,this.onChangeToNormalMode);uniPlayer._uniPlayerEventTarget.addListener(VCPlayControllerDocEvent.DOWNLOAD_PDF,this.onDownloadPdf)},attachChapterEvents:function(){uniPlayer._uniPlayerEventTarget.addListener(VCChapterEvent.CHANGE_PAGE,this.onChangePage)},attachFullScreenEvents:function(){uniPlayer._enterTrueFullScreen=null;uniPlayer._exitTrueFullScreen=null;var a=document.getElementById("uni-player");if(a.requestFullscreen&&document.fullscreenEnabled){uniPlayer._enterTrueFullScreen=a.requestFullscreen.bind(a);uniPlayer._exitTrueFullScreen=document.exitFullscreen.bind(document);document.addEventListener("fullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(a.mozRequestFullScreen&&document.mozFullScreenEnabled){uniPlayer._enterTrueFullScreen=a.mozRequestFullScreen.bind(a);uniPlayer._exitTrueFullScreen=document.mozCancelFullScreen.bind(document);document.addEventListener("mozfullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(a.webkitRequestFullScreen&&document.webkitFullscreenEnabled){uniPlayer._enterTrueFullScreen=a.webkitRequestFullScreen.bind(a);uniPlayer._exitTrueFullScreen=document.webkitCancelFullScreen.bind(document);document.addEventListener("webkitfullscreenchange",uniPlayer.onFullScreenChange,false)}else{if(a.msRequestFullscreen&&document.msFullscreenEnabled){uniPlayer._enterTrueFullScreen=a.msRequestFullscreen.bind(a);uniPlayer._exitTrueFullScreen=document.msExitFullscreen.bind(document);document.addEventListener("MSFullscreenChange",uniPlayer.onFullScreenChange,false)}}}}},onWindowResize:function(){uniPlayer.onResize();if(skinManager.isMobile()){uniPlayer.onMobileOrientationChange()}},onResize:function(){if(uniPlayer.getVCUniPlayerLayout()){uniPlayer.getVCUniPlayerLayout().resize()}if(bcChapterVertical){bcChapterVertical.resize()}if(docPlayer){docPlayer.resize()}if(bcPlayController){bcPlayController.resize()}},onMobileOrientationChange:function(){if(docPlayer.isInitialized()){docPlayer.setScale(DocScaleValue.FIT_TO_WIDTH);uniPlayer.adjustMobileScale()}},startUniPlayer:function(){if(typeof afterWinLoad==="function"){try{afterWinLoad()}catch(b){}}uniPlayer.attachEvent();var a=uniPlayerConfig.getUniPlayerSettingsData().getDocLayoutMode();bcPlayController.initialize(a);bcPlayController.setTitle(uniPlayerConfig.getContentMetadata().title);bcChapterVertical.initialize(uniPlayerConfig.getChapterList());uniPlayer.runDocPlayer(a);if(skinManager.isDesktop()){setInterval(uniPlayer.checkHideToolTimer,100)}},runDocPlayer:function(c){var f=new SlideDocDataConverter();var b=f.convertSlideDataToDocData(uniPlayerConfig.getSlideListInfo());var e=Util.urlMerge(uniPlayerConfig.getUniPlayerSettingsData().playerUri,"external-library/pdf.js/pdf.worker.js?version=2.6.347");docPlayer.setPDFWorkerSrc(e);var a=Util.urlMerge(uniPlayerConfig.getUniPlayerSettingsData().playerUri,"external-library/pdf.js/cmaps/");docPlayer.setCmapUrl(a);docPlayer.addEventTarget(uniPlayer._uniPlayerEventTarget);var h;if(skinManager.isDesktop()){h=DocScaleConfig.SCALE_100PERCENT}else{h=DocScaleValue.FIT_TO_WIDTH}var d;if(skinManager.isDesktop()){d=50}else{d=0}var g;if(skinManager.isDesktop()){g={}}else{g={one_page_scroll:[9,9,1,9]}}docPlayer.init(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER,b,uniPlayer.getDocPlayerMode(),{page:1,scale:h,layoutMode:c,useTextLayer:skinManager.isDesktop()?true:false,useHardCover:uniPlayerConfig.getUniPlayerSettingsData().useEbookHardCover,topMarginForScrollMode:d,customPageMargins:g});uniPlayer.getVCUniPlayerLayout().showDocLoadingProgress();uniPlayer.setControllerToolShowing();uniPlayer._lastHideToolTriggerTime=-1;this.sendStatistics()},sendStatistics:function(){var a=new StatisticsManager();a.requestViewStatistics(uniPlayerConfig.getUniPlayerSettingsData().viewStatistics,StatisticsManager.COMMAND_VIEW_CNT,uniPlayerConfig.getContentPlayingInfoData().contentId)},getDocPlayer:function(){return docPlayer},getDocPlayerMode:function(){if(skinManager.isPDFSupported()&&skinManager.isDesktop()){return DocPlayerMode.PDF}else{return DocPlayerMode.IMAGE}},onDocPlayerInitialized:function(a){uniPlayer._docPlayerInitialized=true;if(skinManager.isDesktop()){if($(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER).width()<docPlayer.getCurrPageWidth()){docPlayer.setScale(DocScaleValue.FIT_TO_WIDTH)}}else{uniPlayer.adjustMobileScale();bcPlayController.bindPinchScale()}bcPlayController.setPageText(docPlayer.getCurrPageNum(),docPlayer.getTotalPageCnt());bcChapterVertical.chapterUpdate(docPlayer.getCurrPageNum());uniPlayerData.setCurrentPage(docPlayer.getCurrPageNum());uniPlayerData.setTotalPages(docPlayer.getTotalPageCnt());uniPlayerData.setCumulativePage(docPlayer.getCurrPageNum());apiManager.getPlayerEvent().playStateChange(PlayState.PLAYING)},onDocLoadProgress:function(b,a){uniPlayer.getVCUniPlayerLayout().setDocLoadingProgress(a);if(a>0.99){uniPlayer.getVCUniPlayerLayout().hideDocLoadingProgress();uniPlayer._lastHideToolTriggerTime=(new Date()).getTime();if(skinManager.isMobile()){clearTimeout(uniPlayer._mobileControllerHideTimeout);uniPlayer._mobileControllerHideTimeout=setTimeout(function(){uniPlayer.setControllerToolHidden()},3000)}}},onDocPlayerPageRendered:function(b,a){},onDocPlayerCurrPageChange:function(b,a){bcPlayController.setCurrPageText(a);bcChapterVertical.chapterUpdate(a);uniPlayerData.setCurrentPage(a);uniPlayerData.setCumulativePage(a);apiManager.getPlayerEvent().goToSlide()},onDocPlayerError:function(b,a){uniPlayerApp.appAlert(a)},onMobilePlayerTouched:function(a){uniPlayer.setControllerToolShowing();clearTimeout(uniPlayer._mobileControllerHideTimeout);uniPlayer._mobileControllerHideTimeout=setTimeout(function(){uniPlayer.setControllerToolHidden()},3000)},onPrevPage:function(a){if(docPlayer.isInitialized()){docPlayer.prevPage();bcPlayController.setCurrPageText(docPlayer.getCurrPageNum());bcChapterVertical.chapterUpdate(docPlayer.getCurrPageNum());uniPlayerData.setCurrentPage(docPlayer.getCurrPageNum());uniPlayerData.setCumulativePage(docPlayer.getCurrPageNum());apiManager.getPlayerEvent().goToSlide()}},onNextPage:function(a){if(docPlayer.isInitialized()){docPlayer.nextPage();bcPlayController.setCurrPageText(docPlayer.getCurrPageNum());bcChapterVertical.chapterUpdate(docPlayer.getCurrPageNum());uniPlayerData.setCurrentPage(docPlayer.getCurrPageNum());uniPlayerData.setCumulativePage(docPlayer.getCurrPageNum());apiManager.getPlayerEvent().goToSlide()}},onChangePage:function(b,a){if(docPlayer.isInitialized()){docPlayer.setPage(Number(a));bcPlayController.setCurrPageText(docPlayer.getCurrPageNum());bcChapterVertical.chapterUpdate(docPlayer.getCurrPageNum());uniPlayerData.setCurrentPage(docPlayer.getCurrPageNum());uniPlayerData.setCumulativePage(docPlayer.getCurrPageNum());apiManager.getPlayerEvent().goToSlide()}},onZoomIn:function(f){if(!docPlayer.isInitialized()){return}if(skinManager.isDesktop()){docPlayer.upScale()}else{var a;var b=uniPlayer._mobileScaleList;var d=docPlayer.getCurrRefinedScale();for(var c=0;c<b.length;c++){if(b[c]==DocScaleValue.FIT_TO_WIDTH){a=c}}for(var c=a+1;c<b.length;c++){if(b[c]>d){docPlayer.setScale(b[c]);break}}}},onZoomOut:function(f){if(!docPlayer.isInitialized()){return}if(skinManager.isDesktop()){docPlayer.downScale()}else{var a;var b=uniPlayer._mobileScaleList;var d=docPlayer.getCurrRefinedScale();for(var c=0;c<b.length;c++){if(b[c]==DocScaleValue.FIT_TO_WIDTH){a=c}}for(var c=b.length-1;c>=a;c--){if(c==a){docPlayer.setScale(b[c])}else{if(b[c]<d){docPlayer.setScale(b[c]);break}}}}},onChangeScale:function(b,d){if(docPlayer.isInitialized()){var c=d[0];var a=d[1];var f=d[2];docPlayer.changeScale(d[0]/100,a,f)}},onSetScale:function(b,d){if(docPlayer.isInitialized()){var c=d[0];var a=d[1];var f=d[2];docPlayer.setScale(d[0]/100,a,f)}},onChangeScaleMode:function(b,a){if(docPlayer.isInitialized()){if(docPlayer.getCurrScale()!=a){docPlayer.setScale(a)}}},onChangeViewMode:function(a,b){if(docPlayer.isInitialized()){if(docPlayer.getCurrScale()!=DocScaleValue.FIT_TO_SCALE){docPlayer.setScale(DocScaleValue.FIT_TO_SCALE)}if(docPlayer.getLayoutMode()!=b){docPlayer.setLayoutMode(b);uniPlayer.onResize()}}},onShowChapter:function(a){uniPlayer.showChapter()},showChapter:function(){bcChapterVertical.showChapter();bcPlayController.showChapter();uniPlayer.onResize()},onHideChapter:function(a){uniPlayer.hideChapter()},hideChapter:function(){bcChapterVertical.hideChapter();bcPlayController.hideChapter();uniPlayer.onResize()},onReqFullScreen:function(a){uniPlayer.requestFullscreen()},onCloseFullScreen:function(a){uniPlayer.closeFullScreen()},onChangeToEbookMode:function(a){uniPlayer.hideChapter();if(docPlayer.isInitialized()){docPlayer.setScale(DocScaleValue.FIT_TO_SCALE);docPlayer.setLayoutMode(DocLayoutMode.TWO_PAGE_BOOK)}uniPlayer.onResize()},onChangeToNormalMode:function(a){if(docPlayer.isInitialized()){docPlayer.setLayoutMode(DocLayoutMode.ONE_PAGE_SCROLL);docPlayer.setScale(DocScaleConfig.SCALE_100PERCENT)}uniPlayer.onResize()},onDownloadPdf:function(b){if(docPlayer.isPDFDataSetted()){var c=uniPlayerConfig.getContentMetadata().title;var a=uniPlayerConfig.getContentPlayingInfoData().contentDownloadUri;if(!a){return}a=a+"&file_name="+encodeURIComponent(c);window.location.href=a}},onToolsMouseOver:function(a){uniPlayer.setControllerToolShowing()},onToolsMouseLeave:function(a){uniPlayer._lastHideToolTriggerTime=(new Date()).getTime()},requestFullscreen:function(){if(uniPlayer._enterTrueFullScreen){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){return}bcPlayController.requestFullScreen();uniPlayer._enterTrueFullScreen();uniPlayer.onResize()}else{uniPlayer.openNewFullScreenWindow()}},closeFullScreen:function(){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){window.close();return}if(uniPlayer._exitTrueFullScreen){bcPlayController.closeFullScreen();uniPlayer._exitTrueFullScreen();uniPlayer.onResize()}},onFullScreenChange:function(a){if(document.fullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){bcPlayController.requestFullScreen()}else{bcPlayController.closeFullScreen()}uniPlayer.onResize()},openNewFullScreenWindow:function(){var c=document.URL;var a=c.indexOf("?")==-1?"?":"&";c+=(a+UniPlayerSettingsQueryName.VIEW_MODE+"="+UniPlayerApp.VIEW_MODE_POPUP);if(skinManager.isMobile()){window.open(c,"_blank")}else{var b=window.open(c,"_blank","channelmode=yes,scrollbars=no,resizable=yes")}},setControllerToolShowing:function(){uniPlayer._lastHideToolTriggerTime=-1;if(!bcPlayController.isToolShowing()){bcPlayController.showTools()}},setControllerToolHidden:function(){if(docPlayer.isInitialized()&&docPlayer.getLayoutMode()==DocLayoutMode.TWO_PAGE_BOOK){return}if(bcPlayController.isChapterOn()&&skinManager.isMobile()){return}if(uniPlayer.getVCUniPlayerLayout().isDocLoadingProgressShowing()){return}if(bcPlayController.isToolShowing()){bcPlayController.hideTools();uniPlayer._lastHideToolTriggerTime=-1}},checkHideToolTimer:function(c){if(!uniPlayer){return}if(!uniPlayer._lastHideToolTriggerTime||uniPlayer._lastHideToolTriggerTime<0){return}var b=(new Date()).getTime();var a=b-uniPlayer._lastHideToolTriggerTime;if(a>=3000){uniPlayer.setControllerToolHidden()}},adjustMobileScale:function(){var a=uniPlayer._mobileScaleList;for(var b=0,c=a.length;b<c;b++){if(a[b]==DocScaleValue.FIT_TO_WIDTH){a.splice(b,1)}}uniPlayer._currFitToWidthScaleVal=docPlayer.getCurrRefinedScale();uniPlayer._currMobileScaleIdx=a.length;for(var b=0,c=a.length;b<c;b++){if(a[b]-0.05>uniPlayer._currFitToWidthScaleVal){uniPlayer._currMobileScaleIdx=b;break}}a.splice(uniPlayer._currMobileScaleIdx,0,DocScaleValue.FIT_TO_WIDTH)},getVCUniPlayerLayout:function(){return this._vcUniPlayerLayout}});var UniPlayerUriConfiguration={uniPlayerSettingsUri:null,contentUri:null,contentPlayingInfoUri:null,contentMetadataUri:null,serviceRootUri:null};var UniPlayerConfig=Base.extend({_isModule:false,_isFitToElement:false,_useCaptionScript:false,_fullScreenElementId:null,_uniPlayerSettingsData:null,_contentPlayingInfoData:null,_contentMetadata:null,_serviceRoot:null,_viewMode:null,_chapterList:null,_closedCaptionList:null,_mediaScriptList:null,_layoutList:[],_slideListInfo:null,_eventList:null,_noteData:null,_mediaChannelConfig:null,_organizeContentPlayingInfoCompleted:null,_organizeStoryPlayingInfoCompleted:null,_closedCaptionParsed:false,_staticClosedCaptionParsed:false,_slideListInfoParsed:false,_eventListParsed:false,_noteParsed:false,setModule:function(a){uniPlayerConfig._isModule=a},setIsFitToElement:function(a){uniPlayerConfig._isFitToElement=a},getIsFitToElement:function(){return uniPlayerConfig._isFitToElement},setUseCaptionScript:function(a){uniPlayerConfig._useCaptionScript=a},getUseCaptionScript:function(){return uniPlayerConfig._useCaptionScript},setFullScreenElementId:function(a){uniPlayerConfig._fullScreenElementId=a},getFullScreenElementId:function(){return uniPlayerConfig._fullScreenElementId},getViewMode:function(){return uniPlayerConfig._viewMode},getServiceRoot:function(){return uniPlayerConfig._serviceRoot},getLayoutListUrl:function(){var a=uniPlayerConfig._uniPlayerSettingsData.skinUri;return"{0}/layout-list.xml".format(a)},getLayoutList:function(a){return uniPlayerConfig._layoutList[a]},getChapterList:function(){return this._chapterList},getEventList:function(){return this._eventList},getNoteData:function(){return this._noteData},getClosedCaptionList:function(){return this._closedCaptionList},getMediaScriptList:function(){return this._mediaScriptList},getSlideListInfo:function(){return this._slideListInfo},getMediaChannelConfig:function(){return this._mediaChannelConfig},getUniPlayerSettingsData:function(){return uniPlayerConfig._uniPlayerSettingsData},getContentPlayingInfoData:function(){return uniPlayerConfig._contentPlayingInfoData},getContentMetadata:function(){return uniPlayerConfig._contentMetadata},getCurrentStoryPlayingInfo:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return null}return a.getCurrentStoryPlayingInfo()},getFirstStoryPlayingInfo:function(){var a=uniPlayerConfig.getContentPlayingInfoData();var b=uniPlayerConfig.getFirstStoryIdx();if(b==null){return null}return a.storyList[b]},getFirstStoryIdx:function(){var a=uniPlayerConfig.getContentPlayingInfoData();for(var b in a.storyList){if(false==a.storyList[b].isIntro||typeof a.storyList[b].isIntro=="undefined"){return b}}return null},organizeContentPlayingInfo:function(a){uniPlayerConfig._organizeContentPlayingInfoCompleted=a;uniPlayerConfig.parseUniPlayerSettings()},parseUniPlayerSettings:function(){var a=new UniPlayerSettingsParser();a.parseUniPlayerSettings(UniPlayerUriConfiguration.uniPlayerSettingsUri,function(){var c=a.getUniPlayerSettingsData();var b=new UniPlayerSettingsQueryParser();uniPlayerConfig._uniPlayerSettingsData=b.updateSettingsByQueryString(c);if(skinManager.isIPhoneOrIPod()){uniPlayerConfig._uniPlayerSettingsData.introImage=null}uniPlayerConfig._skinTargetDevice=skinManager.getSkinTargetDevice();var g=Util.getQueryVariable(UniPlayerSettingsQueryName.VIEW_MODE);uniPlayerConfig._viewMode=g==undefined?UniPlayerApp.VIEW_MODE_NORMAL:g;var f;try{f=window.location.protocol;switch(f){case"file:":uniPlayerConfig._viewMode=UniPlayerApp.VIEW_MODE_LOCAL;break}}catch(d){}if(uniPlayerConfig._isModule){uniPlayerConfig._viewMode=UniPlayerApp.VIEW_MODE_MODULE}uniPlayerConfig.parseServiceRoot()})},parseServiceRoot:function(){var a=new ServiceRootParser();a.parseServiceRootData(UniPlayerUriConfiguration.serviceRootUri,function(b){if(!b){uniPlayerConfig._serviceRoot=null}else{uniPlayerConfig._serviceRoot=a.getServiceRootData()}uniPlayerConfig.onServiceRootXMLParseCompleted()})},onServiceRootXMLParseCompleted:function(){if(UniPlayerUriConfiguration.contentUri!=null){uniPlayerConfig.parseContent()}else{uniPlayerConfig.parseContentPlayingInfo()}},parseContent:function(){var a=new ContentParser();if(!UniPlayerUriConfiguration.serviceRootUri){a.parseServiceRootComponent(UniPlayerUriConfiguration.contentUri,function(){uniPlayerConfig._serviceRoot=a.getServiceRootData();uniPlayerConfig.parseIntergratedPlayingInfoAndMetaData(a)})}else{uniPlayerConfig.parseIntergratedPlayingInfoAndMetaData(a)}},parseIntergratedPlayingInfoAndMetaData:function(a){a.parseContent(UniPlayerUriConfiguration.contentUri,function(){var c=a.getContentPlayingInfoData();var b=new ContentPlayingInfoQueryParser();uniPlayerConfig._contentPlayingInfoData=b.updateContentPlayingInfoByQueryString(c);uniPlayerConfig._contentMetadata=a.getContentMetadata();uniPlayerConfig.onContentXmlParseCompleted()})},onContentXmlParseCompleted:function(){uniPlayerConfig.parseLayoutList()},parseContentPlayingInfo:function(){var a=new ContentPlayingInfoParser();a.parseContentPlayingInfo(UniPlayerUriConfiguration.contentPlayingInfoUri,function(){var c=a.getContentPlayingInfoData();var b=new ContentPlayingInfoQueryParser();uniPlayerConfig._contentPlayingInfoData=b.updateContentPlayingInfoByQueryString(c);uniPlayerConfig.onContentPlayingInfoXmlParseCompleted()})},onContentPlayingInfoXmlParseCompleted:function(){uniPlayerConfig.parseContentMetadata()},parseContentMetadata:function(){var a=new ContentMetadataParser();a.parseContentMetadata(UniPlayerUriConfiguration.contentMetadataUri,function(){uniPlayerConfig._contentMetadata=a.getContentMetadata();uniPlayerConfig.onContentMetadataParseCompleted()})},onContentMetadataParseCompleted:function(){uniPlayerConfig.parseLayoutList()},parseLayoutList:function(){var a=new LayoutListParser();a.parseLayoutList(uniPlayerConfig.getLayoutListUrl(),function(){uniPlayerConfig._layoutList=a.getLayoutList();uniPlayerConfig.onLayoutListParseCompleted()})},onLayoutListParseCompleted:function(){uniPlayerConfig.parseChapterList()},parseChapterList:function(){var a=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,ChapterParser.XML_FILENAME);var b=new ChapterParser();b.parseChapter(a,function(){uniPlayerConfig._chapterList=b.getChapterList();uniPlayerConfig.onChapterParseCompleted()})},onChapterParseCompleted:function(){uniPlayerConfig.parseMediaScriptList()},parseMediaScriptList:function(){var b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,MediaScriptParser.XML_FILENAME);var a=new MediaScriptParser();a.parseMediaScriptList(b,function(){uniPlayerConfig._mediaScriptList=a.getMediaScriptList();uniPlayerConfig.onMediaScriptParseCompleted()})},onMediaScriptParseCompleted:function(){if(uniPlayerConfig._organizeContentPlayingInfoCompleted){uniPlayerConfig._organizeContentPlayingInfoCompleted()}uniPlayerConfig._organizeContentPlayingInfoCompleted=null},organizeCurrStoryPlayingInfo:function(c){var b=uniPlayerConfig.getCurrentStoryPlayingInfo();if(b==null){if(c){c()}return}uniPlayerConfig._organizeStoryPlayingInfoCompleted=c;uniPlayerConfig.clearStoryParsedCheckVariables();var a=b.storyId;this._mediaChannelConfig=new MediaChannelConfig();this._mediaChannelConfig.initialize(b);switch(b.storyType){case ContentType.AUDIO:uniPlayerConfig.onStoryRelatedXMLParseCompleted();break;case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:uniPlayerConfig.parseClosedCaption(a);break;case ContentType.SYNCVIDEO:case ContentType.SYNCAUDIO:uniPlayerConfig.parseSlideListInfo(a);uniPlayerConfig.parseEventList(a);uniPlayerConfig.parseNote(a);uniPlayerConfig.parseClosedCaption(a);break;case ContentType.SHAREDOCS:uniPlayerConfig.parseSlideListInfo(a,b);break}},clearStoryParsedCheckVariables:function(){uniPlayerConfig._closedCaptionParsed=false;uniPlayerConfig._slideListInfoParsed=false;uniPlayerConfig._eventListParsed=false;uniPlayerConfig._noteParsed=false},parseSlideListInfo:function(c){var d=uniPlayerConfig.getCurrentStoryPlayingInfo().storyFileNameList.slideList;var b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,d);var a=new SlideListInfoParser();a.parseSlideListInfo(b,function(e){if(false==e){uniPlayerApp.appAlert("slide_list.xml does not exists");return}uniPlayerConfig._slideListInfo=a.getSlideListInfo();uniPlayerConfig.onSlideListInfoParseCompleted()})},parseEventList:function(c){var d=uniPlayerConfig.getCurrentStoryPlayingInfo().storyFileNameList.eventList;var b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,d);var a=new EventListParser();a.parseEventList(b,function(e){uniPlayerConfig._eventList=a.getEventList();uniPlayerConfig.onEventListParseCompleted()})},parseNote:function(c){var d=uniPlayerConfig.getCurrentStoryPlayingInfo().storyFileNameList.note;var b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,d);var a=new NoteParser();a.parseNote(b,function(e){uniPlayerConfig._noteData=a.getNoteData();uniPlayerConfig.onNoteParseCompleted()})},parseClosedCaption:function(c){if(c==ContentPlayingInfoDefault.INTRO_STORY_ID||uniPlayerConfig._contentPlayingInfoData.useCaption==false){uniPlayerConfig._closedCaptionList=null;uniPlayerConfig.onClosedCaptionParseCompleted();return}var b=null;if(uniPlayerConfig._contentPlayingInfoData.captionUri!=null){if(uniPlayerConfig._staticClosedCaptionParsed){uniPlayerConfig.onClosedCaptionParseCompleted();return}b=uniPlayerConfig._contentPlayingInfoData.captionUri+"/caption_list.xml"}else{var d=uniPlayerConfig.getCurrentStoryPlayingInfo().storyFileNameList.caption;b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,d)}var a=new ClosedCaptionParser();a.parseCaptionList(b,function(){uniPlayerConfig._closedCaptionList=a.getCaptionList();if(uniPlayerConfig._contentPlayingInfoData.captionUri!=null){uniPlayerConfig._staticClosedCaptionParsed=true}uniPlayerConfig.onClosedCaptionParseCompleted()})},onSlideListInfoParseCompleted:function(){uniPlayerConfig._slideListInfoParsed=true;uniPlayerConfig.onStoryRelatedXMLParseCompleted()},onEventListParseCompleted:function(){uniPlayerConfig._eventListParsed=true;uniPlayerConfig.onStoryRelatedXMLParseCompleted()},onNoteParseCompleted:function(){uniPlayerConfig._noteParsed=true;uniPlayerConfig.onStoryRelatedXMLParseCompleted()},onClosedCaptionParseCompleted:function(){uniPlayerConfig._closedCaptionParsed=true;uniPlayerConfig.onStoryRelatedXMLParseCompleted()},onStoryRelatedXMLParseCompleted:function(){switch(uniPlayerConfig.getCurrentStoryPlayingInfo().storyType){case ContentType.AUDIO:break;case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:if(!uniPlayerConfig._closedCaptionParsed){return}break;case ContentType.SYNCVIDEO:case ContentType.SYNCAUDIO:if(!uniPlayerConfig._slideListInfoParsed||!uniPlayerConfig._eventListParsed||!uniPlayerConfig._noteParsed||!uniPlayerConfig._closedCaptionParsed){return}break;case ContentType.SHAREDOCS:if(!uniPlayerConfig._slideListInfoParsed){return}break}if(uniPlayerConfig._organizeStoryPlayingInfoCompleted){uniPlayerConfig._organizeStoryPlayingInfoCompleted()}uniPlayerConfig._organizeStoryPlayingInfoCompleted=null}});var StoryWorker=Base.extend({_storyInitialTime:0,_isStoryInitialPlaying:false,_isFirstPlayed:true,_askContinue:true,setCurrentStoryPlayingInfo:function(a){var b=uniPlayerConfig.getContentPlayingInfoData();if(b==null){return}b.setCurrentStoryPlayingInfo(a)},playNextStory:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return}var b=a.currStoryIdx;if(b+1<a.storyList.length){storyWorker.playStory(b+1,0,true)}},playStory:function(h,e,d){if(h<0||h>=uniPlayerConfig.getContentPlayingInfoData().storyList){return}if(this._isFirstPlayed&&!uniPlayerConfig.getContentPlayingInfoData().storyList[h].isIntro){var b=uniPlayerConfig.getContentPlayingInfoData().contentBackgroundImageUri;if(b!=null){if(skinManager.isDesktop()){uniPlayer.getVCUniPlayerLayout().setBgImg(b)}}this._isFirstPlayed=false}var c=uniPlayerConfig.getContentPlayingInfoData().contentStartTime;if(uniPlayerConfig.getFirstStoryIdx()==h&&this._askContinue&&c>0){this._askContinue=false;var g=this.getStoryIdxOfTime(c);if(g!=-1&&uniPlayerConfig.getUniPlayerSettingsData().useContinueMsg){var f=localizeManager.getStringResource();var a=f.ContinueMsg.format(Util.secToTimerString(c));var i=this;uniPlayer.confirm(a,f.ButtonTitle.YES,f.ButtonTitle.NO,function(){i.playStory(g,c-uniPlayerConfig.getContentPlayingInfoData().storyList[g].startTimeOnContent,d)},function(){i.playStoryNext(h,e,d)})}else{if(g!=-1){this.playStory(g,c-uniPlayerConfig.getContentPlayingInfoData().storyList[g].startTimeOnContent,d);return}else{this.playStoryNext(h,e,d)}}}else{this.playStoryNext(h,e,d)}},playStoryNext:function(a,c,b){uniPlayer.releasePlayer();storyWorker._storyInitialTime=c;storyWorker._isStoryInitialPlaying=b;storyWorker.setCurrentStoryPlayingInfo(a);uniPlayerConfig.organizeCurrStoryPlayingInfo(storyWorker.onStoryInfoOrganized)},onStoryInfoOrganized:function(){uniPlayer.runContent(storyWorker._storyInitialTime,storyWorker._isStoryInitialPlaying)},getStoryIdxOfTime:function(c){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return -1}if(c<0||c>a.contentDuration){return -1}for(var b=0;b<a.storyList.length;b++){if(a.storyList[b].isIntro){continue}if(c<a.storyList[b].startTimeOnContent){break}}return b-1},isTimeInCurrentStory:function(c){var a=uniPlayerConfig.getMediaChannelConfig()._playingInfo;var b=(storyWorker.isCurrentStoryLastStory())?1:0;return(c>=a.startTimeOnContent)&&(c<a.endTimeOnContent+b)},isCurrentStoryFirstStory:function(){var a=uniPlayerConfig.getContentPlayingInfoData();return(0==a.currStoryIdx)},isCurrentStoryLastStory:function(){var a=uniPlayerConfig.getContentPlayingInfoData();return((a.storyList.length-1)==a.currStoryIdx)}});var UniPlayerData=Base.extend({_cumulativePlayedTime:0,_currPage:0,_totalPages:0,_cumulativePages:"",_seekLimit:false,initialize:function(a,e){this._currPage=0;this._totalPages=0;this._cumulativePages="";this._seekLimit=uniPlayerConfig.getUniPlayerSettingsData().seekLimited;this._initLimitTime=e.contentEndTime;if(e.contentStartTime==-1&&e.contentEndTime==-1){this._seekLimit=false}else{if(e.contentEndTime==-1){this._initLimitTime=e.contentStartTime}}if(this._initLimitTime==-9999){this._initLimitTime=e.getContentDuration()}else{if(this._initLimitTime==-8888){this._seekLimit=false;this._initLimitTime=0}}this._cumulativePlayedTime=this._initLimitTime;var d=Util.objectKeys(a);if(d.length==0){return null}for(var b=0;b<d.length;b++){var c=d[b];if(a[c]._visible&&a[c]._type==ChapterType.SLIDE){this._totalPages+=1}}for(var b=0;b<this._totalPages;b++){this._cumulativePages+="0"}},setSeekLimit:function(){if(false==this._seekLimit){return}bcChapterVertical.setSeekLimit(this._initLimitTime);bcChapterHorizontal.setSeekLimit(this._initLimitTime);bcPlayController.setSeekLimit(this._initLimitTime);apiManager.getPlayerEvent().updateCaptionScriptSeekLimit(this._initLimitTime)},updateCurrentTime:function(f){this.setCumulativePlayedTime(f);var b=uniPlayerConfig.getChapterList();if(b==null){return}var e=Util.objectKeys(b);var a=0;f*=1;if(e.length==0){return}for(var c=0;c<e.length;c++){var d=e[c];if(b[d]._time._from<=f&&b[d]._type==ChapterType.SLIDE){a+=1}else{if(b[d]._type==ChapterType.SLIDE){break}}}if((a!=0)&&(this._currPage!=a)){this._currPage=a;this._cumulativePages=Util.replaceCharAtIndex(this._cumulativePages,a-1,"1");uniPlayer.fireGoToSlide()}},setInitLimitTime:function(a){if(a>this._initLimitTime){this._initLimitTime=a;this._cumulativePlayedTime=a}},setContentStartTime:function(b){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return null}a.setContentStartTime(b)},setCumulativePlayedTime:function(a){if(a>this._cumulativePlayedTime){this._cumulativePlayedTime=a;if(this._seekLimit){this.updateSeekLimit(a)}}},updateSeekLimit:function(a){if(false==this._seekLimit){return}bcChapterVertical.updateSeekLimit(a);bcChapterHorizontal.updateSeekLimit(a);bcPlayController.updateSeekLimit(a);apiManager.getPlayerEvent().updateCaptionScriptSeekLimit(a)},seekWithUpdateCumulativeTime:function(a){if(this._seekLimit){this.updateSeekLimit(a)}uniPlayer.seek(a);this._cumulativePlayedTime=a},getContentId:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return null}return a.contentId},getDuration:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return 0}if(contentPlayer==null){return 0}return contentPlayer.getStandardDuration()},getCurrentTime:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return 0}if(contentPlayer==null){return 0}if(a.contentType){return uniPlayerConfig.getMediaChannelConfig()._playingInfo.startTimeOnContent+contentPlayer.getCurrentTime()}return 0},getCumulativePlayedTime:function(){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return 0}if(a.contentType){return this._cumulativePlayedTime}return 0},setCurrentPage:function(a){this._currPage=a},getCurrentPage:function(){return this._currPage},setTotalPages:function(b){this._totalPages=b;for(var a=0;a<this._totalPages;a++){this._cumulativePages+="0"}},getTotalPages:function(){return this._totalPages},getCumulativePages:function(){return this._cumulativePages},setCumulativePage:function(a){this._cumulativePages=Util.replaceCharAtIndex(this._cumulativePages,a-1,"1")}});var HTML5MediaTester={_testResultCallback:null,_media:null,checkHTML5MediaPlayble:function(a){this._testResultCallback=a;this.loadTestMedia()},loadTestMedia:function(){var a=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var c=Util.urlMerge(a,"preloader.mp4");this._media=$(this.TESTER_VIDEO_CLASS)[0];if(!this._media.addEventListener){this.onMediaError();return}this._media.addEventListener("canplaythrough",this.onMediaCanPlayThrough);this._media.addEventListener("error",this.onMediaError);this._media.src=c;var b=this._media.play();if(b!==undefined){b["catch"](function(d){uniPlayerConfig.getUniPlayerSettingsData().autoPlay=false})}},onMediaCanPlayThrough:function(){HTML5MediaTester.releaseTestMedia();if(HTML5MediaTester._testResultCallback){HTML5MediaTester._testResultCallback(true)}},onMediaError:function(){try{apiManager.getPlayerEvent().html5VideoError(HTML5MediaTester._media.error.code,0);HTML5MediaTester.releaseTestMedia()}catch(a){HTML5MediaTester._media=null}if(HTML5MediaTester._testResultCallback){HTML5MediaTester._testResultCallback(false)}},releaseTestMedia:function(){if(this._media==null){return}if(!this._media.removeEventListener){this._media=null;return}this._media.removeEventListener("canplaythrough",this.onMediaCanPlayThrough);this._media.removeEventListener("error",this.onMediaError);this._media.pause();this._media=null},TESTER_VIDEO_CLASS:".vc-vplay-video1"};var MediaChannelConfig=Base.extend({_playingInfo:null,_contentType:null,_originalMediaCnt:0,_currChannelCnt:0,_mediaChannelMatchInfo:{},_hasMixedMedia:false,_useMixedMedia:false,initialize:function(b){if(!b){return}this._playingInfo=b;this._contentType=b.storyType;for(var a in VideoType){var c=VideoType[a];this._mediaChannelMatchInfo[c]=c}switch(this._contentType){case ContentType.VIDEO1:case ContentType.SYNCVIDEO:case ContentType.SYNCAUDIO:case ContentType.AUDIO:this._originalMediaCnt=1;break;case ContentType.VIDEO2:this._originalMediaCnt=2;break;case ContentType.VIDEO3:this._originalMediaCnt=2+this._playingInfo.extraMedias.length;break}this._currChannelCnt=this._originalMediaCnt;if(b.mixedMediaList!=null){this._hasMixedMedia=true}},setChannelInfo:function(a,b){this.setCurrChannelCnt(a);this.setContentType(a);this.setMediaChannelMatchInfo(b)},setContentType:function(a){if(a==1){this._contentType=ContentType.VIDEO1}if(a==2){this._contentType=ContentType.VIDEO2}if(a>=3){this._contentType=ContentType.VIDEO3}},setCurrChannelCnt:function(a){this._currChannelCnt=a},getCurrChannelCnt:function(){if(this._useMixedMedia){return 1}return this._currChannelCnt},getContentType:function(){if(this._useMixedMedia){return ContentType.VIDEO1}return this._contentType},setMediaChannelMatchInfo:function(a){this._mediaChannelMatchInfo=a},getMediaChannelMatchInfo:function(){return this._mediaChannelMatchInfo},getCurrentMainMedia:function(){if(this._useMixedMedia){return this.getMedia(this._mediaChannelMatchInfo[VideoType.MIXED_MEDIA])}return this.getMedia(this._mediaChannelMatchInfo[VideoType.MAIN_MEDIA])},getCurrentSubMedia:function(){return this.getMedia(this._mediaChannelMatchInfo[VideoType.SUB_MEDIA])},getCurrentExtraMedia:function(a){switch(a){case 0:return this.getMedia(this._mediaChannelMatchInfo[VideoType.EXTRA_MEDIA]);case 1:return this.getMedia(this._mediaChannelMatchInfo[VideoType.EXTRA_MEDIA2])}},getMedia:function(a){switch(a){case VideoType.MAIN_MEDIA:return this._playingInfo.getCurrentMainMedia();case VideoType.SUB_MEDIA:return this._playingInfo.getCurrentSubMedia();case VideoType.EXTRA_MEDIA:return this._playingInfo.getCurrentExtraMedia(0);case VideoType.EXTRA_MEDIA2:return this._playingInfo.getCurrentExtraMedia(1);case VideoType.MIXED_MEDIA:return this._playingInfo.getCurrentMixedMedia();default:return null}},isChannelReduced:function(){return(this._originalMediaCnt!=this._currChannelCnt)},hasMixedMedia:function(){return this._hasMixedMedia},setUseMixedMedia:function(a){this._useMixedMedia=a},getUseMixedMedia:function(){return this._useMixedMedia},useRTMPStreaming:function(){return uniPlayerConfig.getMediaChannelConfig()._playingInfo.getCurrentMainMedia().desktopMethod==MediaMethod.RTMP},useHLSStreaming:function(){return uniPlayerConfig.getMediaChannelConfig()._playingInfo.getCurrentMainMedia().desktopMethod==MediaMethod.HLS}});var ContentPlayer=Base.extend({_uniPlayerEventTarget:null,_cumulativePages:null,_currPage:0,_totalPages:0,_playerLayout:null,_playController:null,_chapterHorizontal:null,_chapterVertical:null,_start:null,_closedCaption:null,_hideCoveringControlsMobileTimer:null,_hideCoveringControlsDesktopTimer:null,_isFixCoveringControllMode:false,_isMobiileIntroShowing:false,_storyInitialTime:0,_isInitialPlayState:true,_isInitialStory:true,_storyHasPlayed:false,_isSwapping:false,_firstReadyToPlay:false,run:function(b,a){this._storyInitialTime=b;this._isInitialPlayState=a;if(uniPlayer.hasStarted()){this._isInitialStory=false}else{this._isInitialStory=true}},setChannel:function(a){},release:function(){this._uniPlayerEventTarget=null},getCumulativePages:function(){return this._cumulativePages},getCurrentPage:function(){return this._currPage},getTotalPages:function(){return this._totalPages},getPlayController:function(){return this._playController},getChapterVertical:function(){return this._chapterVertical},getChapterHorizontal:function(){return this._chapterHorizontal},getStart:function(){return this._start},getPlayerLayout:function(){return this._playerLayout},getClosedCaption:function(){return this._closedCaption},getSlideVC:function(){return null},getStandardDuration:function(){if(uniPlayer.isIntergratedController()){return uniPlayerConfig.getContentPlayingInfoData().contentDuration}else{return uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyDuration}},showChapterVertical:function(){if(skinManager.isMobile()){$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","visible");return}$(LayoutIdTable.CHAPTER_VERTICAL).show();uniPlayer.onResize()},hideChapterVertical:function(){if(skinManager.isMobile()){$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","hidden");return}$(LayoutIdTable.CHAPTER_VERTICAL).hide();uniPlayer.onResize()},onPlayEnded:function(){contentPlayer.firePlayStateChange(PlayState.STOPPED);if(contentPlayer._uniPlayerEventTarget){contentPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAY_ENDED)}},onChangeToFlash:function(a){if(contentPlayer._uniPlayerEventTarget){contentPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.CHANGE_TO_FLASH)}},onSkipAudioError:function(a){if(contentPlayer._uniPlayerEventTarget){contentPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.SKIP_AUDIO_ERROR)}},setUniPlayerEventTarget:function(a){this._uniPlayerEventTarget=a},showCoveringControls:function(){if(skinManager.isMobile()){contentPlayer.showCoveringControlsMobile()}else{contentPlayer.showCoveringControlsDesktop()}},showCoveringControlsMobile:function(){$(LayoutIdTable.PLAY_CONTROLLER).show();contentPlayer._closedCaption.adjustCaptionVerticalPosition(true);if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){bcContentMetadata.showContentMetadata()}if(!skinManager.isIPhoneOrIPod()&&!contentPlayer._isFixCoveringControllMode){clearTimeout(contentPlayer._hideCoveringControlsMobileTimer);contentPlayer.startHideCoveringControlsMobileTimer()}},showCoveringControlsDesktop:function(){if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){bcContentMetadata.showContentMetadata()}if(contentPlayer.isHidePlayControllerMode()){contentPlayer.showPlayController();contentPlayer._closedCaption.adjustCaptionVerticalPosition(true)}clearTimeout(contentPlayer._hideCoveringControlsDesktopTimer);if(!contentPlayer._isFixCoveringControllMode){contentPlayer.startHideCoveringControlsDesktopTimer()}},hideCoveringControlsMobile:function(){if(contentPlayer._isFixCoveringControllMode){return}if(!contentPlayer.isCoveringControlsMobileHideable()){clearTimeout(contentPlayer._hideCoveringControlsMobileTimer);contentPlayer.startHideCoveringControlsMobileTimer();return}$(LayoutIdTable.PLAY_CONTROLLER).hide();contentPlayer._closedCaption.adjustCaptionVerticalPosition(false);bcContentMetadata.hideContentMetadata()},hideCoveringControlsDesktop:function(){clearTimeout(contentPlayer._hideCoveringControlsDesktopTimer);if(contentPlayer._isFixCoveringControllMode){return}if(!contentPlayer.isCoveringControlsHideable()){contentPlayer.startHideCoveringControlsDesktopTimer();return}bcContentMetadata.hideContentMetadata();if(contentPlayer.isHidePlayControllerMode()){contentPlayer.hidePlayController();contentPlayer._closedCaption.adjustCaptionVerticalPosition(false)}},isCoveringControlsMobileHideable:function(){return true},isCoveringControlsHideable:function(){return true},startHideCoveringControlsMobileTimer:function(){contentPlayer._hideCoveringControlsMobileTimer=setTimeout(function(){if(!contentPlayer._playController.getIsPlaying()){return}contentPlayer.hideCoveringControlsMobile()},3000)},startHideCoveringControlsDesktopTimer:function(){contentPlayer._hideCoveringControlsDesktopTimer=setTimeout(function(){contentPlayer.hideCoveringControlsDesktop()},3000)},setIsFixCoveringControllMode:function(a){contentPlayer._isFixCoveringControllMode=a;clearTimeout(contentPlayer._hideCoveringControlsMobileTimer);clearTimeout(contentPlayer._hideCoveringControlsDesktopTimer);contentPlayer.showCoveringControls()},showPlayController:function(){$(LayoutIdTable.PLAY_CONTROLLER).show()},hidePlayController:function(){$(LayoutIdTable.PLAY_CONTROLLER).hide()},isMobileAutoPlay:function(){if(!skinManager.isMobile()){return false}return(this._isInitialStory||contentPlayer._isInitialPlayState)},needToShowMobileIntro:function(){if(!uniPlayer.isCurrentStoryFirstStory()){return false}var a=uniPlayerConfig.getUniPlayerSettingsData().introImage;return(a!=null)&&skinManager.isMobile()},needToShowStartForDesktop:function(){if(uniPlayer.hasStarted()){return false}if(uniPlayerConfig.getUniPlayerSettingsData().autoPlay){return false}if(!uniPlayer.isCurrentStoryFirstStory()){return false}var b=uniPlayerConfig.getUniPlayerSettingsData().introVideoUri;var a=(b==null)?false:true;var c=uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro;if(c||!(a)){return true}return false},isHidePlayControllerMode:function(){return uniPlayer.isHidePlayControllerMode()},isPlayCommandGiven:function(){},play:function(){},resize:function(){},seekStart:function(){},swapVideo:function(a){},swapSyncDoc:function(){},changeVolume:function(a){},changePlaybackRate:function(a){},changeProfile:function(a){},commonTimeUpdate:function(b){if(uniPlayerConfig.getCurrentStoryPlayingInfo().playSectionList&&uniPlayerConfig.getCurrentStoryPlayingInfo().playSectionList.length!=0){var a=uniPlayerConfig.getCurrentStoryPlayingInfo().convert2storyTime(b);if(a==-1){a=uniPlayerConfig.getCurrentStoryPlayingInfo().getNextStoryTime(b);if(a==-1){contentPlayer.pause();contentPlayer.onPlayEnded();a=uniPlayerConfig.getCurrentStoryPlayingInfo().getStoryEndtime()}else{contentPlayer.seek(a)}}}else{a=b}if(contentPlayer&&contentPlayer._firstReadyToPlay){contentPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.TIME_UPDATE,a)}},onFallbackReady:function(a){},onMetadataLoaded:function(a){},onStatusChange:function(a,b){},onTimeUpdate:function(a,b){},fireDoStart:function(){uniPlayer.fireDoStart()},firePlayStateChange:function(a){uniPlayer.firePlayStateChange(a)},fireTimeUpdate:function(){uniPlayer.fireTimeUpdate()},fireContentEnd:function(){uniPlayer.fireContentEnd()},fireGoToSlide:function(){uniPlayer.fireGoToSlide()},notifyMobileIntroHidden:function(){},needCentralPlayBtn:function(){},isMobileIntroShowing:function(){return uniPlayer.isMobileIntroShowing()},isLayoutAdjusting:function(){return false},isMouseOverSeparator:function(){return false},isMouseOverLayoutSetBox:function(){return false},isSwapping:function(){return this._isSwapping},isFirstReadyToPlay:function(){return this._firstReadyToPlay},showLayoutSetElements:function(){},hideLayoutSetElements:function(){}},{IMAGE_INTRO_WRAPPER:".image-intro-wrapper",IMAGE_INTRO:".image-intro"});var ContentPlayerEvent={METADATA_LOADED:"content_player_metadata_loaded",TIME_UPDATE:"content_player_time_update",BUFFERED:"content_player_buffered",STATE_CHANGE:"content_player_state_change",PLAYER_MOUSE_MOVE:"content_player_mouse_move",PLAYER_MOUSE_LEAVE:"content_player_mouse_leave",ENTIRE_AREA_CLICK:"content_entire_area_click",PLAYER_AREA_TOUCHED:"content_player_area_touched",ERROR_OCCURED:"content_player_error_occured",PLAY_ENDED:"content_player_event_play_ended",HAS_STARTED:"content_player_event_has_started",LAYOUT_CHANGED:"layout_changed",RELOAD_PLAYER:"content_player_reload_player",CHANGE_TO_FLASH:"content_player_change_to_flash",SKIP_AUDIO_ERROR:"content_player_skip_audio_error",PLAYBACK_RATE_CHANGED:"content_player_playback_rate_changed"};var BCAudioPlayer=ContentPlayer.extend({_uniPlayerEventTarget:null,_eventTarget:null,_vcAudioPlay:null,constructor:function(){this._eventTarget=new EventTargetArgs()},run:function(b,a){this.base(b,a);this.attachEvents();uniPlayer.getVCUniPlayerLayout().showLoadingState();this.startAudioPlayer();this.showAudioPlayer()},attachEvents:function(){this._eventTarget.addListener(VCAudioPlayEvent.METADATA_LOADED,this.onAudioPlayMetaDataLoaded);this._eventTarget.addListener(VCAudioPlayEvent.READY_TO_PLAY,this.onAudioPlayReadyToPlay);this._eventTarget.addListener(VCAudioPlayEvent.TIME_UPDATE,this.onAudioPlayTimeUpdate);this._eventTarget.addListener(VCAudioPlayEvent.BUFFERED,this.onAudioPlayBuffered);this._eventTarget.addListener(VCAudioPlayEvent.PLAYING,this.onAudioPlayPlaying);this._eventTarget.addListener(VCAudioPlayEvent.WAITING,this.onAudioPlayWaiting);this._eventTarget.addListener(VCAudioPlayEvent.ERROR,this.onAudioPlayError);this._eventTarget.addListener(VCAudioPlayEvent.ENDED,this.onPlayEnded);this._eventTarget.addListener(VCAudioPlayEvent.STATE_CHANGE,this.onAudioPlayStateChange);this._eventTarget.addListener(VCAudioPlayEvent.PLAYER_MOUSEMOVE,this.onAudioPlayerMouseMove);this._eventTarget.addListener(VCAudioPlayEvent.PLAYER_MOUSELEAVE,this.onAudioPlayerMouseLeave);this._eventTarget.addListener(VCAudioPlayEvent.CLICK_ENTIRE_AREA,this.onEntireAreaClicked);this._eventTarget.addListener(VCAudioPlayEvent.PLAYER_AREA_TOUCHED,this.onAudioPlayerAreaTouched);this._eventTarget.addListener(VCAudioPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged)},resize:function(){if(this.getAudioPlay()!=null){this.getAudioPlay().resize()}},getAudioPlay:function(){return this._vcAudioPlay},showAudioPlayer:function(){this.getAudioPlay().showAudioPlayer()},hideAudioPlayer:function(){this.getAudioPlay().hideAudioPlayer()},release:function(){this.hideAudioPlayer();this.getAudioPlay().release();this._eventTarget=null;this.base()},startAudioPlayer:function(){this.loadAudioPlay();this.sendStatistics();if(skinManager.isMobile()){this.startMobileAudioPlayer()}else{this.startDesktopAudioPlayer()}if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.HAS_STARTED)}},startDesktopAudioPlayer:function(){},startMobileAudioPlayer:function(){this.setAndroidHtml5DefaultControls();var a=audioPlayer.getAudioPlay();a.setIsAutoPlay(audioPlayer.isMobileAutoPlay());if(audioPlayer.isMobileAutoPlay()){a.initialDirectPlay();if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){setTimeout(function(){a.hideAudioTouchMask()},1000)}else{a.showAudioTouchMask()}}if(skinManager.isIPhoneOrIPod()&&skinManager.getiOSVersion()<8&&!audioPlayer.isMobileAutoPlay()){audioPlayer.onAudioPlayReadyToPlayFirstTime()}},loadAudioPlay:function(){audioPlayer._vcAudioPlay=VCAudioPlayFactory.createAudioPlay();audioPlayer._vcAudioPlay.initialize(uniPlayerConfig.getMediaChannelConfig()._playingInfo);audioPlayer._vcAudioPlay.addEventListener(audioPlayer._eventTarget)},sendStatistics:function(){var a=new StatisticsManager();a.requestViewStatistics(uniPlayerConfig.getUniPlayerSettingsData().viewStatistics,StatisticsManager.COMMAND_VIEW_CNT,uniPlayerConfig.getContentPlayingInfoData().contentId)},setAndroidHtml5DefaultControls:function(){var a=audioPlayer.getAudioPlay();if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){bcPlayController.hidePlayController();a.addHtml5DefaultControls()}else{bcPlayController.showPlayController();a.removeHtml5DefaultControls()}},onAudioPlayMetaDataLoaded:function(a,b){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.METADATA_LOADED,b)}},onAudioPlayTimeUpdate:function(a,b){if(skinManager.isMobile()&&!audioPlayer._isInitialStory&&!audioPlayer._storyHasPlayed){return}if(audioPlayer._firstReadyToPlay){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.TIME_UPDATE,b)}}},onAudioPlayBuffered:function(b,a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.BUFFERED,a)}},onAudioPlayReadyToPlay:function(a){if(!audioPlayer._firstReadyToPlay){audioPlayer.onAudioPlayReadyToPlayFirstTime()}},onAudioPlayReadyToPlayFirstTime:function(){uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isMobile()){audioPlayer.audioPlayMobileReadyToPlayFirstTime()}else{audioPlayer.audioPlayDesktopReadyToPlayFirstTime()}var a=uniPlayer.getVolume();this.changeVolume(a);audioPlayer._firstReadyToPlay=true;if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.TIME_UPDATE,audioPlayer._storyInitialTime)}},audioPlayMobileReadyToPlayFirstTime:function(){var a=this._storyInitialTime;if(a>0){audioPlayer.getAudioPlay().setStartTime(a)}if(audioPlayer.isMobileAutoPlay()){if(!audioPlayer.isMobileIntroShowing()){audioPlayer.play()}}var b=uniPlayer.getPlaybackRate();this.changePlaybackRate(b)},audioPlayDesktopReadyToPlayFirstTime:function(){var a=this._storyInitialTime;if(a>0){audioPlayer.seek(a)}if(audioPlayer._isInitialPlayState){audioPlayer.play()}var b=uniPlayer.getPlaybackRate();this.changePlaybackRate(b)},onAudioPlayPlaying:function(a){uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isAndroid()){setTimeout(function(){uniPlayer.showCoveringControlsMobile()},3000)}},onAudioPlayWaiting:function(a){uniPlayer.getVCUniPlayerLayout().showLoadingState();if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,PlayState.BUFFERING)}},onAudioPlayError:function(b,a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.ERROR_OCCURED,a)}},onAudioPlayStateChange:function(a,b){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,b)}},onAudioPlayerMouseMove:function(a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_MOVE)}},onAudioPlayerMouseLeave:function(a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_LEAVE)}},onEntireAreaClicked:function(a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.ENTIRE_AREA_CLICK)}},onAudioPlayerAreaTouched:function(a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_AREA_TOUCHED)}},onPlaybackRateChanged:function(b,a){if(audioPlayer._uniPlayerEventTarget){audioPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYBACK_RATE_CHANGED,a)}},play:function(){audioPlayer._storyHasPlayed=true;audioPlayer.getAudioPlay().play()},pause:function(){audioPlayer.getAudioPlay().pause()},seekStart:function(){audioPlayer.getAudioPlay().seekStart()},seek:function(a){audioPlayer.getAudioPlay().seekTo(a)},changeVolume:function(a){audioPlayer.getAudioPlay().setVolume(a)},changePlaybackRate:function(a){audioPlayer.getAudioPlay().setPlaybackRate(a)},getDuration:function(){if(!audioPlayer.getAudioPlay()){return 0}return audioPlayer.getAudioPlay().getDuration()},getCurrentTime:function(){if(!audioPlayer.getAudioPlay()){return 0}return audioPlayer.getAudioPlay().getCurrentTime()},notifyMobileIntroHidden:function(){if(audioPlayer._firstReadyToPlay&&!audioPlayer._storyHasPlayed){audioPlayer.play()}},isPlayCommandGiven:function(){return this.getAudioPlay().isPlayCommandGiven()},onFallbackReady:function(a){audioPlayer.getAudioPlay().onFallbackReady(a)},onMetadataLoaded:function(a){audioPlayer.getAudioPlay().onMetadataLoaded(a)},onStatusChange:function(a,b){audioPlayer.getAudioPlay().onStatusChange(a,b)},onTimeUpdate:function(a,b){audioPlayer.getAudioPlay().onTimeUpdate(a,b)},needCentralPlayBtn:function(){return skinManager.isAndroid()}});var BCVideoPlayer=ContentPlayer.extend({_uniPlayerEventTarget:null,_eventTarget:null,_vcVideoPlay:null,_startVideoTypeForMobile:null,_settingChannelForDesktop:false,constructor:function(){this._eventTarget=new EventTargetArgs()},run:function(b,a){this.base(b,a);this.attachEvents();uniPlayer.getVCUniPlayerLayout().showLoadingState();this.startVideoPlayer();this.showVideoPlayer()},setChannel:function(a){var c=contentPlayer.getCurrentTime();var b=contentPlayer.isPlayCommandGiven();contentPlayer._firstReadyToPlay=false;contentPlayer._storyInitialTime=c;contentPlayer._isInitialPlayState=b;if(skinManager.isNeedFlashFallback()||uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming()||(uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()&&true!=skinManager.isHlsSupported())){this.setChannelForFlash(a)}else{this.setChannelForDesktop(a)}},setChannelForDesktop:function(b){videoPlayer._settingChannelForDesktop=true;mcConfig=uniPlayerConfig.getMediaChannelConfig();var a=this.generateNewMcMatchInfo(b);this.getVideoPlay().releaseDesktopEvents();this.transferMedias(b);this.getVideoPlay().release();this.getVideoPlay().hideVideoPlayer();mcConfig.setChannelInfo(b.length,a);contentPlayer.startVideoPlayer();contentPlayer.showVideoPlayer();if(contentPlayer._isInitialPlayState){contentPlayer.play()}contentPlayer.getVideoPlay().setReadyToPlayStatusManually();videoPlayer._settingChannelForDesktop=false},setChannelForFlash:function(b){mcConfig=uniPlayerConfig.getMediaChannelConfig();var a=this.generateNewMcMatchInfo(b);this.getVideoPlay().release();this.getVideoPlay().hideVideoPlayer();mcConfig.setChannelInfo(b.length,a);contentPlayer.startVideoPlayer();contentPlayer.showVideoPlayer()},generateNewMcMatchInfo:function(b){mcConfig=uniPlayerConfig.getMediaChannelConfig();var c=mcConfig.getMediaChannelMatchInfo();var a={};if(b.length>0){a[VideoType.MAIN_MEDIA]=c[b[0]]}if(b.length>1){a[VideoType.SUB_MEDIA]=c[b[1]]}if(b.length>2){a[VideoType.EXTRA_MEDIA]=c[b[2]]}if(b.length>3){a[VideoType.EXTRA_MEDIA2]=c[b[3]]}return a},transferMedias:function(b){for(var a in b){var c=this.getTargetContainer(a,b.length);this.transferMedia(b[a],c)}},getTargetContainer:function(c,d){var b=[VideoType.MAIN_MEDIA,VideoType.SUB_MEDIA,VideoType.EXTRA_MEDIA,VideoType.EXTRA_MEDIA2];var a=b[c];return videoPlayer.getVideoPlay().getTargetContainer(a,d)},transferMedia:function(a,c){var d=contentPlayer.getVideoPlay();var b=c.children()[0].getAttribute("class");$(c.children()[0]).remove();switch(a){case VideoType.MAIN_MEDIA:d.transferMainMedia(c);break;case VideoType.SUB_MEDIA:d.transferSubMedia(c);break;case VideoType.EXTRA_MEDIA:d.transferExtraMedia(c,0);break;case VideoType.EXTRA_MEDIA2:d.transferExtraMedia(c,1);break}c.children()[0].setAttribute("class",b)},attachEvents:function(){this._eventTarget.addListener(VCVideoPlayEvent.METADATA_LOADED,this.onVideoPlayMetaDataLoaded);this._eventTarget.addListener(VCVideoPlayEvent.READY_TO_PLAY,this.onVideoPlayReadyToPlay);this._eventTarget.addListener(VCVideoPlayEvent.TIME_UPDATE,this.onVideoPlayTimeUpdate);this._eventTarget.addListener(VCVideoPlayEvent.BUFFERED,this.onVideoPlayBuffered);this._eventTarget.addListener(VCVideoPlayEvent.PLAYING,this.onVideoPlayPlaying);this._eventTarget.addListener(VCVideoPlayEvent.WAITING,this.onVideoPlayWaiting);this._eventTarget.addListener(VCVideoPlayEvent.SWAPING,this.onVideoPlaySwaping);this._eventTarget.addListener(VCVideoPlayEvent.SWAPPED,this.onVideoPlaySwapped);this._eventTarget.addListener(VCVideoPlayEvent.ERROR,this.onVideoPlayError);this._eventTarget.addListener(VCVideoPlayEvent.ENDED,this.onPlayEnded);this._eventTarget.addListener(VCVideoPlayEvent.CHANGE_TO_FLASH,this.onChangeToFlash);this._eventTarget.addListener(VCVideoPlayEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._eventTarget.addListener(VCVideoPlayEvent.STATE_CHANGE,this.onVideoPlayStateChange);this._eventTarget.addListener(VCVideoPlayEvent.PLAYER_MOUSEMOVE,this.onVideoPlayerMouseMove);this._eventTarget.addListener(VCVideoPlayEvent.PLAYER_MOUSELEAVE,this.onVideoPlayerMouseLeave);this._eventTarget.addListener(VCVideoPlayEvent.CLICK_ENTIRE_AREA,this.onEntireAreaClicked);this._eventTarget.addListener(VCVideoPlayEvent.PLAYER_AREA_TOUCHED,this.onVideoPlayerAreaTouched);this._eventTarget.addListener(VCVideoPlayEvent.LAYOUT_CHANGED,this.onLayoutChanged);this._eventTarget.addListener(VCVideoPlayEvent.RELOAD_PLAYER,this.onReloadPlayer);this._eventTarget.addListener(VCVideoPlayEvent.REMOVE_VIDEO,this.onRemoveVideo);this._eventTarget.addListener(VCVideoPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged)},resize:function(){if(this.getVideoPlay()!=null){this.getVideoPlay().resize()}},getVideoPlay:function(){return this._vcVideoPlay},showVideoPlayer:function(){this._vcVideoPlay.showVideoPlayer()},hideVideoPlayer:function(){this._vcVideoPlay.hideVideoPlayer()},release:function(){this.getVideoPlay().release();this.hideVideoPlayer();this._eventTarget=null;this.base()},startVideoPlayer:function(){this.loadVideoPlay();this.sendStatistics();if(skinManager.isMobile()){this.startMobileVideoPlayer()}else{this.startDesktopVideoPlayer()}if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.HAS_STARTED)}},startDesktopVideoPlayer:function(){var a=uniPlayer.getLayoutSettingData();if(a){videoPlayer.getVideoPlay().setInitialLayoutWithData(a)}else{videoPlayer.getVideoPlay().setLayoutIndex(1)}},startMobileVideoPlayer:function(){this.setAndroidHtml5DefaultControls();var a=videoPlayer.getVideoPlay();a.setIsAutoPlay(videoPlayer.isMobileAutoPlay());a.setStartVideoType(videoPlayer._startVideoTypeForMobile);if(videoPlayer.isMobileAutoPlay()){a.initialDirectPlay();if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){setTimeout(function(){a.hideVideoTouchMask()},1000)}else{a.showVideoTouchMask()}}if(skinManager.isIPhoneOrIPod()&&skinManager.getiOSVersion()<8&&!videoPlayer.isMobileAutoPlay()){videoPlayer.onVideoPlayReadyToPlayFirstTime()}},loadVideoPlay:function(){videoPlayer._vcVideoPlay=VCVideoPlayFactory.createVideoPlay();videoPlayer._vcVideoPlay.initialize(uniPlayerConfig.getMediaChannelConfig()._playingInfo);videoPlayer._vcVideoPlay.addEventListener(videoPlayer._eventTarget)},sendStatistics:function(){var a=new StatisticsManager();a.requestViewStatistics(uniPlayerConfig.getUniPlayerSettingsData().viewStatistics,StatisticsManager.COMMAND_VIEW_CNT,uniPlayerConfig.getContentPlayingInfoData().contentId)},setAndroidHtml5DefaultControls:function(){var a=videoPlayer.getVideoPlay();if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){bcPlayController.hidePlayController();a.addHtml5DefaultControls()}else{bcPlayController.showPlayController();a.removeHtml5DefaultControls()}},onVideoPlayMetaDataLoaded:function(a,b){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.METADATA_LOADED,b)}},onVideoPlayTimeUpdate:function(a,b){if(skinManager.isMobile()&&!videoPlayer._isInitialStory&&!videoPlayer._storyHasPlayed){return}videoPlayer.commonTimeUpdate(b)},onVideoPlayBuffered:function(b,a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.BUFFERED,a)}},onVideoPlayReadyToPlay:function(b){var a=uniPlayer.getVolume();videoPlayer.changeVolume(a);if(!videoPlayer._firstReadyToPlay){videoPlayer.onVideoPlayReadyToPlayFirstTime()}else{bcPlayController.setIsControllable(true)}},onVideoPlayReadyToPlayFirstTime:function(){uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isMobile()){videoPlayer.videoPlayMobileReadyToPlayFirstTime()}else{videoPlayer.videoPlayDesktopReadyToPlayFirstTime()}videoPlayer._firstReadyToPlay=true;if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.TIME_UPDATE,videoPlayer._storyInitialTime)}},videoPlayMobileReadyToPlayFirstTime:function(){var a=this._storyInitialTime;if(a>0){videoPlayer.getVideoPlay().setStartTime(uniPlayerConfig.getCurrentStoryPlayingInfo().convert2mediaTime(a))}if(videoPlayer.isMobileAutoPlay()){if(!videoPlayer.isMobileIntroShowing()){videoPlayer.play();var b=uniPlayer.getPlaybackRate();this.changePlaybackRate(b)}}},videoPlayDesktopReadyToPlayFirstTime:function(){if(videoPlayer._isInitialPlayState){videoPlayer.play()}if(!videoPlayer._settingChannelForDesktop){var a=this._storyInitialTime;if(a>0){videoPlayer.seek(uniPlayerConfig.getCurrentStoryPlayingInfo().convert2mediaTime(a))}}if(false==uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro){var b=uniPlayer.getPlaybackRate();this.changePlaybackRate(b)}},onVideoPlayPlaying:function(a){uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isAndroid()){setTimeout(function(){uniPlayer.showCoveringControlsMobile()},3000)}},onVideoPlayWaiting:function(a){uniPlayer.getVCUniPlayerLayout().showLoadingState();if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,PlayState.BUFFERING)}},onVideoPlaySwaping:function(a){contentPlayer._isSwapping=true;uniPlayer.getVCUniPlayerLayout().showSwapLoadingState();bcPlayController.setIsControllable(false)},onVideoPlaySwapped:function(a){contentPlayer._isSwapping=false;uniPlayer.getVCUniPlayerLayout().hideSwapLoadingState();bcPlayController.setIsControllable(true);if(skinManager.isIPhoneOrIPod()){bcPlayController.setIsPlaying(true)}videoPlayer.applyPrevMediaAttributes()},applyPrevMediaAttributes:function(){videoPlayer.changeVolume(uniPlayer.getVolume());videoPlayer.changePlaybackRate(uniPlayer.getPlaybackRate())},onVideoPlayError:function(b,a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.ERROR_OCCURED,a)}},onVideoPlayStateChange:function(a,b){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,b)}},onVideoPlayerMouseMove:function(a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_MOVE)}},onVideoPlayerMouseLeave:function(a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_LEAVE)}},onEntireAreaClicked:function(a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.ENTIRE_AREA_CLICK)}},onVideoPlayerAreaTouched:function(a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_AREA_TOUCHED)}},onLayoutChanged:function(a,b){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.LAYOUT_CHANGED,b)}},onReloadPlayer:function(a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.RELOAD_PLAYER)}},onRemoveVideo:function(c,b){var a=videoPlayer.generateReducedMediaList(b);videoPlayer.setChannel(a)},onPlaybackRateChanged:function(b,a){if(videoPlayer._uniPlayerEventTarget){videoPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYBACK_RATE_CHANGED,a)}},play:function(){videoPlayer._storyHasPlayed=true;videoPlayer.getVideoPlay().play()},pause:function(){videoPlayer.getVideoPlay().pause()},seekStart:function(){videoPlayer.getVideoPlay().seekStart()},seek:function(a){videoPlayer.getVideoPlay().seekTo(uniPlayerConfig.getCurrentStoryPlayingInfo().convert2mediaTime(a))},swapVideo:function(a){if(!a){videoPlayer.getVideoPlay().swapVideo()}else{videoPlayer.getVideoPlay().swapVideo(a)}},changeVolume:function(a){if(videoPlayer.getVideoPlay().setVolume){videoPlayer.getVideoPlay().setVolume(a)}},changePlaybackRate:function(a){if(videoPlayer.getVideoPlay().setPlaybackRate){videoPlayer.getVideoPlay().setPlaybackRate(a)}},changeProfile:function(a){videoPlayer.getVideoPlay().swapProfile(a)},getDuration:function(){if(!videoPlayer.getVideoPlay()){return 0}return videoPlayer.getVideoPlay().getDuration()},getCurrentTime:function(){if(!videoPlayer.getVideoPlay()){return 0}return videoPlayer.getVideoPlay().getCurrentTime()},setStartVideoType:function(a){videoPlayer._startVideoTypeForMobile=a},notifyMobileIntroHidden:function(){if(videoPlayer._firstReadyToPlay&&!videoPlayer._storyHasPlayed){videoPlayer.play()}},generateReducedMediaList:function(c){var a=videoPlayer.getVideoPlay().getCurrMediaListOnClockWise();var b=Util.indexOf(c,a);if(b>=0){a.splice(b,1)}if(a.length>=2){var d=a.shift();a.splice(1,0,d)}return a},isPlayCommandGiven:function(){return this.getVideoPlay().isPlayCommandGiven()},onFallbackReady:function(a){videoPlayer.getVideoPlay().onFallbackReady(a)},onMetadataLoaded:function(a){videoPlayer.getVideoPlay().onMetadataLoaded(a)},onStatusChange:function(a,b){videoPlayer.getVideoPlay().onStatusChange(a,b)},onTimeUpdate:function(a,b){videoPlayer.getVideoPlay().onTimeUpdate(a,b)},needCentralPlayBtn:function(){return skinManager.isAndroid()},isLayoutAdjusting:function(){return videoPlayer.getVideoPlay().isLayoutAdjusting()},isMouseOverSeparator:function(){return videoPlayer.getVideoPlay().isMouseOverSeparator()},isMouseOverLayoutSetBox:function(){return videoPlayer.getVideoPlay().isMouseOverLayoutSetBox()},showLayoutSetElements:function(){videoPlayer.getVideoPlay().showVideoLayoutSetElements()},hideLayoutSetElements:function(){videoPlayer.getVideoPlay().hideVideoLayoutSetElements()}});var SyncDocPlayer=ContentPlayer.extend({_uniPlayerEventTarget:null,_eventTarget:null,_vcSyncDocPlay:null,_noteSyncTimer:null,_noteSyncTimeStamp:null,_currSlideId:null,_currSlideTime:null,_currSlideImageRef:null,_lastNoteTime:0,_mobileStartPlayMode:null,_isSeeking:false,_onMediaFirstReady:false,_onSlideFirstReady:false,_isSyncMode:true,constructor:function(){this._eventTarget=new EventTargetArgs()},run:function(b,a){this.base(b,a);this.attachEvents();uniPlayer.getVCUniPlayerLayout().showLoadingState();this.startSyncDocPlayer();this.showSyncDocPlayer()},attachEvents:function(){this._eventTarget.addListener(VCSyncDocPlayEvent.METADATA_LOADED,this.onSyncDocMetaDataLoaded);this._eventTarget.addListener(VCSyncDocPlayEvent.READY_TO_PLAY,this.onSyncDocReadyToPlay);this._eventTarget.addListener(VCSyncDocPlayEvent.TIME_UPDATE,this.onSyncDocPlayTimeUpdate);this._eventTarget.addListener(VCSyncDocPlayEvent.SWAPPING,this.onSyncDocPlaySwaping);this._eventTarget.addListener(VCSyncDocPlayEvent.SWAPPED,this.onSyncDocPlaySwapped);this._eventTarget.addListener(VCSyncDocPlayEvent.SEEKING,this.onSyncDocPlaySeeking);this._eventTarget.addListener(VCSyncDocPlayEvent.SEEKED,this.onSyncDocPlaySeeked);this._eventTarget.addListener(VCSyncDocPlayEvent.BUFFERED,this.onSyncDocPlayBuffered);this._eventTarget.addListener(VCSyncDocPlayEvent.ENDED,this.onPlayEnded);this._eventTarget.addListener(VCSyncDocPlayEvent.STATE_CHANGE,this.onSyncDocPlayStateChange);this._eventTarget.addListener(VCSyncDocPlayEvent.PLAYER_MOUSEMOVE,this.onSyncDocMouseMove);this._eventTarget.addListener(VCSyncDocPlayEvent.PLAYER_MOUSELEAVE,this.onSyncDocMouseLeave);this._eventTarget.addListener(VCSyncDocPlayEvent.CLICK_ENTIRE_AREA,this.onSyncDocClickEntireArea);this._eventTarget.addListener(VCSyncDocPlayEvent.PLAYER_AREA_TOUCHED,this.onSyncDocAreaTouched);this._eventTarget.addListener(VCSyncDocPlayEvent.LAYOUT_CHANGED,this.onSyncDocLayoutChanged);this._eventTarget.addListener(VCSyncDocPlayEvent.SLIDE_READY,this.onSyncDocSlideReady);this._eventTarget.addListener(VCSyncDocPlayEvent.SLIDE_SYNC_ON,this.onSyncDocSlideSyncOn);this._eventTarget.addListener(VCSyncDocPlayEvent.SLIDE_SYNC_OFF,this.onSyncDocSlideSyncOff);this._eventTarget.addListener(VCSyncDocPlayEvent.CHANGE_TO_FLASH,this.onChangeToFlash);this._eventTarget.addListener(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._eventTarget.addListener(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged)},resize:function(){this.resizeSyncDocPlay();this.resizeNoteManager()},resizeSyncDocPlay:function(){if(this.getSyncDocPlay()!=null){syncDocPlayer.getSyncDocPlay().resize()}},resizeNoteManager:function(){noteManager.resize()},getSyncDocPlay:function(){return this._vcSyncDocPlay},getSlideVC:function(){return this.getSyncDocPlay().getSlideVC()},showSyncDocPlayer:function(){this.getSyncDocPlay().showSyncDocPlayer()},hideSyncDocPlayer:function(){this.getSyncDocPlay().hideSyncDocPlayer()},release:function(){this.getSyncDocPlay().release();noteManager.release();this.hideSyncDocPlayer();this._eventTarget=null;this.base()},startSyncDocPlayer:function(){syncDocPlayer._isSyncMode=(syncDocPlayer.isSyncModeAvailable())?true:false;this.loadSyncDocPlay();this.sendStatistics();if(skinManager.isMobile()){this.startMobileSyncDocPlayer()}else{this.startDesktopSyncDocPlayer()}noteManager.initialize(syncDocPlayer.getSyncDocPlay().getNotePanel());noteManager.resize();if(syncDocPlayer._isSyncMode){noteManager.showNotePanel()}else{noteManager.hideNotePanel()}if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.HAS_STARTED)}},startDesktopSyncDocPlayer:function(){},startMobileSyncDocPlayer:function(){var a=syncDocPlayer.getSyncDocPlay();if(a.setPlayMode){a.setPlayMode(syncDocPlayer._mobileStartPlayMode)}a.initialLoad(uniPlayerConfig.getCurrentStoryPlayingInfo().convert2mediaTime(syncDocPlayer._storyInitialTime));if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){setTimeout(function(){a.hideSyncDocTouchMask()},1000)}else{a.showSyncDocTouchMask()}},loadSyncDocPlay:function(){syncDocPlayer._vcSyncDocPlay=VCSyncDocPlayFactory.createSyncDocPlay();syncDocPlayer._vcSyncDocPlay.addEventListener(syncDocPlayer._eventTarget);syncDocPlayer._vcSyncDocPlay.initialize(uniPlayerConfig.getMediaChannelConfig()._playingInfo,uniPlayerConfig.getSlideListInfo(),uniPlayerConfig.getEventList(),syncDocPlayer._isSyncMode)},sendStatistics:function(){var a=new StatisticsManager();a.requestViewStatistics(uniPlayerConfig.getUniPlayerSettingsData().viewStatistics,StatisticsManager.COMMAND_VIEW_CNT,uniPlayerConfig.getContentPlayingInfoData().contentId)},onSyncDocMetaDataLoaded:function(a,b){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.METADATA_LOADED,b)}},onSyncDocReadyToPlay:function(){syncDocPlayer._onMediaFirstReady=true;if(!syncDocPlayer._firstReadyToPlay&&syncDocPlayer._onMediaFirstReady&&syncDocPlayer._onSlideFirstReady){syncDocPlayer.onSyncDocReadyToPlayFirstTime()}},onSyncDocReadyToPlayFirstTime:function(){uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isMobile()){syncDocPlayer.syncDocPlayMobileReadyToPlayFirstTime()}else{syncDocPlayer.syncDocPlayDesktopReadyToPlayFirstTime()}var a=uniPlayer.getVolume();this.changeVolume(a);syncDocPlayer._firstReadyToPlay=true;if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.TIME_UPDATE,syncDocPlayer._storyInitialTime)}},syncDocPlayMobileReadyToPlayFirstTime:function(){if(syncDocPlayer.isMobileAutoPlay()){if(!syncDocPlayer.isMobileIntroShowing()){syncDocPlayer.play()}}uniPlayer.setCenterPlayBtnVisibility();var a=uniPlayer.getPlaybackRate();this.changePlaybackRate(a)},syncDocPlayDesktopReadyToPlayFirstTime:function(){if(syncDocPlayer._isInitialPlayState){syncDocPlayer.play()}var a=this._storyInitialTime;if(a>0){syncDocPlayer.seek(a)}var b=uniPlayer.getPlaybackRate();this.changePlaybackRate(b)},onSyncDocPlayTimeUpdate:function(b,a){if(skinManager.isMobile()&&!syncDocPlayer._isInitialStory&&!syncDocPlayer._storyHasPlayed){return}if(syncDocPlayer._isSeeking&&syncDocPlayer.getSyncDocPlay()._isFlash){return}syncDocPlayer.synchronize(a);syncDocPlayer.commonTimeUpdate(a)},onSyncDocPlaySwaping:function(a){contentPlayer._isSwapping=true;uniPlayer.getVCUniPlayerLayout().showSwapLoadingState();bcPlayController.setIsControllable(false)},onSyncDocPlaySwapped:function(a){contentPlayer._isSwapping=false;uniPlayer.getVCUniPlayerLayout().hideSwapLoadingState();bcPlayController.setIsControllable(true);syncDocPlayer.applyPrevMediaAttributes()},applyPrevMediaAttributes:function(){syncDocPlayer.changeVolume(uniPlayer.getVolume());syncDocPlayer.changePlaybackRate(uniPlayer.getPlaybackRate())},onSyncDocPlaySeeking:function(){syncDocPlayer._isSeeking=true;uniPlayer.getVCUniPlayerLayout().showLoadingState();syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,PlayState.BUFFERING)},onSyncDocPlaySeeked:function(){syncDocPlayer._isSeeking=false;uniPlayer.getVCUniPlayerLayout().hideLoadingState();if(skinManager.isAndroid()){setTimeout(function(){uniPlayer.showCoveringControlsMobile()},3000)}},onSyncDocPlayBuffered:function(b,a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.BUFFERED,a)}},onSyncDocPlayStateChange:function(a,b){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.STATE_CHANGE,b)}},onSyncDocMouseMove:function(a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_MOVE)}},onSyncDocMouseLeave:function(a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_MOUSE_LEAVE)}},onSyncDocClickEntireArea:function(a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.ENTIRE_AREA_CLICK)}},onSyncDocAreaTouched:function(a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYER_AREA_TOUCHED)}},onSyncDocLayoutChanged:function(b,a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.LAYOUT_CHANGED,a)}},onSyncDocSlideReady:function(a){syncDocPlayer._onSlideFirstReady=true;if(!syncDocPlayer._firstReadyToPlay){if(syncDocPlayer._onMediaFirstReady&&syncDocPlayer._onSlideFirstReady){syncDocPlayer.onSyncDocReadyToPlayFirstTime()}}else{if(syncDocPlayer._isSyncMode&&syncDocPlayer.getSyncDocPlay().getDocPlayerMode()==DocPlayerMode.IMAGE){syncDocPlayer.recoverCurrSyncState()}}},onSyncDocSlideSyncOn:function(a){syncDocPlayer.setSyncOnMode()},onPlaybackRateChanged:function(b,a){if(syncDocPlayer._uniPlayerEventTarget){syncDocPlayer._uniPlayerEventTarget.fire(ContentPlayerEvent.PLAYBACK_RATE_CHANGED,a)}},onSyncDocSlideSyncOff:function(a){syncDocPlayer.setSyncOffMode()},play:function(){syncDocPlayer._storyHasPlayed=true;syncDocPlayer.getSyncDocPlay().play();syncDocPlayer.startNoteSyncTimer()},pause:function(){syncDocPlayer.getSyncDocPlay().pause();syncDocPlayer.stopNoteSyncTimer()},seek:function(b){var a=uniPlayerConfig.getCurrentStoryPlayingInfo().convert2mediaTime(b);syncDocPlayer.getSyncDocPlay().seekTo(a);if(this._isSyncMode){syncDocPlayer.synchronize(a);syncDocPlayer.seekNoteEvent(a)}},synchronize:function(a){if(!this._isSyncMode){return}if(!this._firstReadyToPlay){return}syncDocPlayer.syncEvent(a)},syncEvent:function(b){if(!this._isSyncMode){return}if(!this._firstReadyToPlay){return}var a=syncDocPlayer.getEventSyncSlideData(b);if(syncDocPlayer._currSlideId==a._slideId&&syncDocPlayer._currSlideImageRef==a._ref){return}var c=true;if(syncDocPlayer._currSlideId==a._slideId&&syncDocPlayer._currSlideImageRef!=a._ref){c=false}syncDocPlayer.getSyncDocPlay().gotoSlide(a._slideId,a._ref);syncDocPlayer._currSlideId=a._slideId;syncDocPlayer._currSlideTime=a._slideTime;syncDocPlayer._currSlideImageRef=a._ref;if(c){noteManager.clearCanvas(true);syncDocPlayer.seekNoteEvent(a._slideTime)}},getEventSyncSlideData:function(d){var a=uniPlayerConfig.getEventList();var h;var b;var c=0;for(var f=a.length-1;f>=0;f--){var k=a[f];if(k._time<=d){h=k._ref;b=k._time;for(var e=0;e<k._slideInnerEventList.length;e++){var g=k._slideInnerEventList[e];switch(g._type){case EventType.ANIMATION:break;case EventType.HIDEALL:continue;case EventType.NOTE:continue}if(g._time<=d){c=g._ref}}break}}return new EventSyncSlideData(h,Number(b),c)},syncNoteEvent:function(){if(!syncDocPlayer._isSyncMode){return}if(syncDocPlayer._isSeeking&&syncDocPlayer.getSyncDocPlay()._isFlash){return}var d=syncDocPlayer.getCurrentTime();var b=syncDocPlayer.getEventSyncNoteDataList(syncDocPlayer._lastNoteTime,d);var e=uniPlayerConfig.getNoteData();for(var c=b.length-1;c>=0;c--){var a=b[c];if(a._ref==-1){continue}if(a._time==syncDocPlayer._currSlideTime){continue}if(a._type==EventType.HIDEALL){noteManager.clearCanvas(true);syncDocPlayer._lastNoteTime=Number(a._time);continue}if(e==null||e[a._ref]==null||typeof e[a._ref]=="undefined"){continue}if(c==0){noteManager.drawAnimationNote((d-a._time)*1000,e[a._ref]);if(noteManager.isNoteShowCompleted(e[a._ref]._id)){syncDocPlayer._lastNoteTime=Number(a._time)}}else{noteManager.drawAnimationNote(Number.MAX_VALUE,e[a._ref])}}},seekNoteEvent:function(c){if(!syncDocPlayer._isSyncMode){return}var a=syncDocPlayer.getEventSyncSlideData(c);var d=syncDocPlayer.getNoteListDataByTime(a._slideId,c);if(d.lastEventTime==syncDocPlayer._currSlideTime){noteManager.drawNoteList(Number.MAX_VALUE,d.noteList)}else{noteManager.drawNoteList((c-d.lastEventTime)*1000,d.noteList)}syncDocPlayer._lastNoteTime=0;for(var b=0;b<d.noteList.length;b++){if(noteManager.isNoteShowCompleted(d.noteList[b]._id)){syncDocPlayer._lastNoteTime=Number(syncDocPlayer.getNoteEventTime(c,d.noteList[b]._id))-0.01}}noteManager.resize()},getNoteListDataByTime:function(g,d){var m=uniPlayerConfig.getNoteData();var a=uniPlayerConfig.getEventList();var c=new Array();var k=0;var b=0;for(var f=a.length-1;f>=0;f--){var l=a[f];if(l._ref==g){for(var e=0;e<l._slideInnerEventList.length;e++){var h=l._slideInnerEventList[e];switch(h._type){case EventType.ANIMATION:continue;case EventType.HIDEALL:if(h._time<=d){c=new Array();k=0;b=0}break;case EventType.NOTE:if(h._time<=d){c[k++]=m[h._ref];b=h._time}break}}break}}return{noteList:c,lastEventTime:b}},getNoteEventTime:function(g,c){var f=uniPlayerConfig.getEventList();for(var b=f.length-1;b>=0;b--){var e=f[b];if(e._time<=g){for(var a=e._slideInnerEventList.length-1;a>=0;a--){var d=e._slideInnerEventList[a];if(d._ref==c){return d._time}}break}}return 0},getEventSyncNoteDataList:function(c,e){var a=uniPlayerConfig.getEventList();var k=0;var d=-1;var l=EventType.NOTE;var b=[];for(var g=a.length-1;g>=0;g--){var m=a[g];if(m._time<=e){for(var f=m._slideInnerEventList.length-1;f>=0;f--){var h=m._slideInnerEventList[f];switch(h._type){case EventType.ANIMATION:continue;case EventType.HIDEALL:l=EventType.HIDEALL;break;case EventType.NOTE:l=EventType.NOTE;break}if(h._time>c&&h._time<=e){k=h._time;d=h._ref;b.push(new EventSyncNoteData(k,l,d))}}break}}return b},startNoteSyncTimer:function(){if(syncDocPlayer._noteSyncTimer!=null||syncDocPlayer._noteSyncTimer!=undefined){return}if(window.requestAnimationFrame==undefined){syncDocPlayer._noteSyncTimer=setInterval(syncDocPlayer.syncNoteEvent,SyncDocPlayer.NOTE_SYNCTIMER_INTERVAL)}else{syncDocPlayer._noteSyncTimer=requestAnimationFrame(syncDocPlayer.onSyncTimerRequestAnimationFrame)}},stopNoteSyncTimer:function(){if(syncDocPlayer._noteSyncTimer==null){return}if(window.requestAnimationFrame==undefined){clearTimeout(syncDocPlayer._noteSyncTimer)}else{cancelAnimationFrame(syncDocPlayer._noteSyncTimer);syncDocPlayer._noteSyncTimeStamp=null}syncDocPlayer._noteSyncTimer=null},setMobileStartPlayMode:function(a){this._mobileStartPlayMode=a},swapSyncDoc:function(){var a=syncDocPlayer.getSyncDocPlay();if(a.swap){a.swap()}if(skinManager.isMobile()){uniPlayer.setCenterPlayBtnVisibility()}},notifyMobileIntroHidden:function(){if(syncDocPlayer._firstReadyToPlay&&!syncDocPlayer._storyHasPlayed){syncDocPlayer.play()}},onSyncTimerRequestAnimationFrame:function(a){if(typeof(a)=="undefined"){a=Date.now()}if(syncDocPlayer._noteSyncTimeStamp==null){syncDocPlayer._noteSyncTimeStamp=a}if(a-syncDocPlayer._noteSyncTimeStamp>SyncDocPlayer.NOTE_SYNCTIMER_INTERVAL){syncDocPlayer.syncNoteEvent();syncDocPlayer._noteSyncTimeStamp=a}syncDocPlayer._noteSyncTimer=requestAnimationFrame(syncDocPlayer.onSyncTimerRequestAnimationFrame)},changeVolume:function(a){if(syncDocPlayer.getSyncDocPlay().setVolume){syncDocPlayer.getSyncDocPlay().setVolume(a)}},changePlaybackRate:function(a){if(syncDocPlayer.getSyncDocPlay().setPlaybackRate){syncDocPlayer.getSyncDocPlay().setPlaybackRate(a)}},changeProfile:function(a){syncDocPlayer.getSyncDocPlay().swapProfile(a)},setSyncOnMode:function(){if(!syncDocPlayer.isSyncModeAvailable()){return}syncDocPlayer._isSyncMode=true;syncDocPlayer.getSyncDocPlay().setSyncMode(true);if(syncDocPlayer.getSyncDocPlay().getDocPlayerMode()==DocPlayerMode.IMAGE){syncDocPlayer.getSyncDocPlay().resetSlide(syncDocPlayer._isSyncMode)}else{syncDocPlayer.recoverCurrSyncState()}if(skinManager.isMobile()){uniPlayer.setCenterPlayBtnVisibility()}$(LayoutIdTable.CHAPTER_HORIZONTAL).show();bcChapterHorizontal.resize();syncDocPlayer.resize()},recoverCurrSyncState:function(){var a=syncDocPlayer.getCurrentTime();syncDocPlayer.synchronize(a);syncDocPlayer.seekNoteEvent(a);noteManager.showNotePanel()},setSyncOffMode:function(){syncDocPlayer._isSyncMode=false;syncDocPlayer.getSyncDocPlay().setSyncMode(false);syncDocPlayer._currSlideId=null;syncDocPlayer._currSlideImageRef=null;noteManager.hideNotePanel();if(syncDocPlayer.getSyncDocPlay().getDocPlayerMode()==DocPlayerMode.IMAGE){syncDocPlayer.getSyncDocPlay().resetSlide(syncDocPlayer._isSyncMode)}if(skinManager.isMobile()){uniPlayer.setCenterPlayBtnVisibility()}$(LayoutIdTable.CHAPTER_HORIZONTAL).hide();syncDocPlayer.resize()},getCurrentTime:function(){if(!syncDocPlayer.getSyncDocPlay()){return 0}return syncDocPlayer.getSyncDocPlay().getCurrentTime()},isMobileSlidePlayingMode:function(){if(!skinManager.isMobile()){return false}return(uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType==ContentType.SYNCAUDIO)||(this.getSyncDocPlay().getPlayMode()==SyncVideoMobilePlayMode.SLIDE)},isPlayCommandGiven:function(){return this.getSyncDocPlay().isPlayCommandGiven()},onFallbackReady:function(a){syncDocPlayer.getSyncDocPlay().onFallbackReady(a)},onMetadataLoaded:function(a){syncDocPlayer.getSyncDocPlay().onMetadataLoaded(a)},onStatusChange:function(a,b){syncDocPlayer.getSyncDocPlay().onStatusChange(a,b)},onTimeUpdate:function(a,b){syncDocPlayer.getSyncDocPlay().onTimeUpdate(a,b)},needCentralPlayBtn:function(){var a=this.isMobileSlidePlayingMode();var c=skinManager.isAndroid();var b=(skinManager.isIOS()&&a);return c||b},isLayoutAdjusting:function(){return syncDocPlayer.getSyncDocPlay().isLayoutAdjusting()},isMouseOverSeparator:function(){return syncDocPlayer.getSyncDocPlay().isMouseOverSeparator()},isMouseOverLayoutSetBox:function(){return syncDocPlayer.getSyncDocPlay().isMouseOverLayoutSetBox()},showLayoutSetElements:function(){syncDocPlayer.getSyncDocPlay().showSyncDocLayoutSetElements()},hideLayoutSetElements:function(){syncDocPlayer.getSyncDocPlay().hideSyncDocLayoutSetElements()},showSyncBtn:function(){syncDocPlayer.getSyncDocPlay().showSyncBtn()},hideSyncBtn:function(){syncDocPlayer.getSyncDocPlay().hideSyncBtn()},getLayoutSettingData:function(){return uniPlayer.getLayoutSettingData()},isSyncModeAvailable:function(){return(uniPlayerConfig.getEventList())&&uniPlayerConfig.getContentPlayingInfoData().useSyncDocEvent},isDocViewModeAvailable:function(){return(uniPlayerConfig.getEventList())&&uniPlayerConfig.getContentPlayingInfoData().useSyncDocDocView},isSyncMode:function(){return this._isSyncMode}},{NOTE_SYNCTIMER_INTERVAL:20});var BCContentMetadata=Base.extend({_uniPlayerEventTarget:null,_eventTarget:null,_contentMetadata:null,_vcContentMetadata:null,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a){if(false==uniPlayerConfig.getUniPlayerSettingsData().useTitle){return}this._contentMetadata=a;this._vcContentMetadata=new VCContentMetadata();this._vcContentMetadata.setData(a);this._vcContentMetadata.initialize();this.attachEvents();this.showContentMetadata()},attachEvents:function(){this._eventTarget.addListener(VCContentMetadataEvent.SHOW_CHAPTER_VERTICAL,this.onShowChapterVertical);this._eventTarget.addListener(VCContentMetadataEvent.HIDE_CHAPTER_VERTICAL,this.onHideChapterVertical);this._eventTarget.addListener(VCContentMetadataEvent.SHOW_INFO,this.onShowInfo);this._eventTarget.addListener(VCContentMetadataEvent.SHARE,this.onShare);this._vcContentMetadata.addEventListener(this._eventTarget)},resize:function(){var a=bcContentMetadata.getVCContentMetadata();if(a!=null){a.resize()}},getVCContentMetadata:function(){return this._vcContentMetadata},updateMenuBtnForCurrentStory:function(){if(false==uniPlayerConfig.getUniPlayerSettingsData().useTitle){return}var c=uniPlayerConfig.getUniPlayerSettingsData();var b=bcContentMetadata.getVCContentMetadata();var a=0;if(uniPlayerConfig.getChapterList()!=null&&false==uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro){if(Util.objectKeys(uniPlayerConfig.getChapterList()).length!=0){a++;b.showChapterBtn()}}else{b.hideChapterBtn()}if(c.useShare&&typeof xn_content_share!="undefined"){a++;b.showShareBtn()}else{b.hideShareBtn()}if(c.useContentInfo){a++;b.showInfoBtn()}else{b.hideInfoBtn()}b.setShowBtnCount(a);b.resize()},showContentMetadata:function(){var a=bcContentMetadata.getVCContentMetadata();if(a!=null){a.showContentMetadata()}},hideContentMetadata:function(){if(bcContentMetadata.getVCContentMetadata()==null){return}if(bcChapterVertical.isChapterShown()){return}if(this._vcContentMetadata.isMouseOver()){return}this._vcContentMetadata.hideContentMetadata()},showContentMetadataInfo:function(){var a=bcContentMetadata.getVCContentMetadata();if(a!=null){a.showContentMetadataInfo()}},hideContentMetadataInfo:function(){var a=bcContentMetadata.getVCContentMetadata();if(a!=null){a.hideContentMetadataInfo()}},onShowChapterVertical:function(a){if(bcContentMetadata._uniPlayerEventTarget!=null){bcContentMetadata._uniPlayerEventTarget.fire(VCContentMetadataEvent.SHOW_CHAPTER_VERTICAL)}},onHideChapterVertical:function(a){if(bcContentMetadata._uniPlayerEventTarget!=null){bcContentMetadata._uniPlayerEventTarget.fire(VCContentMetadataEvent.HIDE_CHAPTER_VERTICAL)}},onShowInfo:function(a){if(typeof xn_content_share!=="undefined"){xn_content_share.infoBtnClick()}else{bcContentMetadata.showContentMetadataInfo()}},onShare:function(a){if(typeof xn_content_share!=="undefined"){xn_content_share.shareBtnClick()}},showCommonsRelatedButtons:function(){if(this._vcContentMetadata!=null){this._vcContentMetadata.showCommonsRelatedButtons()}},hideCommonsRelatedButtons:function(){if(this._vcContentMetadata!=null){this._vcContentMetadata.hideCommonsRelatedButtons()}},toggleChapterBtn:function(){if(this._vcContentMetadat!=null){this._vcContentMetadata.toggleChapterBtn()}},isMouseOver:function(){if(this._vcContentMetadata==null){return}return this._vcContentMetadata.isMouseOver()}});var BCFrontScreen=Base.extend({_uniPlayerEventTarget:null,_eventTarget:null,_vcFrontScreen:null,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(){this._vcFrontScreen=new VCFrontScreen();this._vcFrontScreen.initialize();var b=uniPlayerConfig.getContentPlayingInfoData().contentThumbnailUri;this._vcFrontScreen.loadThumbnail(b);var c=uniPlayerConfig.getFirstStoryPlayingInfo();var a=c.storyType;if(false==skinManager.isMobile()||(skinManager.isMobile()&&uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP)||uniPlayer._syncVideoMobileStartModeBySetting){a=ContentType.VIDEO1}if(c.mixedMediaList!=null&&c.mixedMediaList.length!=0){if(!skinManager.isMobile()){a=ContentType.MIXED}}this.showFrontScreenBtn(c,a);if(c.getCurrentMainMedia().mobileMethod==MediaMethod.HLS&&skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHLSDefaultPlayer){this.attachAndroidHLSVideoLink(c)}this.attachEvents()},showFrontScreen:function(){$(LayoutIdTable.FRONT_SCREEN).show()},hideFrontScreen:function(){$(LayoutIdTable.FRONT_SCREEN).hide()},showFrontScreenBtn:function(a,b){switch(b){case ContentType.AUDIO:case ContentType.VIDEO1:this._vcFrontScreen.showVideo1Btn();break;case ContentType.VIDEO2:this._vcFrontScreen.showVideo2Btn(a.hasMixedMedia);break;case ContentType.VIDEO3:if(a.extraMedias.length==1){this._vcFrontScreen.showVideo3Btn(a.hasMixedMedia)}else{if(a.extraMedias.length==2){this._vcFrontScreen.showVideo4Btn(a.hasMixedMedia)}}break;case ContentType.SYNCAUDIO:this._vcFrontScreen.showSyncAudioBtn();break;case ContentType.SYNCVIDEO:this._vcFrontScreen.showSyncVideoBtn();break;case ContentType.MIXED:this._vcFrontScreen.showMixedVideoBtn();break}},attachAndroidHLSVideoLink:function(a,b){switch(b){case ContentType.AUDIO:this._vcFrontScreen.attachAudioHLSLink(a);case ContentType.VIDEO1:this._vcFrontScreen.attachVideo1HLSLink(a);break;case ContentType.VIDEO2:this._vcFrontScreen.attachVideo2HLSLink(a);break;case ContentType.VIDEO3:this._vcFrontScreen.attachVideo3HLSLink(a);break;case ContentType.SYNCAUDIO:this._vcFrontScreen.attachSyncAudioHLSLink(a);break;case ContentType.SYNCVIDEO:this._vcFrontScreen.attachSyncVideoHLSLink(a);break}},attachEvents:function(){this._eventTarget.addListener(VCFrontScreenEvent.PLAY_SELECTED,this.onPlaySelected);this._eventTarget.addListener(VCFrontScreenEvent.PLAY_OPTION_SELECTED,this.onPlayOptionSelected);this._eventTarget.addListener(VCFrontScreenEvent.PLAY_MIXED_SELECTED,this.onPlayMixedSelected);this._vcFrontScreen.addEventListener(this._eventTarget)},resize:function(){var a=bcFrontScreen.getVCFrontScreen();if(a!=null){a.resize()}},getVCFrontScreen:function(){return this._vcFrontScreen},onPlaySelected:function(){bcFrontScreen._uniPlayerEventTarget.fire(VCFrontScreenEvent.PLAY_SELECTED)},onPlayOptionSelected:function(b,a){bcFrontScreen._uniPlayerEventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,a)},onPlayMixedSelected:function(a){bcFrontScreen._uniPlayerEventTarget.fire(VCFrontScreenEvent.PLAY_MIXED_SELECTED)},isOn:function(){return($(LayoutIdTable.FRONT_SCREEN).css("display")=="block")}});var BCChapterVerticalMedia=Base.extend({_vcChapterVertical:null,_chapterList:null,_curTime:null,_curPlayingSlideIdVertical:null,_curPlayingStoryIdVertical:null,_uniPlayerEventTarget:null,_seekLimit:false,_limitTime:0,_isChapterShown:false,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a,b){this._chapterList=a;this._vcChapterVertical=new VCChapterVerticalMedia();this.initChapterVerticalUI();this.attachEvents()},getChapter:function(){return this._vcChapterVertical},showChapter:function(){this._isChapterShown=true;this._vcChapterVertical.showChapter()},hideChapter:function(){this._isChapterShown=false;this._vcChapterVertical.hideChapter()},isChapterShown:function(){return this._isChapterShown},isChapterLayer:function(){switch(uniPlayerConfig.getUniPlayerSettingsData().chapterDisplayType){case ChapterDisplayType.THUMBNAIL_LAYER:case ChapterDisplayType.TEXT_LAYER:return true}return false},resize:function(){this._vcChapterVertical.resize(uniPlayerConfig.getUniPlayerSettingsData().useTitle)},chapterTimeUpdate:function(b){this._curTime=b;if(this._vcChapterVertical.getScrollApi()==null){return}var a=bcChapterVertical.getChapterId(b,ChapterType.SLIDE,true);var c=bcChapterVertical.getChapterId(b,ChapterType.STORY,true);this.chapterVerticalHighlight(a,c)},attachEvents:function(){this.attachChapterEvents()},attachChapterEvents:function(){for(var a in this._chapterList){this._vcChapterVertical.attachChapterEvents(a,BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL)}this._eventTarget.addListener(VCChapterEvent.ITEM_CLICKED,this.onChapterVerticalItemClick);this._vcChapterVertical.addEventListener(this._eventTarget)},initChapterVerticalUI:function(){if(this._chapterList==null){return}if(Util.objectKeys(this._chapterList).length==0){return}var c=[];var a=0;for(var b in this._chapterList){var d=this.makeChapterVerticalTemplateData(this._chapterList[b]._id,BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL);if(d!=null){c.push(d)}if(d!=null&&!d.isStory){a++}}var e=uniPlayerConfig.getUniPlayerSettingsData().chapterDisplayType;this._vcChapterVertical.setDisplayType(e);this.renderChapterListVertical(e,c,a)},makeChapterVerticalTemplateData:function(c,b){var a=this._chapterList[c];if(!a._visible){return null}switch(a._type){case ChapterType.STORY:data=new StoryTmplData();break;case ChapterType.SLIDE:data=new SlideTmplData();break}data.itemId=b+c.toString();data.time=Util.secToTimerString(a._time._from);data.description=a._description;data.thumbUrl=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,a._thumbnailUri.toString());return data},renderChapterListVertical:function(f,c,a){var b=BCChapterVerticalMedia.TEMPLATE_ID_THUMBNAIL;if(false==skinManager.isMobile()){switch(f){case ChapterDisplayType.THUMBNAIL:case ChapterDisplayType.THUMBNAIL_LAYER:b=BCChapterVerticalMedia.TEMPLATE_ID_THUMBNAIL;break;case ChapterDisplayType.TEXT:case ChapterDisplayType.TEXT_LAYER:b=BCChapterVerticalMedia.TEMPLATE_ID_TEXT;break}}var d=$.templates(b);var e=d.render(c);this._vcChapterVertical.writeChapterList(e,a,this.onWriteChapterListCompleted)},onWriteChapterListCompleted:function(){if(bcChapterVertical._curTime==null){return}bcChapterVertical.chapterTimeUpdate(bcChapterVertical._curTime)},onChapterVerticalItemClick:function(a,c){var d=c.replace(BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL,"");var b=bcChapterVertical._chapterList[d]._time._from;if(bcChapterVertical._seekLimit&&(parseFloat(bcChapterVertical._limitTime)<parseFloat(b))){return}bcChapterVertical._uniPlayerEventTarget.fire(VCChapterEvent.SEEK,b)},seekPrevChapter:function(){if(this._chapterList==null){return}var d=this.getChapterId(this._curTime,ChapterType.SLIDE,true);var c=Util.objectKeys(this._chapterList);var b=c.indexOf(d);if(b==0){return}var f=b-1;while(this._chapterList[c[f]]._visible==false||this._chapterList[c[f]]._type!=ChapterType.SLIDE){f-=1;if(f==-1){return}}var a=c[f];var e=bcChapterVertical._chapterList[a]._time._from;if(bcChapterVertical._seekLimit&&(parseFloat(bcChapterVertical._limitTime)<parseFloat(e))){return}bcChapterVertical._uniPlayerEventTarget.fire(VCChapterEvent.SEEK,e)},seekNextChapter:function(){if(this._chapterList==null){return}var e=this.getChapterId(this._curTime,ChapterType.SLIDE,true);var d=Util.objectKeys(this._chapterList);var c=d.indexOf(e);if(c==d.length-1){return}var a=c+1;while(this._chapterList[d[a]]._visible==false){a+=1;if(a==this._chapterList.length){return}}var b=d[a];var f=bcChapterVertical._chapterList[b]._time._from;if(bcChapterVertical._seekLimit&&(parseFloat(bcChapterVertical._limitTime)<parseFloat(f))){return}bcChapterVertical._uniPlayerEventTarget.fire(VCChapterEvent.SEEK,f)},getChapterId:function(e,b,f){var d=Util.objectKeys(this._chapterList);if(d.length==0){return null}for(var a=0;a<d.length;a++){var c=d[a];if(this._chapterList[c]._type!=b){continue}if(this._chapterList[c]._time._from<=e&&this._chapterList[c]._time._to>e){if(f&&this._chapterList[c]._visible!=true){if(a==0){return null}else{if(a==1&&this._chapterList[d[0]]._type==ChapterType.STORY){return null}else{return d[a-1]}}}return c}else{if(this._chapterList[c]._time._from>e){if(a==0){return null}else{if(a==1&&this._chapterList[d[0]]._type==ChapterType.STORY){return null}}return d[a-1]}}}return null},chapterVerticalHighlight:function(a,b){if(a==null){this._vcChapterVertical.removeSlideHighlight(this._curPlayingSlideIdVertical);this._curPlayingSlideIdVertical=null}if(a!=this._curPlayingSlideIdVertical&&a!=null){if(this._curPlayingSlideIdVertical!=null){this._vcChapterVertical.removeSlideHighlight(this._curPlayingSlideIdVertical)}this._vcChapterVertical.addSlideHighlight(a);this._curPlayingSlideIdVertical=a;this.trackCurrentChapterVertical(a)}if(b!=this._curPlayingSlideIdVertical&&b!=null){if(this._curPlayingStoryIdVertical!=null){this._vcChapterVertical.removeStoryHighlight(this._curPlayingStoryIdVertical)}this._vcChapterVertical.addStoryHighlight(b);this._curPlayingStoryIdVertical=b}},trackCurrentChapterVertical:function(d){if(d==null){return}var g=this._vcChapterVertical.getChapterOffset();var c=[];var b=0;var e=0;for(var h in this._chapterList){if(this._chapterList[h]._visible==false){continue}if(h==d){e=b}c[b++]=h}var f=Math.max(0,e-g);var a=c[f];this._vcChapterVertical.scrollToTop(a)},setSeekLimit:function(a){if(!this._chapterList){return}this._seekLimit=true;this._limitTime=a;this.setSeekLimitChapter(a,BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL)},updateSeekLimit:function(a){this.setSeekLimitChapter(a,BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL);this._limitTime=a},setSeekLimitChapter:function(a,e){var d=Util.objectKeys(this._chapterList);if(d.length==0){return null}for(var b=0;b<d.length;b++){var c=d[b];var f="#"+e+c.toString();if(parseFloat(this._chapterList[c]._time._from)>parseFloat(a)){$(f).addClass("seek-limit")}else{$(f).removeClass("seek-limit")}}},getPushChapterMinWidth:function(){var a=BCChapterVerticalMedia.MIN_PUSH_CHAPTER_WIDTH;if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){a-=30}var b=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){a+=b.width()}return a}},{ITEM_ID_PREFIX_VERTICAL:"vc-chapter-item-vertical-",TEMPLATE_ID_THUMBNAIL:"#vc-chapter-item-vertical-tmpl-thumbnail",TEMPLATE_ID_TEXT:"#vc-chapter-item-vertical-tmpl-text",MIN_PUSH_CHAPTER_WIDTH:700});var BCChapterVerticalDoc=Base.extend({_eventTarget:null,_uniPlayerEventTarget:null,_vcChapterVertical:null,_chapterList:null,_currChapterId:null,_currPageIdx:null,_isChapterShown:false,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a){this._chapterList=a;this._vcChapterVertical=new VCChapterVerticalDoc();this.initChapterVerticalUI();this.attachEvents()},getVCChapter:function(){return this._vcChapterVertical},resize:function(){this.getVCChapter().resize();if(skinManager.isMobile()){var a;if($(window).width()>$(window).height()){a=5}else{a=3}this.getVCChapter().adjustMobileChapterWidth(a)}},attachEvents:function(){for(var a in this._chapterList){this.getVCChapter().attachChapterEvents(this._chapterList[a]._id,BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL)}this._eventTarget.addListener(VCChapterEvent.ITEM_CLICKED,this.onChapterVerticalItemClick);this.getVCChapter().addEventListener(this._eventTarget)},initChapterVerticalUI:function(){if(this._chapterList==null){return}if(Util.objectKeys(this._chapterList).length==0){return}var c=[];var b=0;var d=null;for(var a in this._chapterList){var e=this.makeChapterVerticalTemplateData(this._chapterList[a]._id,BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL);if(e!=null){c.push(e);b++;if(d==null){d=this._chapterList[a]._id}}}this.renderChapterListVertical(c,d,b)},makeChapterVerticalTemplateData:function(d,c){var a=this._chapterList[d];if(!a._visible){return null}var b=new SlideTmplData();b.itemId=c+d.toString();b.pageIdx=this.getPageIdxFromChapterId(d).toString();b.thumbUrl=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,a._thumbnailUri.toString());return b},renderChapterListVertical:function(b,d,a){var c=$.templates(BCChapterVerticalDoc.TEMPLATE_ID_THUMBNAIL);var e=c.render(b);this.getVCChapter().writeChapterList(e,d,a,this.onWriteChapterListCompleted)},onWriteChapterListCompleted:function(){if(bcChapterVertical._currPageIdx==null){return}bcChapterVertical.chapterUpdate(bcChapterVertical._currPageIdx)},showChapter:function(){this._isChapterShown=true;this.getVCChapter().showChapter()},hideChapter:function(){this._isChapterShown=false;this.getVCChapter().hideChapter()},isChapterShown:function(){return this._isChapterShown},chapterUpdate:function(a){var b=bcChapterVertical.getChapterIdFromPageIdx(a);this.chapterVerticalHighlight(b);this._currChapterId=b;this._currPageIdx=a},getChapterIdFromPageIdx:function(b){var c=null;for(var a in this._chapterList){if(this.getPageIdxFromChapterId(a)==b){c=a;break}}return c},getPageIdxFromChapterId:function(d){var c=0;var b=this._chapterList[d];if(b._slideIdref){var a=uniPlayerConfig.getSlideListInfo().getSlideById(b._slideIdref);if(a){c=Number(a._page)}}return c},chapterVerticalHighlight:function(a){if(this._currChapterId!=null){this.getVCChapter().removeChapterHighlight(this._currChapterId)}if(a!=null){this.getVCChapter().addChapterHighlight(a);this.trackCurrentChapterVertical(a)}},trackCurrentChapterVertical:function(d){if(d==null){return}var c=[];var b=0;var f=0;for(var h in this._chapterList){if(h==d){f=b}c[b++]=h}var g=this.getVCChapter().getChapterOffset();var e=Math.max(0,f-g);var a=c[e];this.getVCChapter().scrollToTop(a)},onChapterVerticalItemClick:function(b,c){var d=c.replace(BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL,"");var a=bcChapterVertical.getPageIdxFromChapterId(d);bcChapterVertical._uniPlayerEventTarget.fire(VCChapterEvent.CHANGE_PAGE,a);if(skinManager.isMobile()){bcChapterVertical.hideChapter();bcPlayController.hideChapter()}}},{ITEM_ID_PREFIX_VERTICAL:"vc-chapter-item-vertical-",TEMPLATE_ID_THUMBNAIL:"#vc-chapter-item-vertical-tmpl-thumbnail"});var BCChapterHorizontal=Base.extend({_vcChapterHorizontal:null,_chapterList:null,_curTime:null,_curPlayingSlideIdHorizontal:null,_uniPlayerEventTarget:null,_isMouseOver:false,_seekLimit:false,_limitTime:0,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a){this._chapterList=a;this._vcChapterHorizontal=new VCChapterHorizontal();this.initChapterHorizontalUI();this.attachEvents()},getChapter:function(){return this._vcChapterHorizontal},showChapter:function(){this._vcChapterHorizontal.showChapter()},hideChapter:function(){this._vcChapterHorizontal.hideChapter()},resize:function(){this._vcChapterHorizontal.resize()},chapterTimeUpdate:function(b){this._curTime=b;if(this._vcChapterHorizontal.getScrollApi()==null){return}var a=bcChapterHorizontal.getChapterId(b,ChapterType.SLIDE,false);this.chapterHorizontalHighlight(a)},attachEvents:function(){this.attachChapterEvents();this.attachMouseEvent();this.attachScrollEvent()},attachChapterEvents:function(){for(var a in this._chapterList){this._vcChapterHorizontal.attachChapterEvents(a,BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL)}this._eventTarget.addListener(VCChapterEvent.ITEM_CLICKED,this.onChapterHorizontalItemClick);this._vcChapterHorizontal.addEventListener(this._eventTarget)},attachMouseEvent:function(){this._vcChapterHorizontal.attachMouseEvent();this._eventTarget.addListener(VCChapterEvent.MOUSE_OVER,this.onMouseOver);this._eventTarget.addListener(VCChapterEvent.MOUSE_LEAVE,this.onMouseLeave);this._vcChapterHorizontal.addEventListener(this._eventTarget)},attachScrollEvent:function(){this._vcChapterHorizontal.attachScrollEvent()},onMouseOver:function(a){if(bcChapterVertical.isChapterShown()){return}if(contentPlayer&&contentPlayer.isSyncMode&&!contentPlayer.isSyncMode()){return}bcChapterHorizontal._isMouseOver=true;bcChapterHorizontal.getChapter().showChapterPanel()},onMouseLeave:function(a){bcChapterHorizontal._isMouseOver=false;bcChapterHorizontal.getChapter().hideChapterPanel()},isMouseOver:function(){return this._isMouseOver},initChapterHorizontalUI:function(){if(this._chapterList==null){return}if(Util.objectKeys(this._chapterList).length==0){return}var c=[];var a=1;for(var b in this._chapterList){var d=this.makeChapterHorizontalTemplateData(this._chapterList[b]._id,BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL,a);if(d!=null){c.push(d);a++}}this.renderChapterListHorizontal(c)},makeChapterHorizontalTemplateData:function(f,e,b){var d;var a=this._chapterList[f];switch(a._type){case ChapterType.STORY:var c=uniPlayerConfig.getContentPlayingInfoData().getStoryPlayingInfoById(a._storyIdref);if(c==null||!this.isVideo(c.storyType)||!this.isSingleStory(a._storyIdref)){return null}d=new StoryTmplData();d.itemId=e+f.toString();d.index=b;d.time=Util.secToTimerString(a._time._from);d.description=a._description;d.thumbUrl=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,a._thumbnailUri.toString());break;case ChapterType.SLIDE:d=new SlideTmplData();d.itemId=e+f.toString();d.index=b;d.time=Util.secToTimerString(a._time._from);d.description=a._description;d.thumbUrl=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,a._thumbnailUri.toString());break}return d},isVideo:function(a){return(a=="video1"||a=="video2"||a=="video3")},isSingleStory:function(c){var b=0;for(var a in this._chapterList){if(this._chapterList[a]._storyIdref==c){b++}}return(b==1)},renderChapterListHorizontal:function(a){var b=$.templates(BCChapterHorizontal.TEMPLATE_ID);var c=b.render(a);this._vcChapterHorizontal.writeChapterList(c,this.onWriteChapterListCompleted)},onWriteChapterListCompleted:function(){if(bcChapterHorizontal._curTime==null){return}bcChapterHorizontal.chapterTimeUpdate(bcChapterHorizontal._curTime)},onChapterHorizontalItemClick:function(a,c){if(bcChapterHorizontal._vcChapterHorizontal._isScrolled==true&&skinManager.isMobile()){bcChapterHorizontal._vcChapterHorizontal._isScrolled=false}else{var d=c.replace(BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL,"");var b=bcChapterHorizontal._chapterList[d]._time._from;if(bcChapterHorizontal._seekLimit&&(parseFloat(bcChapterHorizontal._limitTime)<parseFloat(b))){return}bcChapterHorizontal._uniPlayerEventTarget.fire(VCChapterEvent.SEEK,b)}},getChapterId:function(e,b,f){var d=Util.objectKeys(this._chapterList);if(d.length==0){return null}for(var a=0;a<d.length;a++){var c=d[a];if(this._chapterList[c]._type!=b){continue}if(f&&this._chapterList[c]._visible!=true){continue}if(this._chapterList[c]._time._from<=e&&this._chapterList[c]._time._to>e){return c}else{if(this._chapterList[c]._time._from>e){if(a==0){return null}return d[a-1]}}}return null},chapterHorizontalHighlight:function(a){if(a==null){this._vcChapterHorizontal.removeHighlight(this._curPlayingSlideIdHorizontal);this._curPlayingSlideIdHorizontal=null}if(a!=this._curPlayingSlideIdHorizontal&&a!=null){if(this._curPlayingSlideIdHorizontal!=null){this._vcChapterHorizontal.removeHighlight(this._curPlayingSlideIdHorizontal)}this._vcChapterHorizontal.addHighlight(a);this._curPlayingSlideIdHorizontal=a;this.trackCurrentChapterHorizontal(a)}},trackCurrentChapterHorizontal:function(d){if(d==null){return}var g=this._vcChapterHorizontal.getChapterOffset();var c=[];var b=0;var f=0;for(var h in this._chapterList){if(this._chapterList[h]._type!=ChapterType.SLIDE){continue}if(h==d){f=b}c[b++]=h}var e=Math.max(0,f-g);var a=c[e];this._vcChapterHorizontal.scrollToLeft(a)},setSeekLimit:function(a){if(!this._chapterList){return}if(a==-9999||a==-8888){return}this._seekLimit=true;this._limitTime=a;this.setSeekLimitChapter(a,BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL)},updateSeekLimit:function(a){if(!this._seekLimit){return}if(a>this._limitTime){this.setSeekLimitChapter(a,BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL);this._limitTime=a}},setSeekLimitChapter:function(a,e){var d=Util.objectKeys(this._chapterList);if(d.length==0){return null}for(var b=0;b<d.length;b++){var c=d[b];var f="#"+e+c.toString();if(parseFloat(this._chapterList[c]._time._from)>parseFloat(a)){$(f).addClass("seek-limit")}else{$(f).removeClass("seek-limit")}}}},{ITEM_ID_PREFIX_HORIZONTAL:"vc-chapter-item-horizontal-",TEMPLATE_ID:"#vc-chapter-item-horizontal-tmpl"});var BCClosedCaption=Base.extend({_vcClosedCaption:null,_captionIndex:-1,_cueIndex:0,_isCaptionTime:false,_caption:null,_captionList:null,_onSyncing:false,_ptSize:14,_borderRadius:1,_lastTime:0,initialize:function(){this._vcClosedCaption=new VCClosedCaption();this._isCaptionTime=false;this._cueIndex=0;this._captionIndex=-1;this._onSyncing=false;this._lastTime=0;this.resize()},showClosedCaption:function(){var a=bcClosedCaption.getVCClosedCaption();if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls&&uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType==ContentType.VIDEO1){return}a.showClosedCaption()},hideClosedCaption:function(){var a=bcClosedCaption.getVCClosedCaption();a.hideClosedCaption()},resize:function(){var e=bcClosedCaption.getVCClosedCaption();if(!e){return}var a=$(window).width();if(uniPlayerConfig.getIsFitToElement()){a=$(uniPlayer.getTargetElement()).innerWidth()}var c;var b=$(LayoutIdTable.CHAPTER_VERTICAL);if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()||bcChapterVertical.isChapterLayer()||a<bcChapterVertical.getPushChapterMinWidth()){c=a}else{c=a-b.width()}var d=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){c=c-d.width()}this.resizeWidth(c);this.resizeCaptionFontSize(c)},resizeWidth:function(a){var b=bcClosedCaption.getVCClosedCaption();b.setCaptionPosition(a)},resizeCaptionFontSize:function(c){var f=bcClosedCaption.getVCClosedCaption();var e=uniPlayerConfig.getUniPlayerSettingsData().captionBaseFontSize;var a=BCClosedCaption.CAPTION_MIN_FONT_SIZE;var d=BCClosedCaption.CAPTION_MAX_BORDER_RADIUS;var b=BCClosedCaption.CAPTION_MIN_BORDER_RADIUS;if(c>=1920){this._ptSize=e;this._borderRadius=d}else{this._ptSize=c*e/1920;if(this._ptSize<a){this._ptSize=a}this._borderRadius=c*d/1920;if(this._borderRadius<b){this._borderRadius=b}}f.setFontSize(this._ptSize,this._borderRadius)},getVCClosedCaption:function(){return this._vcClosedCaption},setData:function(c){if(c==null||c.length==0){this._captionList=null;this._caption=null;this._captionIndex=-1;this.eraseCaptionText();this.hideClosedCaption();return}var b=0;if(this._captionList){if(this._captionList.length==this._captionIndex){b=c.length}else{for(var a in c){if(!this._captionList){break}if(c[a].lang==this._captionList[this._captionIndex].lang){b=a}}}}else{if(uniPlayerConfig.getUniPlayerSettingsData().showDefaultCaption){b=0}else{b=c.length}}this._captionList=c;this.setIdx(b);if(this.isCCOn()){this.showClosedCaption()}else{this.hideClosedCaption()}},setIdx:function(a){this._captionIndex=a;this._caption=null;if(this._captionList==null){return}if(a<0||a>=this._captionList.length){return}this._caption=this._captionList[a].caption;this.syncCaption(this._lastTime)},syncCaption:function(d){if(!this._caption){return}if(this._caption.cues.length==0){return}if(this._onSyncing){return}this._onSyncing=true;var c=0;var b=this._caption.cues.length-1;var a;while(c<=b){a=Math.floor((c+b)/2);if(d<this._caption.cues[a].startTime){b=a-1}else{if(d>this._caption.cues[a].endTime){c=a+1}else{break}}}if(d<this._caption.cues[a].startTime){this._cueIndex=a;this._isCaptionTime=false;this.eraseCaptionText()}else{if(d>this._caption.cues[a].endTime){this._cueIndex=a+1;this._isCaptionTime=false;this.eraseCaptionText()}else{this._cueIndex=a;this._isCaptionTime=true;this.setCaptionText(this._caption.cues[a].text)}}this._onSyncing=false;this._lastTime=d},isCCOn:function(){if(this._captionList==null||this._captionList.length==0){return false}return(this._captionIndex!=this._captionList.length)},setCaptionText:function(a){var b=bcClosedCaption.getVCClosedCaption();this._vcClosedCaption.setCaptionText(a,this._ptSize)},eraseCaptionText:function(){var a=bcClosedCaption.getVCClosedCaption();this._vcClosedCaption.eraseCaptionText()},showHTML5InlineCaptionForMobile:function(a){var b=bcClosedCaption.getVCClosedCaption();this._vcClosedCaption.showHTML5InlineCaptionForMobile(a,this._captionList,this._captionIndex)},hideHTML5InlineCaptionForMobile:function(a){var b=bcClosedCaption.getVCClosedCaption();this._vcClosedCaption.hideHTML5InlineCaptionForMobile(a)},adjustCaptionVerticalPosition:function(a){var b=bcClosedCaption.getVCClosedCaption();b.adjustCaptionVerticalPosition(a)}},{CAPTION_MIN_FONT_SIZE:12.5,CAPTION_MAX_BORDER_RADIUS:6,CAPTION_MIN_BORDER_RADIUS:1});var BCMediaScript=Base.extend({_vcMediaScript:null,_mediaScriptList:null,_isMediaScriptShown:false,_popupWindow:null,initialize:function(b){this._mediaScriptList=b;this._vcMediaScript=new VCMediaScript();if(b.length==0){return}var a=b[0].script;this._vcMediaScript.setMediaScriptText(a)},resize:function(){var a=bcMediaScript.getVCMediaScript();if(a!=null){a.resize()}},showMediaScript:function(){if(this.needMediaScriptPopup()){this.showMediaScriptPopup();return}this._isMediaScriptShown=true;this._vcMediaScript.showMediaScript()},hideMediaScript:function(){if(this.needMediaScriptPopup()){return}this._isMediaScriptShown=false;this._vcMediaScript.hideMediaScript()},isMediaScriptShown:function(){return this._isMediaScriptShown},needMediaScriptPopup:function(){if($(window).width()<575||skinManager.isMobile()){return true}return false},showMediaScriptPopup:function(){var a=Util.urlMerge(uniPlayerConfig.getUniPlayerSettingsData().playerUri,"media-script-popup.html");this._popupWindow=window.open(a,"_blank","width=350, height=500, resizable=yes, scrollbars=no, status=no, titlebar=no, toolbar=no");this._popupWindow[this._popupWindow.addEventListener?"addEventListener":"attachEvent"]((this._popupWindow.attachEvent?"on":"")+"load",this.onMediaScriptPopupLoaded,false);var b=this._popupWindow.document.getElementById("vc-media-script-content");if(b!=null){this.onMediaScriptPopupLoaded()}},onMediaScriptPopupLoaded:function(){var c=bcMediaScript;if(c._popupWindow==null){return}var e=c._popupWindow.document.getElementById("vc-media-script-content");var d=c._mediaScriptList[0].script.split("\n");var a="";for(var b in d){a+='<span class="vc-media-script-content-text">'+d[b]+"</span>";a+="<br>"}e.innerHTML=a;c._popupWindow=null},getVCMediaScript:function(){return this._vcMediaScript}},{});var BCPlayControllerMedia=Base.extend({_vcPlayController:null,_uniPlayerEventTarget:null,_eventTarget:null,_duration:0,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a){this._vcPlayController=new VCPlayControllerMedia();this.attachEvents();this._vcPlayController.addEventListener(this._eventTarget);this._vcPlayController.load();this._vcPlayController.setDuration(a);this._vcPlayController.initChapterUI(this.needShowChapterBtn());this._vcPlayController.initMediaScriptUI(this.needShowMediaScriptBtn());if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){this._vcPlayController.setIsFullScreen(true)}else{if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_LOCAL){this.hideFullScreenBtn()}}},attachEvents:function(){this._eventTarget.addListener(VCPlayControllerEvent.PLAY,this.onPlayControllerPlay);this._eventTarget.addListener(VCPlayControllerEvent.PAUSE,this.onPlayControllerPause);this._eventTarget.addListener(VCPlayControllerEvent.SEEK_START,this.onPlayControllerSeekStart);this._eventTarget.addListener(VCPlayControllerEvent.SEEK_END,this.onPlayControllerSeekEnd);this._eventTarget.addListener(VCPlayControllerEvent.SWAP_VIDEO,this.onPlayControllerSwapVideo);this._eventTarget.addListener(VCPlayControllerEvent.SWAP_SYNCDOC,this.onPlayControllerSyncDocSwap);this._eventTarget.addListener(VCPlayControllerEvent.FULL_SCREEN,this.onPlayControllerReqFullScreen);this._eventTarget.addListener(VCPlayControllerEvent.CLOSE_FULL_SCREEN,this.onPlayControllerCloseFullScreen);this._eventTarget.addListener(VCPlayControllerEvent.CHANGE_VOLUME,this.onPlayControllerChangeVolume);this._eventTarget.addListener(VCPlayControllerEvent.CHANGE_PLAYBACK_RATE,this.onPlayControllerChangePlaybackRate);this._eventTarget.addListener(VCPlayControllerEvent.CHANGE_PROFILE,this.onPlayControllerChangeProfile);this._eventTarget.addListener(VCPlayControllerEvent.SHOW_CC,this.onPlayControllerShowCC);this._eventTarget.addListener(VCPlayControllerEvent.HIDE_CC,this.onPlayControllerHideCC);this._eventTarget.addListener(VCPlayControllerEvent.CC_ITEM_SELECTED,this.onPlayControllerCCItemSelected);this._eventTarget.addListener(VCPlayControllerEvent.SHOW_CHAPTER,this.onPlayControllerShowChapter);this._eventTarget.addListener(VCPlayControllerEvent.HIDE_CHAPTER,this.onPlayControllerHideChapter);this._eventTarget.addListener(VCPlayControllerEvent.RELOAD_PLAYER,this.onPlayControllerReloadPlayer);this._eventTarget.addListener(VCPlayControllerEvent.SWAP_MIXED_VIDEO,this.onPlayControllerSwapMixedVideo);this._eventTarget.addListener(VCPlayControllerEvent.SWAP_MULTI_VIDEO,this.onPlayControllerSwapMultiVideo);this._eventTarget.addListener(VCPlayControllerEvent.SHOW_MEDIA_SCRIPT,this.onPlayControllerShowMediaScript);this._eventTarget.addListener(VCPlayControllerEvent.HIDE_MEDIA_SCRIPT,this.onPlayControllerHideMediaScript);this._eventTarget.addListener(VCPlayControllerEvent.SHOW_CAPTION_SCRIPT,this.onPlayControllerShowCaptionScript);this._eventTarget.addListener(VCPlayControllerEvent.HIDE_CAPTION_SCRIPT,this.onPlayControllerHideCaptionScript)},showPlayController:function(){if(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls){return}this._vcPlayController.showPlayController()},hidePlayController:function(){this._vcPlayController.hidePlayController()},getPlayController:function(){return this._vcPlayController},showRestartBtn:function(){this._vcPlayController.showRestartBtn()},hideRestartBtn:function(){this._vcPlayController.hideRestartBtn()},updateControllerForCurrentStory:function(){this._vcPlayController.initCCUI(uniPlayerConfig.getClosedCaptionList(),bcClosedCaption._captionIndex);this._vcPlayController.initProfileUI(uniPlayerConfig.getMediaChannelConfig()._playingInfo.profileList);if(skinManager.isMobile()&&uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType==ContentType.VIDEO3){this._vcPlayController.initSwapSelectBoxUI(uniPlayerConfig.getMediaChannelConfig()._playingInfo.extraMedias.length,uniPlayerConfig.getMediaChannelConfig().hasMixedMedia())}this.initFullScreenBtnVisibilityForContentType(uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType);this._vcPlayController.setCurrentContentType(uniPlayerConfig.getMediaChannelConfig().getContentType());this._vcPlayController.initIntroProgressUI();this.getPlayController().enableMixedMultiBtn(uniPlayerConfig.getMediaChannelConfig().hasMixedMedia())},initFullScreenBtnVisibilityForContentType:function(a){if(skinManager.isDesktop()){this.showFullScreenBtn();return}switch(a){case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:this.showFullScreenBtn();break;case ContentType.SYNCAUDIO:if(!uniPlayer.isIframe()&&!skinManager.isChrome()){this.hideFullScreenBtn()}else{this.showFullScreenBtn()}break;case ContentType.AUDIO:this.hideFullScreenBtn();break}},setVolume:function(a){this._vcPlayController.setVolume(a)},setProfileName:function(a){this._vcPlayController.setProfileName(a)},needShowChapterBtn:function(){if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){return false}if(uniPlayerConfig.getChapterList()==null){return false}if(Util.objectKeys(uniPlayerConfig.getChapterList()).length==0){return false}return true},needShowMediaScriptBtn:function(){if(uniPlayerConfig.getMediaScriptList().length==0){return false}return true},setIsPlaying:function(a){this._vcPlayController.setIsPlaying(a)},setDuration:function(a){this._vcPlayController.setDuration(a)},setCurrentTime:function(a){this._vcPlayController.setCurrentTime(a)},setBuffered:function(a){this._vcPlayController.setBuffered(a)},selectPlaybackRate:function(a){this._vcPlayController.selectPlaybackRate(a)},setSeekLimit:function(a){this._vcPlayController.setSeekLimit(a)},setSeekable:function(a){this._vcPlayController.setSeekable(a)},updateSeekLimit:function(a){if(!uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro){this._vcPlayController.updateSeekLimit(a)}},setIsControllable:function(a){this._vcPlayController.setIsControllable(a)},setCurrVideoType:function(a){this._vcPlayController.setCurrVideoType(a)},setPlayMode:function(a){this.setFullScreenBtnOfSyncVideoPlayMode(a);this._vcPlayController.setPlayMode(a)},setFullScreenBtnOfSyncVideoPlayMode:function(a){if(!skinManager.isMobile()){return}if(!uniPlayer.isIframe()&&!skinManager.isChrome()){if(a==SyncVideoMobilePlayMode.VIDEO){this.showFullScreenBtn()}else{this.hideFullScreenBtn()}}else{this.showFullScreenBtn()}},getIsPlaying:function(){return this._vcPlayController.getIsPlaying()},isCCSetBoxShown:function(){return this._vcPlayController.isCCSetBoxShown()},isPlaybackRateSetBoxShown:function(){return this._vcPlayController.isPlaybackRateSetBoxShown()},isProfileSetBoxShown:function(){return this._vcPlayController.isProfileSetBoxShown()},isSwapSelectBoxShown:function(){return this._vcPlayController.isSwapSelectBoxShown()},isMouseOver:function(){return this._vcPlayController.isMouseOver()},isSeeking:function(){return this._vcPlayController.isSeeking()},setIsFullScreen:function(a){this._vcPlayController.setIsFullScreen(a)},showFullScreenBtn:function(){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_LOCAL){return}this._vcPlayController.showFullScreenBtn()},hideFullScreenBtn:function(){this._vcPlayController.hideFullScreenBtn()},hideCaptionScript:function(){this._vcPlayController.hideCaptionScript()},onPlayControllerPlay:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.PLAY)}},onPlayControllerPause:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.PAUSE)}},onPlayControllerSeekStart:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SEEK_START)}},onPlayControllerSeekEnd:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SEEK_END,a)}},onPlayControllerChangeVolume:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.CHANGE_VOLUME,a)}},onPlayControllerSwapVideo:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SWAP_VIDEO,a)}},onPlayControllerSyncDocSwap:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SWAP_SYNCDOC)}bcPlayController.setFullScreenBtnOfSyncVideoPlayMode(a)},onPlayControllerReqFullScreen:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.FULL_SCREEN)}},onPlayControllerCloseFullScreen:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.CLOSE_FULL_SCREEN)}},onPlayControllerChangePlaybackRate:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.CHANGE_PLAYBACK_RATE,a)}},onPlayControllerChangeProfile:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.CHANGE_PROFILE,a)}},onPlayControllerShowCC:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SHOW_CC)}},onPlayControllerHideCC:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.HIDE_CC)}},onPlayControllerShowChapter:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SHOW_CHAPTER)}},onPlayControllerHideChapter:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.HIDE_CHAPTER)}},onPlayControllerCCItemSelected:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.CC_ITEM_SELECTED,a)}},onPlayControllerReloadPlayer:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.RELOAD_PLAYER)}},onPlayControllerSwapMixedVideo:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SWAP_MIXED_VIDEO)}},onPlayControllerSwapMultiVideo:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SWAP_MULTI_VIDEO)}},onPlayControllerShowMediaScript:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SHOW_MEDIA_SCRIPT)}},onPlayControllerHideMediaScript:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.HIDE_MEDIA_SCRIPT)}},onPlayControllerShowCaptionScript:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.SHOW_CAPTION_SCRIPT)}},onPlayControllerHideCaptionScript:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerEvent.HIDE_CAPTION_SCRIPT)}},getSyncDocPlayMode:function(){return this._vcPlayController.getPlayMode()},resize:function(){if(this._vcPlayController){this._vcPlayController.resize()}}});var BCPlayControllerDoc=Base.extend({_eventTarget:null,_uniPlayerEventTarget:null,_vcPlayController:null,constructor:function(a){this._eventTarget=new EventTargetArgs();this._uniPlayerEventTarget=a},initialize:function(a){this.attachEvents();this._vcPlayController=new VCPlayControllerDoc();this._vcPlayController.addEventListener(this._eventTarget);this._vcPlayController.load(a);this.setInitControlState()},setInitControlState:function(){var a=uniPlayerConfig.getContentPlayingInfoData().contentDownloadUri;if(a&&!skinManager.isIOS()){this.getVCPlayController().showDownloadBtn()}if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_POPUP){this.requestFullScreen()}else{this.closeFullScreen()}},attachEvents:function(){this._eventTarget.addListener(VCPlayControllerDocEvent.PREV_PAGE,this.onPrevPage);this._eventTarget.addListener(VCPlayControllerDocEvent.NEXT_PAGE,this.onNextPage);this._eventTarget.addListener(VCPlayControllerDocEvent.CHANGE_PAGE,this.onChangePage);this._eventTarget.addListener(VCPlayControllerDocEvent.ZOOM_IN,this.onZoomIn);this._eventTarget.addListener(VCPlayControllerDocEvent.ZOOM_OUT,this.onZoomOut);this._eventTarget.addListener(VCPlayControllerDocEvent.CHANGE_SCALE,this.onChangeScale);this._eventTarget.addListener(VCPlayControllerDocEvent.SET_SCALE,this.onSetScale);this._eventTarget.addListener(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,this.onChangeViewMode);this._eventTarget.addListener(VCPlayControllerDocEvent.SHOW_CHAPTER,this.onShowChapter);this._eventTarget.addListener(VCPlayControllerDocEvent.HIDE_CHAPTER,this.onHideChapter);this._eventTarget.addListener(VCPlayControllerDocEvent.FULL_SCREEN,this.onReqFullScreen);this._eventTarget.addListener(VCPlayControllerDocEvent.CLOSE_FULL_SCREEN,this.onCloseFullScreen);this._eventTarget.addListener(VCPlayControllerDocEvent.CHANGE_TO_EBOOK_MODE,this.onChangeToEbookMode);this._eventTarget.addListener(VCPlayControllerDocEvent.CHANGE_TO_NORMAL_MODE,this.onChangeToNormalMode);this._eventTarget.addListener(VCPlayControllerDocEvent.DOWNLOAD_PDF,this.onDownloadPdf);this._eventTarget.addListener(VCPlayControllerDocEvent.TOOLS_MOUSE_OVER,this.onToolsMouseOver);this._eventTarget.addListener(VCPlayControllerDocEvent.TOOLS_MOUSE_LEAVE,this.onToolsMouseLeave)},getVCPlayController:function(){return this._vcPlayController},resize:function(){if(this.getVCPlayController()){this.getVCPlayController().resize()}},showChapter:function(){this.getVCPlayController().setIsChapterOn(true)},hideChapter:function(){this.getVCPlayController().setIsChapterOn(false)},isChapterOn:function(){return this.getVCPlayController().isChapterOn()},requestFullScreen:function(){this.getVCPlayController().setIsFullScreenOn(true)},closeFullScreen:function(){this.getVCPlayController().setIsFullScreenOn(false)},setTitle:function(a){this.getVCPlayController().setTitle(a)},setPageText:function(b,a){this.getVCPlayController().setPageText(b,a)},setCurrPageText:function(a){this.getVCPlayController().setCurrPageText(a)},setTotalPageText:function(a){this.getVCPlayController().setTotalPageText(a)},setScaleText:function(a){this.getVCPlayController().setScaleText(a)},showTools:function(){if(this.getVCPlayController()){this.getVCPlayController().showTools()}},hideTools:function(){if(this.getVCPlayController()){this.getVCPlayController().hideTools()}},isToolShowing:function(){if(this.getVCPlayController()){return this.getVCPlayController().isToolShowing()}},bindPinchScale:function(){if(this.getVCPlayController()){return this.getVCPlayController().bindPinchScale()}},onPrevPage:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.PREV_PAGE)}},onNextPage:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.NEXT_PAGE)}},onChangePage:function(b,a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_PAGE,a)}},onZoomIn:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.ZOOM_IN)}},onZoomOut:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.ZOOM_OUT)}},onChangeScale:function(a,b){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_SCALE,b)}},onSetScale:function(a,b){if(bcPlayController._uniPlayerEventTarget){switch(b){case DocScaleValue.FIT_TO_WIDTH:case DocScaleValue.FIT_TO_SCALE:bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_SCALE_MODE,b);break;default:bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.SET_SCALE,b);break}}},onChangeViewMode:function(a,b){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,b)}},onShowChapter:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.SHOW_CHAPTER)}},onHideChapter:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.HIDE_CHAPTER)}},onReqFullScreen:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.FULL_SCREEN)}},onCloseFullScreen:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CLOSE_FULL_SCREEN)}},onChangeToEbookMode:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_TO_EBOOK_MODE)}},onChangeToNormalMode:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.CHANGE_TO_NORMAL_MODE)}},onDownloadPdf:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.DOWNLOAD_PDF)}},onToolsMouseOver:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.TOOLS_MOUSE_OVER)}},onToolsMouseLeave:function(a){if(bcPlayController._uniPlayerEventTarget){bcPlayController._uniPlayerEventTarget.fire(VCPlayControllerDocEvent.TOOLS_MOUSE_LEAVE)}}});var SkinManager=Base.extend({getSkinTargetDevice:function(){var e=navigator.appVersion;var a=/Windows NT 6.2/i.test(e);var d=/Trident\/([\d.]+)/i.test(navigator.userAgent);var c=/Macintosh/i.test(e);var b=/Safari/i.test(e);var f=/Chrome/i.test(e);var g="desktop";if(this.isMobile()){g="mobile"}return g},isMobile:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){return true}if(navigator.platform=="MacIntel"&&navigator.maxTouchPoints>1){return true}return false},isDesktop:function(){return !this.isMobile()},isAndroid:function(){if(/Android/i.test(navigator.userAgent)){return true}return false},getAndroidVersion:function(){if(this.isAndroid()){var b=(window.navigator.userAgent).match(/Android\s+([\d\.]+)/);if(b&&b.length>0){var a=b[1];if(a.length>3){a=a.substring(0,3)}return Number(a)}}return null},isIOS:function(){if(/iPhone|iPod|iPad/i.test(navigator.userAgent)){return true}return false},isIPhoneOrIPod:function(){if(/iPhone|iPod/i.test(navigator.userAgent)){return true}return false},getiOSVersion:function(){if(!/iP(hone|od|ad)/.test(navigator.platform)){return null}var a=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(a[1],10)},isActivexEnabled:function(){var a=null;try{a=!!new ActiveXObject("htmlfile")}catch(b){a=false}return a},isChrome:function(){var a=navigator.appVersion;return/Chrome/i.test(a)},isSafari:function(){var a=navigator.appVersion;return/Safari/i.test(a)&&!/Chrome/i.test(a)},isFirefox:function(){var a=navigator.userAgent;return/Firefox/i.test(a)},isLowIE:function(){return($("html").is(".ie6, .ie7, .ie8"))},isAndroidBrowser:function(){var a=navigator.userAgent;var b=((Util.indexOf("Mozilla/5.0",a)>-1&&Util.indexOf("Android ",a)>-1&&Util.indexOf("AppleWebKit",a)>-1)&&!(Util.indexOf("Chrome",a)>-1));return this.isAndroid()&&b},isIE7:function(){return($("html").is(".ie7"))},isIE9:function(){return($("html").is(".ie9"))},isIE11:function(){return($("html").is(".ie11"))},isIE:function(){var b=window.navigator.userAgent;var a=b.indexOf("MSIE ");return(a>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))},isNeedFlashFallback:function(){var a=false;if(this.isFirefox()){if(false==this.isHlsSupported()){a=true}}return this.isLowIE()||a||!uniPlayer._html5MediaPlayable},isPDFSupported:function(){if(this.isDesktop()){return !(skinManager.isLowIE()||skinManager.isIE9())}else{if(this.isAndroid()){return(this.getAndroidVersion()>=4.4)}return true}},isHlsSupported:function(){if(this.isLowIE()||typeof(Hls)=="undefined"){return false}return Hls.isSupported()===true}});var SkinNameTable={UNI_PLAYER_LAYOUT_HTML:"uni-player-layout.html",UNI_PLAYER_LAYOUT_CSS:"uni-player-layout.css"};var LayoutIdTable={UNI_PLAYER:"#uni-player",UNI_PLAYER_CONTENT_PLAYER:"#player",AUDIO_PLAYER:"#audio-player",VIDEO_PLAYER:"#video-player",SYNCDOC_PLAYER:"#syncdoc-player",CONTENT_METADATA:"#content-metadata",CONTENT_METADATA_INFO:"#content-metadata-info",FRONT_SCREEN:"#front-screen",PLAY_CONTROLLER:"#play-controller",CHAPTER_VERTICAL:"#chapter-vertical",CHAPTER_HORIZONTAL:"#chapter-horizontal",CLOSED_CAPTION:"#closed-caption",PLAYER_CENTER_CONTROL:"#player-center-control",PLAYER_MASK:"#player-mask",PLAYER_MASK_SWAPPING:"#player-mask",DESKTOP_LOADING_INDICATOR:"#loading-indicator",ERROR_MESSAGE_BOX:"#error-msg-box",IMAGE_INTRO:"#image-intro",MEDIA_SCRIPT:"#media-script",CONFIRM_DIALOG:"#confirm-dialog",VIDEO_PLAYER_PLAY:"#video-play",SYNCDOC_PLAYER_PLAY_WRAPPER:"#syncdoc-play-wrapper"};var StatisticsRequestCompleted=false;var StatisticsManager=Base.extend({requestViewStatistics:function(b,d,e){if(!b){return}if(StatisticsRequestCompleted){return}var c=this.getEmbedDomain();var a={command:d,embed_domain:c,content_id:e};$.ajax({type:"POST",url:b,data:a,async:true,dataType:"text",success:function(f){StatisticsRequestCompleted=true},error:function(f){}})},getEmbedDomain:function(){var a;try{a=document.referrer;if(a.length>250){a=a.substring(0,250)}}catch(b){a=""}return a}},{COMMAND_READ_CNT:"ReadCnt",COMMAND_VIEW_CNT:"ViewCnt"});var CookieManager=Base.extend({setCookie:function(b,d,a){var c=b+"="+d;if(a){c+=";expires="+a.toUTCString()}document.cookie=c},getCookie:function(b){b=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var e=a[d];while(e.charAt(0)==" "){e=e.substring(1)}if(e.indexOf(b)==0){return e.substring(b.length,e.length)}}return""}},{VOLUME:"up_volume",PLAYBACK_RATE:"up_playback_rate",PROFILE_ID:"up_profile_id",LAST_TIME:"up_last_time_"});var LocalizeManager=Base.extend({lang:null,stringResource:null,initialize:function(){this.lang=this.getLanguage();switch(this.lang){case LocalizeManager.LANG_KO:this.stringResource=StringResourceKo;break;case LocalizeManager.LANG_EN:this.stringResource=StringResourceEn;break;case LocalizeManager.LANG_JA:this.stringResource=StringResourceJa;break;case LocalizeManager.LANG_ZH_HANT:this.stringResource=StringResourceEn;break;case LocalizeManager.LANG_ZH_HANS:this.stringResource=StringResourceEn;break}},getLanguageCode:function(a){switch(a.toLowerCase()){case LocalizeManager.LANG_KO:case LocalizeManager.LANG_KO_LONG:return LocalizeManager.LANG_KO;case LocalizeManager.LANG_EN:case LocalizeManager.LANG_EN_LONG:return LocalizeManager.LANG_EN;case LocalizeManager.LANG_JA:case LocalizeManager.LANG_JA_LONG:return LocalizeManager.LANG_JA;case LocalizeManager.LANG_ZH_HANT:case LocalizeManager.LANG_ZH_HANT_LONG:return LocalizeManager.LANG_ZH_HANT;case LocalizeManager.LANG_ZH_HANS:case LocalizeManager.LANG_ZH_HANS_LONG:return LocalizeManager.LANG_ZH_HANS}return null},getLanguage:function(){var a=uniPlayerConfig.getContentPlayingInfoData().lang;if(a!=null){return a}var c=uniPlayerConfig.getUniPlayerSettingsData().lang;if(c!=null){return c}var d=navigator.languages?navigator.languages[0]:(navigator.language||navigator.userLanguage);var b=this.getLanguageCode(d);if(b!=null){return b}return LocalizeManager.DEFAULT_LANGUAGE},getStringResource:function(){return this.stringResource}},{DEFAULT_LANGUAGE:"en",LANG_EN:"en",LANG_KO:"ko",LANG_JA:"ja",LANG_ZH_HANT:"zh-hant",LANG_ZH_HANS:"zh-hans",LANG_EN_LONG:"en-us",LANG_KO_LONG:"ko-kr",LANG_JA_LONG:"ja-jp",LANG_ZH_HANT_LONG:"zh-hant",LANG_ZH_HANS_LONG:"zh-hans"});var StringResourceKo={Skin:{TOC:"목차",MEDIA_SCRIPT:"스크립트"},ButtonTitle:{INFO:"정보",SHARE:"공유",PLAY:"재생",REPLAY:"다시재생",PAUSE:"일시정지",MUTE:"음소거",UNMUTE:"음소거 해제",PLAYBACKRATE:"배속",PROFILE:"품질",CAPTION:"자막",CHAPTER:"목차",ENTER_FULLSCREEN:"전체화면",CLOSE_FULLSCREEN:"전체화면 닫기",SHOW_ALL_CHANNEL:"전체 채널 보기",PLAY_MIXED:"Mixed 영상 재생",PLAY_MULTI:"다채널 영상 재생",SWAP_MIXED:"Mixed 영상 전환",SWAP_MULTI:"다채널 영상 전환",MEDIA_SCRIPT:"스크립트",UNAVAILABLE_CAPTION_MSG:"자막에 문제가 있어 표시할 수 없습니다.",OK:"확인",CANCEL:"취소",YES:"예",NO:"아니오"},ContinueMsg:"이전에 시청했던 {0}부터 이어서 보시겠습니까?",PlaybackRateUnavailable:"IE7/8 또는 호환성보기를 설정한 경우에는 영상이 Flash 모드로 제공되므로 배속 조절 기능을 지원하지 않습니다.",FullScreenUnavailable:"IE10 이하 또는 호환성보기를 설정한 경우에는 전체화면 기능을 지원하지 않습니다.",CancelDuplicateContentsConfirm:"본 콘텐츠의 진도체크를 시작합니다.\n실행중인 다른 콘텐츠의 진도체크는 중단됩니다.",CancelDuplicateContents:"콘텐츠 시청을 취소하였습니다.<br/><br/>동일 계정에서 시청 중인 다른 콘텐츠의 시청은 계속 진행하실 수 있습니다.",WarnDuplicateContents:"동일 계정에서 다른 콘텐츠 시청을 시작하여 이 콘텐츠의 출결확인을 위한 진도체크가 중단되었습니다.<br/><br/>다시 이 콘텐츠의 진도체크를 진행하고자 하신다면, 새로고침하여 시청해야 합니다.",FailToViewContents:"콘텐츠 재생에 실패하였습니다.<br/>콘텐츠가 잘못 생성된 경우일 수 있으니 제공처에 문의해 주시기 바랍니다.",InvalidPlaybackRate:"허용 가능한 최대 배속을 초과하였습니다."};var StringResourceEn={Skin:{TOC:"TOC",MEDIA_SCRIPT:"Script"},ButtonTitle:{INFO:"Info",SHARE:"Share",PLAY:"Play",REPLAY:"Replay",PAUSE:"Pause",MUTE:"Mute",UNMUTE:"Unmute",PLAYBACKRATE:"Playback rate",PROFILE:"Profile",CAPTION:"Caption",CHAPTER:"Chapter",ENTER_FULLSCREEN:"Full Screen",CLOSE_FULLSCREEN:"Restore Size",SHOW_ALL_CHANNEL:"Show All Channel",PLAY_MIXED:"Play Mixed Media",PLAY_MULTI:"Play Multi Channel Media",SWAP_MIXED:"Swap Mixed Media",SWAP_MULTI:"Swap Multi Media",MEDIA_SCRIPT:"Script",UNAVAILABLE_CAPTION_MSG:"There is a problem with closed caption.",OK:"Ok",CANCEL:"Cancel",YES:"Yes",NO:"No"},ContinueMsg:"You were watching this content before. Continue watching from {0}?",PlaybackRateUnavailable:"IE7/8 or so, if you set the compatibility view this video available in flash mode does not support the speed control.",FullScreenUnavailable:"IE10 less or so, if you set the compatibility view does not support the fullscreen.",CancelDuplicateContentsConfirm:"The progress check of this content starts.\nThe progress check of other running content is stopped.",CancelDuplicateContents:"You have canceled the viewing of content.<br/><br/>You can continue viewing other content being viewed on the same account.",WarnDuplicateContents:"The progress check to confirm the attendance of this content has been interrupted by starting to watch other content in the same account.<br/><br/>If you wish to proceed with the progress check of this content again, you must refresh and watch.",FailToViewContents:"Failed to play content.<br/>Please contact the provider as the content may have been created incorrectly.",InvalidPlaybackRate:"The maximum playback rate has been exceeded."};var StringResourceJa={Skin:{TOC:"目次",MEDIA_SCRIPT:"スクリプト"},ButtonTitle:{INFO:"情報",SHARE:"共有",PLAY:"再生",REPLAY:"再生",PAUSE:"一時停止",MUTE:"ミュート",UNMUTE:"ミュート解除",PLAYBACKRATE:"倍速",PROFILE:"品質",CAPTION:"字幕",CHAPTER:"目次",ENTER_FULLSCREEN:"全体画面",CLOSE_FULLSCREEN:"元の画面",SHOW_ALL_CHANNEL:"すべてのチャンネルを表示",PLAY_MIXED:"Mixed映像再生",PLAY_MULTI:"Multi映像再生",SWAP_MIXED:"Mixed映像交換",SWAP_MULTI:"Multi映像交換",MEDIA_SCRIPT:"スクリプト",UNAVAILABLE_CAPTION_MSG:"字幕ファイルに問題があります。",OK:"確認",CANCEL:"キャンセル",YES:"例",NO:"いいえ"},ContinueMsg:"以前に視聴した内容です。{0}続けて視聴しますか？",PlaybackRateUnavailable:"IE7/8または交換表示を有効にした場合、再生速度を調整することはできません。",FullScreenUnavailable:"IE10以下または交換表示を有効にした場合、フルスクリーン機能をサポートしていません。",CancelDuplicateContentsConfirm:"本コンテンツの進歩チェックを開始します。\n実行中の他のコンテンツの進歩チェックは停止します。",CancelDuplicateContents:"コンテンツ視聴をキャンセルしました。<br/><br/>同じアカウントで視聴中の他のコンテンツの視聴は続行することができます。",WarnDuplicateContents:"同じアカウントで他のコンテンツ視聴を開始して、このコンテンツの出欠確認のための進歩チェックが中断されました。<br/><br/>再びこのコンテンツの進歩チェックを進めたいなら、リフレッシュして視聴する必要があります。",FailToViewContents:"コンテンツの再生に失敗しました。<br/>コンテンツが正しく作成されなかった可能性があります。<br/>提供先にお問い合わせください。",InvalidPlaybackRate:"最大再生速度を超えました。"};var NoteManager=Base.extend({_targetPanel:null,_drawingCanvas:null,_savedCanvas:null,_currentNote:null,_currentNoteTime:0,_currentNoteList:[],_isVisible:false,_flashNote:null,_firstResizeTimer:null,_firstResizeCount:0,_reserveNoteTime:0,_reserveNoteList:null,initialize:function(a){this._targetPanel=$(a);this._firstResizeCount=0;if(this.isCanvasNoteAvailable()){this.initializeCanvasNote(a)}else{this.initializeFlashNote()}},showNotePanel:function(){if(syncDocPlayer.getSyncDocPlay()&&syncDocPlayer.getSyncDocPlay().getSlideVC()){if(syncDocPlayer.getSyncDocPlay().getSlideVC().isVerticalSlide()){return}}if(this._targetPanel){this._targetPanel.show()}},hideNotePanel:function(){if(this._targetPanel){this._targetPanel.hide()}},initializeCanvasNote:function(a){this._drawingCanvas=document.createElement("canvas");this._drawingCanvas.id="drawingArea";this._drawingCanvas.width=NoteManager.BASE_NOTE_AREA_WIDTH;this._drawingCanvas.height=NoteManager.BASE_NOTE_AREA_HEIGHT;a.appendChild(this._drawingCanvas);this._savedCanvas=document.createElement("canvas");this._savedCanvas.width=NoteManager.BASE_NOTE_AREA_WIDTH;this._savedCanvas.height=NoteManager.BASE_NOTE_AREA_HEIGHT;if(skinManager.isAndroid()){$("body").css("overflow","visible")}$(VCSyncDocPlay.NOTE_PANEL_CLASS).css("visibility","hidden")},initializeFlashNote:function(){switch(uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType){case ContentType.SYNCVIDEO:this.createFlashNote(NoteManager.SYNCVIDEO_NOTE_ELEMENT_ID,NoteManager.FLASH_NOTE_ELEMENT_ID);break;case ContentType.SYNCAUDIO:this.createFlashNote(NoteManager.SYNCAUDIO_NOTE_ELEMENT_ID,NoteManager.FLASH_NOTE_ELEMENT_ID);break}this._flashNote=document.getElementById(NoteManager.FLASH_NOTE_ELEMENT_ID);$("#"+NoteManager.FLASH_NOTE_ELEMENT_ID).css("visibility","hidden")},createFlashNote:function(j,h){var a="11.4.0";var d={};var e={};var i=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var g=Util.urlMerge(i,"playerproductinstall.swf");e.quality="high";e.bgcolor="#000000";e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="transparent";var f={};f.id=h;f.name=h;f.align="middle";var b="99.9%";var k="100%";var c=Util.urlMerge(i,"flashnote.swf");swfobject.embedSWF(c,j,b,k,a,g,d,e,f,this.callbackEmbedSWF);swfobject.createCSS(j,"display:block;text-align:left;")},callbackEmbedSWF:function(a){if(a.success==false){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;document.location=Util.urlMerge(b,"downloadflashplayer.html")}},release:function(){this._isVisible=false;this.clearCanvas(true);if(this.isCanvasNoteAvailable()){this.releaseCanvasNote()}else{this.releaseFlashNote()}},releaseCanvasNote:function(){if(this._targetPanel!=null){this._targetPanel.empty()}},releaseFlashNote:function(){switch(uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType){case ContentType.SYNCVIDEO:$(VCSyncDocPlay.SYNC_VIDEO_PLAYER_ID).find(VCSyncDocPlay.NOTE_PANEL_CLASS).empty();$(VCSyncDocPlay.SYNC_VIDEO_PLAYER_ID).find(VCSyncDocPlay.NOTE_PANEL_CLASS).html('<div id="'+NoteManager.SYNCVIDEO_NOTE_ELEMENT_ID+'"></div>');break;case ContentType.SYNCAUDIO:$(VCSyncDocPlay.SYNC_AUDIO_PLAYER_ID).find(VCSyncDocPlay.NOTE_PANEL_CLASS).empty();$(VCSyncDocPlay.SYNC_AUDIO_PLAYER_ID).find(VCSyncDocPlay.NOTE_PANEL_CLASS).html('<div id="'+NoteManager.SYNCAUDIO_NOTE_ELEMENT_ID+'"></div>');break}},resize:function(){$target=syncDocPlayer.getSyncDocPlay().getSlideElement();if(this._targetPanel==null||typeof $target.css("margin-top")=="undefined"){return}var c=$target.width();var b=$target.height();var f=$target.offset();if(this._firstResizeCount<this.getFirstResizeCount()){if(this._firstResizeTimer!=null){clearTimeout(this._firstResizeTimer)}var e=this;this._firstResizeTimer=setTimeout(function(){e._firstResizeCount++;e._firstResizeTimer=null;noteManager.resize()},500);return}if(c==0||b==0){this._isVisible=false}else{this._isVisible=true;if(this._reserveNoteList!=null){this.drawNoteList(this._reserveNoteTime,this._reserveNoteList);this._reserveNoteTime=0;this._reserveNoteList=null}}var a=$target.css("margin-top").replace("px","")*1;var d=$(LayoutIdTable.SYNCDOC_PLAYER_PLAY_WRAPPER).css("top").replace("px","")*1;this._targetPanel.css("left",f.left+"px");this._targetPanel.css("top",(f.top-d)+"px");if(this.isCanvasNoteAvailable()){if(this._isVisible){$(VCSyncDocPlay.NOTE_PANEL_CLASS).css("visibility","visible")}else{$(VCSyncDocPlay.NOTE_PANEL_CLASS).css("visibility","hidden")}this._drawingCanvas.width=c;this._drawingCanvas.height=b;this._savedCanvas.width=c;this._savedCanvas.height=b;this.clearCanvas(false)}else{if(this._isVisible){$("#"+NoteManager.FLASH_NOTE_ELEMENT_ID).css("visibility","visible")}else{$("#"+NoteManager.FLASH_NOTE_ELEMENT_ID).css("visibility","hidden")}this._targetPanel.css("width",c);this._targetPanel.css("height",b);$("#"+NoteManager.FLASH_NOTE_ELEMENT_ID).css("width","100%")}this.drawCurrentNoteList()},isNoteShowCompleted:function(a){if(this.isCanvasNoteAvailable()){if(typeof this._currentNoteList[a]!="undefined"&&this._currentNoteList[a]!=null){return true}}else{try{if(this._flashNote.fvIsNoteShowCompleted(a)){return true}}catch(b){return false}}return false},drawAnimationNote:function(a,b){if(false==this._isVisible){return}if(this.isCanvasNoteAvailable()){this.drawAnimationCanvasNote(a,b)}else{this.drawAnimationFlashNote(a,b)}},drawAnimationCanvasNote:function(a,b){if(b._type==NoteType.HIDE){this.hideNote(b._hideId);return}if(this._currentNote!=null&&this._currentNote._id!=b._id){if(this._currentNote._drawingCompleted==false){this.drawNoteObj(-1,this._currentNote)}this._currentNoteList[this._currentNote._id]=this._currentNote;this._currentNote=null;this._currentNoteTime=0}if(this._currentNote==null){this._currentNote=this.createNote(b);if(this._currentNote==null){return}}if(this._currentNote._drawingCompleted==false){this.drawNoteObj(a,this._currentNote);this._currentNoteTime=a}if(this._currentNote._drawingCompleted&&typeof this._currentNoteList[this._currentNote._id]=="undefined"){this._currentNoteList[this._currentNote._id]=this._currentNote}},drawAnimationFlashNote:function(b,c){try{this._flashNote.fvDrawAnimationNote(b,c._id)}catch(a){}},drawNoteList:function(a,b){if(false==this._isVisible){if(this._firstResizeCount<this.getFirstResizeCount()){this._reserveNoteTime=a;this._reserveNoteList=b}return}if(this.isCanvasNoteAvailable()){this.drawCanvasNoteList(a,b)}else{this.drawFlashNoteList(a,b)}},drawCanvasNoteList:function(e,d){d=this.removeHideNote(d);this.clearCanvas(true);var c=this.getMemoryContext();var l=null;var a=null;var g=null;for(var f=0;f<d.length;f++){var j=d[f];var h=this.createNote(j);if(h==null){continue}if(f==d.length-1&&j._type==NoteType.MOUSE_CURVE&&j._times[j._times.length-1]>e){a=e;g=j;break}var k=h.draw(-1,c,this.getCanvasSize());if(k.width()!=0&&k.height()!=0){if(l==null){l=k}else{l=l.union(k)}}this._currentNote=h;this._currentNoteList[j._id]=h}if(l!=null){this.updateCanvas(l,c)}this.saveCanvas();if(g!=null){this._currentNote=this.createNote(g);this._currentNoteTime=a;var b=this._currentNote.draw(a,c,this.getCanvasSize());this.updateCanvas(b,c)}},drawFlashNoteList:function(d,f){var b=[];for(var a in f){b[a]=f[a]._id}try{this._flashNote.fvDrawNoteList(d,b)}catch(c){}},drawCurrentNoteList:function(){if(false==this._isVisible){return}if(this.isCanvasNoteAvailable()){this.drawCurrentCanvasNoteList()}else{this.drawCurrentFlashNoteList()}},drawCurrentCanvasNoteList:function(){var f=Util.objectKeys(this._currentNoteList);var g=[];for(var d=0;d<f.length;d++){g[d]=this._currentNoteList[f[d]]}var e=this.getMemoryContext();var b=null;for(var d=0;d<g.length;d++){var c=g[d];if(c==null){continue}var a=c.draw(-1,e,this.getCanvasSize());if(b==null){b=a}else{b=b.union(a)}}if(b!=null){this.updateCanvas(b,e)}this.saveCanvas();if(this._currentNote!=null&&this._currentNote._drawingCompleted==false){this.drawNoteObj(this._currentNoteTime,this._currentNote)}},drawCurrentFlashNoteList:function(){try{this._flashNote.fvDrawCurrentNoteList()}catch(a){}},drawNoteObj:function(d,b){if(false==this.isCanvasNoteAvailable()){return}var c=this.getMemoryContext();var a=b.draw(d,c,this.getCanvasSize());this.updateCanvas(a,c);if(b._drawingCompleted){this.saveCanvas()}},createNote:function(b){var a=null;switch(b._type){case NoteType.MOUSE_CURVE:a=new NoteMouseCurve(b);break;case NoteType.LINE:a=new NoteLine(b);break;case NoteType.RECTANGLE:a=new NoteRectangle(b);break}return a},removeHideNote:function(h){if(false==this.isCanvasNoteAvailable()){return}var a=[];var g=0;for(var d=0;d<h.length;d++){if(typeof h[d]=="undefined"||h[d]==null){continue}if(h[d]._type==NoteType.HIDE){a[g++]=h[d]._hideId}}var c=[];var f=0;for(var d=0;d<h.length;d++){if(typeof h[d]=="undefined"||h[d]==null){continue}var e=false;for(var b=0;b<g;b++){if(h[d]._id==a[b]){e=true;break}}if(false==e){c[f++]=h[d]}}return c},getMemoryContext:function(){if(false==this.isCanvasNoteAvailable()){return}if(this._drawingCanvas.width==0&&this._drawingCanvas.height==0){return}var d=document.createElement("canvas");d.width=this._drawingCanvas.width;d.height=this._drawingCanvas.height;var c=this._savedCanvas.getContext("2d");var a=c.getImageData(0,0,this._drawingCanvas.width,this._drawingCanvas.height);var b=d.getContext("2d");b.putImageData(a,0,0);return b},getCanvasSize:function(){if(false==this.isCanvasNoteAvailable()){return}return{width:this._drawingCanvas.width,height:this._drawingCanvas.height}},updateCanvas:function(b,d){if(false==this.isCanvasNoteAvailable()){return}if(b.width()==0||b.height()==0){return}var c=this._drawingCanvas.getContext("2d");var a=d.getImageData(b._left,b._top,b.width(),b.height());c.putImageData(a,b._left,b._top)},saveCanvas:function(){if(false==this.isCanvasNoteAvailable()){return}if(this._drawingCanvas.width==0&&this._drawingCanvas.height==0){return}var b=this._drawingCanvas.getContext("2d");var a=b.getImageData(0,0,this._drawingCanvas.width,this._drawingCanvas.height);var c=this._savedCanvas.getContext("2d");c.putImageData(a,0,0)},clearCanvas:function(a){if(this.isCanvasNoteAvailable()){this.clearCanvasNote(a)}else{this.clearFlashNote(a)}},clearCanvasNote:function(b){if(this._currentNoteList.length==0&&this._currentNote==null){return}if(this._drawingCanvas.width==0&&this._drawingCanvas.height==0){return}var d=this._drawingCanvas.getContext("2d");d.clearRect(0,0,this._drawingCanvas.width,this._drawingCanvas.height);var e=this._savedCanvas.getContext("2d");e.clearRect(0,0,this._drawingCanvas.width,this._drawingCanvas.height);this._savedCanvas.width=this._drawingCanvas.width;this._savedCanvas.height=this._drawingCanvas.width;if(skinManager.isAndroid()){var a=this._drawingCanvas.width;var c=this._drawingCanvas.height;this._drawingCanvas.width=this._drawingCanvas.height=0;this._drawingCanvas.width=a;this._drawingCanvas.height=c}if(b){this._currentNote=null;this._currentNoteTime=0;this._currentNoteList=[]}},clearFlashNote:function(a){try{this._flashNote.fvClear(a)}catch(b){}},hideNote:function(a){if(typeof this._currentNoteList[a]=="undefined"||this._currentNoteList[a]==null){return}var c=Util.objectKeys(this._currentNoteList);var d=[];for(var b=0;b<c.length;b++){if(c[b]!=a){d[c[b]]=this._currentNoteList[c[b]]}}this.clearCanvas(false);this._currentNoteList=d;this.drawCurrentNoteList()},isCanvasNoteAvailable:function(){return !skinManager.isLowIE()},noteFallbackReady:function(a){var c=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyFileNameList.note;var b=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,c);this._flashNote.fvLoadNote(b)},onNoteParseCompleted:function(a){},getFirstResizeCount:function(){return skinManager.isDesktop()?1:2}},{BASE_NOTE_AREA_WIDTH:800,BASE_NOTE_AREA_HEIGHT:600,SYNCVIDEO_NOTE_ELEMENT_ID:"vc-sdvideo-note-flash-fallback",SYNCAUDIO_NOTE_ELEMENT_ID:"vc-sdaudio-note-flash-fallback",FLASH_NOTE_ELEMENT_ID:"note-flash-fallback"});var BaseNote=Base.extend({_id:null,_note:null,_drawingCompleted:null,constructor:function(a){this._id=a._id;this._note=a;this._drawingCompleted=false},getDisplayPoint:function(c,b){var d=this.getDisplayCanvasSize(b);var a=(d.width-b.width)/2;var f=(d.height-b.height)/2;var e={x:c.x/NoteManager.BASE_NOTE_AREA_WIDTH*d.width-a,y:c.y/NoteManager.BASE_NOTE_AREA_HEIGHT*d.height-f};return e},getDisplayCanvasSize:function(b){var a=b.width/b.height;var d=NoteManager.BASE_NOTE_AREA_WIDTH/NoteManager.BASE_NOTE_AREA_HEIGHT;var e;var c;if(a>d){e=b.width;c=b.width/d}else{e=b.height*d;c=b.height}return{width:e,height:c}},calcThickness:function(c,a){var b=this.getDisplayCanvasSize(a);return c*Math.sqrt((b.width/NoteManager.BASE_NOTE_AREA_WIDTH)*(b.height/NoteManager.BASE_NOTE_AREA_HEIGHT))}});var NoteMouseCurve=BaseNote.extend({constructor:function(b){this.base(b);var c=this._note._points[this._note._points.length-1];for(var a=0;a<3;a++){this._note._points.push(c)}},draw:function(d,c,l){if(false==this._note._visible){this._drawingCompleted=true;return new Rect(0,0,0,0)}var m=null;c.beginPath();var b=this._note._points[0];var g=this.getDisplayPoint(b,l);c.moveTo(g.x,g.y);for(var f=0;f<this._note._points.length-4;f++){var k=this._note._points[f];var h=this._note._times[f];var a=this.drawBSplineNote(c,this._note._points,f,l);if(m==null){m=a}else{m=m.union(a)}if(d!=-1&&h>d){break}}var j=this.calcThickness(parseFloat(this._note._thickness),l);var e=this._note._color;m=m.inflate(j);c.lineCap="round";c.lineJoin="round";c.lineWidth=j;c.strokeStyle=e;c.stroke();if(f==this._note._points.length-4){this._drawingCompleted=true}return m},drawBSplineNote:function(d,b,o,q){var p;if(skinManager.isMobile()){p=NoteMouseCurve.MOBILE_CURVE_SEGMENTS}else{p=NoteMouseCurve.DESKTOP_CURVE_SEGMENTS}var f,e,c,a;for(var l=0;l<=p;l++){var n={x:0,y:0};for(var h=0;h<4;h++){var g=this.calcBSplineConstant(h,l/(p*1));n.x+=g*b[h+o].x;n.y+=g*b[h+o].y}var m=this.getDisplayPoint(n,q);d.lineTo(m.x,m.y);if(l==0||f>m.x){f=m.x}if(l==0||c<m.x){c=m.x}if(l==0||e>m.y){e=m.y}if(l==0||a<m.y){a=m.y}}return new Rect(f,e,c,a)},calcBSplineConstant:function(b,a){switch(b){case 0:return(((-1*a+3)*a-3)*a+1)/6;case 1:return(((3*a-6)*a)*a+4)/6;case 2:return(((-3*a+3)*a+3)*a+1)/6;case 3:return a*a*a/6}return 0}},{DESKTOP_CURVE_SEGMENTS:8,MOBILE_CURVE_SEGMENTS:2});var NoteLine=BaseNote.extend({constructor:function(a){this.base(a)},draw:function(h,f,a){f.beginPath();var g=this.getDisplayPoint({x:this._note._x1,y:this._note._y1},a);var e=this.getDisplayPoint({x:this._note._x2,y:this._note._y2},a);f.moveTo(g.x,g.y);f.lineTo(e.x,e.y);var d=this.calcThickness(parseFloat(this._note._thickness),a);var c=this._note._color;var b=new Rect(g.x<e.x?g.x:e.x,g.y<e.y?g.y:e.y,g.x>e.x?g.x:e.x,g.y>e.y?g.y:e.y);b=b.inflate(d);f.lineCap="round";f.lineJoin="round";f.lineWidth=d;f.strokeStyle=c;f.stroke();this._drawingCompleted=true;return b}});var NoteRectangle=BaseNote.extend({constructor:function(a){this.base(a)},draw:function(h,f,a){f.beginPath();var g=this.getDisplayPoint({x:this._note._x1,y:this._note._y1},a);var e=this.getDisplayPoint({x:this._note._x2,y:this._note._y2},a);var d=this.calcThickness(parseFloat(this._note._thickness),a);var c=this._note._color;if(this._note._isFill){f.fillStyle=c;f.fillRect(g.x,g.y,e.x-g.x,e.y-g.y)}else{f.rect(g.x,g.y,e.x-g.x,e.y-g.y);f.lineCap="round";f.lineJoin="round";f.lineWidth=d;f.strokeStyle=c;f.stroke()}var b=new Rect(g.x,g.y,e.x,e.y);b=b.inflate(d);this._drawingCompleted=true;return b}});var VisualComponent=Base.extend({_eventTarget:null,load:function(a,b,d,c){},unload:function(){},resize:function(){},setData:function(){},addEventListener:function(a){this._eventTarget=a},loadHtml:function(c,d,g,a,f){var e=new URITemplate(d+"/{skinTargetDevice}/common/{filename}");var b=e.expand({skinTargetDevice:g,filename:a});$(c).load(URI.decode(b),function(){if(f){f()}})},loadCss:function(d,j,a,l){var g=new URITemplate(d+"/{skinTargetDevice}/{target}/{filename}?version={version}");var h=g.expand({skinTargetDevice:j,target:"common",filename:a,version:version});var b=g.expand({skinTargetDevice:j,target:"custom",filename:a,version:version});var k=document.styleSheets;var f=decodeURIComponent(h);for(var c=0,e=k.length;c<e;c++){if(k[c].href==f){if(l){l()}return}}head.load(URI.decode(h),function(){if(Util.checkUrlExists(URI.decode(b))){head.load(URI.decode(b),function(){if(l){l()}})}else{if(l){l()}}})},attachClickEvent:function(b,a,c){if(skinManager.isMobile()){$(b).bind("touchstart",function(d){$(b).addClass("mobile-touch-over");if(false==uniPlayerConfig.getUniPlayerSettingsData().useAndroidHtml5DefaultControls&&!c){d.preventDefault()}});$(b).bind("touchend",function(d){$(b).removeClass("mobile-touch-over");if(a){a.call(this,d)}})}else{$(b).bind("click",a)}},detachClickEvent:function(b,a){if(skinManager.isMobile()){$(b).unbind("touchstart");$(b).unbind("touchend")}else{$(b).unbind("click",a)}},attachDownEvent:function(b,a){if(skinManager.isMobile()){$(b).bind("touchstart",a)}else{$(b).bind("mousedown",a)}},detachDownEvent:function(b,a){if(skinManager.isMobile()){$(b).unbind("touchstart",a)}else{$(b).unbind("mousedown",a)}},attachMoveEvent:function(b,a){if(skinManager.isMobile()){$(b).bind("touchmove",a)}else{$(b).bind("mousemove",a)}},attachEndEvent:function(b,a){if(skinManager.isMobile()){$(b).bind("touchend",a)}else{$(b).bind("mouseup",a)}},detachMoveEvent:function(b,a){if(skinManager.isMobile()){$(b).unbind("touchmove",a)}else{$(b).unbind("mousemove",a)}},detachEndEvent:function(b,a){if(skinManager.isMobile()){$(b).unbind("touchend",a)}else{$(b).unbind("mouseup",a)}},attachChangeEvent:function(b,a){$(b).bind("change",a)},detachChangeEvent:function(b,a){$(b).unbind("change",a)}});var VCUniPlayerLayoutMedia=VisualComponent.extend({_cssLoaded:false,_htmlLoaded:false,_isMobileIntroShowing:false,_isPlayBtnShown:false,_isRestartBtnShown:false,load:function(b,c,e,d){var a=this;this.loadCss(c,e,VCUniPlayerLayoutMedia.UNI_PLAYER_SKIN_CSS,function(){a._cssLoaded=true;a.onLoaded(d)});this.loadHtml(b,c,e,VCUniPlayerLayoutMedia.UNI_PLAYER_SKIN_HTML,function(){a._htmlLoaded=true;a.onLoaded(d)})},onLoaded:function(a){if(this._cssLoaded&&this._htmlLoaded){this.attachEvents();this.applyLanguage();a()}},attachEvents:function(){this.attachClickEvent(VCUniPlayerLayoutMedia.PLAYER_RESTART_BTN_CLASS,this.onPlayerRestartBtnClicked);this.attachClickEvent(VCUniPlayerLayoutMedia.PLAYER_PLAY_BTN_CLASS,this.onPlayerPlayBtnClicked)},applyLanguage:function(){var a=localizeManager.getStringResource();var b=a.Skin.TOC;$(VCChapterVerticalMedia.TOC_ITEM_NAME_CLASS).text(b);$(VCUniPlayerLayoutMedia.PLAYER_RESTART_BTN_CLASS).prop("title",a.ButtonTitle.REPLAY);var c=a.Skin.MEDIA_SCRIPT;$(VCMediaScript.HEADER_TITLE_CLASS).text(c)},resize:function(c){var h=$(LayoutIdTable.UNI_PLAYER);var f=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER);var d=$(LayoutIdTable.CHAPTER_VERTICAL);var g=$(LayoutIdTable.MEDIA_SCRIPT);var b=c==UniPlayerApp.VIEW_MODE_MODULE?$(uniPlayer.getTargetElement()).innerWidth():$(window).innerWidth();var a=c==UniPlayerApp.VIEW_MODE_MODULE?$(uniPlayer.getTargetElement()).innerHeight():$(window).innerHeight();if(uniPlayerConfig.getIsFitToElement()){b=$(uniPlayer.getTargetElement()).innerWidth();a=$(uniPlayer.getTargetElement()).innerHeight()}h.css("width","{0}px".format(b));h.css("height","{0}px".format(a));var e;if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()||bcChapterVertical.isChapterLayer()||b<bcChapterVertical.getPushChapterMinWidth()){e=b}else{e=b-d.width()}if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){e=e-g.width()}this.resizePlayer(e);this.resizeCenterControl(e);this.resizeLoadingIndicator(e,a)},setBgImg:function(a){var b=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER);b.css("background-image","url('"+a+"')")},showLoadingState:function(){if(skinManager.isDesktop()){$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).show()}else{$(LayoutIdTable.PLAYER_MASK).css("display","table")}},hideLoadingState:function(){if(skinManager.isDesktop()){$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).hide()}else{$(LayoutIdTable.PLAYER_MASK).hide()}},showSwapLoadingState:function(){if(skinManager.isDesktop()){$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).show()}else{$(LayoutIdTable.PLAYER_MASK_SWAPPING).css("display","table")}},hideSwapLoadingState:function(){if(skinManager.isDesktop()){$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).hide()}else{$(LayoutIdTable.PLAYER_MASK_SWAPPING).hide()}},showRestartBtn:function(){this._isRestartBtnShown=true;if(skinManager.isIE7()){$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("display","block")}else{$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("display","table")}$(VCUniPlayerLayoutMedia.PLAYER_RESTART_BTN_CLASS).css("display","inline-block")},hideRestartBtn:function(){this._isRestartBtnShown=false;$(LayoutIdTable.PLAYER_CENTER_CONTROL).hide();$(VCUniPlayerLayoutMedia.PLAYER_RESTART_BTN_CLASS).hide()},showPlayBtn:function(){this._isPlayBtnShown=true;$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("display","table");$(VCUniPlayerLayoutMedia.PLAYER_PLAY_BTN_CLASS).css("display","inline-block")},hidePlayBtn:function(){this._isPlayBtnShown=false;$(LayoutIdTable.PLAYER_CENTER_CONTROL).hide();$(VCUniPlayerLayoutMedia.PLAYER_PLAY_BTN_CLASS).hide()},setPlayBtnVisibile:function(){$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("visibility","visible")},setPlayBtnInvisible:function(){$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("visibility","hidden")},showErrorMessage:function(a){$(LayoutIdTable.ERROR_MESSAGE_BOX).css("display","table");$(VCUniPlayerLayoutMedia.ERROR_MESSAGE_CLASS).html(a)},hideErrorMessage:function(){$(LayoutIdTable.ERROR_MESSAGE_BOX).hide()},showImageIntro:function(a){if(a==null){return}this._isMobileIntroShowing=true;var b='url("'+a+'")';$(VCUniPlayerLayoutMedia.IMAGE_INTRO_WRAPPER_CLASS).css("background-image",b);$(LayoutIdTable.IMAGE_INTRO).show()},hideImageIntro:function(){this._isMobileIntroShowing=false;$(LayoutIdTable.IMAGE_INTRO).hide()},hidePlayer:function(){$(LayoutIdTable.UNI_PLAYER).hide()},showPlayerErrorMessage:function(a,b){$(a).append('<div id="player-error"><div class="player-error-wrapper">'+b+"</div></div>")},warnDuplicateContents:function(){var a=localizeManager.getStringResource();$(".warn-duplicate-contents-msg-text").html(a.WarnDuplicateContents);if(skinManager.isIE7()){$(VCUniPlayerLayoutMedia.WARN_DUPLICATE_CONTENTS_MSG).css("display","block")}else{$(VCUniPlayerLayoutMedia.WARN_DUPLICATE_CONTENTS_MSG).css("display","table")}},onPlayerRestartBtnClicked:function(b){var a=uniPlayer.getVCUniPlayerLayout();a._eventTarget.fire(VCUniPlayerLayoutEvent.PLAYER_RESTART)},onPlayerPlayBtnClicked:function(b){var a=uniPlayer.getVCUniPlayerLayout();a._eventTarget.fire(VCUniPlayerLayoutEvent.PLAYER_PLAY)},resizePlayer:function(a){var b=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER);b.css("width","{0}px".format(a))},resizeCenterControl:function(a){$(LayoutIdTable.PLAYER_CENTER_CONTROL).css("width","{0}px".format(a))},resizeLoadingIndicator:function(c,f){var b=$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).width();var a=$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).height();if(Util.isIE11embedFullScreen()){b=VCUniPlayerLayoutMedia.LOADING_INDICATOR_SIZE;a=VCUniPlayerLayoutMedia.LOADING_INDICATOR_SIZE}var e=c/2-b/2;var d=f/2-a/2;$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).css("left",e.toString()+"px");$(LayoutIdTable.DESKTOP_LOADING_INDICATOR).css("top",d.toString()+"px")},isMobileIntroShowing:function(){return this._isMobileIntroShowing},isPlayBtnShown:function(){return this._isPlayBtnShown},isRestartBtnShown:function(){return this._isRestartBtnShown},showConfirmDialog:function(f,a,e,g,b){$(VCUniPlayerLayoutMedia.CONFIRM_MSG_TEXT_CLASS).html(f.replace("\n","<br>"));var h=localizeManager.getStringResource();if(a){$(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS).text(a)}else{$(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS).text(h.ButtonTitle.OK)}if(e){$(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS).text(e)}else{$(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS).text(h.ButtonTitle.CANCEL)}$(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS).show();var i=this;var c=function(){i.detachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS,c);i.detachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS,d);i.hideConfirmDialog();if(g){g()}};var d=function(){i.detachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS,c);i.detachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS,d);i.hideConfirmDialog();if(b){b()}};this.attachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS,c);this.attachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS,d);if(skinManager.isIE7()){$(LayoutIdTable.CONFIRM_DIALOG).css("display","block")}else{$(LayoutIdTable.CONFIRM_DIALOG).css("display","table")}},hideConfirmDialog:function(){$(LayoutIdTable.CONFIRM_DIALOG).hide()},showAlertDialog:function(e,d,b){$(VCUniPlayerLayoutMedia.CONFIRM_MSG_TEXT_CLASS).html(e.replace("\n","<br>"));var a=localizeManager.getStringResource();if(d){$(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS).text(d)}else{$(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS).text(a.ButtonTitle.OK)}$(VCUniPlayerLayoutMedia.CONFIRM_CANCEL_BTN_CLASS).hide();var c=this;var f=function(){c.detachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS,f);c.hideAlertDialog();if(b){b()}};this.attachClickEvent(VCUniPlayerLayoutMedia.CONFIRM_OK_BTN_CLASS,f);if(skinManager.isIE7()){$(LayoutIdTable.CONFIRM_DIALOG).css("display","block")}else{$(LayoutIdTable.CONFIRM_DIALOG).css("display","table")}},hideAlertDialog:function(){$(LayoutIdTable.CONFIRM_DIALOG).hide()}},{UNI_PLAYER_SKIN_HTML:"uni-player-skin.html",UNI_PLAYER_SKIN_CSS:"uni-player-skin.css",LOADING_INDICATOR_SIZE:50,PLAYER_RESTART_BTN_CLASS:".player-restart-btn",PLAYER_PLAY_BTN_CLASS:".player-play-btn",ERROR_MESSAGE_CLASS:".error-msg",IMAGE_INTRO_WRAPPER_CLASS:".image-intro-wrapper",WARN_DUPLICATE_CONTENTS_MSG:"#warn-duplicate-contents-msg",CONFIRM_MSG_TEXT_CLASS:".confirm-msg-text",CONFIRM_OK_BTN_CLASS:".confirm-ok-btn",CONFIRM_CANCEL_BTN_CLASS:".confirm-cancel-btn",});var VCUniPlayerLayoutDoc=VisualComponent.extend({_isDocLoadingProgressShowing:false,load:function(b,c,e,d){var a=this;this.loadCss(c,e,VCUniPlayerLayoutDoc.UNI_PLAYER_SKIN_CSS,function(){a._cssLoaded=true;a.onLoaded(d)});this.loadHtml(b,c,e,VCUniPlayerLayoutDoc.UNI_PLAYER_SKIN_HTML,function(){a._htmlLoaded=true;a.onLoaded(d)})},onLoaded:function(a){if(this._cssLoaded&&this._htmlLoaded){this.applyLanguage();a();this.initialize();this.resize()}},initialize:function(){this.attachDownEvent(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER,this.onContentPlayerTouched)},applyLanguage:function(){var a=localizeManager.getStringResource();var b=a.Skin.TOC;var a=localizeManager.getStringResource();var b=a.Skin.TOC;$(VCChapterVerticalDoc.TOC_ITEM_NAME_CLASS).text(b)},showDocLoadingProgress:function(){$(VCUniPlayerLayoutDoc.DOC_LOADING_BAR).show();this._isDocLoadingProgressShowing=true},hideDocLoadingProgress:function(){$(VCUniPlayerLayoutDoc.DOC_LOADING_BAR).hide();this._isDocLoadingProgressShowing=false},isDocLoadingProgressShowing:function(){return this._isDocLoadingProgressShowing},setDocLoadingProgress:function(a){var b=(a*100).toFixed(2);$(VCUniPlayerLayoutDoc.DOC_LOADING_PROGRESS).css("width","{0}%".format(b))},resize:function(){var i=$(LayoutIdTable.UNI_PLAYER);var d=$(window).innerWidth();var b=$(window).innerHeight();if(skinManager.isIPhoneOrIPod()){d-=3}i.css("width","{0}px".format(d));i.css("height","{0}px".format(b));var a;var g,c;if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()){a=$(window).width()}else{var h=$(LayoutIdTable.CHAPTER_VERTICAL);a=$(window).width()-h.width()}var f=uniPlayer.getDocPlayer().getLayoutMode();switch(f){case DocLayoutMode.TWO_PAGE_BOOK:c=$(VCPlayControllerDoc.MAIN_CONTROLLER_CLASS).height();g=$(window).innerHeight()-c;break;default:c=0;g=$(window).innerHeight();break}var e=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER);e.css("width","{0}px".format(a));e.css("height","{0}px".format(g));e.css("top","{0}px".format(c))},onContentPlayerTouched:function(){var a=uniPlayer.getVCUniPlayerLayout();if(a._eventTarget){a._eventTarget.fire(VCUniPlayerDocLayoutEvent.PLAYER_TOUCHED)}}},{DOC_BOOKMODE_CONTROLLER:".vc-pctrl-ebook-controller",DOC_LOADING_BAR:".doc-loading-bar",DOC_LOADING_PROGRESS:".doc-loading-progress",UNI_PLAYER_SKIN_HTML:"uni-player-doc-skin.html",UNI_PLAYER_SKIN_CSS:"uni-player-doc-skin.css"});var VCUniPlayerLayoutEvent={PLAYER_RESTART:"restart",PLAYER_PLAY:"play"};var VCUniPlayerDocLayoutEvent={PLAYER_TOUCHED:"vc_layout_doc_player_touched"};var VCContentMetadata=VisualComponent.extend({_contentMetadata:null,_isChapterShown:false,_isMouseOver:false,_showBtnCount:0,setData:function(a){this._contentMetadata=a},initialize:function(){this.initControls();this.attachEvents()},initControls:function(){if(this._contentMetadata==null){return}this.initButtonTitles();var a=uniPlayerConfig.getContentPlayingInfoData().contentDuration;$(VCContentMetadata.METADATA_INFO_DURATION).text(Util.secToTimerString(a));$(VCContentMetadata.METADATA_INFO_AUTHOR_NAME).text(this._contentMetadata.authorName);var b=$("<div/>").html(this._contentMetadata.summary).text();$(VCContentMetadata.METADATA_INFO_SUMMARY_TEXT).text(b)},initButtonTitles:function(){var b=$("<div/>").html(this._contentMetadata.title).text();$(VCContentMetadata.TITLE_TEXT).text(b);$(VCContentMetadata.TITLE_TEXT).attr("title",b);$(VCContentMetadata.METADATA_INFO_TITLE_TEXT).text(b);$(VCContentMetadata.METADATA_INFO_TITLE_TEXT).attr("title",b);var a=localizeManager.getStringResource();$(VCContentMetadata.CHAPTER_BTN).attr("title",a.ButtonTitle.CHAPTER);$(VCContentMetadata.INFO_BTN).attr("title",a.ButtonTitle.INFO);$(VCContentMetadata.SHARE_BTN).attr("title",a.ButtonTitle.SHARE)},attachEvents:function(){this.attachClickEvent(VCContentMetadata.CHAPTER_BTN,this.onChapterBtnClicked);this.attachClickEvent(VCContentMetadata.SHARE_BTN,this.onShareBtnClicked);this.attachClickEvent(VCContentMetadata.INFO_BTN,this.onInfoBtnClicked);this.attachClickEvent(VCContentMetadata.METADATA_INFO_CLOSE_BTN,this.onInfoCloseBtnClicked);if(!skinManager.isMobile()){$(LayoutIdTable.CONTENT_METADATA).bind("mouseover",this.onMouseOver);$(LayoutIdTable.CONTENT_METADATA).bind("mouseleave",this.onMouseLeave)}},resize:function(){var g=bcContentMetadata.getVCContentMetadata();var c;var d=$(LayoutIdTable.CHAPTER_VERTICAL);var b=$(window).width();if(uniPlayerConfig.getIsFitToElement()){b=$(uniPlayer.getTargetElement()).innerWidth()}if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()||bcChapterVertical.isChapterLayer()||b<bcChapterVertical.getPushChapterMinWidth()){c=b}else{c=b-d.width()}var h=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){c=c-h.width()}var a=$(LayoutIdTable.CONTENT_METADATA);a.css("width","{0}px".format(c));var f=skinManager.isMobile()?VCContentMetadata.MOBILE_BTN_WIDTH:VCContentMetadata.DESKTOP_BTN_WIDTH;var e=VCContentMetadata.TEXT_RIGHT_MARGIN+this._showBtnCount*f;$(VCContentMetadata.TITLE).width(c-e)},showContentMetadata:function(){$(LayoutIdTable.CONTENT_METADATA).show()},hideContentMetadata:function(){$(LayoutIdTable.CONTENT_METADATA).hide()},showContentMetadataInfo:function(){if(skinManager.isIE7()){$(LayoutIdTable.CONTENT_METADATA_INFO).css("display","block")}else{$(LayoutIdTable.CONTENT_METADATA_INFO).css("display","table")}},hideContentMetadataInfo:function(){$(LayoutIdTable.CONTENT_METADATA_INFO).hide()},setShowBtnCount:function(a){this._showBtnCount=a},onChapterBtnClicked:function(b){var a=bcContentMetadata.getVCContentMetadata();if(a._isChapterShown){a.onHideChapterBtnClicked();a.changeChapterBtnState(false)}else{a.onShowChapterBtnClicked();a.changeChapterBtnState(true)}},changeChapterBtnState:function(a){var b=bcContentMetadata.getVCContentMetadata();if(a){$(VCContentMetadata.CHAPTER_BTN).addClass("selected")}else{$(VCContentMetadata.CHAPTER_BTN).removeClass("selected")}b._isChapterShown=a},onShowChapterBtnClicked:function(){this._eventTarget.fire(VCContentMetadataEvent.SHOW_CHAPTER_VERTICAL)},onHideChapterBtnClicked:function(){this._eventTarget.fire(VCContentMetadataEvent.HIDE_CHAPTER_VERTICAL)},onInfoBtnClicked:function(b){var a=bcContentMetadata.getVCContentMetadata();a._eventTarget.fire(VCContentMetadataEvent.SHOW_INFO)},onShareBtnClicked:function(b){var a=bcContentMetadata.getVCContentMetadata();a._eventTarget.fire(VCContentMetadataEvent.SHARE)},onInfoCloseBtnClicked:function(b){var a=bcContentMetadata.getVCContentMetadata();a.hideContentMetadataInfo()},onMouseOver:function(b){var a=bcContentMetadata.getVCContentMetadata();a._isMouseOver=true;bcContentMetadata.showContentMetadata()},onMouseLeave:function(b){var a=bcContentMetadata.getVCContentMetadata();a._isMouseOver=false},showCommonsRelatedButtons:function(){var a=uniPlayerConfig.getUniPlayerSettingsData();if(a.useShare&&typeof xn_content_share!="undefined"){this.showShareBtn()}if(a.useContentInfo){this.showInfoBtn()}},hideCommonsRelatedButtons:function(){this.hideShareBtn();this.hideInfoBtn()},showChapterBtn:function(){$(VCContentMetadata.CHAPTER_BTN).show()},hideChapterBtn:function(){$(VCContentMetadata.CHAPTER_BTN).hide()},showShareBtn:function(){$(VCContentMetadata.SHARE_BTN).show()},hideShareBtn:function(){$(VCContentMetadata.SHARE_BTN).hide()},showInfoBtn:function(){$(VCContentMetadata.INFO_BTN).show()},hideInfoBtn:function(){$(VCContentMetadata.INFO_BTN).hide()},isMouseOver:function(){return this._isMouseOver}},{TEXT_RIGHT_MARGIN:10,DESKTOP_BTN_WIDTH:30,MOBILE_BTN_WIDTH:38,METADATA_CONTAINER:".vc-content-meta-container",TITLE:".vc-content-meta-title",TITLE_TEXT:".vc-content-meta-title-text",CHAPTER_BTN:".vc-content-meta-chapter-btn",INFO_BTN:".vc-content-meta-info-btn",SHARE_BTN:".vc-content-meta-share-btn",METADATA_INFO_CLOSE_BTN:".vc-content-meta-info-btn-close",METADATA_INFO_TITLE_TEXT:".vc-content-meta-info-title",METADATA_INFO_DURATION:".vc-content-meta-info-duration",METADATA_INFO_AUTHOR_NAME:".vc-content-meta-info-author-name",METADATA_INFO_SUMMARY_TEXT:".vc-content-meta-info-summary"});var VCContentMetadataEvent={SHOW_CHAPTER_VERTICAL:"show_chapter_vertical",HIDE_CHAPTER_VERTICAL:"hide_chapter_vertical",SHOW_INFO:"show_info",SHARE:"share"};var VCFrontScreen=VisualComponent.extend({_thumbnailImageWidth:0,_thumbnailImageHeight:0,_thumbnailImageRatio:0,initialize:function(){this.attachEvents();this.initButtonTitles()},initButtonTitles:function(){var a=localizeManager.getStringResource();$(VCFrontScreen.PLAY_BTN_CLASS).prop("title",a.ButtonTitle.PLAY);$(VCFrontScreen.MIXED_BTN_CLASS).prop("title",a.ButtonTitle.PLAY_MIXED);$(VCFrontScreen.MULTI_BTN_CLASS).prop("title",a.ButtonTitle.PLAY_MULTI)},loadThumbnail:function(a){if(a!=null){var b=bcFrontScreen.getVCFrontScreen();$(VCFrontScreen.START_THUMBNAIL).on("load",function(){b.calculateThumbnailRatioAndResize(this)});$(VCFrontScreen.START_THUMBNAIL).attr("src",a)}},calculateThumbnailRatioAndResize:function(a){var b=bcFrontScreen.getVCFrontScreen();b._thumbnailImageWidth=$(a).width();b._thumbnailImageHeight=$(a).height();b._thumbnailImageRatio=b._thumbnailImageWidth/b._thumbnailImageHeight;if(b._thumbnailImageRatio){b.resize()}else{setTimeout(function(){b.calculateThumbnailRatioAndResize(VCFrontScreen.START_THUMBNAIL)},100)}},attachEvents:function(){this.attachClickEvent(VCFrontScreen.PLAY_BTN_CLASS,this.onPlayBtnClicked);this.attachClickEvent(VCFrontScreen.CAMERA_BTN_CLASS,this.onCameraBtnClicked);this.attachClickEvent(VCFrontScreen.SCREEN_BTN_CLASS,this.onScreenBtnClicked);this.attachClickEvent(VCFrontScreen.FIRST_BTN_CLASS,this.onCameraBtnClicked);this.attachClickEvent(VCFrontScreen.SECOND_BTN_CLASS,this.onScreenBtnClicked);this.attachClickEvent(VCFrontScreen.THIRD_BTN_CLASS,this.onExtraBtnClicked);this.attachClickEvent(VCFrontScreen.FOURTH_BTN_CLASS,this.onExtra2BtnClicked);this.attachClickEvent(VCFrontScreen.VIDEO_BTN_CLASS,this.onVideoBtnClicked);this.attachClickEvent(VCFrontScreen.SLIDE_BTN_CLASS,this.onSlideBtnClicked);this.attachClickEvent(VCFrontScreen.MIXED_BTN_CLASS,this.onMixedBtnClicked);this.attachClickEvent(VCFrontScreen.MULTI_BTN_CLASS,this.onMultiBtnClicked)},resize:function(g){var b=bcFrontScreen.getVCFrontScreen();if(!b._thumbnailImageRatio){return}var d=uniPlayerConfig.getIsFitToElement()?$(uniPlayer.getTargetElement()).innerWidth():$(window).outerWidth();var h=uniPlayerConfig.getIsFitToElement()?$(uniPlayer.getTargetElement()).innerHeight():$(window).outerHeight();h=h-b.getStartThumbnailOffSetTop()-b.getStartThumbnailOffSetBottom();var c=d/h;$(VCFrontScreen.START_THUMBNAIL_CONTAINER).css("top",b.getStartThumbnailOffSetTop());$(VCFrontScreen.START_THUMBNAIL_CONTAINER).width(d);$(VCFrontScreen.START_THUMBNAIL_CONTAINER).height(h);if(b._thumbnailImageRatio<c){var f=d/b._thumbnailImageRatio;$(VCFrontScreen.START_THUMBNAIL).css("margin-top",-(f-h)/2);$(VCFrontScreen.START_THUMBNAIL).css("margin-left",0);$(VCFrontScreen.START_THUMBNAIL).width(d);$(VCFrontScreen.START_THUMBNAIL).height(f)}else{var a=h*b._thumbnailImageRatio;$(VCFrontScreen.START_THUMBNAIL).css("margin-top",0);$(VCFrontScreen.START_THUMBNAIL).css("margin-left",-(a-d)/2);$(VCFrontScreen.START_THUMBNAIL).width(a);$(VCFrontScreen.START_THUMBNAIL).height(h)}},getStartThumbnailOffSetTop:function(){if(skinManager.isMobile()){return VCFrontScreen.START_THUMBNAIL_OFFSET_TOP_MOBILE}else{return VCFrontScreen.START_THUMBNAIL_OFFSET_TOP_DESKTOP}},getStartThumbnailOffSetBottom:function(){if(skinManager.isMobile()){return VCFrontScreen.START_THUMBNAIL_OFFSET_BOTTOM_MOBILE}else{return VCFrontScreen.START_THUMBNAIL_OFFSET_BOTTOM_DESKTOP}},showVideo1Btn:function(){if(skinManager.isMobile()){$(VCFrontScreen.VIDEO1_BTN_CLASS).css("display","table")}else{if(skinManager.isIE7()){$(VCFrontScreen.VIDEO1_BTN_CLASS).show()}else{$(VCFrontScreen.VIDEO1_BTN_CLASS).css("display","table-cell")}}},showVideo2Btn:function(a){if(a){$(VCFrontScreen.CAMERA_BTN_CLASS).addClass("mixed")}$(VCFrontScreen.VIDEO2_BTN_CLASS).css("display","table")},showVideo3Btn:function(a){if(a){$(VCFrontScreen.THIRD_BTN_CLASS).addClass("mixed")}$(VCFrontScreen.VIDEO3_BTN_CLASS).css("display","table")},showVideo4Btn:function(a){if(a){$(VCFrontScreen.FOURTH_BTN_CLASS).addClass("mixed")}$(VCFrontScreen.VIDEO4_BTN_CLASS).show()},showMixedVideoBtn:function(){if(skinManager.isIE7()){$(VCFrontScreen.MIXED_VIDEO_BTN_CLASS).show()}else{$(VCFrontScreen.MIXED_VIDEO_BTN_CLASS).css("display","table-cell")}},showSyncAudioBtn:function(){$(VCFrontScreen.SYNC_AUDIO_CLASS).css("display","table")},showSyncVideoBtn:function(){$(VCFrontScreen.SYNC_VIDEO_CLASS).css("display","table")},attachAudioHLSLink:function(a){$(VCFrontScreen.PLAY_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri)},attachVideo1HLSLink:function(a){$(VCFrontScreen.PLAY_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri)},attachVideo2HLSLink:function(a){$(VCFrontScreen.SCREEN_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri);$(VCFrontScreen.CAMERA_A_TAG_CLASS).attr("href",a.getCurrentSubMedia().mobileMediaUri)},attachVideo3HLSLink:function(a){$(VCFrontScreen.FIRST_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri);$(VCFrontScreen.SECOND_A_TAG_CLASS).attr("href",a.getCurrentSubMedia().mobileMediaUri);$(VCFrontScreen.THIRD_A_TAG_CLASS).attr("href",a.getCurrentExtraMedia(0).mobileMediaUri);if(a.extraMedias.length>1){$(VCFrontScreen.FOURTH_A_TAG_CLASS).attr("href",a.getCurrentExtraMedia(1).mobileMediaUri)}},attachSyncAudioHLSLink:function(a){$(VCFrontScreen.PLAY_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri)},attachSyncVideoHLSLink:function(a){$(VCFrontScreen.VIDEO_A_TAG_CLASS).attr("href",a.getCurrentMainMedia().mobileMediaUri)},onPlayBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_SELECTED)},onCameraBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,VideoType.MAIN_MEDIA)},onScreenBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,VideoType.SUB_MEDIA)},onExtraBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,VideoType.EXTRA_MEDIA)},onExtra2BtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,VideoType.EXTRA_MEDIA2)},onVideoBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,SyncVideoMobilePlayMode.VIDEO)},onSlideBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_OPTION_SELECTED,SyncVideoMobilePlayMode.SLIDE)},onMixedBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_MIXED_SELECTED)},onMultiBtnClicked:function(b){var a=bcFrontScreen.getVCFrontScreen();a._eventTarget.fire(VCFrontScreenEvent.PLAY_SELECTED)}},{START_THUMBNAIL:".vc-front-screen-thumbnail",START_THUMBNAIL_CONTAINER:".vc-front-screen-thumbnail-container",START_THUMBNAIL_OFFSET_TOP_MOBILE:0,START_THUMBNAIL_OFFSET_BOTTOM_MOBILE:0,START_THUMBNAIL_OFFSET_TOP_DESKTOP:0,START_THUMBNAIL_OFFSET_BOTTOM_DESKTOP:0,VIDEO1_BTN_CLASS:".video1-btn",VIDEO2_BTN_CLASS:".video2-btn",VIDEO3_BTN_CLASS:".video3-btn",VIDEO4_BTN_CLASS:".video4-btn",MIXED_VIDEO_BTN_CLASS:".mixed-video-btn",SYNC_AUDIO_CLASS:".syncaudio-btn",SYNC_VIDEO_CLASS:".syncvideo-btn",PLAY_BTN_CLASS:".vc-front-screen-play-btn",CAMERA_BTN_CLASS:".vc-front-screen-camera-btn",SCREEN_BTN_CLASS:".vc-front-screen-screen-btn",FIRST_BTN_CLASS:".vc-front-screen-first-btn",SECOND_BTN_CLASS:".vc-front-screen-second-btn",THIRD_BTN_CLASS:".vc-front-screen-third-btn",FOURTH_BTN_CLASS:".vc-front-screen-fourth-btn",VIDEO_BTN_CLASS:".vc-front-screen-video-btn",SLIDE_BTN_CLASS:".vc-front-screen-slide-btn",MIXED_BTN_CLASS:".vc-front-mixed-play-btn",MULTI_BTN_CLASS:".vc-front-multi-play-btn",PLAY_A_TAG_CLASS:".vc-front-screen-play-a-tag",CAMERA_A_TAG_CLASS:".vc-front-screen-camera-a-tag",SCREEN_A_TAG_CLASS:".vc-front-screen-screen-a-tag",FIRST_A_TAG_CLASS:".vc-front-screen-first-a-tag",SECOND_A_TAG_CLASS:".vc-front-screen-second-a-tag",THIRD_A_TAG_CLASS:".vc-front-screen-third-a-tag",FOURTH_A_TAG_CLASS:".vc-front-screen-fourth-a-tag",VIDEO_A_TAG_CLASS:".vc-front-screen-video-a-tag",SLIDE_A_TAG_CLASS:".vc-front-screen-slide-a-tag"});var VCFrontScreenEvent={PLAY_SELECTED:"vc-front-screen-play-selected",PLAY_OPTION_SELECTED:"vc-front-screen-play-option-selected",PLAY_MIXED_SELECTED:"vc-front-screen-play-mixed-selected"};var VCPlayControllerDoc=VisualComponent.extend({_isChapterOn:false,_isFullScreenOn:false,_isToolShowing:true,_hammerManager:null,_pinchStartScale:0,_pinchCurrentScale:0,_pinchTimer:null,_pinchUpdateEnable:false,load:function(a){this.initControls(a);this.initEvents();this.resize()},resize:function(){if(skinManager.isDesktop()){this.resizeForDesktop()}else{this.resizeForMobile()}},resizeForDesktop:function(){var f;var g;if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()){f=$(window).width();g=0}else{var k=$(LayoutIdTable.CHAPTER_VERTICAL);f=$(window).width()-k.width();g=k.width()}var e=$(VCPlayControllerDoc.MAIN_CONTROLLER_OVER_LAYER_CLASS);e.css("width","{0}px".format(f));var b=$(VCPlayControllerDoc.TOP_FLOATING_OVER_LAYER_CLASS);b.css("margin-right","{0}px".format(g));var l=$(VCPlayControllerDoc.BOTTOM_FLOATING_OVER_LAYER_CLASS);l.css("margin-right","{0}px".format(g));if(f<=550){$(VCPlayControllerDoc.HIDE_ON_NARROW_WIDTH_CLASS).hide();$(VCPlayControllerDoc.RIGHT_CONTROL_WRAPPER_CLASS).width(160);$(VCPlayControllerDoc.METADATA_TITLE_CLASS).width(f-180)}else{$(VCPlayControllerDoc.HIDE_ON_NARROW_WIDTH_CLASS).show();var d=$(VCPlayControllerDoc.PAGING_CLASS).width();var h=(f-d)/2-15;$(VCPlayControllerDoc.RIGHT_CONTROL_WRAPPER_CLASS).width(h);$(VCPlayControllerDoc.METADATA_TITLE_CLASS).width(h)}var i=uniPlayer.getDocPlayer().getLayoutMode();if(i!=DocLayoutMode.TWO_PAGE_BOOK){var a=$(window).height();if(a<=336){$(VCPlayControllerDoc.TOP_FLOATING_OVER_LAYER_CLASS).hide();$(VCPlayControllerDoc.BOTTOM_FLOATING_OVER_LAYER_CLASS).hide()}else{$(VCPlayControllerDoc.TOP_FLOATING_OVER_LAYER_CLASS).show();$(VCPlayControllerDoc.BOTTOM_FLOATING_OVER_LAYER_CLASS).show()}}if(i==DocLayoutMode.TWO_PAGE_BOOK){$(VCPlayControllerDoc.TOP_FLOATING_OVER_LAYER_CLASS).hide();$(VCPlayControllerDoc.BOTTOM_FLOATING_OVER_LAYER_CLASS).hide();var c=(($(window).innerWidth()-$(".unibook").width())/2)-90;if(c<0){c=0}$(VCPlayControllerDoc.BOOKMODE_PREV_BTN).css("left",c);$(VCPlayControllerDoc.BOOKMODE_NEXT_BTN).css("right",c);var j=$(".unibook").offset().top+$(".unibook").height()+35;$(VCPlayControllerDoc.EBOOK_SLIDER_BAR_CLASS).css("top",j.toString()+"px");$(VCPlayControllerDoc.EBOOK_SLIDER_BAR_CLASS).css("left",c+203);$(VCPlayControllerDoc.EBOOK_SLIDER_BAR_CLASS).css("width",$(".unibook").width()-226);$(".ui-slider-horizontal").css("width",$(VCPlayControllerDoc.EBOOK_SLIDER_BAR_CLASS).width()-80)}},resizeForMobile:function(){var b=$(VCPlayControllerDoc.MAIN_CONTROLLER_CLASS).width();var c=$(VCPlayControllerDoc.CHAPTER_BTN_CLASS).outerWidth(true);var d=$(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS).outerWidth(true);var a=$(VCPlayControllerDoc.DOWNLOAD_BTN_CLASS).outerWidth(true);$(VCPlayControllerDoc.METADATA_TITLE_CLASS).width(b-c-d-a)},initControls:function(a){this.initViewModeSetBox(a)},initViewModeSetBox:function(a){$(VCPlayControllerDoc.VIEW_MODE_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);var b;var c;if(skinManager.isMobile()){switch(a){case DocLayoutMode.ONE_PAGE:c=VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS;break;case DocLayoutMode.ONE_PAGE_SCROLL:c=VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS;break;default:break}}else{switch(a){case DocLayoutMode.ONE_PAGE:b=VCPlayControllerDoc.VIEW_MODE_PAGE1;c=VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS;break;case DocLayoutMode.ONE_PAGE_SCROLL:b=VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1;c=VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS;break;case DocLayoutMode.TWO_PAGE:b=VCPlayControllerDoc.VIEW_MODE_PAGE2;c=VCPlayControllerDoc.VIEW_MODE_PAGE2_BTN_CLASS;break;case DocLayoutMode.TWO_PAGE_SCROLL:b=VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2;c=VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2_BTN_CLASS;break}$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS).addClass(b)}$(c).addClass(VCPlayControllerDoc.SELECTED)},initEvents:function(){this.attachClickEvent(VCPlayControllerDoc.PREV_PAGE_BTN_CLASS,this.onPrevPageBtnClicked);this.attachClickEvent(VCPlayControllerDoc.NEXT_PAGE_BTN_CLASS,this.onNextPageBtnClicked);this.attachClickEvent(VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS,this.onViewModePage1BtnClicked);this.attachClickEvent(VCPlayControllerDoc.VIEW_MODE_PAGE2_BTN_CLASS,this.onViewModePage2BtnClicked);this.attachClickEvent(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS,this.onViewModeScrollPage1BtnClicked);this.attachClickEvent(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2_BTN_CLASS,this.onViewModeScrollPage2BtnClicked);this.attachChangeEvent(VCPlayControllerDoc.SCALE_SELECT_CLASS,this.onScaleChanged);this.attachClickEvent(VCPlayControllerDoc.FIT_TO_PAGE_BTN_CLASS,this.onFitToPageBtnClicked);this.attachClickEvent(VCPlayControllerDoc.FIT_TO_WIDTH_BTN_CLASS,this.onFitToWidthBtnClicked);this.attachClickEvent(VCPlayControllerDoc.ZOOM_IN_BTN_CLASS,this.onZoomInBtnClicked);this.attachClickEvent(VCPlayControllerDoc.ZOOM_OUT_BTN_CLASS,this.onZoomOutBtnClicked);this.attachClickEvent(VCPlayControllerDoc.CHAPTER_BTN_CLASS,this.onChapterBtnClicked);this.attachClickEvent(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS,this.onFullScreenBtnClicked);this.attachClickEvent(VCPlayControllerDoc.DOWNLOAD_BTN_CLASS,this.onDownloadBtnClicked);this.attachClickEvent(VCPlayControllerDoc.EBOOK_BTN_CLASS,this.onEbookBtnClicked);this.attachClickEvent(VCPlayControllerDoc.EBOOK_ZOOM_IN_BTN_CLASS,this.onEbookZoomInBtnClicked);this.attachClickEvent(VCPlayControllerDoc.BOOKMODE_PREV_BTN,this.onPrevPageBtnClicked);this.attachClickEvent(VCPlayControllerDoc.BOOKMODE_NEXT_BTN,this.onNextPageBtnClicked);$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_WRAPPER_CLASS).bind("mouseover",this.onCurrViewModeBtnMouseOver);$(VCPlayControllerDoc.VIEWMODE_SET_BOX_CLASS).bind("mouseleave",this.onViewModeSetBoxMouseLeave);$(VCPlayControllerDoc.OVER_LAYER_CLASS).bind("mouseover",this.onToolsMouseOver);$(VCPlayControllerDoc.OVER_LAYER_CLASS).bind("mouseleave",this.onToolsMouseLeave);this.bindKeyboardEvent()},bindKeyboardEvent:function(){$(document).keydown(this.onKeyDown)},bindPinchScale:function(){var a=document.getElementById("doc-player-container");var b=bcPlayController.getVCPlayController();var c=new Hammer.Manager(a);var d=new Hammer.Pinch();c.add([d]);c.get("pinch").set({enable:false,preventDefault:true});c.on("pinchmove",b.handlePinch);c.on("pinchend",b.pinchEnd);b._hammerManager=c;$(a).bind("touchstart",b.touchStart);$(a).bind("touchend",b.touchEnd)},touchStart:function(d){var a=document.getElementById("doc-player-container");var c=bcPlayController.getVCPlayController();var b=d.originalEvent.touches.length;if(b>1){c.toggleHammerScrolling(true);$(a).bind("touchmove",c.handler);c._pinchStartScale=c._pinchCurrentScale=docPlayer.getCurrRefinedScale();c._pinchUpdateEnable=false;c._pinchTimer=setInterval(function(){c._pinchUpdateEnable=true},200)}},touchEnd:function(d){var a=document.getElementById("doc-player-container");var c=bcPlayController.getVCPlayController();var b=d.originalEvent.touches.length;if(b==0){c.toggleHammerScrolling(false);$(a).unbind("touchmove",c.handler);if(c._pinchTimer!=null){clearInterval(c._pinchTimer);c._pinchTimer=null}}},handler:function(a){a.preventDefault()},toggleHammerScrolling:function(a){var b=bcPlayController.getVCPlayController();b._hammerManager.get("pinch").set({enable:a})},handlePinch:function(b){if(b.pointers.length<2){return}var a=bcPlayController.getVCPlayController();a._pinchCurrentScale=docPlayer.getCurrRefinedScale();var c=a._pinchStartScale*b.scale;if(Math.abs(c-a._pinchCurrentScale)>0.15&&a._pinchUpdateEnable){a._pinchUpdateEnable=false;if(c>2.5){a.scaleChange(250,b.center.x,b.center.y)}else{if(c<uniPlayer._currFitToWidthScaleVal){a.scaleChange(uniPlayer._currFitToWidthScaleVal*100,b.center.x,b.center.y)}else{a.scaleChange(c*100,b.center.x,b.center.y)}}}},pinchEnd:function(c){var b=bcPlayController.getVCPlayController();b._pinchCurrentScale=docPlayer.getCurrRefinedScale();var d=b._pinchStartScale*c.scale;if(d>2.5){d=2.5}else{if(d<uniPlayer._currFitToWidthScaleVal){d=uniPlayer._currFitToWidthScaleVal}}b.scaleSet(d*100,c.center.x,c.center.y);var a=document.getElementById("doc-player-container");b.toggleHammerScrolling(false);$(a).unbind("touchmove",b.handler);if(b._pinchTimer!=null){clearInterval(b._pinchTimer);b._pinchTimer=null}},setIsChapterOn:function(a){this._isChapterOn=a;this.setIsChapterOnUI(a)},setIsChapterOnUI:function(a){if(a){$(VCPlayControllerDoc.CHAPTER_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED)}else{$(VCPlayControllerDoc.CHAPTER_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED)}},isChapterOn:function(){return this._isChapterOn},setIsFullScreenOn:function(a){this._isFullScreenOn=a;this.setIsFullScreenUI(a)},setIsFullScreenUI:function(a){if(a){$(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS).removeClass(VCPlayControllerDoc.ON_NORMAL_SCREEN);$(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS).addClass(VCPlayControllerDoc.ON_FULL_SCREEN)}else{$(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS).removeClass(VCPlayControllerDoc.ON_FULL_SCREEN);$(VCPlayControllerDoc.FULL_SCREEN_BTN_CLASS).addClass(VCPlayControllerDoc.ON_NORMAL_SCREEN)}},setTitle:function(a){$(VCPlayControllerDoc.METADATA_TITLE_TEXT_CLASS).text(a)},setPageText:function(a,b){this.setCurrPageText(a);this.setTotalPageText(b)},setCurrPageText:function(a){$(VCPlayControllerDoc.CURR_PAGE_CLASS).text(a);if($(LayoutIdTable.UNI_PLAYER).hasClass(VCPlayControllerDoc.EBOOK_MODE)){this.setSliderPage(a)}},setTotalPageText:function(a){$(VCPlayControllerDoc.TOTAL_PAGE_CLASS).text(a)},setScaleText:function(e){var d=$(VCPlayControllerDoc.SCALE_SELECT_CLASS);var a=d[0].options;for(var b=0,c=a.length;b<c;b++){if(a[b].value==e){d.val(e);return}}$(VCPlayControllerDoc.CUSTOM_SCALE_OPTION_CLASS).text(e.toFixed(0).toString()+"%");d.val(VCPlayControllerDoc.CUSTOM_SCALE_OPTION_VALUE)},showTools:function(){if(skinManager.isDesktop()){this.showToolsForDesktop()}else{this.showToolsForMobile()}this._isToolShowing=true},hideTools:function(){if(skinManager.isDesktop()){this.hideToolsForDesktop()}else{this.hideToolsForMobile()}this._isToolShowing=false},isToolShowing:function(){return this._isToolShowing},showToolsForDesktop:function(){this.showMainControllerAnimate();this.showDesktopFloatingToolsAnimate()},hideToolsForDesktop:function(){this.hideMainControllerAnimate();this.hideDesktopFloatingToolsAnimate()},showToolsForMobile:function(){this.showMainControllerAnimate();this.showMobileFloatingTools()},hideToolsForMobile:function(){this.hideMainControllerAnimate();this.hideMobileFloatingTools()},showMainControllerAnimate:function(){$(VCPlayControllerDoc.MAIN_CONTROLLER_CLASS).animate({top:"+=50"},VCPlayControllerDoc.DESKTOP_ANIMATION_DURATION)},hideMainControllerAnimate:function(){$(VCPlayControllerDoc.MAIN_CONTROLLER_CLASS).animate({top:"-=50"},VCPlayControllerDoc.DESKTOP_ANIMATION_DURATION)},showDesktopFloatingToolsAnimate:function(){$(VCPlayControllerDoc.FLOATING_CONTROLLER_CLASS).animate({right:"+=80"},VCPlayControllerDoc.DESKTOP_ANIMATION_DURATION)},hideDesktopFloatingToolsAnimate:function(){$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_WRAPPER_CLASS).show();$(VCPlayControllerDoc.VIEWMODE_SET_BOX_CLASS).hide();$(VCPlayControllerDoc.FLOATING_CONTROLLER_CLASS).animate({right:"-=80"},VCPlayControllerDoc.DESKTOP_ANIMATION_DURATION)},showMobileFloatingTools:function(){$(VCPlayControllerDoc.FLOATING_CONTROLLER_CLASS).show()},hideMobileFloatingTools:function(){$(VCPlayControllerDoc.FLOATING_CONTROLLER_CLASS).hide()},showDownloadBtn:function(){$(VCPlayControllerDoc.DOWNLOAD_BTN_CLASS).show()},hideDownloadBtn:function(){$(VCPlayControllerDoc.DOWNLOAD_BTN_CLASS).show()},onKeyDown:function(b){var a=bcPlayController.getVCPlayController();switch(b.which){case KeyCode.LEFT:a.onPrevPageBtnClicked();return false;case KeyCode.RIGHT:a.onNextPageBtnClicked();return false;default:break}},onPrevPageBtnClicked:function(){var a=bcPlayController.getVCPlayController();a._eventTarget.fire(VCPlayControllerDocEvent.PREV_PAGE)},onNextPageBtnClicked:function(){var a=bcPlayController.getVCPlayController();a._eventTarget.fire(VCPlayControllerDocEvent.NEXT_PAGE)},onZoomInBtnClicked:function(){var a=bcPlayController.getVCPlayController();a._eventTarget.fire(VCPlayControllerDocEvent.ZOOM_IN)},onZoomOutBtnClicked:function(){var a=bcPlayController.getVCPlayController();a._eventTarget.fire(VCPlayControllerDocEvent.ZOOM_OUT)},onFitToPageBtnClicked:function(){var a=bcPlayController.getVCPlayController();a.showFitToWidthBtn();a._eventTarget.fire(VCPlayControllerDocEvent.SET_SCALE,DocScaleValue.FIT_TO_SCALE)},onFitToWidthBtnClicked:function(){var a=bcPlayController.getVCPlayController();a.showFitToPageBtn();a._eventTarget.fire(VCPlayControllerDocEvent.SET_SCALE,DocScaleValue.FIT_TO_WIDTH)},onScaleChanged:function(){var a=bcPlayController.getVCPlayController();a.scaleChange(this.value)},scaleChange:function(d,a,e){var b=bcPlayController.getVCPlayController();var c=[d,a,e];b._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_SCALE,c)},scaleSet:function(d,a,e){var b=bcPlayController.getVCPlayController();var c=[d,a,e];b._eventTarget.fire(VCPlayControllerDocEvent.SET_SCALE,c)},onViewModePage1BtnClicked:function(){var a=bcPlayController.getVCPlayController();if(skinManager.isMobile()){$(VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED)}else{$(VCPlayControllerDoc.VIEW_MODE_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED);a.removeAllViewModeUIClass($(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS));$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS).addClass(VCPlayControllerDoc.VIEW_MODE_PAGE1)}a.showFitToWidthBtn();a._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,DocLayoutMode.ONE_PAGE)},onViewModePage2BtnClicked:function(){var a=bcPlayController.getVCPlayController();$(VCPlayControllerDoc.VIEW_MODE_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_PAGE2_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED);a.removeAllViewModeUIClass($(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS));$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS).addClass(VCPlayControllerDoc.VIEW_MODE_PAGE2);a.showFitToWidthBtn();a._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,DocLayoutMode.TWO_PAGE)},onViewModeScrollPage1BtnClicked:function(){var a=bcPlayController.getVCPlayController();if(skinManager.isMobile()){$(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_PAGE1_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED)}else{$(VCPlayControllerDoc.VIEW_MODE_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED);a.removeAllViewModeUIClass($(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS));$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS).addClass(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1)}a.showFitToWidthBtn();a._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,DocLayoutMode.ONE_PAGE_SCROLL)},onViewModeScrollPage2BtnClicked:function(){var a=bcPlayController.getVCPlayController();$(VCPlayControllerDoc.VIEW_MODE_BTN_CLASS).removeClass(VCPlayControllerDoc.SELECTED);$(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2_BTN_CLASS).addClass(VCPlayControllerDoc.SELECTED);a.removeAllViewModeUIClass($(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS));$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_CLASS).addClass(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2);a.showFitToWidthBtn();a._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_VIEW_MODE,DocLayoutMode.TWO_PAGE_SCROLL)},removeAllViewModeUIClass:function(a){$(a).removeClass(VCPlayControllerDoc.VIEW_MODE_PAGE1);$(a).removeClass(VCPlayControllerDoc.VIEW_MODE_PAGE2);$(a).removeClass(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE1);$(a).removeClass(VCPlayControllerDoc.VIEW_MODE_SCROLL_PAGE2)},onChapterBtnClicked:function(){var a=bcPlayController.getVCPlayController();a.toggleChapterManually()},toggleChapterManually:function(){if(this._isChapterOn){this._eventTarget.fire(VCPlayControllerDocEvent.HIDE_CHAPTER)}else{this._eventTarget.fire(VCPlayControllerDocEvent.SHOW_CHAPTER)}},onFullScreenBtnClicked:function(){var a=bcPlayController.getVCPlayController();a.toggleFullScreenManually()},toggleFullScreenManually:function(){if(this._isFullScreenOn){this._eventTarget.fire(VCPlayControllerDocEvent.CLOSE_FULL_SCREEN)}else{this._eventTarget.fire(VCPlayControllerDocEvent.FULL_SCREEN)}},onDownloadBtnClicked:function(){var a=bcPlayController.getVCPlayController();if(a._eventTarget){a._eventTarget.fire(VCPlayControllerDocEvent.DOWNLOAD_PDF)}},onCurrViewModeBtnMouseOver:function(){$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_WRAPPER_CLASS).hide();$(VCPlayControllerDoc.VIEWMODE_SET_BOX_CLASS).show()},onViewModeSetBoxMouseLeave:function(){$(VCPlayControllerDoc.CURR_VIEWMODE_BTN_WRAPPER_CLASS).show();$(VCPlayControllerDoc.VIEWMODE_SET_BOX_CLASS).hide()},onToolsMouseOver:function(){var a=bcPlayController.getVCPlayController();if(a._eventTarget){a._eventTarget.fire(VCPlayControllerDocEvent.TOOLS_MOUSE_OVER)}},onToolsMouseLeave:function(){var a=bcPlayController.getVCPlayController();if(a._eventTarget){a._eventTarget.fire(VCPlayControllerDocEvent.TOOLS_MOUSE_LEAVE)}},onEbookBtnClicked:function(){var a=bcPlayController.getVCPlayController();if($(LayoutIdTable.UNI_PLAYER).hasClass(VCPlayControllerDoc.EBOOK_MODE)){a.changeToNormalMode()}else{a.changeToEbookMode()}},onEbookZoomInBtnClicked:function(){var a=bcPlayController.getVCPlayController();if($(LayoutIdTable.UNI_PLAYER).hasClass(VCPlayControllerDoc.EBOOK_MODE)){a.changeToNormalMode();a.onFitToWidthBtnClicked()}},changeToEbookMode:function(){$(LayoutIdTable.UNI_PLAYER).addClass(VCPlayControllerDoc.EBOOK_MODE);$(VCPlayControllerDoc.CHAPTER_BTN_CLASS).hide();$(VCPlayControllerDoc.EBOOK_ZOOM_IN_BTN_CLASS).show();var a=docPlayer.getTotalPageCnt();this.setSlider(a);if(this._eventTarget){this._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_TO_EBOOK_MODE)}},changeToNormalMode:function(){$(LayoutIdTable.UNI_PLAYER).removeClass(VCPlayControllerDoc.EBOOK_MODE);$(VCPlayControllerDoc.TOP_FLOATING_OVER_LAYER_CLASS).show();$(VCPlayControllerDoc.BOTTOM_FLOATING_CONTROLLER_CONTAINER_CLASS).show();$(VCPlayControllerDoc.FLOATING_CONTROLLER_CLASS).show();$(VCPlayControllerDoc.CHAPTER_BTN_CLASS).show();$(VCPlayControllerDoc.EBOOK_ZOOM_IN_BTN_CLASS).hide();if(this._eventTarget){this._eventTarget.fire(VCPlayControllerDocEvent.CHANGE_TO_NORMAL_MODE)}},setSlider:function(a){$("#ebook-slider").slider({min:1,max:a,start:function(c,e){var b=bcPlayController.getVCPlayController();var d=e.value;b.showSlidePageBox(d)},slide:function(c,e){var b=bcPlayController.getVCPlayController();var d=e.value;setTimeout(function(){b.moveSlidePageBox(d)},10)},stop:function(c,e){var b=bcPlayController.getVCPlayController();var d=e.value;docPlayer.setPage(Number(d));b.hideSlidePageBox()}})},showSlidePageBox:function(a){$(VCPlayControllerDoc.EBOOK_PAGE_BOX).show();this.moveSlidePageBox(a)},moveSlidePageBox:function(c){var b=$(".ui-slider-handle");var a=$(VCPlayControllerDoc.EBOOK_PAGE_BOX);var e=$(".unibook").offset().top+$(".unibook").height()-10;var d=b.offset().left+(b.width())/2-(a.width())/2;$(VCPlayControllerDoc.EBOOK_PAGE_BOX).css("top",e.toString()+"px");$(VCPlayControllerDoc.EBOOK_PAGE_BOX).css("left",d.toString()+"px");$(VCPlayControllerDoc.EBOOK_PAGE_BOX_NUM).text(c)},hideSlidePageBox:function(){$(VCPlayControllerDoc.EBOOK_PAGE_BOX).hide()},setSliderPage:function(c){var b=Number(c);var a=$("#ebook-slider").slider("value");if(a>2&&(a%2)==1&&(b%2)==0&&a-1==b){return}$("#ebook-slider").slider("value",b)},showFitToPageBtn:function(){$(VCPlayControllerDoc.FIT_TO_WIDTH_BTN_CLASS).hide();$(VCPlayControllerDoc.FIT_TO_PAGE_BTN_CLASS).show()},showFitToWidthBtn:function(){$(VCPlayControllerDoc.FIT_TO_PAGE_BTN_CLASS).hide();$(VCPlayControllerDoc.FIT_TO_WIDTH_BTN_CLASS).show()}},{MAIN_CONTROLLER_CLASS:".vc-main-play-controller",RIGHT_CONTROL_WRAPPER_CLASS:".vc-pctrl-right-control-wrapper",METADATA_TITLE_CLASS:".vc-pctrl-meta-title",METADATA_TITLE_TEXT_CLASS:".vc-pctrl-meta-title-text",PAGING_CLASS:".vc-pctrl-paging",PREV_PAGE_BTN_CLASS:".vc-pctrl-prev-page-btn",NEXT_PAGE_BTN_CLASS:".vc-pctrl-next-page-btn",CURR_PAGE_CLASS:".vc-pctrl-curr-page",TOTAL_PAGE_CLASS:".vc-pctrl-total-page",EBOOK_BTN_CLASS:".vc-pctrl-ebook-btn",EBOOK_SLIDER_BAR_CLASS:".vc-pctrl-ebook-slider-bar",EBOOK_PAGE_BOX:".vc-pctrl-ebook-page-box",EBOOK_PAGE_BOX_NUM:".vc-pctrl-ebook-page-box-num",TOP_FLOATING_CONTROLLER_CONTAINER_CLASS:".vc-floating-top-play-controller-container",BOTTOM_FLOATING_CONTROLLER_CONTAINER_CLASS:".vc-floating-bottom-play-controller-container",FLOATING_CONTROLLER_CLASS:".vc-floating-play-controller",TOP_FLOATING_CONTROLLER_CLASS:".vc-floating-top-play-controller",BOTTOM_FLOATING_CONTROLLER_CLASS:".vc-floating-bottom-play-controller",OVER_LAYER_CLASS:".vc-controller-over-layer",MAIN_CONTROLLER_OVER_LAYER_CLASS:".vc-over-layer-main-controller",TOP_FLOATING_OVER_LAYER_CLASS:".vc-over-layer-floating-top",BOTTOM_FLOATING_OVER_LAYER_CLASS:".vc-over-layer-floating-bottom",CURR_VIEWMODE_BTN_WRAPPER_CLASS:".vc-pctrl-curr-viewmode-btn-wrapper",CURR_VIEWMODE_BTN_CLASS:".vc-pctrl-curr-viewmode-btn",VIEWMODE_SET_BOX_CLASS:".vc-pctrl-viewmode-set-box",FIT_TO_PAGE_BTN_CLASS:".vc-pctrl-fit-to-page-btn",FIT_TO_WIDTH_BTN_CLASS:".vc-pctrl-fit-to-width-btn",SCALE_SELECT_CLASS:".vc-pctrl-scale-set",CUSTOM_SCALE_OPTION_CLASS:".vc-pctrl-custom-scale-option",CUSTOM_SCALE_OPTION_VALUE:"custom",ZOOM_IN_BTN_CLASS:".vc-pctrl-zoom-in-btn",ZOOM_OUT_BTN_CLASS:".vc-pctrl-zoom-out-btn",VIEW_MODE_PAGE1:"vc-viewmode-one-page",VIEW_MODE_PAGE2:"vc-viewmode-two-page",VIEW_MODE_SCROLL_PAGE1:"vc-viewmode-one-page-scroll",VIEW_MODE_SCROLL_PAGE2:"vc-viewmode-two-page-scroll",VIEW_MODE_BTN_CLASS:".vc-viewmode-set-btn",VIEW_MODE_PAGE1_BTN_CLASS:".vc-viewmode-set-btn.vc-viewmode-one-page",VIEW_MODE_PAGE2_BTN_CLASS:".vc-viewmode-set-btn.vc-viewmode-two-page",VIEW_MODE_SCROLL_PAGE1_BTN_CLASS:".vc-viewmode-set-btn.vc-viewmode-one-page-scroll",VIEW_MODE_SCROLL_PAGE2_BTN_CLASS:".vc-viewmode-set-btn.vc-viewmode-two-page-scroll",CHAPTER_BTN_CLASS:".vc-pctrl-chapter-btn",EBOOK_ZOOM_IN_BTN_CLASS:".vc-pctrl-ebook-zoom-in-btn",DOWNLOAD_BTN_CLASS:".vc-pctrl-download-btn",FULL_SCREEN_BTN_CLASS:".vc-pctrl-fullscreen-btn",ON_FULL_SCREEN:"vc-pctrl-on-full-screen",ON_NORMAL_SCREEN:"vc-pctrl-on-normal-screen",SELECTED:"selected",EBOOK_MODE:"e-book-mode",DESKTOP_ANIMATION_DURATION:350,HIDE_ON_NARROW_WIDTH_CLASS:".hide-on-narrow-width",DOC_BOOKMODE_CONTROLLER:".vc-pctrl-ebook-controller",BOOKMODE_PREV_BTN:".vc-pctrl-ebook-prev",BOOKMODE_NEXT_BTN:".vc-pctrl-ebook-next"});var VCPlayControllerMedia=VisualComponent.extend({_currContentType:null,_duration:null,_currTime:0,_buffered:0,_seekLimit:false,_limitTime:0,_isPlaying:false,_isMixed:false,_parentContainerElement:null,_onHTMLLoaded:false,_onCSSLoaded:false,_isCCSetBoxShown:false,_isCCParsingFailed:false,_isCCUnavailableNoticeOn:false,_hideCCUnavailableNoticeTimeout:null,_isPlaybackRateSetBoxShown:false,_isPlaybackRateUnavailableNoticeOn:false,_hidePlaybackRateUnavailableNoticeTimeout:null,_isFullScreenUnavailableNoticeOn:false,_hideFullScreenUnavailableNoticeTimeout:null,_isProfileSetBoxShown:false,_isFullScreen:false,_volume:1,_volumeControlling:false,_volumeBeforeMute:-1,_isMuted:false,_isControllable:false,_isSeeking:false,_currCCItemIndex:0,_CCList:[],_isMouseOver:false,_isMouseOnVolumeHoverArea:false,_hideVolumeTimeout:null,_isCCtoggle:false,_isShowChapterBtn:false,_isMediaScriptOn:false,_isShowMediaScriptBtn:false,_isCaptionScriptOn:false,_isSwapSelectBoxShown:false,_swapVideoList:[],_swapSelectManipulated:false,_currVideoType:null,_currPlayMode:null,_playbackRateManipulated:false,_ccManipulated:false,_profileManipulated:false,_isSeekable:true,initialize:function(){this._onHTMLLoaded=false;this._onCSSLoaded=false;this._isPlaybackRateSetBoxShown=false;this._isPlaybackRateUnavailableNoticeOn=false;this._isFullScreenUnavailableNoticeOn=false;this._isProfileSetBoxShown=false;this._isChapterOn=false;this._isMediaScriptOn=false;this._seekLimit=false;this._isMouseOnVolumeHoverArea=false;this._isMuted=false;this._CCList=[];this._currContentType=ContentType.VIDEO1;this._isSwapSelectBoxShown=false;this._swapVideoList=[];this._swapSelectManipulated=false;this._currVideoType=null;this._isControllable=true;this._isSeekable=true},load:function(){this.initialize();this.initEvents();this.initControls()},unload:function(){$(document).off("keydown",this.controlKeyDown)},resize:function(){var a;var c=$(LayoutIdTable.CHAPTER_VERTICAL);var b=$(window).width();if(uniPlayerConfig.getIsFitToElement()){b=$(uniPlayer.getTargetElement()).innerWidth()}if(skinManager.isMobile()||false==bcChapterVertical.isChapterShown()||bcChapterVertical.isChapterLayer()||b<bcChapterVertical.getPushChapterMinWidth()){a=b}else{a=b-c.width()}var e=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){a=a-e.width()}var d=$(LayoutIdTable.PLAY_CONTROLLER);d.css("width","{0}px".format(a));if(this._duration){this.setSeekThumbUI(this._currTime,this._duration)}},initEvents:function(){this.attachClickEvent(".vc-pctrl-play-pause-btn",this.onPlayPauseClicked);this.attachClickEvent(".vc-pctrl-restart-btn",this.onRestartClicked);this.attachDownEvent(".vc-pctrl-time-tracker",this.onTimeTrackerTouchDown);this.attachClickEvent(".vc-pctrl-volume-btn",this.onVolumeButtonClicked);this.attachClickEvent(".vc-pctrl-fullscreen-btn",this.onFullScreenButtonClicked);this.attachClickEvent(".vc-pctrl-chapter-btn",this.onChapterButtonClicked);this.attachDownEvent(".vc-pctrl-volume-setting-panel",this.onVolumeSliderTouchDown);this.attachClickEvent(".vc-pctrl-cc-btn",this.onCCButtonClicked);this.attachClickEvent(".vc-pctrl-profile-toggle-btn",this.onProfileSetBoxButtonClicked);this.attachClickEvent(".vc-pctrl-playback-rate-toggle-btn",this.onPlaybackRateSetBoxButtonClicked);this.attachClickEvent(".vc-pctrl-playback-rate-btn",this.onPlaybackRateButtonClicked);this.attachClickEvent(".vc-pctrl-restart-btn",this.onRestartClicked);this.attachClickEvent(".vc-pctrl-reload-player-btn",this.onReloadPlayerClicked);this.attachClickEvent(".vc-pctrl-mixed-multi-btn",this.onMixedMultiClicked);this.attachClickEvent(".vc-pctrl-media-script-btn",this.onMediaScriptClicked);this.attachClickEvent(".vc-pctrl-caption-script-btn",this.onCaptionScriptButtonClicked);$(".vc-pctrl-volume-btn").bind("mouseover",this.onVolumeButtonMouseOver);$(".vc-pctrl-volume-hover-area").bind("mouseover",this.onVolumeHoverAreaMouseOver);$(".vc-pctrl-volume-hover-area").bind("mouseleave",this.onVolumeHoverAreaMouseLeave);$(LayoutIdTable.PLAY_CONTROLLER).bind("mouseover",this.onMouseOver);$(LayoutIdTable.PLAY_CONTROLLER).bind("mouseleave",this.onMouseLeave);$(".vc-pctrl-volume-setting-panel").on("animationend webkitAnimationEnd MSAnimationEnd oanimationend",this.onVolumeSettingPanelAnimationEnd);this.bindKeyboardEvents();this.attachClickEvent(VCPlayControllerMedia.VIDEO_SWAP_BTN_CLASS,this.onSwapVideoButtonClicked);this.attachClickEvent(VCPlayControllerMedia.SYNCDOC_SWAP_BTN_CLASS,this.onSyncDocSwap)},initControls:function(){this.setDurationUI(this._duration);this.setCurrentTimeUI(this._currTime,this._duration);this.setBufferedUI(this._buffered,this._duration);this.setIsPlayingUI(this._isPlaying);this._isFullScreen=uniPlayer.getIsFullScreen();this.setIsFullScreen(this._isFullScreen);this.setIsMixedUI(this._isMixed);this.setPlaybackRateSetBox();var a=bcPlayController.getPlayController();setTimeout(function(){a.setVolumeUI(a._volume)},200);this.initButtonTitles()},initButtonTitles:function(){this.setPlayPauseBtnTitle();this.setVolumeBtnTitle();this.setFullscreenBtnTitle();this.setMixedMultiBtnTitle();var a=localizeManager.getStringResource();$(".vc-pctrl-chapter-btn").prop("title",a.ButtonTitle.CHAPTER);$(".vc-pctrl-cc-btn").prop("title",a.ButtonTitle.CAPTION);$(".vc-pctrl-playback-rate-toggle-btn").prop("title",a.ButtonTitle.PLAYBACKRATE);$(".vc-pctrl-playback-unavailable-msg-text").text(a.PlaybackRateUnavailable);$(".vc-pctrl-fullscreen-unavailable-msg-text").text(a.FullScreenUnavailable);$(".vc-pctrl-profile-toggle-btn").prop("title",a.ButtonTitle.PROFILE);$(".vc-pctrl-reload-player-btn").prop("title",a.ButtonTitle.SHOW_ALL_CHANNEL);$(".vc-pctrl-media-script-btn").prop("title",a.ButtonTitle.MEDIA_SCRIPT);$(VCPlayControllerMedia.RESTART_BTN_CLASS).prop("title",a.ButtonTitle.REPLAY);$(".vc-pctrl-caption-unavailable-msg-text").text(a.ButtonTitle.UNAVAILABLE_CAPTION_MSG)},setPlayPauseBtnTitle:function(b){var a=localizeManager.getStringResource();if(b){$(".vc-pctrl-play-pause-btn").prop("title",a.ButtonTitle.PAUSE)}else{$(".vc-pctrl-play-pause-btn").prop("title",a.ButtonTitle.PLAY)}},setVolumeBtnTitle:function(b){var a=localizeManager.getStringResource();if(b){$(".vc-pctrl-volume-btn").prop("title",a.ButtonTitle.UNMUTE)}else{$(".vc-pctrl-volume-btn").prop("title",a.ButtonTitle.MUTE)}},setFullscreenBtnTitle:function(b){var a=localizeManager.getStringResource();if(b){$(".vc-pctrl-fullscreen-btn").prop("title",a.ButtonTitle.CLOSE_FULLSCREEN)}else{$(".vc-pctrl-fullscreen-btn").prop("title",a.ButtonTitle.ENTER_FULLSCREEN)}},setMixedMultiBtnTitle:function(b){var a=localizeManager.getStringResource();if(b){$(".vc-pctrl-mixed-multi-btn").prop("title",a.ButtonTitle.SWAP_MULTI)}else{$(".vc-pctrl-mixed-multi-btn").prop("title",a.ButtonTitle.SWAP_MIXED)}},showPlayController:function(){$(LayoutIdTable.PLAY_CONTROLLER).show()},hidePlayController:function(){$(LayoutIdTable.PLAY_CONTROLLER).hide()},setCurrentContentType:function(a){this._currContentType=a;this.setPlaybackRateUI();if(skinManager.isMobile()){this.setSwapUIForMobile(a)}else{bcPlayController.showFullScreenBtn()}if(this._isShowChapterBtn){this.showChapterBtn()}if(this._isShowMediaScriptBtn){this.showMediaScriptBtn()}switch(this._currContentType){case ContentType.SYNCAUDIO:this.hideProfileBtn();break;case ContentType.AUDIO:this.hideCCBtn();this.hideProfileBtn();this.hideFullScreenBtn();this.hideChapterBtn();break;default:break}if(this._currContentType==ContentType.VIDEO3){this.showReloadPlayerBtn()}else{this.hideReloadPlayerBtn()}},setSwapUIForMobile:function(){switch(this._currContentType){case ContentType.VIDEO2:case ContentType.VIDEO3:this.showMobileSwapVideoBtn();this.hideMobileSwapSyncDocBtn();this.setCurrVideoTypeUI(this._currVideoType);break;case ContentType.SYNCVIDEO:this.showMobileSwapSyncDocBtn();this.hideMobileSwapVideoBtn();this.setPlayModeUI(this._currPlayMode);break;default:this.hideMobileSwapVideoBtn();this.hideMobileSwapSyncDocBtn();break}},showMobileSwapVideoBtn:function(){$(VCPlayControllerMedia.VIDEO_SWAP_BTN_CLASS).show()},hideMobileSwapVideoBtn:function(){$(VCPlayControllerMedia.VIDEO_SWAP_BTN_CLASS).hide()},showMobileSwapSyncDocBtn:function(){$(VCPlayControllerMedia.SYNCDOC_SWAP_BTN_CLASS).show()},hideMobileSwapSyncDocBtn:function(){$(VCPlayControllerMedia.SYNCDOC_SWAP_BTN_CLASS).hide()},initProfileUI:function(e){if(!e){this.hideProfileBtn();return}var c=Util.objectKeys(e);if(c.length<=1){this.hideProfileBtn();return}this.showProfileBtn();$(".vc-pctrl-profile-setbox").empty();for(var a=0;a<c.length;a++){var b=e[c[a]].name;var d="vc-pctrl-profile-btn-"+b;selectClass="";$(".vc-pctrl-profile-toggle-btn").text(b);$("<div>").attr("id",d).addClass("vc-pctrl-profile-btn").addClass(selectClass).text(b).appendTo(".vc-pctrl-profile-setbox")}this.attachClickEvent(".vc-pctrl-profile-btn",this.onProfileButtonClicked)},initCCUI:function(e,d){if(e==null||e.length==0){this.hideCCBtn();return}this.showCCBtn();$(".vc-pctrl-cc-set-box").empty();this._isCCtoggle=false;this._CCList=e;this._currCCItemIndex=d;for(var b=0;b<e.length;b++){if(!e[b].caption){this._isCCParsingFailed=true;return}}this.setCCUI(this.isCCOn());if(e.length==1){this._isCCtoggle=true;this._isCCtoggleOn=this.isCCOn();return}for(var b=0;b<=e.length;b++){var f="vc-pctrl-cc-item"+b.toString();var c;var a;if(b==this._currCCItemIndex){c="vc-pctrl-cc-item-selected"}else{c="vc-pctrl-cc-item-unselected"}if(b==this._CCList.length){a=VCPlayControllerMedia.CAPTION_OFF_LABEL}else{a=this._CCList[b].lang}$("<div>").attr("id",f).addClass("vc-pctrl-cc-item").addClass(c).text(a).appendTo(".vc-pctrl-cc-set-box");this.attachCCItemEvent(b)}},attachCCItemEvent:function(a){var b="#vc-pctrl-cc-item"+a.toString();this.attachClickEvent(b,this.onCCItemClicked)},initChapterUI:function(a){this._isShowChapterBtn=a;if(a){this.showChapterBtn()}else{this.hideChapterBtn()}},onCCItemClicked:function(){var a=bcPlayController.getPlayController();var b=$(this).attr("id").replace("vc-pctrl-cc-item","");a.changeCurrCCItemManually(Number(b));a.toggleCCManually()},showChapterBtn:function(){$(VCPlayControllerMedia.CHAPTER_BTN_CLASS).show()},hideChapterBtn:function(){$(VCPlayControllerMedia.CHAPTER_BTN_CLASS).hide()},initMediaScriptUI:function(a){this._isShowMediaScriptBtn=a;if(a){this.showMediaScriptBtn()}else{this.hideMediaScriptBtn()}},showMediaScriptBtn:function(){$(VCPlayControllerMedia.MEDIA_SCRIPT_BTN_CLASS).show()},hideMediaScriptBtn:function(){$(VCPlayControllerMedia.MEDIA_SCRIPT_BTN_CLASS).hide()},setProfileName:function(a){$(".vc-pctrl-profile-btn").removeClass("selected");var b="vc-pctrl-profile-btn-"+a;$("#"+b).addClass("selected");$(".vc-pctrl-profile-toggle-btn").text(a)},onPlayPauseClicked:function(b){var a=bcPlayController.getPlayController();a.togglePlayPauseManually()},onRestartClicked:function(a){uniPlayer.restartPlayer(0)},showReloadPlayerBtn:function(){$(".vc-pctrl-reload-player-btn").show()},hideReloadPlayerBtn:function(){$(".vc-pctrl-reload-player-btn").hide()},onReloadPlayerClicked:function(b){var a=bcPlayController.getPlayController();if(a._eventTarget){a._eventTarget.fire(VCPlayControllerEvent.RELOAD_PLAYER)}},onMixedMultiClicked:function(b){var a=bcPlayController.getPlayController();if(skinManager.isMobile()){return}a.toggleMixedManually()},onMediaScriptClicked:function(b){var a=bcPlayController.getPlayController();if(bcMediaScript.needMediaScriptPopup()){a._eventTarget.fire(VCPlayControllerEvent.SHOW_MEDIA_SCRIPT);return}a.toggleMediaScriptManually()},onCaptionScriptButtonClicked:function(b){var a=bcPlayController.getPlayController();a.toggleCaptionScriptManually()},onVolumeButtonClicked:function(b){var a=bcPlayController.getPlayController();a.changeMuteOnOffManually()},onVolumeSliderTouchDown:function(b){var a=bcPlayController.getPlayController();a._volumeControlling=true;a.changeVolumeManually(a.getVolumeFromOffset(Util.getClientX(b)));if(skinManager.isLowIE()){a.attachMoveEvent(window.document,a.onVolumeSliderTouchMove);a.attachEndEvent(window.document,a.onVolumeSliderTouchEnd)}else{a.attachMoveEvent(window,a.onVolumeSliderTouchMove);a.attachEndEvent(window,a.onVolumeSliderTouchEnd)}},onVolumeSliderTouchMove:function(b){var a=bcPlayController.getPlayController();a.changeVolumeManually(a.getVolumeFromOffset(Util.getClientX(b)))},onVolumeSliderTouchEnd:function(b){var a=bcPlayController.getPlayController();a._volumeControlling=false;a.changeVolumeManually(a.getVolumeFromOffset(Util.getClientX(b)));if(skinManager.isLowIE()){a.detachMoveEvent(window.document,a.onVolumeSliderTouchMove);a.detachEndEvent(window.document,a.onVolumeSliderTouchEnd)}else{a.detachMoveEvent(window,a.onVolumeSliderTouchMove);a.detachEndEvent(window,a.onVolumeSliderTouchEnd)}if(!a._isMouseOnVolumeHoverArea){a.hideVolumeSettingPanel()}},onChapterButtonClicked:function(b){var a=bcPlayController.getPlayController();a.toggleChapterManually()},onFullScreenButtonClicked:function(b){var a=bcPlayController.getPlayController();if(uniPlayer.needToShowPopUpFullScreen()&&!uniPlayerConfig.getUniPlayerSettingsData().usePopupFullscreen){a.noticeFullScreenUnavailableInFallback();return}a.toggleFullScreenManually()},onCCButtonClicked:function(b){var a=bcPlayController.getPlayController();if(a._isCCParsingFailed){a.noticeCCUnavailableInFallback()}else{a._ccManipulated=true;if(a._isCCtoggle){a.toggleCCOnOff();a.toggleCCManually()}else{a.toggleCCSetBoxShowHide()}}},noticeCCUnavailableInFallback:function(){var a=bcPlayController.getPlayController();if(a._isCCUnavailableNoticeOn){a.setUnavailableCCMsgUI(false);a._isCCUnavailableNoticeOn=false;clearTimeout(a._hideCCUnavailableNoticeTimeout);return}a.setUnavailableCCMsgUI(true);a._isCCUnavailableNoticeOn=true;a._hideCCUnavailableNoticeTimeout=setTimeout(function(){a.setUnavailableCCMsgUI(false);a._isCCUnavailableNoticeOn=false},2500)},onPlaybackRateSetBoxButtonClicked:function(b){var a=bcPlayController.getPlayController();if(!skinManager.isNeedFlashFallback()){a._playbackRateManipulated=true;a.toggleShowHidePlaybackRateSetBoxManually()}else{a.noticePlaybackRateUnavailableInFallback()}},onPlaybackRateButtonClicked:function(c){var b=bcPlayController.getPlayController();b.hidePlaybackRateSetBox();var d=$(this).attr("id");var a=b.getPlaybackRateFromBtnId(d);$(".vc-pctrl-playback-rate-toggle-btn").text("x "+a);$(".vc-pctrl-playback-rate-btn").removeClass("selected");$("#"+d).addClass("selected");b._eventTarget.fire(VCPlayControllerEvent.CHANGE_PLAYBACK_RATE,Number(a))},onProfileSetBoxButtonClicked:function(b){var a=bcPlayController.getPlayController();a._profileManipulated=true;a.toggleShowHideProfileSetBoxManually()},onProfileButtonClicked:function(c){var b=bcPlayController.getPlayController();b.hideProfileSetBox();var d=$(this).attr("id");var a=d.replace("vc-pctrl-profile-btn-","");$(".vc-pctrl-profile-btn").removeClass("selected");$("#"+d).addClass("selected");$(".vc-pctrl-profile-toggle-btn").text(a);b._eventTarget.fire(VCPlayControllerEvent.CHANGE_PROFILE,a)},onVolumeButtonMouseOver:function(b){var a=bcPlayController.getPlayController();if(!a._volumeControlling){a.showVolumeSettingPanel()}},onVolumeHoverAreaMouseOver:function(b){var a=bcPlayController.getPlayController();a._isMouseOnVolumeHoverArea=true},onVolumeHoverAreaMouseLeave:function(b){var a=bcPlayController.getPlayController();a._isMouseOnVolumeHoverArea=false;a.startHideVolumeTimeout()},onSwapVideoButtonClicked:function(b){var a=bcPlayController.getPlayController();var c=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType;if(c==ContentType.VIDEO2){if(a._currVideoType==VideoType.MAIN_MEDIA){a.setCurrVideoType(VideoType.SUB_MEDIA)}else{a.setCurrVideoType(VideoType.MAIN_MEDIA)}a._eventTarget.fire(VCPlayControllerEvent.SWAP_VIDEO)}else{if(c==ContentType.VIDEO3){a._swapSelectManipulated=true;a.toggleSwapSelectBoxShowHide()}}},onSyncDocSwap:function(){var a=bcPlayController.getPlayController();if(a._currPlayMode==SyncVideoMobilePlayMode.VIDEO){a._currPlayMode=SyncVideoMobilePlayMode.SLIDE}else{a._currPlayMode=SyncVideoMobilePlayMode.VIDEO}a.setPlayModeUI(a._currPlayMode);a._eventTarget.fire(VCPlayControllerEvent.SWAP_SYNCDOC,a._currPlayMode)},startHideVolumeTimeout:function(){var a=bcPlayController.getPlayController();clearTimeout(a._hideVolumeTimeout);a._hideVolumeTimeout=setTimeout(function(){bcPlayController.getPlayController().tryToHideVolumeSettingPanel()},500)},tryToHideVolumeSettingPanel:function(b){var a=bcPlayController.getPlayController();if(!a._volumeControlling&&!a._isMouseOnVolumeHoverArea){a.hideVolumeSettingPanel()}else{a.startHideVolumeTimeout()}},onVolumeSettingPanelAnimationEnd:function(){$(".vc-pctrl-volume-setting-panel").removeClass("volume-hide-animation");$(".vc-pctrl-volume-setting-panel").removeClass("volume-show-up")},showVolumeSettingPanel:function(){$(".vc-pctrl-volume-setting-panel").removeClass("volume-hide-animation");$(".vc-pctrl-volume-setting-panel").addClass("volume-show-up-animation");$(".vc-pctrl-volume-setting-panel").css("width","56px")},hideVolumeSettingPanel:function(){$(".vc-pctrl-volume-setting-panel").removeClass("volume-show-up-animation");$(".vc-pctrl-volume-setting-panel").addClass("volume-hide-animation");$(".vc-pctrl-volume-setting-panel").css("width","0px")},getPlaybackRateFromBtnId:function(a){return this.convertPlaybackRateNumber(a.replace(VCPlayControllerMedia.PLAYBACK_RATE_BTN_ID,"")/10)},convertPlaybackRateNumber:function(b){var a=Number(b).toFixed(2);if(a.substring(a.length-1)=="0"){a=a.substring(0,a.length-1)}return a},onTimeTrackerTouchDown:function(c){var b=bcPlayController.getPlayController();if(!b._duration){return}if(!b._isSeekable){return}c.preventDefault();var a=b.getTimeFromOffset(Util.getClientX(c),b._duration);if(b._seekLimit&&b._limitTime+1<a){return}if(skinManager.isLowIE()){b.attachMoveEvent(window.document,b.onTimeTrackerTouchMove);b.attachEndEvent(window.document,b.onTimeTrackerTouchEnd)}else{b.attachMoveEvent(window,b.onTimeTrackerTouchMove);b.attachEndEvent(window,b.onTimeTrackerTouchEnd)}b._isSeeking=true;b.changeCurrTimeManually(a,VCPlayControllerEvent.SEEK_START)},onTimeTrackerTouchMove:function(c){var b=bcPlayController.getPlayController();c.preventDefault();var a=b.getTimeFromOffset(Util.getClientX(c),b._duration);if(b._seekLimit&&b._limitTime<a){a=b._limitTime}b.changeCurrTimeManually(a,null)},onTimeTrackerTouchEnd:function(c){var b=bcPlayController.getPlayController();var a=b.getTimeFromOffset(Util.getClientX(c),b._duration);if(b._seekLimit&&b._limitTime<a){a=b._limitTime}b._isSeeking=false;b.changeCurrTimeManually(a,VCPlayControllerEvent.SEEK_END);if(skinManager.isLowIE()){b.detachMoveEvent(window.document,b.onTimeTrackerTouchMove);b.detachEndEvent(window.document,b.onTimeTrackerTouchEnd)}else{b.detachMoveEvent(window,b.onTimeTrackerTouchMove);b.detachEndEvent(window,b.onTimeTrackerTouchEnd)}},bindKeyboardEvents:function(){$(document).keydown(this.controlKeyDown)},controlKeyDown:function(c){var b=bcPlayController.getPlayController();switch(c.which){case KeyCode.SPACEBAR:b.onKeySpaceBarDown();return false;case KeyCode.LEFT:b.onKeyLeftDown();return false;case KeyCode.RIGHT:b.onKeyRightDown();return false;case KeyCode.UP:b.onKeyUpDown();return false;case KeyCode.DOWN:b.onKeyDownDown();return false;case KeyCode.F:b.onKeyForFullScreenDown();return false;case KeyCode.M:b.onKeyMDown();return false;case KeyCode.Z:b.onKeyZDown();return false;case KeyCode.X:b.onKeyXDown();return false;case KeyCode.C:b.onKeyCDown();return false;case KeyCode.P:case KeyCode.BACKSPACE:case KeyCode.PAGEUP:b.onKeyForPrevSlideDown();return false;case KeyCode.N:case KeyCode.PAGEDOWN:b.onKeyForNextSlideDown();return false;case KeyCode.ENTER:var a=document.activeElement;if(a&&$(a).is("div")){$(a).click();return false}break;default:break}},onKeySpaceBarDown:function(){var a=bcPlayController.getPlayController();if(bcFrontScreen.isOn()&&!skinManager.isMobile()){bcFrontScreen.onPlaySelected();return}if(uniPlayer.getIsRestartReady()){a.onRestartClicked(null);return}a.togglePlayPauseManually()},onKeyLeftDown:function(){var a=bcPlayController.getPlayController();if(!a._isSeekable){return}if(uniPlayer.getIsRestartReady()){return}a.moveBackward()},onKeyRightDown:function(){var a=bcPlayController.getPlayController();if(!a._isSeekable){return}if(uniPlayer.getIsRestartReady()){return}a.moveForward()},onKeyUpDown:function(){var b=bcPlayController.getPlayController();var a=(b._volume+VCPlayControllerMedia.MOVING_VOLUME);a=(a>1)?1:a;b.changeVolumeManually(a)},onKeyDownDown:function(){var b=bcPlayController.getPlayController();var a=(b._volume-VCPlayControllerMedia.MOVING_VOLUME);a=(a<0)?0:a;b.changeVolumeManually(a)},onKeyForFullScreenDown:function(){var a=bcPlayController.getPlayController();if(skinManager.isIE11()){return}if(uniPlayer.needToShowPopUpFullScreen()&&!uniPlayerConfig.getUniPlayerSettingsData().usePopupFullscreen){a.noticeFullScreenUnavailableInFallback();return}a.toggleFullScreenManually()},onKeyMDown:function(){var a=bcPlayController.getPlayController();a.changeMuteOnOffManually()},onKeyZDown:function(){var b=bcPlayController.getPlayController();var a="1.0";b.selectPlaybackRate(a);uniPlayer.setPlaybackRate(a);contentPlayer.changePlaybackRate(a)},onKeyXDown:function(){var c=bcPlayController.getPlayController();var b=uniPlayer.getPlaybackRate();var a=c.getPrevPlaybackRate(b);c.selectPlaybackRate(a);uniPlayer.setPlaybackRate(a);contentPlayer.changePlaybackRate(a)},onKeyCDown:function(){var c=bcPlayController.getPlayController();var b=uniPlayer.getPlaybackRate();var a=c.getNextPlaybackRate(b);c.selectPlaybackRate(a);uniPlayer.setPlaybackRate(a);contentPlayer.changePlaybackRate(a)},getPrevPlaybackRate:function(c){var a=uniPlayerConfig.getUniPlayerSettingsData().playbackRateRange;for(var b=0;b<a.length;b++){if(c==Number(a[b])){if(b==0){return a[0]}return a[b-1]}}},getNextPlaybackRate:function(c){var a=uniPlayerConfig.getUniPlayerSettingsData().playbackRateRange;for(var b=0;b<a.length;b++){if(c==Number(a[b])){if(b==a.length-1){return a[b]}if(a[b+1]>uniPlayerConfig.getUniPlayerSettingsData().maxPlaybackRate){return a[b]}return a[b+1]}}},onKeyForPrevSlideDown:function(){bcChapterVertical.seekPrevChapter()},onKeyForNextSlideDown:function(){bcChapterVertical.seekNextChapter()},onMouseOver:function(a){bcPlayController.getPlayController()._isMouseOver=true},onMouseLeave:function(a){bcPlayController.getPlayController()._isMouseOver=false},getTimeFromOffset:function(d,c){var b=$(".vc-pctrl-time-tracker").offset().left;var a=this.getControllerWidth();return Math.round((d-b)/a*c)},getVolumeFromOffset:function(d){var c=$(".vc-pctrl-volume-slider").offset().left;if(Util.isIE11embedFullScreen()){c=VCPlayControllerMedia.VOLUME_SLIDER_LEFT}var a=this.getVolumeSliderWidth();var b=((d-c)/a);if(b>1){b=1}if(b<0){b=0}return b},moveBackward:function(){var a=bcPlayController.getPlayController();if(!a._duration){return}var b=(a._currTime-VCPlayControllerMedia.MOVING_TIME);b=(b<0)?0:b;a.changeCurrTimeManually(b,VCPlayControllerEvent.SEEK_END)},moveForward:function(){var a=bcPlayController.getPlayController();if(!a._duration){return}var b=(a._currTime+VCPlayControllerMedia.MOVING_TIME);b=(b>a._duration)?a._duration:b;if(this._seekLimit){b=b>a._limitTime?a._limitTime:b}a.changeCurrTimeManually(b,VCPlayControllerEvent.SEEK_END)},changeCurrCCItemManually:function(c){this._currCCItemIndex=c;this._eventTarget.fire(VCPlayControllerEvent.CC_ITEM_SELECTED,c);this.hideCCSetBox();for(var a=0;a<=this._CCList.length;a++){var b="#vc-pctrl-cc-item"+a.toString();if(a==c){$(b).removeClass("vc-pctrl-cc-item-unselected").addClass("vc-pctrl-cc-item-selected")}else{$(b).addClass("vc-pctrl-cc-item-unselected").removeClass("vc-pctrl-cc-item-selected")}}},togglePlayPauseManually:function(){var a=bcPlayController.getPlayController();if(skinManager.isMobile()&&!a._isControllable){return}a.setIsPlaying(!a._isPlaying);if(a._isPlaying){a._eventTarget.fire(VCPlayControllerEvent.PLAY)}else{a._eventTarget.fire(VCPlayControllerEvent.PAUSE)}},changeCurrTimeManually:function(c,b){var a=bcPlayController.getPlayController();if(!a._isControllable){return}if(c>this._duration){c=this._duration}if(c<0){c=0}if(b!=VCPlayControllerEvent.SEEK_START){a.setCurrentTime(c,true)}switch(b){case VCPlayControllerEvent.SEEK_START:a._eventTarget.fire(VCPlayControllerEvent.SEEK_START);break;case VCPlayControllerEvent.SEEK_END:a._eventTarget.fire(VCPlayControllerEvent.SEEK_END,c);break}return 1},toggleSwapSelectBoxShowHide:function(){var a=bcPlayController.getPlayController();a._isSwapSelectBoxShown=!a._isSwapSelectBoxShown;if(a._isSwapSelectBoxShown){a.showSwapSelectBox()}else{a.hideSwapSelectBox()}},showCCBtn:function(){$(VCPlayControllerMedia.CC_BTN_CLASS).show();if(uniPlayerConfig.getUseCaptionScript()){$(VCPlayControllerMedia.CAPTION_SCRIPT_BTN_CLASS).show()}},hideCCBtn:function(){$(VCPlayControllerMedia.CC_BTN_CLASS).hide();if(uniPlayerConfig.getUseCaptionScript()){$(VCPlayControllerMedia.CAPTION_SCRIPT_BTN_CLASS).hide()}},showCCSetBox:function(){var a=this.getControllerWidth();var e=$(".vc-pctrl-cc-btn").width();var d=a-$(".vc-pctrl-cc-btn").position().left-e;var c=$(".vc-pctrl-cc-set-box").width();if(Util.isIE11embedFullScreen()){d=this.getElementOuterWidthIfShown(".vc-pctrl-fullscreen-btn")+this.getElementOuterWidthIfShown(".vc-pctrl-chapter-btn");c=VCPlayControllerMedia.CC_SETBOX_WIDTH}var b=d+e/2-c/2;if(b<10){b=10}$(".vc-pctrl-cc-set-box").css("right",b);$(".vc-pctrl-cc-set-box").show();this._isCCSetBoxShown=true},hideCCSetBox:function(){$(".vc-pctrl-cc-set-box").hide();this._isCCSetBoxShown=false},toggleShowHidePlaybackRateSetBoxManually:function(){var a=bcPlayController.getPlayController();if(!a._isControllable){return}if(a._isPlaybackRateSetBoxShown){a.hidePlaybackRateSetBox()}else{a.showPlaybackRateSetBox()}},noticePlaybackRateUnavailableInFallback:function(){var a=bcPlayController.getPlayController();if(a._isPlaybackRateUnavailableNoticeOn){$(VCPlayControllerMedia.PLAYBACK_RATE_UNAVAILABLE_MSG).css("display","none");a._isPlaybackRateUnavailableNoticeOn=false;clearTimeout(a._hidePlaybackRateUnavailableNoticeTimeout);return}if(skinManager.isIE7()){$(VCPlayControllerMedia.PLAYBACK_RATE_UNAVAILABLE_MSG).css("display","block")}else{$(VCPlayControllerMedia.PLAYBACK_RATE_UNAVAILABLE_MSG).css("display","table")}a._isPlaybackRateUnavailableNoticeOn=true;a._hidePlaybackRateUnavailableNoticeTimeout=setTimeout(function(){$(VCPlayControllerMedia.PLAYBACK_RATE_UNAVAILABLE_MSG).css("display","none");a._isPlaybackRateUnavailableNoticeOn=false},2500)},noticeFullScreenUnavailableInFallback:function(){var a=bcPlayController.getPlayController();if(a._isFullScreenUnavailableNoticeOn){$(VCPlayControllerMedia.FULLSCREEN_UNAVAILABLE_MSG).css("display","none");a._isFullScreenUnavailableNoticeOn=false;clearTimeout(a._hideFullScreenUnavailableNoticeTimeout);return}if(skinManager.isIE7()){$(VCPlayControllerMedia.FULLSCREEN_UNAVAILABLE_MSG).css("display","block")}else{$(VCPlayControllerMedia.FULLSCREEN_UNAVAILABLE_MSG).css("display","table")}a._isFullScreenUnavailableNoticeOn=true;a._hideFullScreenUnavailableNoticeTimeout=setTimeout(function(){$(VCPlayControllerMedia.FULLSCREEN_UNAVAILABLE_MSG).css("display","none");a._isFullScreenUnavailableNoticeOn=false},2500)},toggleShowHideProfileSetBoxManually:function(){var a=bcPlayController.getPlayController();if(!a._isControllable){return}if(a._isProfileSetBoxShown){a.hideProfileSetBox()}else{a.showProfileSetBox()}},showPlaybackRateSetBox:function(){var e=$(".vc-pctrl-playback-rate-toggle-btn").position().left;var d=this.getControllerWidth();var a=$(".vc-pctrl-playback-rate-toggle-btn").width();var c=$(".vc-pctrl-playback-rate-setbox").width();if(Util.isIE11embedFullScreen()){a=VCPlayControllerMedia.PLAYBACKRATE_TOGGLE_BTN_WIDTH;e=d-this.getElementOuterWidthIfShown(".vc-pctrl-fullscreen-btn")-this.getElementOuterWidthIfShown(".vc-pctrl-chapter-btn")-this.getElementOuterWidthIfShown(".vc-pctrl-cc-btn")-this.getProfileToggleBtnWidthIfShown()-a;c=VCPlayControllerMedia.PLAYBACKRATE_SETBOX_WIDTH}if(skinManager.isMobile()){$(".vc-pctrl-playback-rate-setbox").css("right","5px")}else{$(".vc-pctrl-playback-rate-setbox").css("right",(d-e)-a/2-c/2)}$(".vc-pctrl-playback-rate-setbox").show();var b=bcPlayController.getPlayController();b._isPlaybackRateSetBoxShown=true},hidePlaybackRateSetBox:function(){$(".vc-pctrl-playback-rate-setbox").hide();var a=bcPlayController.getPlayController();a._isPlaybackRateSetBoxShown=false},showProfileBtn:function(){$(VCPlayControllerMedia.PROFILE_BTN_CLASS).show()},hideProfileBtn:function(){$(VCPlayControllerMedia.PROFILE_BTN_CLASS).hide()},showProfileSetBox:function(){var a=$(".vc-pctrl-profile-toggle-btn").position().left;var d=this.getControllerWidth();var e=$(".vc-pctrl-profile-toggle-btn").innerWidth();var c=$(".vc-pctrl-profile-setbox").width();if(Util.isIE11embedFullScreen()){e=VCPlayControllerMedia.PROFILE_TOGGLE_BTN_WIDTH;a=d-this.getElementOuterWidthIfShown(".vc-pctrl-fullscreen-btn")-this.getElementOuterWidthIfShown(".vc-pctrl-chapter-btn")-this.getElementOuterWidthIfShown(".vc-pctrl-cc-btn")-e;c=VCPlayControllerMedia.PROFILE_SETBOX_WIDTH}$(".vc-pctrl-profile-setbox").css("right",(d-a)-e/2-c/2);$(".vc-pctrl-profile-setbox").show();var b=bcPlayController.getPlayController();b._isProfileSetBoxShown=true},hideProfileSetBox:function(){$(".vc-pctrl-profile-setbox").hide();var a=bcPlayController.getPlayController();a._isProfileSetBoxShown=false},toggleChapterManually:function(){this.setIsChapterOn(!this._isChapterOn);this.setChapterUI(this._isChapterOn);if(this._isChapterOn){this._eventTarget.fire(VCPlayControllerEvent.SHOW_CHAPTER)}else{this._eventTarget.fire(VCPlayControllerEvent.HIDE_CHAPTER)}},toggleFullScreenManually:function(){var a=bcPlayController.getPlayController();a.setIsFullScreen(!a._isFullScreen);if(a._isFullScreen){a._eventTarget.fire(VCPlayControllerEvent.FULL_SCREEN)}else{a._eventTarget.fire(VCPlayControllerEvent.CLOSE_FULL_SCREEN)}},toggleCCManually:function(){var a=this.isCCOn();this.setCCUI(a);if(a){this._eventTarget.fire(VCPlayControllerEvent.SHOW_CC)}else{this._eventTarget.fire(VCPlayControllerEvent.HIDE_CC)}},toggleCCOnOff:function(){if(this._isCCtoggleOn){this._eventTarget.fire(VCPlayControllerEvent.CC_ITEM_SELECTED,1);this._currCCItemIndex=1;this._isCCtoggleOn=false}else{this._eventTarget.fire(VCPlayControllerEvent.CC_ITEM_SELECTED,0);this._currCCItemIndex=0;this._isCCtoggleOn=true}},toggleCCSetBoxShowHide:function(){var a=bcPlayController.getPlayController();a._isCCSetBoxShown=!a._isCCSetBoxShown;if(a._isCCSetBoxShown){a.showCCSetBox()}else{a.hideCCSetBox()}},changeVolumeManually:function(b){var a=bcPlayController.getPlayController();a.setVolume(b);a._eventTarget.fire(VCPlayControllerEvent.CHANGE_VOLUME,b)},changeMuteOnOffManually:function(){if(this._isMuted){this.changeVolumeManually(this._volumeBeforeMute);this._volumeBeforeMute=-1}else{this._volumeBeforeMute=this._volume;this.changeVolumeManually(0)}},toggleMixedManually:function(){var a=bcPlayController.getPlayController();a.setIsMixed(!a._isMixed);if(a._isMixed){a._eventTarget.fire(VCPlayControllerEvent.SWAP_MIXED_VIDEO)}else{a._eventTarget.fire(VCPlayControllerEvent.SWAP_MULTI_VIDEO)}},toggleMediaScriptManually:function(){var a=bcPlayController.getPlayController();a.setIsMediaScriptOn(!a._isMediaScriptOn);if(a._isMediaScriptOn){a._eventTarget.fire(VCPlayControllerEvent.SHOW_MEDIA_SCRIPT)}else{a._eventTarget.fire(VCPlayControllerEvent.HIDE_MEDIA_SCRIPT)}},toggleCaptionScriptManually:function(){var a=bcPlayController.getPlayController();a.setIsCaptionScriptOn(!a._isCaptionScriptOn);if(a._isCaptionScriptOn){a._eventTarget.fire(VCPlayControllerEvent.SHOW_CAPTION_SCRIPT)}else{a._eventTarget.fire(VCPlayControllerEvent.HIDE_CAPTION_SCRIPT)}},setCurrVideoType:function(a){this._currVideoType=a;this.setCurrVideoTypeUI(a)},setCurrVideoTypeUI:function(b){if(b==null){return}var d=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType;if(d==ContentType.VIDEO3){for(var a=0;a<this._swapVideoList.length;a++){var c="#vc-pctrl-swap-item-"+this._swapVideoList[a];if(this._swapVideoList[a]==b){$(c).removeClass("vc-pctrl-swap-item-unselected").addClass("vc-pctrl-swap-item-selected")}else{$(c).removeClass("vc-pctrl-swap-item-selected").addClass("vc-pctrl-swap-item-unselected")}}}},getPlayMode:function(){return this._currPlayMode},setPlayMode:function(a){if(a==null){return}this._currPlayMode=a;this.setPlayModeUI(a)},setPlayModeUI:function(a){if(a==null){return}},changeCurrVideoManually:function(a){if(a==this._currVideoType){return}this.setCurrVideoType(a);this._eventTarget.fire(VCPlayControllerEvent.SWAP_VIDEO,a)},onSwapItemClicked:function(){var a=bcPlayController.getPlayController();var b=$(this).attr("id").replace("vc-pctrl-swap-item-","");a.toggleSwapSelectBoxShowHide();a.changeCurrVideoManually(b)},initSwapSelectBoxUI:function(d,a){$(".vc-pctrl-swap-select-box").empty();this._swapVideoList=[];this._swapVideoList.push(VideoType.SUB_MEDIA);this._swapVideoList.push(VideoType.MAIN_MEDIA);if(d>=1){this._swapVideoList.push(VideoType.EXTRA_MEDIA)}if(d>=2){this._swapVideoList.push(VideoType.EXTRA_MEDIA2)}for(var c=0;c<this._swapVideoList.length;c++){var f="vc-pctrl-swap-item-"+this._swapVideoList[c];var b=this._swapVideoList[c];if(a&&c==this._swapVideoList.length-1){b=VideoType.MIXED_MEDIA}var e;if(this._currVideoType==this._swapVideoList[c]){e="vc-pctrl-swap-item-selected"}else{e="vc-pctrl-swap-item-unselected"}$("<div>").attr("id",f).addClass("vc-pctrl-swap-item").addClass(e).text(b).appendTo(".vc-pctrl-swap-select-box");this.attachSwapItemEvent(f)}},attachSwapItemEvent:function(a){a="#"+a;this.attachClickEvent(a,this.onSwapItemClicked)},hideMobileSwapVideoBtn:function(){$(".vc-pctrl-swap-video-btn").hide()},showSwapSelectBox:function(){var b=$(LayoutIdTable.PLAY_CONTROLLER).width();var c=$(".vc-pctrl-swap-video-btn").width();var a=b-$(".vc-pctrl-swap-video-btn").position().left-c;var d=$(".vc-pctrl-swap-select-box").width();$(".vc-pctrl-swap-select-box").css("right",a+c/2-d/2);$(".vc-pctrl-swap-select-box").show();this._isSwapSelectBoxShown=true},hideSwapSelectBox:function(){$(".vc-pctrl-swap-select-box").hide();this._isSwapSelectBoxShown=false},setDurationUI:function(a){if(!a){return}$(".vc-pctrl-total-duration").text(Util.secToTimerString(a))},setCurrentTimeUI:function(b,a){if(!a){return}$(".vc-pctrl-curr-time").text(Util.secToTimerString(b));this.setPlayProgressUI(b,a);this.setSeekThumbUI(b,a)},initIntroProgressUI:function(){$(".vc-pctrl-intro-play-progress").css("width","0%")},setPlayProgressUI:function(f,e){var d=this.getControllerWidth();var b=(d)/d*100;var c=(f/e*b).toFixed(2);if(c>100){c=100}c=c.toString();var a=(uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro)?".vc-pctrl-intro-play-progress":".vc-pctrl-play-progress";$(a).css("width","{0}%".format(c))},setSeekLimitProgressUI:function(a,c){var b=(a/c)*100;$(".vc-pctrl-seek-limit-progress").css("width","{0}%".format(b))},setSeekThumbUI:function(f,e){var d=this.getControllerWidth();var b=$(".vc-pctrl-seek-thumb").width();var a=(d-b)/d*100;var c=f/e*a;if(c<0){c=0}c=c.toFixed(2).toString();$(".vc-pctrl-seek-thumb").css("left","{0}%".format(c))},setBufferedUI:function(a,c){if(!c){return}var b=((a/c)*100).toFixed(2);if(b>100){b=100}b=b.toString();$(".vc-pctrl-load-progress").css("width","{0}%".format(b))},setIsPlayingUI:function(a){if(a){$(".vc-pctrl-play-pause-btn").removeClass("vc-pctrl-on-pause").addClass("vc-pctrl-on-playing")}else{$(".vc-pctrl-play-pause-btn").removeClass("vc-pctrl-on-playing").addClass("vc-pctrl-on-pause")}this.setPlayPauseBtnTitle(a)},setIsFullScreenUI:function(a){if(a){$(".vc-pctrl-fullscreen-btn").removeClass("vc-pctrl-on-normal-screen").addClass("vc-pctrl-on-full-screen")}else{$(".vc-pctrl-fullscreen-btn").removeClass("vc-pctrl-on-full-screen").addClass("vc-pctrl-on-normal-screen")}this.setFullscreenBtnTitle(a)},setVolumeUI:function(a){this.setVolumeBtnUI(a);this.setVolumeGaugeUI(a);this.setVolumeThumbUI(a)},setVolumeBtnUI:function(a){if(a==0){$(".vc-pctrl-volume-btn").addClass("muted")}else{$(".vc-pctrl-volume-btn").removeClass("muted")}this.setVolumeBtnTitle(this._isMuted)},setVolumeGaugeUI:function(a){$(".vc-pctrl-volume-gauge").css("width","{0}%".format(a*100))},setVolumeThumbUI:function(b){var a=this.getVolumeSliderWidth();a=a-$(".vc-pctrl-volume-thumb").width();var c=a*b;$(".vc-pctrl-volume-thumb").css("margin-left","{0}px".format(c))},setPlaybackRateUI:function(){var a=uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming();var b=uniPlayerConfig.getMediaChannelConfig().useHLSStreaming();if(skinManager.isDesktop()){if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!a&&!(skinManager.isFirefox()&&false==skinManager.isHlsSupported())&&!uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro){if(b&&true!=skinManager.isHlsSupported()){$(".vc-pctrl-playback-rate-toggle-btn").hide()}else{$(".vc-pctrl-playback-rate-toggle-btn").show()}}else{$(".vc-pctrl-playback-rate-toggle-btn").hide()}}else{if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate&&!uniPlayerConfig.getMediaChannelConfig()._playingInfo.isIntro){$(".vc-pctrl-playback-rate-toggle-btn").show()}else{$(".vc-pctrl-playback-rate-toggle-btn").hide()}}},selectPlaybackRate:function(b){var a=this.convertPlaybackRateNumber(b);$(".vc-pctrl-playback-rate-toggle-btn").text("x "+a);$(".vc-pctrl-playback-rate-btn").removeClass("selected");$(VCPlayControllerMedia.PLAYBACK_RATE_BTN_CLASS).each(function(){if(Number($(this).text())==a){$(this).addClass("selected")}})},setUnavailableCCMsgUI:function(a){if(a){$(".vc-pctrl-caption-unavailable-msg").css("display","block")}else{$(".vc-pctrl-caption-unavailable-msg").css("display","none")}},setCCUI:function(a){if(a){$(".vc-pctrl-cc-btn").removeClass("vc-pctrl-cc-off").addClass("vc-pctrl-cc-on")}else{$(".vc-pctrl-cc-btn").removeClass("vc-pctrl-cc-on").addClass("vc-pctrl-cc-off")}},setChapterUI:function(a){if(a){$(".vc-pctrl-chapter-btn").addClass("selected")}else{$(".vc-pctrl-chapter-btn").removeClass("selected")}},setIsMixedUI:function(a){if(a){$(".vc-pctrl-mixed-multi-btn").removeClass("vc-pctrl-on-mixed").addClass("vc-pctrl-on-multi");$(".vc-pctrl-mixed-multi-btn").text("Multi")}else{$(".vc-pctrl-mixed-multi-btn").removeClass("vc-pctrl-on-multi").addClass("vc-pctrl-on-mixed");$(".vc-pctrl-mixed-multi-btn").text("Mixed")}this.setMixedMultiBtnTitle(a)},setIsMediaScriptUI:function(a){if(a){$(VCPlayControllerMedia.MEDIA_SCRIPT_BTN_CLASS).removeClass("vc-pctrl-media-script-off").addClass("vc-pctrl-media-script-on")}else{$(VCPlayControllerMedia.MEDIA_SCRIPT_BTN_CLASS).removeClass("vc-pctrl-media-script-on").addClass("vc-pctrl-media-script-off")}},setIsCaptionScriptUI:function(a){if(a){$(VCPlayControllerMedia.CAPTION_SCRIPT_BTN_CLASS).removeClass("vc-pctrl-caption-script-off").addClass("vc-pctrl-caption-script-on")}else{$(VCPlayControllerMedia.CAPTION_SCRIPT_BTN_CLASS).removeClass("vc-pctrl-caption-script-on").addClass("vc-pctrl-caption-script-off")}},setPlaybackRateSetBox:function(){var e=uniPlayerConfig.getUniPlayerSettingsData();if(!((skinManager.isDesktop()&&e.usePlaybackRate)||(skinManager.isMobile()&&e.usePlaybackRate&&e.useMobilePlaybackRate))){return}for(var b=0;b<e.playbackRateRange.length;b++){if(e.playbackRateRange[b]>e.maxPlaybackRate){break}var c="";if(e.playbackRateRange[b]==e.playbackRateRangeDefault){c="selected"}var d=e.playbackRateRange[b]*10;var f="vc-pctrl-playback-rate-"+(d<10?"0":"")+d;var a=e.playbackRateRange[b].toFixed(2);if(a.substring(a.length-1)=="0"){a=a.substring(0,a.length-1)}$("<div>").attr("id",f).addClass("vc-pctrl-playback-rate-btn").addClass(c).text(a).appendTo(VCPlayControllerMedia.PLAYBACK_RATE_SETBOX_CLASS);this.attachClickEvent(".vc-pctrl-playback-rate-btn",this.onPlaybackRateButtonClicked)}},setDuration:function(a){this._duration=a;this.setDurationUI(a)},setCurrentTime:function(b,a){if(!a&&this._isSeeking){return}if(b>this._duration){b=this._duration}if(b<0){b=0}this._currTime=b;this.setCurrentTimeUI(b,this._duration);if(this._seekLimit&&this._limitTime<b){this._limitTime=b}},setBuffered:function(a){this._buffered=a;this.setBufferedUI(a,this._duration)},setIsPlaying:function(a){this._isPlaying=a;this.setIsPlayingUI(a)},getIsPlaying:function(){return this._isPlaying},setIsMixed:function(a){this._isMixed=a;this.setIsMixedUI(a)},setIsMediaScriptOn:function(a){this._isMediaScriptOn=a;this.setIsMediaScriptUI(a)},setIsCaptionScriptOn:function(a){this._isCaptionScriptOn=a;this.setIsCaptionScriptUI(a)},setIsFullScreen:function(a){this._isFullScreen=a;this.setIsFullScreenUI(a)},setIsChapterOn:function(a){this._isChapterOn=a},hideFullScreenBtn:function(){$(".vc-pctrl-fullscreen-btn").hide()},showFullScreenBtn:function(){if(uniPlayerConfig.getViewMode()==UniPlayerApp.VIEW_MODE_LOCAL){return}$(".vc-pctrl-fullscreen-btn").show()},hideCaptionScript:function(){var a=bcPlayController.getPlayController();a.setIsCaptionScriptOn(false)},setVolume:function(a){if(a==0){this._isMuted=true;if(this._volumeBeforeMute==-1){this._volumeBeforeMute=0.5}}else{this._isMuted=false}this._volume=a;this.setVolumeUI(a)},setSeekable:function(a){this._isSeekable=a},setIsControllable:function(a){this._isControllable=a},setParentContainerElement:function(a){this._parentContainerElement=a},setSeekLimit:function(a){if(!this._duration){return}this._seekLimit=true;this._limitTime=a;this.setSeekLimitProgressUI(a,this._duration)},updateSeekLimit:function(a){this.setSeekLimitProgressUI(a,this._duration);this._limitTime=a},isPlaybackRateSetBoxShown:function(){return this._isPlaybackRateSetBoxShown},isCCSetBoxShown:function(){return this._isCCSetBoxShown},isProfileSetBoxShown:function(){return this._isProfileSetBoxShown},isSwapSelectBoxShown:function(){return this._isSwapSelectBoxShown},isMouseOver:function(){return this._isMouseOver},isCCOn:function(){return !(this._currCCItemIndex==this._CCList.length)},isSeeking:function(){return this._isSeeking},showRestartBtn:function(){$(VCPlayControllerMedia.PLAY_PAUSE_BTN_CLASS).hide();$(VCPlayControllerMedia.RESTART_BTN_CLASS).show()},hideRestartBtn:function(){$(VCPlayControllerMedia.PLAY_PAUSE_BTN_CLASS).show();$(VCPlayControllerMedia.RESTART_BTN_CLASS).hide()},getControllerWidth:function(){if(Util.isIE11embedFullScreen()){return $(window).innerWidth()}return $(LayoutIdTable.PLAY_CONTROLLER).innerWidth()},getVolumeSliderWidth:function(){if(Util.isIE11embedFullScreen()){return VCPlayControllerMedia.VOLUME_SLIDER_WIDTH}return $(".vc-pctrl-volume-slider").width()},isElementShown:function(a){return !($(a).css("display")=="none")},getElementOuterWidthIfShown:function(a){if(!this.isElementShown(a)){return 0}return $(a).innerWidth()},getProfileToggleBtnWidthIfShown:function(){if(!this.isElementShown(".vc-pctrl-profile-toggle-btn")){return 0}return VCPlayControllerMedia.PROFILE_TOGGLE_BTN_WIDTH},enableMixedMultiBtn:function(a){if(a){$(VCPlayControllerMedia.MIXED_MULTI_BTN_CLASS).show()}else{$(VCPlayControllerMedia.MIXED_MULTI_BTN_CLASS).hide()}}},{VIDEO_SWAP_BTN_CLASS:".vc-pctrl-swap-video-btn",VIDEO_SWAP_BTN_TEXT:".vc-pctrl-swap-video-btn-text",SYNCDOC_SWAP_BTN_CLASS:".vc-pctrl-swap-syncdoc-btn",SYNCDOC_SWAP_BTN_TEXT:".vc-pctrl-swap-syncdoc-btn-text",CC_BTN_CLASS:".vc-pctrl-cc-btn",PROFILE_BTN_CLASS:".vc-pctrl-profile-toggle-btn",CHAPTER_BTN_CLASS:".vc-pctrl-chapter-btn",MIXED_MULTI_BTN_CLASS:".vc-pctrl-mixed-multi-btn",MEDIA_SCRIPT_BTN_CLASS:".vc-pctrl-media-script-btn",CAPTION_SCRIPT_BTN_CLASS:".vc-pctrl-caption-script-btn",MOVING_TIME:10,MOVING_VOLUME:0.05,CONTAINER_CLASS:".vc-pctrl-container",CC_SETBOX_WIDTH:54,PROFILE_SETBOX_WIDTH:50,PLAYBACKRATE_SETBOX_WIDTH:50,VOLUME_SLIDER_LEFT:84,VOLUME_SLIDER_WIDTH:54,PROFILE_TOGGLE_BTN_WIDTH:62,PLAYBACKRATE_TOGGLE_BTN_WIDTH:62,PLAYBACK_RATE_SETBOX_CLASS:".vc-pctrl-playback-rate-setbox",PLAYBACK_RATE_BTN_ID:"vc-pctrl-playback-rate-",PLAYBACK_RATE_BTN_CLASS:".vc-pctrl-playback-rate-btn",PLAYBACK_RATE_UNAVAILABLE_MSG:".vc-pctrl-playback-unavailable-msg",FULLSCREEN_UNAVAILABLE_MSG:".vc-pctrl-fullscreen-unavailable-msg",PLAY_PAUSE_BTN_CLASS:".vc-pctrl-play-pause-btn",RESTART_BTN_CLASS:".vc-pctrl-restart-btn",CAPTION_OFF_LABEL:"Off"});var VCPlayControllerEvent={PLAY:"pctrl_play",PAUSE:"pctrl_pause",SEEK_END:"pctrl_seek_end",SEEK_START:"pctrl_seek_start",CC_TOGGLE:"pctrl_cc_toggle",FULL_SCREEN:"pctrl_full_screen",CLOSE_FULL_SCREEN:"pctrl_close_full_screen",CHANGE_VOLUME:"pctrl_volume",SWAP_VIDEO:"pctrl_swap_video",SWAP_SYNCDOC:"pctrl_swap_syncdoc",SHOW_CHAPTER:"pctrl_show_chapter",HIDE_CHAPTER:"pctrl_hide_chapter",CHANGE_PLAYBACK_RATE:"pctrl_change_playback_rate",CHANGE_PROFILE:"pctrl_change_profile",SHOW_CC:"pctrl_show_cc",HIDE_CC:"pctrl_hide_cc",CC_ITEM_SELECTED:"pctrl_cc_item_select",RELOAD_PLAYER:"pctrl_reload_player",SWAP_MIXED_VIDEO:"pctrl_swap_mixed_video",SWAP_MULTI_VIDEO:"pctrl_swap_multi_video",SHOW_MEDIA_SCRIPT:"pctrl_show_media_script",HIDE_MEDIA_SCRIPT:"pctrl_hide_media_script",SHOW_CAPTION_SCRIPT:"pctrl_show_caption_script",HIDE_CAPTION_SCRIPT:"pctrl_hide_caption_script"};var VCPlayControllerDocEvent={PREV_PAGE:"pctrldoc_prev_page",NEXT_PAGE:"pctrldoc_next_page",CHANGE_PAGE:"pctrldoc_change_page",ZOOM_IN:"pctrldoc_zoom_in",ZOOM_OUT:"pctrldoc_zoom_out",CHANGE_SCALE:"pctrldoc_change_scale",SET_SCALE:"pctrldoc_set_scale",CHANGE_SCALE_MODE:"pctrldoc_change_scale_mode",CHANGE_VIEW_MODE:"pctrldoc_change_viewmode",SHOW_CHAPTER:"pctrldoc_show_chapter",HIDE_CHAPTER:"pctrldoc_hide_chapter",FULL_SCREEN:"pctrldoc_full_screen",CLOSE_FULL_SCREEN:"pctrldoc_close_full_screen",CHANGE_TO_EBOOK_MODE:"pctrldoc_change_to_ebook_mode",CHANGE_TO_NORMAL_MODE:"pctrldoc_change_to_normal_mode",TOOLS_MOUSE_OVER:"pctrldoc_controller_mouse_over",TOOLS_MOUSE_LEAVE:"pctrldoc_controller_mouse_leave",DOWNLOAD_PDF:"pctrldoc_controller_download_pdf"};var VCChapter=VisualComponent.extend({_scrollApi:null,_isScrolled:true,_seekLimit:false,_limitTime:0,_scrollUpdateTimeout:null,_curPlayingChapterIndex:-1,getScrollApi:function(){return this._scrollApi},setSeekLimit:function(a){if(!this._chapterList){return}if(a==-9999||a==-8888){return}this._seekLimit=true;this._limitTime=a},setSeekLimitChapter:function(a,b){if(!this._seekLimit){return}for(var d in this._chapterList){var c="#"+b+d.toString();if(parseFloat(this._chapterList[d]._time._from)>parseFloat(a)){$(c).addClass("seek-limit")}else{$(c).removeClass("seek-limit")}}},getChapterId:function(e,b,f){var d=Util.objectKeys(this._chapterList);if(d.length==0){return null}for(var a=0;a<d.length;a++){var c=d[a];if(this._chapterList[c]._type!=b){continue}if(f&&this._chapterList[c]._visible!=true){continue}if(this._chapterList[c]._time._from<=e&&this._chapterList[c]._time._to>e){return c}}return null}});var ChapterTmplData=Base.extend({index:0,itemId:null,pageIdx:0,type:null,storyIdref:null,thumbUrl:null,time:null,index:null,description:null});var StoryTmplData=ChapterTmplData.extend({isStory:true});var SlideTmplData=ChapterTmplData.extend({isStory:false});var VCChapterHorizontal=VCChapter.extend({_isMouseOver:false,showChapter:function(){if(bcChapterHorizontal._chapterList==null){return}if(Util.objectKeys(bcChapterHorizontal._chapterList).length==0){return}$(LayoutIdTable.CHAPTER_HORIZONTAL).show()},hideChapter:function(){$(LayoutIdTable.CHAPTER_HORIZONTAL).hide()},showChapterPanel:function(){$(VCChapterHorizontal.CHAPTER_CONTAINER_CLASS_HORIZONTAL).css("visibility","visible");$(VCChapterHorizontal.CHAPTER_MASK_CLASS).css("visibility","hidden")},hideChapterPanel:function(){$(VCChapterHorizontal.CHAPTER_CONTAINER_CLASS_HORIZONTAL).css("visibility","hidden");$(VCChapterHorizontal.CHAPTER_MASK_CLASS).css("visibility","visible")},resize:function(){if(bcChapterHorizontal._chapterList){var a=bcChapterHorizontal._vcChapterHorizontal.getTotalChapterContentWidth();var b=$(window).innerWidth();if(uniPlayerConfig.getIsFitToElement()){b=$(uniPlayer.getTargetElement()).innerWidth()}var c=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){b=b-c.width()}$(LayoutIdTable.CHAPTER_HORIZONTAL).css("width",b);if(b>=a){$(LayoutIdTable.CHAPTER_HORIZONTAL).css("height","108px")}else{$(LayoutIdTable.CHAPTER_HORIZONTAL).css("height","124px")}}if(this._scrollApi&&!this._scrollUpdateTimeout){this._scrollUpdateTimeout=setTimeout(this.updateScroll,50)}},updateScroll:function(){var a=bcChapterHorizontal.getChapter();a._scrollApi.reinitialise();a._scrollUpdateTimeout=null},attachChapterEvents:function(c,a){var b="#"+a+c.toString();this.attachClickEvent(b,function(f){var d=bcChapterHorizontal.getChapter();d.onChapterItemClicked(this)})},attachMouseEvent:function(){$(LayoutIdTable.CHAPTER_HORIZONTAL).bind("mouseover",this.onMouseOver);$(LayoutIdTable.CHAPTER_HORIZONTAL).bind("mouseleave",this.onMouseLeave)},attachScrollEvent:function(a){$(".vc-chapter-list-horizontal").on("scrollstart",function(){var b=bcChapterHorizontal.getChapter();b._isScrolled=true})},onChapterItemClicked:function(a){var b=bcChapterHorizontal.getChapter();var c=$(a).attr("id");b._eventTarget.fire(VCChapterEvent.ITEM_CLICKED,c)},addHighlight:function(a){$("#vc-chapter-item-horizontal-"+a).addClass("vc-chapter-highlighted")},removeHighlight:function(a){$("#vc-chapter-item-horizontal-"+a).removeClass("vc-chapter-highlighted")},writeChapterList:function(a,b){$(VCChapterHorizontal.LIST_CONTAINER_CLASS_HORIZONTAL).html(a);setTimeout(function(){var c=bcChapterHorizontal.getChapter();c.initScrolls();c.resize();b()},200)},initScrolls:function(){$(VCChapterHorizontal.LIST_CONTAINER_CLASS_HORIZONTAL).jScrollPane({animateScroll:true});this._scrollApi=$(VCChapterHorizontal.LIST_CONTAINER_CLASS_HORIZONTAL).data("jsp");this.attachClickEvent(VCChapterHorizontal.LEFT_BTN_CLASS,this.scrollMoveToLeft);this.attachClickEvent(VCChapterHorizontal.RIGHT_BTN_CLASS,this.scrollMoveToRight)},getChapterOffset:function(){var a=$(".vc-chapter-list-wrapper-horizontal").width();var b=$(".vc-chapter-item-horizontal").innerWidth();var c=a/b;return parseInt(c/2)},getTotalChapterContentWidth:function(){if(bcChapterHorizontal._chapterList==null){return 0}var j=Util.objectKeys(bcChapterHorizontal._chapterList);if(j.length==0){return 0}var k=[];var c=0;for(var d=0;d<j.length;d++){var g=j[d];if(bcChapterHorizontal._chapterList[g]._type==ChapterType.STORY){continue}k[c++]=g}if(c==0){return 0}var e="#vc-chapter-item-horizontal-"+k[0];var b=$(e).outerWidth();if(!b){return}var a=$(e).css("margin-left");a=Number(a.replace("px",""));var f=$(e).css("margin-right");f=Number(f.replace("px",""));var h=$(VCChapterHorizontal.LEFT_BTN_CLASS).outerWidth();return(b+a+f)*c+h*2},onMouseOver:function(){var a=bcChapterHorizontal.getChapter();a._eventTarget.fire(VCChapterEvent.MOUSE_OVER)},onMouseLeave:function(){var a=bcChapterHorizontal.getChapter();a._eventTarget.fire(VCChapterEvent.MOUSE_LEAVE)},isMouseOver:function(){return this._isMouseOver},scrollMoveToRight:function(){var a=bcChapterHorizontal.getChapter();if(a._scrollApi==null){return}a._scrollApi.scrollBy(90)},scrollMoveToLeft:function(){var a=bcChapterHorizontal.getChapter();if(a._scrollApi==null){return}a._scrollApi.scrollBy(-90)},scrollToLeft:function(a){var b=$("#"+BCChapterHorizontal.ITEM_ID_PREFIX_HORIZONTAL+a);try{this._scrollApi.scrollToElement(b,true,true)}catch(c){}}},{CHAPTER_CONTAINER_CLASS_HORIZONTAL:".vc-chapter-container-horizontal",CHAPTER_MASK_CLASS:".vc-chapter-transparent-mask-horizontal",LIST_CONTAINER_CLASS_HORIZONTAL:".vc-chapter-list-horizontal",LEFT_BTN_CLASS:".vc-chapter-left-btn-horizontal",RIGHT_BTN_CLASS:".vc-chapter-right-btn-horizontal"});var VCChapterVerticalMedia=VCChapter.extend({_displayType:null,_lastScrollY:0,_lastScrollYWhenTouchStarted:0,setDisplayType:function(a){this._displayType=a;switch(a){case ChapterDisplayType.THUMBNAIL:$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).addClass("type-thumbnail");break;case ChapterDisplayType.THUMBNAIL_LAYER:$(LayoutIdTable.CHAPTER_VERTICAL).addClass("type-layer");$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).addClass("type-thumbnail");break;case ChapterDisplayType.TEXT:$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).addClass("type-text");break;case ChapterDisplayType.TEXT_LAYER:$(LayoutIdTable.CHAPTER_VERTICAL).addClass("type-layer");$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).addClass("type-text");break}},showChapter:function(){if(skinManager.isMobile()){if(skinManager.isIOS()){$(LayoutIdTable.CHAPTER_VERTICAL).show()}$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","visible")}else{$(LayoutIdTable.CHAPTER_VERTICAL).show()}},hideChapter:function(){if(skinManager.isMobile()){if(skinManager.isIOS()){$(LayoutIdTable.CHAPTER_VERTICAL).hide()}$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","hidden")}else{$(LayoutIdTable.CHAPTER_VERTICAL).hide()}},resize:function(a){if(skinManager.isMobile()){this.resizeMobile()}else{this.resizeDesktop(a)}if(this._scrollApi&&!this._scrollUpdateTimeout){this._scrollUpdateTimeout=setTimeout(this.updateScroll,50)}},resizeMobile:function(){var b=$(window).innerWidth();var d=$(VCChapterVerticalMedia.THUMB_BOX_CLASS).outerWidth();var c=$(VCChapterVerticalMedia.INDEX_CLASS).outerWidth();$(VCChapterVerticalMedia.DESCRIPTION_CLASS).css("width",b-d-c-30);var a=$(window).height()-$(LayoutIdTable.CONTENT_METADATA).height()-$(LayoutIdTable.PLAY_CONTROLLER).height();$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).css("height",a);$(LayoutIdTable.CHAPTER_VERTICAL).css("top",$(LayoutIdTable.CONTENT_METADATA).height())},resizeDesktop:function(j){var e;var k;var h=false;var g;if(j){g=$(LayoutIdTable.CONTENT_METADATA).height()}else{g=0}var a=$(LayoutIdTable.PLAY_CONTROLLER).height();var c=$(window).width();var b=$(window).height();if(uniPlayerConfig.getIsFitToElement()){c=$(uniPlayer.getTargetElement()).innerWidth();b=$(uniPlayer.getTargetElement()).innerHeight()}switch(this._displayType){case ChapterDisplayType.THUMBNAIL:case ChapterDisplayType.TEXT:if(c<bcChapterVertical.getPushChapterMinWidth()){h=true}else{h=false}break;case ChapterDisplayType.THUMBNAIL_LAYER:case ChapterDisplayType.TEXT_LAYER:h=true;break}if(h){e=b-g-a;k=g;$(LayoutIdTable.CHAPTER_VERTICAL).css("position","absolute");var d="0px";var i=$(LayoutIdTable.MEDIA_SCRIPT);if(false==skinManager.isMobile()&&bcMediaScript.isMediaScriptShown()){d=(i.width()+2)+"px"}$(LayoutIdTable.CHAPTER_VERTICAL).css("right",d);$(LayoutIdTable.CHAPTER_VERTICAL).addClass("type-layer")}else{e=$(window).height();k=0;$(LayoutIdTable.CHAPTER_VERTICAL).css("position","relative");$(LayoutIdTable.CHAPTER_VERTICAL).css("right","");$(LayoutIdTable.CHAPTER_VERTICAL).removeClass("type-layer")}$(LayoutIdTable.CHAPTER_VERTICAL).css("height",e);$(LayoutIdTable.CHAPTER_VERTICAL).css("top",k);var f=$(VCChapterVerticalMedia.TOP_ITEM_CLASS).height();$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).css("height",e-f)},updateScroll:function(){var a=bcChapterVertical.getChapter();if(bcChapterVertical.isChapterShown()){a._scrollApi.reinitialise()}a._scrollUpdateTimeout=null},attachChapterEvents:function(c,a){var b="#"+a+c.toString();if(skinManager.isMobile()){this.attachMobileChapterEvents(b)}else{this.attachDesktopChapterEvents(b)}},attachMobileChapterEvents:function(a){$(a).bind("touchstart",function(c){$(a).addClass("mobile-touch-over");var b=bcChapterVertical.getChapter();b._lastScrollYWhenTouchedStarted=b._lastScrollY});$(a).bind("touchend",function(c){$(a).removeClass("mobile-touch-over");var b=bcChapterVertical.getChapter();var d=Math.abs(b._lastScrollY-b._lastScrollYWhenTouchedStarted);if(d<5){b.onChapterItemClicked(this);if(bcContentMetadata.getVCContentMetadata()){bcContentMetadata.getVCContentMetadata().changeChapterBtnState(false)}bcPlayController.getPlayController().setIsChapterOn(false);bcPlayController.getPlayController().setChapterUI(false)}})},attachDesktopChapterEvents:function(a){this.attachClickEvent(a,function(c){var b=bcChapterVertical.getChapter();b.onChapterItemClicked(this)})},onChapterItemClicked:function(a){var b=bcChapterVertical.getChapter();var c=$(a).attr("id");b._eventTarget.fire(VCChapterEvent.ITEM_CLICKED,c)},addSlideHighlight:function(a){$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+a).addClass("vc-chapter-highlighted")},removeSlideHighlight:function(a){$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+a).removeClass("vc-chapter-highlighted")},addStoryHighlight:function(a){$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+a).addClass("vc-story-highlighted")},removeStoryHighlight:function(a){$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+a).removeClass("vc-story-highlighted")},writeChapterList:function(b,a,c){if(skinManager.isIOS()){$(LayoutIdTable.CHAPTER_VERTICAL).hide()}$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).html(b);$(".vc-top-item-total").html(a);if(skinManager.isIE7()){$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+"1").css("margin-top","0px")}setTimeout(function(){var d=bcChapterVertical.getChapter();$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).bind("jsp-scroll-y",d.onJSPScrolledY).jScrollPane();d._scrollApi=$(VCChapterVerticalMedia.LIST_CONTAINER_CLASS_VERTICAL).data("jsp");c()},200)},onJSPScrolledY:function(a,b){bcChapterVertical.getChapter()._lastScrollY=b},getChapterOffset:function(){var f=$(LayoutIdTable.CONTENT_METADATA).height();var b=$(window).innerHeight();if(skinManager.isMobile()){var e=$(LayoutIdTable.PLAY_CONTROLLER).height();var a=b-f-e}else{var a=b-f}var c;switch(this._displayType){case ChapterDisplayType.THUMBNAIL:case ChapterDisplayType.THUMBNAIL_LAYER:c=VCChapterVerticalMedia.SLIDE_ELEMENT_HEIGHT_THUMBNAIL;break;case ChapterDisplayType.TEXT:case ChapterDisplayType.TEXT_LAYER:c=VCChapterVerticalMedia.SLIDE_ELEMENT_HEIGHT_TEXT;break}var d=a/c;return parseInt(d/2)},scrollToTop:function(a){var b=$("#"+BCChapterVerticalMedia.ITEM_ID_PREFIX_VERTICAL+a);this._scrollApi.scrollToElement(b,true,true)}},{SLIDE_ELEMENT_HEIGHT_TEXT:36,SLIDE_ELEMENT_HEIGHT_THUMBNAIL:64,TOC_ITEM_NAME_CLASS:".vc-top-item-name",TOP_ITEM_CLASS:".vc-top-item",CHAPTER_CONTAINER_VERTICAL_CLASS:".vc-chapter-container-vertical",LIST_CONTAINER_CLASS_VERTICAL:".vc-chapter-list-vertical",DESCRIPTION_CLASS:".vc-chapter-item-description-vertical",THUMB_BOX_CLASS:".vc-chapter-item-thumb-box-vertical",INDEX_CLASS:".vc-chapter-item-index-vertical"});var VCChapterVerticalDoc=VCChapter.extend({_lastScrollY:0,_lastScrollYWhenTouchStarted:0,showChapter:function(){if(skinManager.isMobile()){$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","visible")}else{$(LayoutIdTable.CHAPTER_VERTICAL).show()}},hideChapter:function(){if(skinManager.isMobile()){$(LayoutIdTable.CHAPTER_VERTICAL).css("visibility","hidden")}else{$(LayoutIdTable.CHAPTER_VERTICAL).hide()}},resize:function(){if(skinManager.isMobile()){this.resizeMobile()}else{this.resizeDesktop()}if(this._scrollApi&&!this._scrollUpdateTimeout){this._scrollUpdateTimeout=setTimeout(this.updateScroll,50)}},resizeMobile:function(){var a=$(VCPlayControllerDoc.MAIN_CONTROLLER_CLASS).height();var b=$(window).height()-a;if(skinManager.isIPhoneOrIPod()){b-=3}var c=$(VCChapterVerticalDoc.TOP_ITEM_CLASS).height();$(VCChapterVerticalDoc.LIST_CONTAINER_CLASS_VERTICAL).css("height",b-c);$(LayoutIdTable.CHAPTER_VERTICAL).css("top",a)},resizeDesktop:function(){var a=$(window).height();$(LayoutIdTable.CHAPTER_VERTICAL).css("height",a);var b=$(VCChapterVerticalDoc.TOP_ITEM_CLASS).height();$(VCChapterVerticalDoc.LIST_CONTAINER_CLASS_VERTICAL).css("height",a-b)},updateScroll:function(){var a=bcChapterVertical.getVCChapter();if(bcChapterVertical.isChapterShown()){a._scrollApi.reinitialise()}a._scrollUpdateTimeout=null},attachChapterEvents:function(c,a){var b="#"+a+c.toString();if(skinManager.isMobile()){this.attachMobileChapterEvents(b)}else{this.attachDesktopChapterEvents(b)}},attachMobileChapterEvents:function(a){$(a).bind("touchstart",function(c){$(a).addClass("mobile-touch-over");var b=bcChapterVertical.getVCChapter();b._lastScrollYWhenTouchedStarted=b._lastScrollY});$(a).bind("touchend",function(c){$(a).removeClass("mobile-touch-over");var b=bcChapterVertical.getVCChapter();var d=Math.abs(b._lastScrollY-b._lastScrollYWhenTouchedStarted);if(d<5){b.onChapterItemClicked(this)}})},attachDesktopChapterEvents:function(a){this.attachClickEvent(a,function(c){var b=bcChapterVertical.getVCChapter();b.onChapterItemClicked(this)})},onChapterItemClicked:function(a){var b=bcChapterVertical.getVCChapter();var c=$(a).attr("id");b._eventTarget.fire(VCChapterEvent.ITEM_CLICKED,c)},writeChapterList:function(c,b,a,e){var d;if(skinManager.isMobile()){d=VCChapterVerticalDoc.LIST_WRAPPER_CLASS_VERTICAL}else{d=VCChapterVerticalDoc.LIST_CONTAINER_CLASS_VERTICAL}$(d).html(c);$(".vc-top-item-total").html(a);if(skinManager.isIE7()){$("#"+BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL+b).css("margin-top","0px")}setTimeout(function(){var f=bcChapterVertical.getVCChapter();$(VCChapterVerticalDoc.LIST_CONTAINER_CLASS_VERTICAL).bind("jsp-scroll-y",f.onJSPScrolledY).jScrollPane();f._scrollApi=$(VCChapterVerticalDoc.LIST_CONTAINER_CLASS_VERTICAL).data("jsp");e()},200)},onJSPScrolledY:function(a,b){bcChapterVertical.getVCChapter()._lastScrollY=b},addChapterHighlight:function(a){$("#"+BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL+a).addClass("vc-chapter-highlighted")},removeChapterHighlight:function(a){$("#"+BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL+a).removeClass("vc-chapter-highlighted")},getChapterOffset:function(){var b=$(window).innerHeight();if(skinManager.isMobile()){var e=$(LayoutIdTable.PLAY_CONTROLLER).height();var a=b-e}else{var a=b}var c=$(VCChapterVerticalDoc.CHAPTER_LI_CLASS).outerHeight();var d=a/c;return parseInt(d/2)},scrollToTop:function(a){if(this._scrollApi==null){return}var b=$("#"+BCChapterVerticalDoc.ITEM_ID_PREFIX_VERTICAL+a);this._scrollApi.scrollToElement(b,true,true)},adjustMobileChapterWidth:function(g){var c=$(window).width()-30;var e=VCChapterVerticalDoc.MOBILE_CHAPTER_MARGIN;var d=(c-(g+1)*e)/g;$(VCChapterVerticalDoc.CHAPTER_IMG_CLASS).width(d);var f=$(".jspContainer").width()-9;var b=$(VCChapterVerticalDoc.CHAPTER_LI_CLASS).outerWidth(true)*g;var a=(f-b)/2;$(VCChapterVerticalDoc.LIST_WRAPPER_CLASS_VERTICAL).css("padding-left",a)}},{TOP_ITEM_CLASS:".vc-top-item",TOC_ITEM_NAME_CLASS:".vc-top-item-name",LIST_CONTAINER_CLASS_VERTICAL:".vc-chapter-list-vertical",LIST_WRAPPER_CLASS_VERTICAL:".vc-chapter-list-vertical-wrapper",CHAPTER_LI_CLASS:".vc-chapter-item-vertical",CHAPTER_IMG_CLASS:".vc-chapter-item-thumb-vertical",CHAPTER_ELEMENT_HEIGHT_THUMBNAIL:104,MOBILE_CHAPTER_MARGIN:9});var VCChapterEvent={ITEM_CLICKED:"item_clicked",SEEK:"vc_chapter_seek_to",MOUSE_OVER:"mouse_over",MOUSE_LEAVE:"mouse_leave",CHANGE_PAGE:"vc_chapter_change_page"};var VCClosedCaption=VisualComponent.extend({_onHTMLLoaded:false,_onCSSLoaded:false,_loadCompletedCallback:null,_captionIndex:-1,_cueIndex:0,_isCaptionTime:false,_caption:null,_captionList:null,showClosedCaption:function(){$(LayoutIdTable.CLOSED_CAPTION).show()},hideClosedCaption:function(){$(LayoutIdTable.CLOSED_CAPTION).hide()},getClosedCaptionWidth:function(){var a=$(LayoutIdTable.CLOSED_CAPTION).innerWidth();return a},setCaptionPosition:function(c){var a;if(c>=1000){a=0.125}else{if(c<=770){a=0.035}else{a=0.035+(c-770)/(1000-770)*(0.125-0.035)}}var b=$(LayoutIdTable.CLOSED_CAPTION);b.css("left","{0}px".format(c*a));b.css("width","{0}px".format(c*(1-a*2)))},setFontSize:function(b,a){var c=b*0.7;$(VCClosedCaption.CAPTION_TEXT_CLASS).css("font-size","{0}px".format(b));$(VCClosedCaption.CAPTION_TEXT_CLASS).css("padding-left","{0}px".format(c));$(VCClosedCaption.CAPTION_TEXT_CLASS).css("padding-right","{0}px".format(c));$(VCClosedCaption.CAPTION_TEXT_CLASS).css("border-radius","{0}px".format(a))},setCaptionText:function(f,b){this.eraseCaptionText();if(f==null||f.trim()==""){return}var c=f.split("\n");var d=b*0.7;for(var a in c){var e=VCClosedCaption.CAPTION_TEXT_NAME+a.toString();$("<span>").attr("id",e).addClass(VCClosedCaption.CAPTION_TEXT_NAME).css("font-size","{0}px".format(b)).css("padding-left","{0}px".format(d)).css("padding-right","{0}px".format(d)).text(c[a]).appendTo(VCClosedCaption.CAPTION_WINDOW_CLASS);if(Number(a)!=c.length-1){$("<br>").appendTo(VCClosedCaption.CAPTION_WINDOW_CLASS)}}},eraseCaptionText:function(){$(VCClosedCaption.CAPTION_WINDOW_CLASS).empty()},showHTML5InlineCaptionForMobile:function(a,d,b){this.hideHTML5InlineCaptionForMobile();if(d==null||b<0||b>=d.length){return}var c=d[b];$("<track>",{kind:"captions",srclang:c.lang,src:c.uri,"default":""}).appendTo(a)},hideHTML5InlineCaptionForMobile:function(a){$(a).empty()},adjustCaptionVerticalPosition:function(b){var c=$(LayoutIdTable.PLAY_CONTROLLER).innerHeight();var a;if(!b){a=20}else{a=8+c}$(LayoutIdTable.CLOSED_CAPTION).css("bottom",a+"px")}},{CAPTION_TEXT_CLASS:".vc-cc-caption-text",CAPTION_WINDOW_CLASS:".vc-cc-caption",CAPTION_TEXT_NAME:"vc-cc-caption-text"});var VCSlide=VisualComponent.extend({_parent:null,_isSyncMode:null,_slideListInfo:null,_docData:null,_docPlayer:null,_docEventTarget:null,_currSlideId:null,_currImageIdx:null,_accumulatedSlidePages:[],constructor:function(){this._accumulatedSlidePages=[];this._currSlideId=null;this._currImageIdx=null},initialize:function(e,c,d,a,b){this._parent=e;this._slideListInfo=c;this._isSyncMode=d;this._docPlayer=new DocPlayer();var f=new SlideDocDataConverter();this._docData=f.convertSlideDataToDocData(this._slideListInfo,!this._isSyncMode);this._currSlideId=a;this._currImageIdx=b;this.setAccumulatedSlidePages();this.runDocPlayer()},runDocPlayer:function(){var c=Util.urlMerge(uniPlayerConfig.getUniPlayerSettingsData().playerUri,"external-library/pdf.js/pdf.worker.js");var a=Util.urlMerge(uniPlayerConfig.getUniPlayerSettingsData().playerUri,"external-library/pdf.js/cmaps/");var d=this.convertSlideIdxToPage(this._currSlideId,this._currImageIdx);if(d<0){d=1}this._docEventTarget=new EventTargetArgs();this._docEventTarget.addListener(DocPlayerEvent.INITIALIZED,this.onDocPlayerInitialized);this._docEventTarget.addListener(DocPlayerEvent.PAGE_CHANGE,this.onDocPlayerPageChanged);this._docPlayer.addEventTarget(this._docEventTarget);this._docPlayer.setPDFWorkerSrc(c);this._docPlayer.setCmapUrl(a);var b=!this._isSyncMode;this._docPlayer.init(this._parent.find(VCSlide.SLIDE_AREA_CLASS),this._docData,this.getDocPlayerMode(),{page:d,scale:DocScaleValue.FIT_TO_WIDTH,layoutMode:DocLayoutMode.ONE_PAGE,customPageMargins:{one_page_scroll:[1,0,1,0]},usePageMargin:b})},setAccumulatedSlidePages:function(){var c=this._slideListInfo._slideList;for(var b=0;b<c.length;b++){var a=(b==0)?0:this._accumulatedSlidePages[b-1];if(this._isSyncMode&&this.getDocPlayerMode()==DocPlayerMode.IMAGE){this._accumulatedSlidePages[b]=a+c[b]._slideImageList.length}else{this._accumulatedSlidePages[b]=a+1}}},release:function(){if(this._docPlayer){this._docPlayer.release()}this._parent.find(VCSlide.SLIDE_AREA_CLASS).empty()},setSyncMode:function(c){this._isSyncMode=c;if(!this._docPlayer.isInitialized()){return}var d=!this._isSyncMode;var a=this.getScaleModeForCurrState();var b=this.getLayoutModeForCurrState();this._docPlayer.setUsePageMargin(d);this._docPlayer.setScale(a);this._docPlayer.setLayoutMode(b);this.resize()},isVerticalSlide:function(){if(this._docPlayer.isInitialized()){var a=this._docPlayer.getDefaultHeight();var b=this._docPlayer.getDefaultWidth();return(a>b)}},showSlide:function(){this._parent.find(VCSlide.SLIDE_CONTAINER_CLASS).show();this.resize()},hideSlide:function(){this._parent.find(VCSlide.SLIDE_CONTAINER_CLASS).hide()},gotoSlide:function(b,a){if(!this._docPlayer.isInitialized()){return}this._currSlideId=b;this._currImageIdx=a;var c=this.convertSlideIdxToPage(b,a);this._docPlayer.setPage(c)},convertSlideIdxToPage:function(e,b){if(!e||b<0){return -1}var f=this._slideListInfo._slideList;var c=-1;var a=null;for(var d=0;d<f.length;d++){if(f[d]._id==e){a=f[d];c=d;break}}if(c<0){return -1}if(a._type==SlideType.PDF){return this.getPDFSlidePage(a)}else{return this.convertPPTSlideIdxToPage(c,b)}},convertPPTSlideIdxToPage:function(b,a){var d=-1;if(this._isSyncMode&&this.getDocPlayerMode()==DocPlayerMode.IMAGE){var c=(b==0)?0:this._accumulatedSlidePages[b-1];d=c+Number(a)+1}else{d=b+1}return d},getPDFSlidePage:function(a){return Number(a._page)},nextPage:function(){if(this._docPlayer.isInitialized()){this._docPlayer.nextPage()}},prevPage:function(){if(this._docPlayer.isInitialized()){this._docPlayer.prevPage()}},getCurrPageNum:function(){if(this._docPlayer.isInitialized()){return this._docPlayer.getCurrPageNum()}return 0},zoomIn:function(){if(this._docPlayer.isInitialized()){this._docPlayer.upScale()}},zoomOut:function(){if(this._docPlayer.isInitialized()){this._docPlayer.downScale()}},setScale:function(a){if(this._docPlayer.isInitialized()){this._docPlayer.setScale(a)}},resize:function(){var a=this._parent.find(VCSlide.SLIDE_CONTAINER_CLASS).parent();var c=a.width();var b=a.height();this.resizeWithSize(c,b);syncDocPlayer.getSyncDocPlay().getSlideControllerVC().resize()},resizeWithSize:function(k,i){var c=k/i;var m=this._docPlayer.getDefaultWidth();var l=this._docPlayer.getDefaultHeight();var h=m/l;var b;var d;var g=0;var a=0;var j;if(skinManager.isDesktop()){j=this.isVerticalSlide()}else{j=this.isVerticalSlide()||!this._isSyncMode}if(j){b=k;d=i}else{if(c<h){b=k;d=k/h;g=(i-d)/2}else{b=i*h;d=i;a=(k-b)/2}}var e=this._parent.find(VCSlide.SLIDE_CONTAINER_CLASS);e.css("width",b+"px");e.css("height",d+"px");e.css("margin-top",g+"px");e.css("margin-left",a+"px");var f=this._parent.find(VCSlide.SLIDE_AREA_CLASS);f.css("width",b+"px");f.css("height",d+"px");if(this._docPlayer&&this._docPlayer.isInitialized()){this._docPlayer.resize(b,d)}},getCurrentSlideElement:function(){return this._parent.find(VCSlide.SLIDE_AREA_CLASS)},onDocPlayerInitialized:function(c){var b=syncDocPlayer.getSyncDocPlay().getSlideVC();b._docPlayer.setUsePageMargin(!b._isSyncMode);b._docPlayer.setScale(b.getScaleModeForCurrState());b._docPlayer.setLayoutMode(b.getLayoutModeForCurrState());syncDocPlayer.getSyncDocPlay().resize();var a=[b._docPlayer.getTotalPageCnt(),b._docPlayer.getCurrPageNum()];if(b._eventTarget){b._eventTarget.fire(VCSlideEvent.INITIALIZED,a)}if(b.isVerticalSlide()){noteManager.hideNotePanel()}},onDocPlayerPageChanged:function(c,b){var a=syncDocPlayer.getSyncDocPlay().getSlideVC();if(a._eventTarget){a._eventTarget.fire(VCSlideEvent.PAGE_CHANGED,b)}},getDocPlayerMode:function(){if(this._docPlayer&&this._docPlayer.isInitialized()){return this._docPlayer.getPlayerMode()}if(skinManager.isPDFSupported()&&this._docData&&this._docData._pdfUrl){return DocPlayerMode.PDF}return DocPlayerMode.IMAGE},getScaleModeForCurrState:function(){if(skinManager.isDesktop()){if(this.isVerticalSlide()||!this._isSyncMode){return DocScaleValue.FIT_TO_WIDTH}return DocScaleValue.FIT_TO_SCALE}else{if(this._isSyncMode){return DocScaleValue.FIT_TO_SCALE}else{return DocScaleValue.FIT_TO_WIDTH}}},getLayoutModeForCurrState:function(){if(!this._isSyncMode){return DocLayoutMode.ONE_PAGE_SCROLL}else{return DocLayoutMode.ONE_PAGE}},getCurrSlideId:function(){return this._currSlideId},getCurrSlideImageRef:function(){return this._currImageIdx}},{SLIDE_CONTAINER_CLASS:".vc-slide-container",SLIDE_AREA_CLASS:".vc-slide-area"});var VCSlideController=VisualComponent.extend({_parent:null,_isSyncMode:true,_lastHideControlTriggerTime:-1,_checkHideControlTimer:null,_isSlideControlsShowing:false,_totalPage:null,_currPage:null,constructor:function(){},initialize:function(b,a){this._parent=b;this._isSyncMode=a;this.attachControllerToSlideContainer();this.initControls();this.initEvents()},attachControllerToSlideContainer:function(){var b;if(skinManager.isDesktop()){b=this._parent.find(VCSlideController.SLIDE_CONTAINER_CLASS)}else{b=this._parent.find(VCSlideController.MOBILE_SLIDE_CONTAINER_CLASS)}var a=$(VCSlideController.SLIDE_CONTROLLER_CLASS);a.appendTo(b)},initControls:function(){if(syncDocPlayer.isSyncModeAvailable()){this.showSyncBtn()}else{this.hideSyncBtn()}this.setSyncMode(this._isSyncMode)},initEvents:function(){this.attachClickEvent(VCSlideController.FIT_TO_PAGE_BTN_CLASS,this.onFitToPageClicked);this.attachClickEvent(VCSlideController.FIT_TO_WIDTH_BTN_CLASS,this.onFitToWidthClicked);this.attachClickEvent(VCSlideController.NEXT_PAGE_BTN_CLASS,this.onNextPageClicked);this.attachClickEvent(VCSlideController.PREV_PAGE_BTN_CLASS,this.onPrevPageClicked);this.attachClickEvent(VCSlideController.ZOOM_IN_BTN_CLASS,this.onZoomInClicked);this.attachClickEvent(VCSlideController.ZOOM_OUT_BTN_CLASS,this.onZoomOutClicked);this.attachClickEvent(VCSlideController.SYNC_BTN_CLASS,this.onSyncBtnClicked);$(VCSlideController.OVER_LAYER_CLASS).bind("mouseover",this.onSlideControlsMouseOver);$(VCSlideController.OVER_LAYER_CLASS).bind("mouseleave",this.onSlideControlsMouseLeave)},resize:function(){this.centerAlignPagingControl();if(skinManager.isDesktop()){this.resizeTopControlsOffsetTop();this.setFloatingControlsVisibility()}},centerAlignPagingControl:function(){var a=this._parent.find(VCSlideController.PAGING_OVER_LAYER_CLASS);var b=this._parent.find(VCSlideController.SLIDE_CONTAINER_CLASS);var c=(b.width()-a.width())/2;a.css("left",c.toString()+"px")},resizeTopControlsOffsetTop:function(){if(!uniPlayerConfig.getUniPlayerSettingsData().useTitle){return}var b=$(VCSlideController.SLIDE_CONTAINER_CLASS).offset().top;var a=$(LayoutIdTable.CONTENT_METADATA).height();var c=VCSlideController.DEFAULT_CONTROL_TOP_OFFSET;var d;if(b<a){d=c+(a-b)}else{d=c}$(VCSlideController.SYNC_BTN_WRAPPER_CLASS).css("top",d.toString()+"px");$(VCSlideController.PAGING_CLASS).css("top",d.toString()+"px")},setFloatingControlsVisibility:function(){if(!skinManager.isDesktop()){return}if(!this._isSyncMode){if(VCSlideController.HEIGHT_FLOATING_CONTROL_LIMIT>=this._parent.find(VCSlideController.SLIDE_CONTAINER_CLASS).height()){this.hideFloatingControlsArea()}else{this.showFloatingControlsArea()}}},setSyncMode:function(a){this._isSyncMode=a;this.setSyncBtnUI(a);if(this._isSyncMode){this.hideSlideControlsArea();this.hideSlideControls();clearInterval(this.checkHideControlTimer)}else{this.showSlideControlsArea();this.showSlideControls();if(skinManager.isDesktop()){setInterval(this.checkHideControlTimer,100)}this._lastHideControlTriggerTime=(new Date()).getTime()}},setSyncBtnUI:function(a){if(a){$(VCSlideController.SYNC_BTN_CLASS).removeClass(VCSlideController.SLIDE_DOCUMENT_MODE);$(VCSlideController.SYNC_BTN_CLASS).addClass(VCSlideController.SLIDE_SYNCING_MODE)}else{$(VCSlideController.SYNC_BTN_CLASS).removeClass(VCSlideController.SLIDE_SYNCING_MODE);$(VCSlideController.SYNC_BTN_CLASS).addClass(VCSlideController.SLIDE_DOCUMENT_MODE)}},setTotalPage:function(a){this._totalPage=a;$(VCSlideController.TOTAL_PAGE_CLASS).text(a.toString())},setCurrPage:function(a){this._currPage=a;$(VCSlideController.CURR_PAGE_CLASS).text(a.toString())},showSyncBtn:function(){if(!syncDocPlayer.isSyncModeAvailable()||!syncDocPlayer.isDocViewModeAvailable()){$(VCSlideController.SYNC_BTN_WRAPPER_CLASS).hide();return}$(VCSlideController.SYNC_BTN_WRAPPER_CLASS).show()},hideSyncBtn:function(){$(VCSlideController.SYNC_BTN_WRAPPER_CLASS).hide()},showFitToPageBtn:function(){$(VCSlideController.FIT_TO_PAGE_BTN_CLASS).show()},hideFitToPageBtn:function(){$(VCSlideController.FIT_TO_PAGE_BTN_CLASS).hide()},showFitToWidthBtn:function(){$(VCSlideController.FIT_TO_WIDTH_BTN_CLASS).show()},hideFitToWidthBtn:function(){$(VCSlideController.FIT_TO_WIDTH_BTN_CLASS).hide()},showSlideControls:function(){this._isSlideControlsShowing=true;this.showFloatingControls();this.showPagingControl()},hideSlideControls:function(){this._isSlideControlsShowing=false;this.hideFloatingControls();this.hidePagingControl()},showFloatingControls:function(){$(VCSlideController.FLOATING_CONTROLS_CLASS).css("visibility","visible")},hideFloatingControls:function(){$(VCSlideController.FLOATING_CONTROLS_CLASS).css("visibility","hidden")},showPagingControl:function(){$(VCSlideController.PAGING_CLASS).css("visibility","visible")},hidePagingControl:function(){$(VCSlideController.PAGING_CLASS).css("visibility","hidden")},isSlideControlsShowing:function(){return this._isSlideControlsShowing},checkHideControlTimer:function(d){var b=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(!b){return}if(!b._lastHideControlTriggerTime||b._lastHideControlTriggerTime<0){return}var a=(new Date()).getTime();var c=a-b._lastHideControlTriggerTime;if(c>=3000&&b.isSlideControlsShowing()){b.hideSlideControls()}},showSlideControlsArea:function(){this.showFloatingControlsArea();this.showPagingControlArea()},hideSlideControlsArea:function(){this.hideFloatingControlsArea();this.hidePagingControlArea()},showFloatingControlsArea:function(){if(skinManager.isDesktop()){if(VCSlideController.HEIGHT_FLOATING_CONTROL_LIMIT>=this._parent.find(VCSlideController.SLIDE_CONTAINER_CLASS).height()){return}}$(VCSlideController.FLOATING_CONTROLS_OVER_LAYER_CLASS).show()},hideFloatingControlsArea:function(){$(VCSlideController.FLOATING_CONTROLS_OVER_LAYER_CLASS).hide()},showPagingControlArea:function(){$(VCSlideController.PAGING_OVER_LAYER_CLASS).show()},hidePagingControlArea:function(){$(VCSlideController.PAGING_OVER_LAYER_CLASS).hide()},onSyncBtnClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){if(a._isSyncMode){a._eventTarget.fire(VCSlideControllerEvent.SYNC_OFF)}else{a._eventTarget.fire(VCSlideControllerEvent.SYNC_ON)}}},onNextPageClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.NEXT_PAGE)}},onPrevPageClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.PREV_PAGE)}},onFitToPageClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.FIT_TO_PAGE)}a.hideFitToPageBtn();a.showFitToWidthBtn()},onFitToWidthClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.FIT_TO_WIDTH)}a.hideFitToWidthBtn();a.showFitToPageBtn()},onZoomInClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.ZOOM_IN)}},onZoomOutClicked:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();if(a._eventTarget){a._eventTarget.fire(VCSlideControllerEvent.ZOOM_OUT)}},onSlideControlsMouseOver:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();a._lastHideControlTriggerTime=-1;if(!a.isSlideControlsShowing()&&!a.isSyncMode){a.showSlideControls()}},onSlideControlsMouseLeave:function(b){var a=syncDocPlayer.getSyncDocPlay().getSlideControllerVC();a._lastHideControlTriggerTime=(new Date()).getTime()},release:function(){clearInterval(this.checkHideControlTimer);this.detachClickEvent(VCSlideController.FIT_TO_PAGE_BTN_CLASS,this.onFitToPageClicked);this.detachClickEvent(VCSlideController.FIT_TO_WIDTH_BTN_CLASS,this.onFitToWidthClicked);this.detachClickEvent(VCSlideController.NEXT_PAGE_BTN_CLASS,this.onNextPageClicked);this.detachClickEvent(VCSlideController.PREV_PAGE_BTN_CLASS,this.onPrevPageClicked);this.detachClickEvent(VCSlideController.ZOOM_IN_BTN_CLASS,this.onZoomInClicked);this.detachClickEvent(VCSlideController.ZOOM_OUT_BTN_CLASS,this.onZoomOutClicked);this.detachClickEvent(VCSlideController.SYNC_BTN_CLASS,this.onSyncBtnClicked);$(VCSlideController.OVER_LAYER_CLASS).unbind("mouseover",this.onSlideControlsMouseOver);$(VCSlideController.OVER_LAYER_CLASS).unbind("mouseleave",this.onSlideControlsMouseLeave)}},{HEIGHT_FLOATING_CONTROL_LIMIT:336,SLIDE_CONTROLLER_CLASS:".vc-slide-controller",SLIDE_CONTAINER_CLASS:".vc-slide-container",MOBILE_SLIDE_CONTAINER_CLASS:".vc-sdplay-slide",SYNC_BTN_WRAPPER_CLASS:".vc-slide-sync-btn-wrapper",OVER_LAYER_CLASS:".vc-over-layer",PAGING_OVER_LAYER_CLASS:".vc-slide-paging-over-layer",FLOATING_CONTROLS_OVER_LAYER_CLASS:".vc-slide-floating-controls-over-layer",PAGING_CLASS:".vc-slide-paging",FLOATING_CONTROLS_CLASS:".vc-slide-floating-controls",FIT_TO_PAGE_BTN_CLASS:".vc-slide-fit-to-page-btn",FIT_TO_WIDTH_BTN_CLASS:".vc-slide-fit-to-width-btn",NEXT_PAGE_BTN_CLASS:".vc-slide-next-page-btn",PREV_PAGE_BTN_CLASS:".vc-slide-prev-page-btn",ZOOM_IN_BTN_CLASS:".vc-slide-zoom-in-btn",ZOOM_OUT_BTN_CLASS:".vc-slide-zoom-out-btn",SYNC_BTN_CLASS:".vc-slide-sync-btn",SLIDE_SYNCING_MODE:"vc-slide-syncing-mode",SLIDE_DOCUMENT_MODE:"vc-slide-document-mode",CURR_PAGE_CLASS:".vc-slide-curr-page",TOTAL_PAGE_CLASS:".vc-slide-total-page",DEFAULT_CONTROL_TOP_OFFSET:10});var VCSlideEvent={INITIALIZED:"vc-slide-initialized",PAGE_CHANGED:"vc-slide-page-changed"};var VCSlideControllerEvent={NEXT_PAGE:"vc-slide-controller-next-page",PREV_PAGE:"vc-slide-controller-prev-page",ZOOM_IN:"vc-slide-controller-zoom-in",ZOOM_OUT:"vc-slide-controller-zoom-out",FIT_TO_PAGE:"vc-slide-controller-fit-to-page",FIT_TO_WIDTH:"vc-slide-controller-fit-to-width",SYNC_ON:"vc-slide-controller-sync-on",SYNC_OFF:"vc-slide-controller-sync-off"};var VCMediaScript=VisualComponent.extend({showMediaScript:function(){$(LayoutIdTable.MEDIA_SCRIPT).show()},hideMediaScript:function(){$(LayoutIdTable.MEDIA_SCRIPT).hide()},resize:function(){var a=$(LayoutIdTable.MEDIA_SCRIPT).height()-$(VCMediaScript.HEADER_TITLE_CLASS).innerHeight()-25;$(VCMediaScript.MEDIA_SCRIPT_WINDOW_CLASS).css("height",a)},setMediaScriptText:function(e){if(e==null||e.trim()==""){return}var c="";var d=e.split("\n");for(var a in d){var b=$("<span>").text(d[a]).html();c+='<span class="'+VCMediaScript.MEDIA_SCRIPT_TEXT_NAME+'">'+b+"</span>";if(Number(a)!=d.length-1){c+="<br>"}}$(VCMediaScript.MEDIA_SCRIPT_WINDOW_CLASS).html(c)}},{HEADER_TITLE_CLASS:".vc-media-script-header-title",MEDIA_SCRIPT_WINDOW_CLASS:".vc-media-script-content",MEDIA_SCRIPT_TEXT_NAME:"vc-media-script-content-text"});var VCAudioPlay=VisualComponent.extend({_contentInfo:null,_isFlash:false,_mainMedia:null,_playCommandGiven:false,play:function(){},pause:function(){},seekStart:function(){},seekTo:function(a){},setVolume:function(a){},getDuration:function(){return 0},getCurrentTime:function(){return 0},addHtml5DefaultControls:function(){},initialize:function(a){this._contentInfo=a;this.attachAudioPlayEvents()},release:function(){this.releaseAudioPlayEvents()},attachAudioPlayEvents:function(){if(skinManager.isMobile()){this.attachMobileEvents()}else{this.attachDesktopEvents()}},attachMobileEvents:function(){this.attachClickEvent(LayoutIdTable.AUDIO_PLAYER,this.onAudioAreaClicked);this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked)},attachDesktopEvents:function(){this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.attachMouseEvents()},attachMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).bind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).bind("mouseleave",this.onPlayerMouseLeave)},releaseAudioPlayEvents:function(){if(skinManager.isMobile()){this.releaseMobileEvents()}else{this.releaseDesktopEvents()}},releaseMobileEvents:function(){this.detachClickEvent(LayoutIdTable.AUDIO_PLAYER,this.onAudioAreaClicked);this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked)},releaseDesktopEvents:function(){this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.releaseMouseEvents()},releaseMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).unbind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).unbind("mouseleave",this.onPlayerMouseLeave)},showAudioPlayer:function(){$(LayoutIdTable.AUDIO_PLAYER).show()},hideAudioPlayer:function(){$(LayoutIdTable.AUDIO_PLAYER).hide()},getAudioPlayerElem:function(){return $(VCAudioPlay.AUDIO_PLAYER_ID)},onEntireAreaClicked:function(b){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.CLICK_ENTIRE_AREA)}},onAudioAreaClicked:function(b){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.PLAYER_AREA_TOUCHED)}},onPlayerMouseMove:function(){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.PLAYER_MOUSEMOVE)}},onPlayerMouseLeave:function(){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.PLAYER_MOUSELEAVE)}},showAudioTouchMask:function(){$audioPlayer=this.getAudioPlayerElem();$audioPlayer.find(VCAudioPlay.TOUCH_MASK_WRAPPER_CLASS).show()},hideAudioTouchMask:function(){$audioPlayer=this.getAudioPlayerElem();$audioPlayer.find(VCAudioPlay.TOUCH_MASK_WRAPPER_CLASS).hide()},isPlayCommandGiven:function(){return this._playCommandGiven}},{AUDIO_PLAYER_ID:"#audio-play",TOUCH_MASK_WRAPPER_CLASS:".vc-aplay-audio-touch-mask-wrapper"});var VCAudioPlayFactory=new function(){this.createAudioPlay=function(){var a=skinManager.isMobile();if(a){return new VCAudioPlayMobile()}else{return this.createDesktopAudioPlay()}};this.createDesktopAudioPlay=function(){if(skinManager.isNeedFlashFallback()||uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming()||(uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()&&true!=skinManager.isHlsSupported())){return new VCAudioPlayDesktopFlash()}else{return new VCAudioPlayDesktop()}}};var VCAudioPlayMobile=VCAudioPlay.extend({_contentInfo:null,_media:null,_currentTime:0,_playCommandGiven:false,_seekBeforePlayingDone:true,_progressTimer:null,_isAutoPlay:null,_isMetadataLoaded:false,_playbackRate:1,_isAutoPlayFinished:false,_prevTime:-1,initialize:function(a){this.base(a);this._progressTimer=setInterval(this.checkProgress,200);this.initLayout();this.initControls()},release:function(){this.base();clearInterval(this._progressTimer);if(this._media){this._media.pause();this._media.src="";this._media.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._media.removeEventListener("timeupdate",this.onTimeUpdate);this._media.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._media.removeEventListener("seeked",this.onSeeked);this._media.removeEventListener("ended",this.onEnded);this._media.removeEventListener("error",this.onMediaError);this._media.removeEventListener("play",this.onStateChangePlay);this._media.removeEventListener("pause",this.onStateChangePause);this._media.removeEventListener("waiting",this.onStateChangeWaiting);this._media.removeEventListener("ratechange",this.onPlaybackRateChanged)}},initLayout:function(){var c=skinManager.isIPhoneOrIPod();var a=(c)?"30px":"0px";if(false==uniPlayerConfig.getUniPlayerSettingsData().useTitle){a="0px"}var b=(c)?"49px":"0px";$("#audio-play-wrapper").css("top",a);$("#audio-play-wrapper").css("bottom",b)},initControls:function(){if(this._isAutoPlay==null){return}if(skinManager.isIPhoneOrIPod()){this.hideAudioTouchMask()}if(!this._isAutoPlay){this.prepareOneMedia()}},showAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.show()},hideAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.hide()},checkProgress:function(){var a=audioPlayer.getAudioPlay();a.checkBeforeAutoPlay();a.notifyBuffered()},notifyBuffered:function(){var b=audioPlayer.getAudioPlay();var a=b.getEndOfBuffered(b._media);b._eventTarget.fire(VCAudioPlayEvent.BUFFERED,a)},getEndOfBuffered:function(c){if(c==null){return}var a=c.buffered.length;for(var b=0;b<a;b++){var d=(b==0)?0:c.buffered.start(b);if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},checkBeforeAutoPlay:function(){var b=audioPlayer.getAudioPlay();if(!b._isAutoPlay){return}if(b._isAutoPlayFinished){return}if(b._media==null){return}if(audioPlayer.isMobileIntroShowing()){return}var a=b._media.currentTime;if(b._prevTime!=-1&&(a>b._prevTime)){b._isAutoPlayFinished=true;b._eventTarget.fire(VCAudioPlayEvent.AUTO_PLAY_STARTED)}else{b._media.play();b._prevTime=a}},prepareOneMedia:function(){$audioPlayer=this.getAudioPlayerElem();$(VCAudioPlayMobile.AUDIO_CLASS_NAME).show();this.initMedia(this._contentInfo.getCurrentMainMedia().mobileMediaUri,0)},initMedia:function(a,b){this._currentTime=b;$audioPlayer=this.getAudioPlayerElem();this._media=$audioPlayer.find(VCAudioPlayMobile.AUDIO_CLASS_NAME).get(0);this._media.setAttribute("src",a);this.attachMediaEvents(this._media);this._media.load()},attachMediaEvents:function(a){a.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);a.addEventListener("timeupdate",this.onTimeUpdate,false);a.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);a.addEventListener("ended",this.onEnded,false);a.addEventListener("seeked",this.onSeeked,false);a.addEventListener("error",this.onMediaError,false);a.addEventListener("play",this.onStateChangePlay,false);a.addEventListener("pause",this.onStateChangePause,false);a.addEventListener("waiting",this.onStateChangeWaiting,false);a.addEventListener("ratechange",this.onPlaybackRateChanged,false)},initialDirectPlay:function(){$audioPlayer=this.getAudioPlayerElem();$(VCAudioPlayMobile.AUDIO_CLASS_NAME).show();this._media=$audioPlayer.find(VCAudioPlayMobile.AUDIO_CLASS_NAME).get(0);this._media.setAttribute("src",this._contentInfo.getCurrentMainMedia().mobileMediaUri);this.attachMediaEvents(this._media);this._media.load()},onMediaReadyToPlay:function(){var a=audioPlayer.getAudioPlay();if(a._playCommandGiven){a._media.play()}a._eventTarget.fire(VCAudioPlayEvent.READY_TO_PLAY)},onMetaDataLoaded:function(){var a=audioPlayer.getAudioPlay();a._isMetadataLoaded=true;a._media.currentTime=a._currentTime;a._eventTarget.fire(VCAudioPlayEvent.METADATA_LOADED,a._contentInfo.storyDuration)},onTimeUpdate:function(b){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.TIME_UPDATE,a._media.currentTime)},onEnded:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.ENDED)},onSeeked:function(){var a=audioPlayer.getAudioPlay();if(skinManager.isAndroid()){if(a._seekBeforePlayingDone&&a._isAutoPlayFinished){if(!a._playCommandGiven){a._media.pause()}}}a._eventTarget.fire(VCAudioPlayEvent.PLAYING)},onMediaError:function(){var a=audioPlayer.getAudioPlay();if(a._media&&a._media.error&&a._eventTarget){apiManager.getPlayerEvent().html5VideoError(a._media.error.code,uniPlayerData.getCurrentTime());a._eventTarget.fire(VCAudioPlayEvent.ERROR,a._media.error.code)}},play:function(){if(!this.isAudioSet()){return}this._media.play();this._playCommandGiven=true},pause:function(){if(!this.isAudioSet()){return}this._media.pause();this._playCommandGiven=false},seekTo:function(a){if(!this.isAudioSet()){return}if(skinManager.isAndroid()){this._media.play()}this._media.currentTime=a;this._eventTarget.fire(VCAudioPlayEvent.WAITING)},setPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate){this.changePlaybackRate()}},changePlaybackRate:function(){if(this._media){this._media.playbackRate=this._playbackRate}},setStartTime:function(a){this._currentTime=a;this._seekBeforePlayingDone=false;if(this._isMetadataLoaded){this._media.currentTime=a}},setVolume:function(a){if(this.isAudioSet()&&isFinite(a)){this._media.volume=a}},getDuration:function(){if(!this.isAudioSet()){return 0}return this._contentInfo.contentDuration},getCurrentTime:function(){if(!this.isAudioSet()){return 0}return this._media.currentTime},setIsAutoPlay:function(a){this._isAutoPlay=a;this.initControls()},isAudioSet:function(){return this._media!=null},addHtml5DefaultControls:function(){$(VCAudioPlayMobile.AUDIO_CLASS_NAME).attr("controls","true")},removeHtml5DefaultControls:function(){document.getElementsByClassName("vc-aplay-audio")[0].removeAttribute("controls")},onStateChangePlay:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PLAYING)},onStateChangePause:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PAUSED)},onStateChangeWaiting:function(){},onPlaybackRateChanged:function(){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.PLAYBACK_RATE_CHANGED,a._media.playbackRate)}}},{AUDIO_CLASS_NAME:".vc-aplay-audio"});var VCAudioPlayDesktop=VCAudioPlay.extend({_mainMediaHls:null,_isLoading:false,_playbackRate:1,_syncAndBufferTimer:null,_currentTime:0,initialize:function(a){this.base(a);this._syncAndBufferTimer=setInterval(this.checkSyncAndBuffer,1000);this.initControls()},release:function(){this.base();clearInterval(this._syncAndBufferTimer);if(this._mainMedia){this._mainMedia.pause();this._mainMedia.src="";this._mainMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._mainMedia.removeEventListener("timeupdate",this.onTimeUpdate);this._mainMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._mainMedia.removeEventListener("seeked",this.onMainMediaSeeked);this._mainMedia.removeEventListener("ended",this.onEnded);this._mainMedia.removeEventListener("play",this.onStateChangePlay);this._mainMedia.removeEventListener("pause",this.onStateChangePause);this._mainMedia.removeEventListener("waiting",this.onStateChangeWaiting);this._mainMedia.removeEventListener("ratechange",this.onPlaybackRateChanged);if(this._mainMediaHls!=null){this._mainMediaHls.destroy();this._mainMediaHls=null}}},initControls:function(){if(!this._contentInfo){return}this.initMainMedia(this._contentInfo.getCurrentMainMedia().desktopMediaUri,0)},initMainMedia:function(a,c){$audioPlayer=this.getAudioPlayerElem();this._currentTime=c;this._mainMedia=$audioPlayer.find(VCAudioPlayDesktop.MAIN_AUDIO_CLASS).get(0);if(skinManager.isDesktop()&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var b=this;this._mainMediaHls=new Hls();this._mainMediaHls.attachMedia(this._mainMedia);this._mainMediaHls.on(Hls.Events.MEDIA_ATTACHED,function(){b._mainMediaHls.loadSource(a)})}else{this._mainMedia.setAttribute("src",a)}this._mainMedia.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);this._mainMedia.addEventListener("timeupdate",this.onTimeUpdate,false);this._mainMedia.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);this._mainMedia.addEventListener("seeked",this.onMainMediaSeeked,false);this._mainMedia.addEventListener("ended",this.onEnded,false);this._mainMedia.addEventListener("play",this.onStateChangePlay,false);this._mainMedia.addEventListener("pause",this.onStateChangePause,false);this._mainMedia.addEventListener("waiting",this.onStateChangeWaiting,false);this._mainMedia.addEventListener("ratechange",this.onPlaybackRateChanged,false);$(this._mainMedia).bind("contextmenu",function(){return false})},showAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.show();$audioPlayer.find(VCAudioPlayDesktop.AUDIO_CONTAINER_CLASS).show()},hideAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.hide();$audioPlayer.find(VCAudioPlayDesktop.AUDIO_CONTAINER_CLASS).hide()},onMetaDataLoaded:function(c){var a=audioPlayer.getAudioPlay();var b=c.target;b.currentTime=a._currentTime;a._eventTarget.fire(VCAudioPlayEvent.METADATA_LOADED,a._mainMedia.duration)},onTimeUpdate:function(b){if(audioPlayer==null||typeof audioPlayer=="undefined"){return}var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.TIME_UPDATE,a._mainMedia.currentTime)},onMediaReadyToPlay:function(){if(audioPlayer==null||typeof audioPlayer=="undefined"){return}var a=audioPlayer.getAudioPlay();if(skinManager.isSafari()){a.seekTo(0.1)}a._eventTarget.fire(VCAudioPlayEvent.READY_TO_PLAY)},onMainMediaSeeked:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.PLAYING)},onEnded:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.ENDED)},onStateChangePlay:function(){if(audioPlayer==null||typeof audioPlayer=="undefined"){return}var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PLAYING)},onStateChangePause:function(){if(audioPlayer==null||typeof audioPlayer=="undefined"){return}var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PAUSED)},onStateChangeWaiting:function(){},onPlaybackRateChanged:function(b){var a=audioPlayer.getAudioPlay();if(a._eventTarget){a._eventTarget.fire(VCAudioPlayEvent.PLAYBACK_RATE_CHANGED,a._mainMedia.playbackRate)}},checkSyncAndBuffer:function(){var a=audioPlayer.getAudioPlay();a.notifyBuffered()},notifyBuffered:function(){var b=audioPlayer.getAudioPlay();var a=b.getEndOfBuffered(b._mainMedia);b._eventTarget.fire(VCAudioPlayEvent.BUFFERED,a)},getEndOfBuffered:function(c){if(c==null){return -1}if(c.buffered==null){return -1}var a=c.buffered.length;for(var b=0;b<a;b++){var d=c.buffered.start(b)-VCAudioPlayDesktop.BUFFER_START_TOLERANCE;if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},play:function(){if(!this.isAudioSet()){return}this.playMedia();this._playCommandGiven=true},playMedia:function(){var a=audioPlayer.getAudioPlay();a._mainMedia.play();if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!skinManager.isNeedFlashFallback()){a.changePlaybackRate()}},pause:function(){if(!this.isAudioSet()){return}this._mainMedia.pause();this._playCommandGiven=false},seekStart:function(){},seekTo:function(a){if(!this.isAudioSet()){return}this._mainMedia.currentTime=a;this._eventTarget.fire(VCAudioPlayEvent.WAITING)},setPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!skinManager.isNeedFlashFallback()){this.changePlaybackRate()}},changePlaybackRate:function(){if(this._mainMedia){this._mainMedia.playbackRate=this._playbackRate}},setVolume:function(a){if(this._mainMedia&&isFinite(a)){this._mainMedia.volume=a}},getDuration:function(){if(!this.isAudioSet()){return 0}return this._mainMedia.duration},getCurrentTime:function(){if(!this.isAudioSet()){return 0}return this._mainMedia.currentTime},isAudioSet:function(){return this._mainMedia!=null}},{AUDIO_CONTAINER_CLASS:".vc-aplay-container",MAIN_AUDIO_CLASS:".vc-aplay-audio",BUFFER_START_TOLERANCE:0.99});var VCAudioPlayDesktopFlash=VCAudioPlay.extend({_isFirstTime:true,_currentTime:0,_isSeeking:false,initialize:function(a){this.base(a);this._isFlash=true;this.initControls()},release:function(){this.base();if(this._mainMedia){this.unloadMedia(this._mainMedia,this._contentInfo.getCurrentMainMedia())}$audioPlayer=this.getAudioPlayerElem();$audioPlayer.find(VCAudioPlayDesktopFlash.MAIN_AUDIO_CONTAINER_CLASS).empty();$audioPlayer.find(VCAudioPlayDesktopFlash.MAIN_AUDIO_CONTAINER_CLASS).html('<div id="'+VCAudioPlayDesktopFlash.MAIN_AUDIO_ELEMENT_ID+'"></div>')},initControls:function(){if(!this._contentInfo){return}this.initMainMediaFlash(VCAudioPlayDesktopFlash.MAIN_AUDIO_ELEMENT_ID)},initMainMediaFlash:function(a){this.createFlashVideo(a,VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID);this._mainMedia=document.getElementById(VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID)},showAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.show();$audioPlayer.find(VCAudioPlayDesktopFlash.MAIN_AUDIO_CONTAINER_CLASS).show()},hideAudioPlayer:function(){this.base();$audioPlayer=this.getAudioPlayerElem();$audioPlayer.hide();$audioPlayer.find(VCAudioPlayDesktopFlash.MAIN_AUDIO_CONTAINER_CLASS).hide()},createFlashVideo:function(j,h){var a="11.4.0";var d={};var e={};var i=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var g=Util.urlMerge(i,"playerproductinstall.swf");e.quality="high";e.bgcolor="#000000";e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="transparent";var f={};f.id=h;f.name=h;f.align="middle";var b="100%";var k="100%";var c=Util.urlMerge(i,"flashvideofallback.swf");swfobject.embedSWF(c,j,b,k,a,g,d,e,f,this.callbackEmbedSWF);swfobject.createCSS(j,"display:block;text-align:left;")},callbackEmbedSWF:function(a){if(a.success==false){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;document.location=Util.urlMerge(b,"downloadflashplayer.html")}},loadMedia:function(b,a){if(a.desktopMethod==MediaMethod.RTMP){var c=this.getRTMPMediaInfo(a.desktopMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);return}switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,a.flashFallbackMediaUri);break;case MediaMethod.RTMP:var c=this.getRTMPMediaInfo(a.flashFallbackMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);break}},unloadMedia:function(b,a){switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,null);break;case MediaMethod.RTMP:b.fvLoad(MediaMethod.RTMP,null,null);break}},getRTMPMediaInfo:function(a){var c=a.indexOf("mp4:");var d=a.substring(0,c);var b=a.substring(c+4);return{serverUri:d,mediaUri:b}},onFallbackReady:function(a){this.loadMedia(this._mainMedia,this._contentInfo.getCurrentMainMedia())},onMetadataLoaded:function(a){var b=audioPlayer.getAudioPlay();if(a==VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID){b._eventTarget.fire(VCAudioPlayEvent.METADATA_LOADED,b._mainMedia.getDuration())}},onStatusChange:function(a,b){var c=audioPlayer.getAudioPlay();if(b==VCAudioPlayDesktopFlash.NETSTREAM_BUFFER_FLUSH||b==VCAudioPlayDesktopFlash.NETSTREAM_BUFFER_FULL){if(c._isFirstTime){c._eventTarget.fire(VCAudioPlayEvent.READY_TO_PLAY);c._isFirstTime=false}c._isSeeking=false}else{if(b==VCAudioPlayDesktopFlash.NETSTREAM_BUFFER_EMPTY){if(a==VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID){if(c._mainMedia.getDuration()-c._mainMedia.getCurrentTime()<10){c.onEnded()}}}}if(a==VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID){switch(b){case VCAudioPlayDesktopFlash.NETSTREAM_SEEK_START_NOTIFY:c._isSeeking=true;break;case VCAudioPlayDesktopFlash.NETSTREAM_UNPAUSE_NOTIFY:c._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PLAYING);break;case VCAudioPlayDesktopFlash.NETSTREAM_PAUSE_NOTIFY:c._eventTarget.fire(VCAudioPlayEvent.STATE_CHANGE,PlayState.PAUSED);break}}},onEnded:function(){var a=audioPlayer.getAudioPlay();a._eventTarget.fire(VCAudioPlayEvent.ENDED)},onTimeUpdate:function(a,c){if(a==VCAudioPlayDesktopFlash.MAIN_AUDIO_FLASH_ELEMENT_ID){var b=audioPlayer.getAudioPlay();if(b._isSeeking){return}b._eventTarget.fire(VCAudioPlayEvent.TIME_UPDATE,c)}},play:function(){if(!this.isAudioSet()){return}try{this._mainMedia.fvPlay()}catch(a){}this._playCommandGiven=true},pause:function(){if(!this.isAudioSet()){return}try{this._mainMedia.fvPause()}catch(a){}this._playCommandGiven=false},seekTo:function(a){if(!this.isAudioSet()){return}this._mainMedia.setCurrentTime(a)},setPlaybackRate:function(a){},setVolume:function(a){if(this._mainMedia){this._mainMedia.setVolume(a)}},getDuration:function(){if(!this.isAudioSet()){return 0}var b=0;try{b=this._mainMedia.getDuration()}catch(a){b=0}return b},getCurrentTime:function(){if(!this.isAudioSet()){return 0}var a=0;try{a=this._mainMedia.getCurrentTime()}catch(b){a=0}return a},isAudioSet:function(){return this._mainMedia!=null}},{MAIN_AUDIO_CONTAINER_CLASS:".vc-aplay-container-flash-fallback",MAIN_AUDIO_ELEMENT_ID:"audio-main-flash-fallback",MAIN_AUDIO_FLASH_ELEMENT_ID:"Fallback-audio",NETSTREAM_PLAY_START:"NetStream.Play.Start",NETSTREAM_SEEK_START_NOTIFY:"NetStream.SeekStart.Notify",NETSTREAM_UNPAUSE_NOTIFY:"NetStream.Unpause.Notify",NETSTREAM_PAUSE_NOTIFY:"NetStream.Pause.Notify",NETSTREAM_BUFFER_FULL:"NetStream.Buffer.Full",NETSTREAM_BUFFER_FLUSH:"NetStream.Buffer.Flush",NETSTREAM_BUFFER_EMPTY:"NetStream.Buffer.Empty"});var VCAudioPlayEvent={METADATA_LOADED:"aplay_metadata_loaded",TIME_UPDATE:"aplay_time_update",READY_TO_PLAY:"aplay_ready_to_play",BUFFERED:"aplay_buffered",WAITING:"aplay_wating",PLAYING:"aplay_playing",ENDED:"aplay_ended",STATE_CHANGE:"aplay_state_change",ERROR:"aplay_error",PLAYER_MOUSEMOVE:"aplay_mousemove",PLAYER_MOUSELEAVE:"aplay_mouseleave",CLICK_ENTIRE_AREA:"aplay_click_entire_area",PLAYER_AREA_TOUCHED:"aplay_player_area_touched",AUTO_PLAY_STARTED:"auto_play_started",PLAYBACK_RATE_CHANGED:"audio_playback_rate_changed"};var VCVideoPlay=VisualComponent.extend({_contentInfo:null,_totalMediaNumber:0,_isFlash:false,_mainMedia:null,_subMedia:null,_extraMedia:null,_extraMediaList:[],_extraMediaCount:0,_currLeftMainMediaType:null,_currRightTopMediaType:null,_currRightMiddleMediaType:null,_currRightBottomMediaType:null,_isLayoutAdjusting:false,_isMouseOverSeparator:false,_isMouseOverLayoutSetBox:false,_playCommandGiven:false,_mediaReadyToPlayCount:0,_onLayoutChange:false,_layoutChangePoint:0,_layoutIndex:0,_isSwapped:false,_mainMediaWidth:0,_mainMediaPercent:100,_subMediaPercent:0,_leftVideoContainerPercent:100,_rightVideoContainerPercent:0,_rightMediaWidth:0,_isPlayable:false,_contentsVerticalAlign:"center",play:function(){},pause:function(){},seekStart:function(){},seekTo:function(a){},setVolume:function(a){},getDuration:function(){return 0},getCurrentTime:function(){return 0},addHtml5DefaultControls:function(){},initialize:function(a){this._contentInfo=a;this._extraMediaList=[];_isPlayable=false;this._totalMediaNumber=uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt();this._extraMediaCount=(this._totalMediaNumber>2)?this._totalMediaNumber-2:0;this._contentsVerticalAlign=uniPlayerConfig.getUniPlayerSettingsData().contentsVerticalAlign;this.initializeVideoTagNames();this.attachVideoPlayEvents();this.initializeVideoPosition()},release:function(){this.releaseVideoPlayEvents()},initializeVideoTagNames:function(){},attachVideoPlayEvents:function(){if(skinManager.isMobile()){this.attachMobileEvents()}else{this.attachDesktopEvents()}},attachMobileEvents:function(){this.attachClickEvent(LayoutIdTable.VIDEO_PLAYER,this.onVideoAreaClicked);this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked)},attachDesktopEvents:function(){this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.attachMouseEvents();switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:break;case ContentType.VIDEO2:this.attachUserLayoutChangeEvent();this.attachLayoutButtonEvents();this.attachLayoutSwapButtonEvents();break;case ContentType.VIDEO3:this.attachUserLayoutChangeEvent();this.attachDoubleClickLayoutChangeEvents();this.attachVideoInternalBtnEvents();break}},attachMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).bind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).bind("mouseleave",this.onPlayerMouseLeave);$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).bind("mouseover",this.onVideoSeparatorOver);$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).bind("mouseleave",this.onVideoSeparatorLeave);$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).bind("mouseover",this.onVideoLayoutSetBoxOver);$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).bind("mouseleave",this.onVideoLayoutSetBoxLeave)},attachUserLayoutChangeEvent:function(){this.attachDownEvent(LayoutIdTable.VIDEO_PLAYER,this.onVideoPlayDown)},attachLayoutButtonEvents:function(){for(var a=1;a<=VCVideoPlay.NUM_OF_LAYOUT;a++){var b=this.getLayoutBtnName(a);this.attachClickEvent("#"+b,this.onLayoutBtnClick)}},attachLayoutSwapButtonEvents:function(){this.attachClickEvent(VCVideoPlay.LAYOUT_SWAP_BTN_ID,this.swapTwoVideo)},attachDoubleClickLayoutChangeEvents:function(){$videoPlayer=this.getVideoPlayerElem();switch(this._extraMediaCount){case 1:this._currLeftMainMediaType=VideoType.SUB_MEDIA;this._currRightTopMediaType=VideoType.MAIN_MEDIA;this._currRightBottomMediaType=VideoType.EXTRA_MEDIA;$videoPlayer.find("video"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeThreeVideoLayout(VideoType.MAIN_MEDIA)});$videoPlayer.find("video"+VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeThreeVideoLayout(VideoType.SUB_MEDIA)});$videoPlayer.find("video"+VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeThreeVideoLayout(VideoType.EXTRA_MEDIA)});break;case 2:this._currLeftMainMediaType=VideoType.SUB_MEDIA;this._currRightTopMediaType=VideoType.MAIN_MEDIA;this._currRightMiddleMediaType=VideoType.EXTRA_MEDIA;this._currRightBottomMediaType=VideoType.EXTRA_MEDIA2;$videoPlayer.find("video"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeFourVideoLayout(VideoType.MAIN_MEDIA)});$videoPlayer.find("video"+VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeFourVideoLayout(VideoType.SUB_MEDIA)});$videoPlayer.find("video"+VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeFourVideoLayout(VideoType.EXTRA_MEDIA)});$videoPlayer.find("video"+VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).dblclick(function(){videoPlayer.getVideoPlay().changeFourVideoLayout(VideoType.EXTRA_MEDIA2)});break}},attachVideoInternalBtnEvents:function(){$videoPlayer.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).bind("mouseover",this.onVideoMouseOver);$videoPlayer.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).bind("mouseover",this.onVideoMouseOver);$videoPlayer.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).bind("mouseover",this.onVideoMouseOver);$videoPlayer.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).bind("mouseover",this.onVideoMouseOver);$videoPlayer.find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).bind("mouseover",this.onVideoBtnWrapperMouseOver);$videoPlayer.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).bind("mouseleave",this.onVideoMouseLeave);$videoPlayer.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).bind("mouseleave",this.onVideoMouseLeave);$videoPlayer.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).bind("mouseleave",this.onVideoMouseLeave);$videoPlayer.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).bind("mouseleave",this.onVideoMouseLeave);$videoPlayer.find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).bind("mouseleave",this.onVideoBtnWrapperMouseLeave);$videoPlayer.find(VCVideoPlay.VIDEO_EXCHANGE_BTN_CLASS).bind("click",this.onVideoExchangeBtnClicked);$videoPlayer.find(VCVideoPlay.VIDEO_CLOSE_BTN_CLASS).bind("click",this.onVideoCloseBtnClicked)},releaseVideoPlayEvents:function(){if(skinManager.isMobile()){this.releaseMobileEvents()}else{this.releaseDesktopEvents()}},releaseMobileEvents:function(){this.detachClickEvent(LayoutIdTable.VIDEO_PLAYER,this.onVideoAreaClicked);this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked)},releaseDesktopEvents:function(){this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.releaseMouseEvents();switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:break;case ContentType.VIDEO2:this.releaseUserLayoutChangeEvent();this.releaseLayoutButtonEvents();this.releaseLayoutSwapButtonEvents();break;case ContentType.VIDEO3:this.releaseUserLayoutChangeEvent();this.releaseDoubleClickLayoutChangeEvents();this.releaseVideoInternalBtnEvents();break}},releaseMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).unbind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).unbind("mouseleave",this.onPlayerMouseLeave);$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).unbind("mouseover",this.onVideoSeparatorOver);$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).unbind("mouseleave",this.onVideoSeparatorLeave);$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).unbind("mouseover",this.onVideoLayoutSetBoxOver);$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).unbind("mouseleave",this.onVideoLayoutSetBoxLeave)},releaseUserLayoutChangeEvent:function(){this.detachDownEvent(LayoutIdTable.VIDEO_PLAYER,this.onVideoPlayDown)},releaseLayoutButtonEvents:function(){for(var a=1;a<=VCVideoPlay.NUM_OF_LAYOUT;a++){var b=this.getLayoutBtnName(a);this.detachClickEvent("#"+b,this.onLayoutBtnClick)}},releaseLayoutSwapButtonEvents:function(){this.detachClickEvent(VCVideoPlay.LAYOUT_SWAP_BTN_ID,this.swapTwoVideo)},releaseDoubleClickLayoutChangeEvents:function(){$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find("video"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).unbind("dblclick");$videoPlayer.find("video"+VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).unbind("dblclick");$videoPlayer.find("video"+VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).unbind("dblclick");$videoPlayer.find("video"+VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).unbind("dblclick")},releaseVideoInternalBtnEvents:function(){$videoPlayer.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).unbind("mouseover");$videoPlayer.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).unbind("mouseover");$videoPlayer.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).unbind("mouseover");$videoPlayer.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).unbind("mouseover");$videoPlayer.find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).unbind("mouseover");$videoPlayer.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).unbind("mouseleave");$videoPlayer.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).unbind("mouseleave");$videoPlayer.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).unbind("mouseleave");$videoPlayer.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).unbind("mouseleave");$videoPlayer.find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).unbind("mouseleave");$videoPlayer.find(VCVideoPlay.VIDEO_EXCHANGE_BTN_CLASS).unbind("click");$videoPlayer.find(VCVideoPlay.VIDEO_CLOSE_BTN_CLASS).unbind("click")},showVideoPlayer:function(){$(LayoutIdTable.VIDEO_PLAYER).show()},hideVideoPlayer:function(){$(LayoutIdTable.VIDEO_PLAYER).hide()},resize:function(){var a=videoPlayer.getVideoPlay();a.setVideoSeparator();if(skinManager.isDesktop()){a.setPlayerHeight();a.resizeVideoTags();a.setVerticalAlign()}},setVerticalAlign:function(){if(this._contentsVerticalAlign==ContentsVerticalAlign.TOP){var b=(skinManager.isNeedFlashFallback())?$(this._subMedia).parent():$(this._subMedia);var c=(skinManager.isNeedFlashFallback())?$(this._mainMedia).parent():$(this._mainMedia);var a=parseInt(b.css("margin-top"));var d=parseInt(c.css("margin-top"));if(a>d){b.css("margin-top",d+"px")}else{c.css("margin-top",a+"px")}}},setPlayerHeight:function(){var a="35px";if(videoPlayer.isHidePlayControllerMode()){a="0px"}$(VCVideoPlay.VIDEO_PLAY_WRAPPER_ID).css("bottom",a)},setLayoutIndex:function(a){this._layoutIndex=a-1;this.setDesktopLayout()},setInitialLayoutWithData:function(a){this.setDesktopLayout(a)},getLayoutBtnName:function(a){return VCVideoPlay.LAYOUT_BTN_ID+a.toString()},getIdxFromLayoutBtnId:function(a){return Number(a.replace(VCVideoPlay.LAYOUT_BTN_ID,""))},setDesktopLayout:function(a){switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:this.setLayoutForVideo1();break;case ContentType.VIDEO2:this.setLayoutForVideo2(a);break;case ContentType.VIDEO3:this.setLayoutForVideo3(a);break}},setVideoSeparator:function(){var f=uniPlayerConfig.getMediaChannelConfig().getContentType();if(f==ContentType.VIDEO1){return}var d;var b=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER).innerWidth();if(Util.isIE11embedFullScreen()){b=$(window).innerWidth()}if(f==ContentType.VIDEO2){if(this._isSwapped){d=this._mainMediaPercent/100*b}else{d=this._subMediaPercent/100*b}}else{d=this._leftVideoContainerPercent/100*b}var e;if(uniPlayer.getIsFullScreen()){e=$(window).innerHeight()}else{e=$(LayoutIdTable.VIDEO_PLAYER).height()}var a=52;var c=80;$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).css("left",d-a/2);$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).css("top",(e-c)/2)},setLayoutForVideo1:function(){$videoPlayer=this.getVideoPlayerElem();if(this._isFlash){$videoPlayer.find("div"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).css("width","100%")}else{$videoPlayer.find("video"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).css("width","100%")}},setLayoutForVideo2:function(e){var d,b;if(e){d=e._mainMediaWidth;b=e._subMediaWidth;if(e._isSwapped){this.swapTwoVideo()}}else{var c=uniPlayerConfig.getLayoutList(ContentType.VIDEO2)[this._layoutIndex];d=c.getMainMediaWidth();b=c.getSubMediaWidth();if(this._isSwapped){var a=b;b=d;d=a}}if(skinManager.isIE7()){d=d-0.01;b=b-0.01}this._mainMediaPercent=d;this._mainMediaWidth=d;this._subMediaPercent=b;d="{0}%".format(d);b="{0}%".format(b);$videoPlayer=this.getVideoPlayerElem();if(this._isFlash){$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",d);$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",b)}else{$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("width",d);$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("width",b)}if(this.isSingleVideoLayout()){this.hideVideoSeparator()}else{this.setVideoSeparator()}this.resizeVideoTags();this.setVerticalAlign();this.fireLayoutChangeEvent(this._isSwapped,this._mainMediaPercent,this._subMediaPercent)},setLayoutForVideo3:function(b){if(b){this._leftVideoContainerPercent=b._mainMediaWidth;this._rightVideoContainerPercent=b._subMediaWidth}else{this._leftVideoContainerPercent=70;this._rightVideoContainerPercent=30}this._rightMediaWidth=this._rightVideoContainerPercent;var a="{0}%".format(this._leftVideoContainerPercent);var c="{0}%".format(this._rightVideoContainerPercent);$videoPlayer=this.getVideoPlayerElem();if(this._isFlash){$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",a);$videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",c)}else{$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("width",a);$videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("width",c)}this.setVideoSeparator();this.fireLayoutChangeEvent(false,this._leftVideoContainerPercent,this._rightVideoContainerPercent)},getVideo3ContainerSize:function(d){var a;var c;if(this._currLeftMainMediaType==d){a=this._leftVideoContainerPercent;c=100}if(this._currRightTopMediaType==d||this._currRightMiddleMediaType==d||this._currRightBottomMediaType==d){a=this._rightVideoContainerPercent;c=Math.floor(100/(this._extraMediaCount+1))}var b=$(window).innerWidth();var e=$(window).innerHeight();return{width:b*a/100,height:e*c/100}},initializeVideoPosition:function(){if(uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO2){this.initializeVideo2Position()}},initializeVideo2Position:function(){$videoPlayer=this.getVideoPlayerElem();var b="left";var c=VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS;var a=VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS;if(this._isFlash){$videoPlayer.find("div"+RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("float",b);$videoPlayer.find("div"+LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("float",b)}else{$videoPlayer.find("div"+c).css("float",b);$videoPlayer.find("div"+a).css("float",b)}},changeThreeVideoLayout:function(a){var f=videoPlayer.getVideoPlay();if(f._isFlash){return}if(!f._isPlayable){return}if(a==f._currLeftMainMediaType){return}f._mainMedia.pause();f._subMedia.pause();for(var d=0;d<f._extraMediaList.length;d++){f._extraMediaList[d].pause()}var e=f.getDivClassNameForVideoType(f._currLeftMainMediaType);var c=f.getDivClassNameForVideoType(a);$videoPlayer=f.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+c));if(a==f._currRightTopMediaType){$videoPlayer.find(VCVideoPlay.RIGHT_TOP_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+e));var b=f._currLeftMainMediaType;f._currLeftMainMediaType=f._currRightTopMediaType;f._currRightTopMediaType=b}else{$videoPlayer.find(VCVideoPlay.RIGHT_BOTTOM_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+e));var b=f._currLeftMainMediaType;f._currLeftMainMediaType=f._currRightBottomMediaType;f._currRightBottomMediaType=b}if(f._playCommandGiven){f._mainMedia.play();f._subMedia.play();for(var d=0;d<f._extraMediaList.length;d++){f._extraMediaList[d].play()}}f.resizeVideoTags()},changeFourVideoLayout:function(a){var f=videoPlayer.getVideoPlay();if(f._isFlash){return}if(!f._isPlayable){return}if(a==f._currLeftMainMediaType){return}f._mainMedia.pause();f._subMedia.pause();for(var d=0;d<f._extraMediaList.length;d++){f._extraMediaList[d].pause()}var e=f.getDivClassNameForVideoType(f._currLeftMainMediaType);var c=f.getDivClassNameForVideoType(a);$videoPlayer=f.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+c));if(a==f._currRightTopMediaType){$videoPlayer.find(VCVideoPlay.RIGHT_TOP_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+e));var b=f._currLeftMainMediaType;f._currLeftMainMediaType=f._currRightTopMediaType;f._currRightTopMediaType=b}else{if(a==f._currRightMiddleMediaType){$videoPlayer.find(VCVideoPlay.RIGHT_MIDDLE_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+e));var b=f._currLeftMainMediaType;f._currLeftMainMediaType=f._currRightMiddleMediaType;f._currRightMiddleMediaType=b}else{$videoPlayer.find(VCVideoPlay.RIGHT_BOTTOM_VIDEO_CONTAINER_CLASS).prepend($videoPlayer.find("video"+e));var b=f._currLeftMainMediaType;f._currLeftMainMediaType=f._currRightBottomMediaType;f._currRightBottomMediaType=b}}if(f._playCommandGiven){f._mainMedia.play();f._subMedia.play();for(var d=0;d<f._extraMediaList.length;d++){f._extraMediaList[d].play()}}f.resizeVideoTags()},getDivClassNameForVideoType:function(a){switch(a){case VideoType.MAIN_MEDIA:return VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS;case VideoType.SUB_MEDIA:return VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS;case VideoType.EXTRA_MEDIA:return VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS;case VideoType.EXTRA_MEDIA2:return VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS}},swapTwoVideo:function(){var e=videoPlayer.getVideoPlay();var d,b,c,f,a;e._isSwapped=!e._isSwapped;if(e._isSwapped){a="right"}else{a="left"}e._mainMediaWidth=100-e._mainMediaWidth;e._mainMediaPercent=e._mainMediaWidth;e._subMediaPercent=100-e._mainMediaWidth;$videoPlayer=e.getVideoPlayerElem();if(e._isFlash){$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("float",a);$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("float",a);$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width","{0}%".format(100-e._mainMediaWidth));$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width","{0}%".format(e._mainMediaWidth))}else{$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("float",a);$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("float",a);$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("width","{0}%".format(100-e._mainMediaWidth));$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("width","{0}%".format(e._mainMediaWidth))}e.resize();e.fireLayoutChangeEvent(e._isSwapped,e._mainMediaPercent,e._subMediaPercent)},swapProfile:function(a){if(!this._contentInfo){return false}var c=this._contentInfo.profileList;var b=this._contentInfo.getCurrentMainMedia();if(this._contentInfo.getProfile().name==a){return false}return true},getTargetContainer:function(b,d){var c=this.getEntireVideoContainer(d);var a;switch(b){case VideoType.MAIN_MEDIA:a=c.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS);break;case VideoType.SUB_MEDIA:a=c.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS);break;case VideoType.EXTRA_MEDIA:a=c.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS);break;case VideoType.EXTRA_MEDIA2:a=c.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS);break}if(a&&a.length>0){return a.parent()}},getVideoPlayerElem:function(a){var b=a||uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt();switch(b){case 1:return $(VCVideoPlay.VIDEO_PLAYER_VIDEO1_ID);case 2:return $(VCVideoPlay.VIDEO_PLAYER_VIDEO2_ID);case 3:return $(VCVideoPlay.VIDEO_PLAYER_VIDEO3_ID);case 4:return $(VCVideoPlay.VIDEO_PLAYER_VIDEO4_ID)}return null},onEntireAreaClicked:function(b){var a=videoPlayer.getVideoPlay();a._eventTarget.fire(VCVideoPlayEvent.CLICK_ENTIRE_AREA)},onLayoutBtnClick:function(c){var b=videoPlayer.getVideoPlay();var a=b.getIdxFromLayoutBtnId($(this).attr("id"));b.setLayoutIndex(a)},onVideoAreaClicked:function(b){var a=videoPlayer.getVideoPlay();a._eventTarget.fire(VCVideoPlayEvent.PLAYER_AREA_TOUCHED)},onPlayerMouseMove:function(){var a=videoPlayer.getVideoPlay();a.showVideoLayoutSetElements();a._eventTarget.fire(VCVideoPlayEvent.PLAYER_MOUSEMOVE)},onPlayerMouseLeave:function(){var a=videoPlayer.getVideoPlay();a.hideVideoSeparator();a.hideLayoutSetBox();a._eventTarget.fire(VCVideoPlayEvent.PLAYER_MOUSELEAVE)},onVideoMouseOver:function(b){var a=videoPlayer.getVideoPlay();$(this).parent().find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).show()},onVideoMouseLeave:function(b){var a=videoPlayer.getVideoPlay();$(this).parent().find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS).hide()},onVideoBtnWrapperMouseOver:function(b){var a=videoPlayer.getVideoPlay();$(this).show()},onVideoBtnWrapperMouseLeave:function(b){var a=videoPlayer.getVideoPlay();$(this).hide()},onVideoExchangeBtnClicked:function(c){var b=videoPlayer.getVideoPlay();var a=b.getSiblingVideoType(this);if(a==null){return}if(uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt()==4){b.changeFourVideoLayout(a)}else{b.changeThreeVideoLayout(a)}},onVideoCloseBtnClicked:function(c){var b=videoPlayer.getVideoPlay();var a=b.getSiblingVideoType(this);if(a==null){return}if(b._eventTarget){b._eventTarget.fire(VCVideoPlayEvent.REMOVE_VIDEO,a)}},onVideoSeparatorOver:function(){videoPlayer.getVideoPlay()._isMouseOverSeparator=true},onVideoSeparatorLeave:function(){videoPlayer.getVideoPlay()._isMouseOverSeparator=false},onVideoLayoutSetBoxOver:function(){videoPlayer.getVideoPlay()._isMouseOverLayoutSetBox=true},onVideoLayoutSetBoxLeave:function(){videoPlayer.getVideoPlay()._isMouseOverLayoutSetBox=false},showVideoLayoutSetElements:function(){if(!this.isSingleVideoLayout()){this.showVideoSeparator()}this.showLayoutSetBox()},hideVideoLayoutSetElements:function(){this.hideVideoSeparator();this.hideLayoutSetBox()},showVideoSeparator:function(){if(this._contentInfo.getProfile().isAudio){return}$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).show()},hideVideoSeparator:function(){$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_SEPARATOR_CLASS).hide()},showLayoutSetBox:function(){if(this._contentInfo==null){return}if(this._contentInfo.getProfile().isAudio){return}if(uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO2){$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).show()}},hideLayoutSetBox:function(){$videoPlayer=this.getVideoPlayerElem();$videoPlayer.find(VCVideoPlay.VIDEO_LAYOUT_SETBOX_CLASS).hide()},showVideoTouchMask:function(){$(VCVideoPlay.TOUCH_MASK_WRAPPER_CLASS).show()},hideVideoTouchMask:function(){$(VCVideoPlay.TOUCH_MASK_WRAPPER_CLASS).hide()},isSingleVideoLayout:function(){var a=videoPlayer.getVideoPlay();switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:return true;case ContentType.VIDEO2:return(a._mainMediaWidth<0.1||a._mainMediaWidth>99.9);case ContentType.VIDEO3:return false}},onVideoPlayDown:function(c){if($(c.target).attr("class")==VCVideoPlay.LAYOUT_BTN_CLASS){return}var b=videoPlayer.getVideoPlay();if(b.isSingleVideoLayout()){return}b._onLayoutChange=true;b._layoutChangePoint=c.clientX;b._isLayoutAdjusting=true;var d=uniPlayerConfig.getMediaChannelConfig().getContentType();var a=(d==ContentType.VIDEO3)?b.onVideoPlayMoveForVideo3:b.onVideoPlayMoveForVideo2;if(skinManager.isLowIE()){b.attachMoveEvent(window.document,a);b.attachEndEvent(window.document,b.onVideoPlayMoveEnd)}else{b.attachMoveEvent(window,a);b.attachEndEvent(window,b.onVideoPlayMoveEnd)}},onVideoPlayMoveForVideo2:function(f){var c=videoPlayer.getVideoPlay();if(!c._onLayoutChange){return}var g=$(window).innerWidth();var d=(f.clientX-c._layoutChangePoint)/g*100;var b,a;if(c._isSwapped){b=c._mainMediaWidth+d;a=100-b}else{b=c._mainMediaWidth-d;a=100-b}if(b>VCVideoPlay.MIN_VIDEO_WIDTH){b=VCVideoPlay.MIN_VIDEO_WIDTH;a=100-VCVideoPlay.MIN_VIDEO_WIDTH}else{if(a>VCVideoPlay.MIN_VIDEO_WIDTH){b=100-VCVideoPlay.MIN_VIDEO_WIDTH;a=VCVideoPlay.MIN_VIDEO_WIDTH}}c._mainMediaPercent=b;c._subMediaPercent=a;$videoPlayer=c.getVideoPlayerElem();if(c._isFlash){$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",b+"%");$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",a+"%")}else{$videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("width",b+"%");$videoPlayer.find("div"+VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("width",a+"%")}c.resize();c.fireLayoutChangeEvent(c._isSwapped,c._mainMediaPercent,c._subMediaPercent)},onVideoPlayMoveForVideo3:function(f){var c=videoPlayer.getVideoPlay();if(!c._onLayoutChange){return}var g=$(window).innerWidth();var d=(f.clientX-c._layoutChangePoint)/g*100;var b=c._rightMediaWidth-d;var a=100-b;if(b>VCVideoPlay.MIN_VIDEO_WIDTH){b=VCVideoPlay.MIN_VIDEO_WIDTH;a=100-VCVideoPlay.MIN_VIDEO_WIDTH}else{if(a>VCVideoPlay.MIN_VIDEO_WIDTH){b=100-VCVideoPlay.MIN_VIDEO_WIDTH;a=VCVideoPlay.MIN_VIDEO_WIDTH}}c._rightVideoContainerPercent=b;c._leftVideoContainerPercent=a;$videoPlayer=c.getVideoPlayerElem();if(c._isFlash){$videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",b+"%");$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).css("width",a+"%")}else{$videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).css("width",b+"%");$videoPlayer.find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).css("width",a+"%")}c.resize();c.fireLayoutChangeEvent(false,c._leftVideoContainerPercent,c._rightVideoContainerPercent)},onVideoPlayMoveEnd:function(c){if($(c.target).attr("class")==VCVideoPlay.LAYOUT_BTN_CLASS){return}var b=videoPlayer.getVideoPlay();var d=uniPlayerConfig.getMediaChannelConfig().getContentType();$videoPlayer=b.getVideoPlayerElem();if(d==ContentType.VIDEO2){if(b._mainMediaWidth==0||b._mainMediaWidth==100){return}if(b._isFlash){b._mainMediaWidth=($videoPlayer.find("div"+VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).width()/$(LayoutIdTable.VIDEO_PLAYER).width())*100}else{b._mainMediaWidth=($videoPlayer.find("video"+VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).width()/$(LayoutIdTable.VIDEO_PLAYER).width())*100}}else{if(d==ContentType.VIDEO3){if(b._isFlash){b._rightMediaWidth=($videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS).width()/$(LayoutIdTable.VIDEO_PLAYER).width())*100}else{b._rightMediaWidth=($videoPlayer.find(VCVideoPlay.RIGHT_VIDEO_CONTAINER_CLASS).width()/$(LayoutIdTable.VIDEO_PLAYER).width())*100}}}b._onLayoutChange=false;b._isLayoutAdjusting=false;var a=(d==ContentType.VIDEO3)?b.onVideoPlayMoveForVideo3:b.onVideoPlayMoveForVideo2;if(skinManager.isLowIE()){b.detachMoveEvent(window.document,a);b.detachEndEvent(window.document,b.onVideoPlayMoveEnd)}else{b.detachMoveEvent(window,a);b.detachEndEvent(window,b.onVideoPlayMoveEnd)}},getVideoBtnsWrapperHeight:function(a){if(Util.isIE11embedFullScreen()){var b=$(a).children().length;return VCVideoPlay.VIDEO_INTERNAL_BTN_HEIGHT*b}else{return $(a).height()}},getVideoBtnsWrapperWidth:function(a){if(Util.isIE11embedFullScreen()){return VCVideoPlay.VIDEO_INTERNAL_BTN_WIDTH}else{return $(a).width()}},getSiblingVideoType:function(a){var b=$(a).parent().parent();if(b.find(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS).length>0){return VideoType.MAIN_MEDIA}if(b.find(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS).length>0){return VideoType.SUB_MEDIA}if(b.find(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS).length>0){return VideoType.EXTRA_MEDIA}if(b.find(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS).length>0){return VideoType.EXTRA_MEDIA2}return null},getCurrMediaListOnClockWise:function(){if(uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt()==4){return this.getCurrMediaListOnClockWiseVideo4()}if(uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt()==3){return this.getCurrMediaListOnClockWiseVideo3()}},getCurrMediaListOnClockWiseVideo3:function(){var a=[this._currLeftMainMediaType,this._currRightTopMediaType,this._currRightBottomMediaType];return a},getCurrMediaListOnClockWiseVideo4:function(){var a=[this._currLeftMainMediaType,this._currRightTopMediaType,this._currRightMiddleMediaType,this._currRightBottomMediaType];return a},isLayoutAdjusting:function(){return this._isLayoutAdjusting},isMouseOverSeparator:function(){return this._isMouseOverSeparator},isMouseOverLayoutSetBox:function(){return this._isMouseOverLayoutSetBox},isPlayCommandGiven:function(){return this._playCommandGiven},fireLayoutChangeEvent:function(a,c,b){if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.LAYOUT_CHANGED,new LayoutSettingData(a,c,b))}},fireReloadPlayerEvent:function(){if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.RELOAD_PLAYER)}}},{VIDEO_PLAYER_VIDEO1_ID:"#video-play-video1",VIDEO_PLAYER_VIDEO2_ID:"#video-play-video2",VIDEO_PLAYER_VIDEO3_ID:"#video-play-video3",VIDEO_PLAYER_VIDEO4_ID:"#video-play-video4",VIDEO_PLAYER_AUDIO_ID:"#video-play-audio-mode",VIDEO_PLAY_WRAPPER_ID:"#video-play-wrapper",MAIN_VIDEO_CONTAINER_CLASS:".vc-vplay-video1",SUB_VIDEO_CONTAINER_CLASS:".vc-vplay-video2",EXTRA_VIDEO_CONTAINER_CLASS:".vc-vplay-video3",EXTRA2_VIDEO_CONTAINER_CLASS:".vc-vplay-video4",LEFT_VIDEO_CONTAINER_CLASS:".vc-vplay-left-video-container",RIGHT_VIDEO_CONTAINER_CLASS:".vc-vplay-right-video-container",RIGHT_TOP_VIDEO_CONTAINER_CLASS:".vc-vplay-right-top-video-container",RIGHT_MIDDLE_VIDEO_CONTAINER_CLASS:".vc-vplay-right-middle-video-container",RIGHT_BOTTOM_VIDEO_CONTAINER_CLASS:".vc-vplay-right-bottom-video-container",LEFT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS:".vc-vplay-left-video-container-flash-fallback",RIGHT_VIDEO_CONTAINER_FLASH_FALLBACK_CLASS:".vc-vplay-right-video-container-flash-fallback",VIDEO_SEPARATOR_CLASS:".vc-vplay-video-separator",VIDEO_LAYOUT_SETBOX_CLASS:".vc-vplay-layout-set-box",TOUCH_MASK_WRAPPER_CLASS:".vc-vplay-video-touch-mask-wrapper",VIDEO_BTNS_WRAPPER_CLASS:".vc-vplay-video-btns-wrapper",VIDEO_EXCHANGE_BTN_CLASS:".vc-vplay-media-exchange-btn",VIDEO_CLOSE_BTN_CLASS:".vc-vplay-media-close-btn",VIDEO_INTERNAL_BTN_HEIGHT:40,VIDEO_INTERNAL_BTN_WIDTH:40,METADATA_TOP_BAR_HEIGHT:35,BTN_BELOW_TOP_BAR:"vc-btn-below-top-bar",LAYOUT_BTN_ID:"vc-vplay-layout-",LAYOUT_BTN_CLASS:"vc-vplay-layout-btn",LAYOUT_SWAP_BTN_ID:"#vc-vplay-layout-swap",NUM_OF_LAYOUT:4,MIN_VIDEO_WIDTH:80});var VCVideoPlayFactory=new function(){this.createVideoPlay=function(){var a=skinManager.isMobile();if(a){return new VCVideoPlayMobile()}else{return this.createDesktopVideoPlay()}};this.createDesktopVideoPlay=function(){if(skinManager.isNeedFlashFallback()||uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming()||(uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()&&true!=skinManager.isHlsSupported())){return new VCVideoPlayDesktopFlash()}else{return new VCVideoPlayDesktop()}}};var VCVideoPlayMobile=VCVideoPlay.extend({_contentInfo:null,_media:null,_totalMediaNumber:0,_isWaiting:false,_playbackRate:1,_currentVideoType:null,_startVideoType:null,_currentTime:0,_playCommandGiven:false,_seekBeforePlayingDone:true,_progressTimer:null,_isAutoPlay:null,_isSwapCommandGiven:false,_isAutoPlayFinished:false,_prevTime:-1,initialize:function(a){this.base(a);this._progressTimer=setInterval(this.checkProgress,200);this.initLayout();this.initControls()},release:function(){this.base();clearInterval(this._progressTimer);if(this._media){this._media.pause();this._media.src="";this._media.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._media.removeEventListener("timeupdate",this.onTimeUpdate);this._media.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._media.removeEventListener("seeked",this.onSeeked);this._media.removeEventListener("ended",this.onEnded);this._media.removeEventListener("error",this.onMediaError);this._media.removeEventListener("play",this.onStateChangePlay);this._media.removeEventListener("pause",this.onStateChangePause);this._media.removeEventListener("waiting",this.onStateChangeWaiting);this._media.removeEventListener("ratechange",this.onPlaybackRateChanged)}},initLayout:function(){var c=skinManager.isIPhoneOrIPod();var a=(c)?"30px":"0px";if(false==uniPlayerConfig.getUniPlayerSettingsData().useTitle){a="0px"}var b=(c)?"49px":"0px";$("#video-play-wrapper").css("top",a);$("#video-play-wrapper").css("bottom",b)},initControls:function(){if(this._isAutoPlay==null){return}if(skinManager.isIPhoneOrIPod()){$(".vc-vplay-video-touch-mask-wrapper").remove()}if(!this._isAutoPlay){this.prepareOneMedia()}this.setVisibilityForMediaPlayMode()},setVisibilityForMediaPlayMode:function(){if(this._contentInfo.getProfile().isAudio){$(".vc-vplay-container").hide();$(".vc-vplay-audio-container").show()}else{$(".vc-vplay-container").show();$(".vc-vplay-audio-container").hide()}},showVideoPlayer:function(){this.base();$(LayoutIdTable.VIDEO_PLAYER_PLAY).show()},hideVideoPlayer:function(){this.base();$(LayoutIdTable.VIDEO_PLAYER_PLAY).hide()},checkProgress:function(){var a=videoPlayer.getVideoPlay();a.checkBeforeAutoPlay();a.checkSeekBeforePlaying();a.notifyBuffered()},notifyBuffered:function(){var b=videoPlayer.getVideoPlay();var a=b.getEndOfBuffered(b._media);if(b._eventTarget){b._eventTarget.fire(VCVideoPlayEvent.BUFFERED,a)}},getEndOfBuffered:function(c){if(c==null){return}var a=c.buffered.length;for(var b=0;b<a;b++){var d=(b==0)?0:c.buffered.start(b);if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},checkBeforeAutoPlay:function(){var b=videoPlayer.getVideoPlay();if(!b._isAutoPlay){return}if(b._isAutoPlayFinished){return}if(b._media==null){return}if(videoPlayer.isMobileIntroShowing()){return}if(b._contentInfo.getProfile().isAudio){b._isAutoPlayFinished=true;return}var a=b._media.currentTime;if(b._prevTime!=-1&&(a>b._prevTime)){b._isAutoPlayFinished=true;if(b._eventTarget){b._eventTarget.fire(VCVideoPlayEvent.AUTO_PLAY_STARTED)}}else{b._media.play();b._prevTime=a}},prepareOneMedia:function(){$(".vc-vplay-video").show();if(!this._startVideoType){this._startVideoType=VideoType.MAIN_MEDIA}this._currentVideoType=this._startVideoType;var a=this._contentInfo.getProfile().isAudio;switch(this._startVideoType){case VideoType.MAIN_MEDIA:this.initMedia(this._contentInfo.getCurrentMainMedia().mobileMediaUri,0,a);break;case VideoType.SUB_MEDIA:this.initMedia(this._contentInfo.getCurrentSubMedia().mobileMediaUri,0,a);break;case VideoType.EXTRA_MEDIA:this.initMedia(this._contentInfo.getCurrentExtraMedia(0),mobileMediaUri,0,a);break;case VideoType.EXTRA_MEDIA2:this.initMedia(this._contentInfo.getCurrentExtraMedia(1),mobileMediaUri,0,a);break}},initMedia:function(a,b,c){if(this._media){this._media.pause();this._media.src="";this._media=null}if(c){this._media=document.getElementsByClassName("vc-vplay-audio-mode-audio")[0]}else{this._media=document.getElementsByClassName("vc-vplay-video")[0]}this._currentTime=b;this._media.setAttribute("src",a);this.attachMediaEvents(this._media);this._media.load();if(this._isSwapCommandGiven){setTimeout(function(){videoPlayer.getVideoPlay().doAfterSwapTask()},100)}this._isSwapCommandGiven=false},doAfterSwapTask:function(){this.shakeForSwappedVideoWorks();if(skinManager.isIPhoneOrIPod()){this.directStartAfterSwapForiPhone()}},shakeForSwappedVideoWorks:function(){this._media.play()},directStartAfterSwapForiPhone:function(){videoPlayer.play()},attachMediaEvents:function(a){a.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);a.addEventListener("timeupdate",this.onTimeUpdate,false);a.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);a.addEventListener("ended",this.onEnded,false);a.addEventListener("seeked",this.onSeeked,false);a.addEventListener("error",this.onMediaError,false);a.addEventListener("play",this.onStateChangePlay,false);a.addEventListener("pause",this.onStateChangePause,false);a.addEventListener("waiting",this.onStateChangeWaiting,false);a.addEventListener("ratechange",this.onPlaybackRateChanged,false)},initialDirectPlay:function(){$(".vc-vplay-video").show();if(!this._startVideoType){this._startVideoType=VideoType.MAIN_MEDIA}this._currentVideoType=this._startVideoType;var a=this._contentInfo.getProfile().isAudio;if(a){this._media=document.getElementsByClassName("vc-vplay-audio-mode-audio")[0]}else{this._media=document.getElementsByClassName("vc-vplay-video")[0]}switch(this._startVideoType){case VideoType.MAIN_MEDIA:this._media.setAttribute("src",this._contentInfo.getCurrentMainMedia().mobileMediaUri);break;case VideoType.SUB_MEDIA:this._media.setAttribute("src",this._contentInfo.getCurrentSubMedia().mobileMediaUri);break;case VideoType.EXTRA_MEDIA:this._media.setAttribute("src",this._contentInfo.getCurrentExtraMedia(0).mobileMediaUri);break;case VideoType.EXTRA_MEDIA2:this._media.setAttribute("src",this._contentInfo.getCurrentExtraMedia(1).mobileMediaUri);break}this.attachMediaEvents(this._media);this._media.load()},onMediaReadyToPlay:function(){var a=videoPlayer.getVideoPlay();if(a._playCommandGiven){a._media.play()}if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.READY_TO_PLAY)}},onMetaDataLoaded:function(){var a=videoPlayer.getVideoPlay();a._media.currentTime=a._currentTime;if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.METADATA_LOADED,a._media.duration)}},onTimeUpdate:function(b){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.TIME_UPDATE,a._media.currentTime)}},onEnded:function(){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.ENDED)}},onSeeked:function(){var a=videoPlayer.getVideoPlay();if(skinManager.isAndroid()){if(a._seekBeforePlayingDone&&a._isAutoPlayFinished){if(!a._playCommandGiven){a._media.pause()}}}if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.PLAYING)}},onMediaError:function(){var a=videoPlayer.getVideoPlay();if(a._media&&a._media.error&&a._eventTarget){apiManager.getPlayerEvent().html5VideoError(a._media.error.code,uniPlayerData.getCurrentTime());if(a._media.error.code==3&&a._media.error.message.indexOf("PIPELINE_ERROR_DECODE")!=-1){a._eventTarget.fire(VCVideoPlayEvent.SKIP_AUDIO_ERROR)}else{a._eventTarget.fire(VCVideoPlayEvent.ERROR,a._media.error.code)}}},checkSeekBeforePlaying:function(c){var b=videoPlayer.getVideoPlay();if(!b._seekBeforePlayingDone){var a=b.isMediaCurrentTimeInValidTimeRange(b._media.currentTime);if(a){if(b._eventTarget){b._eventTarget.fire(VCVideoPlayEvent.SWAPPED)}b._seekBeforePlayingDone=true;if(!this._playCommandGiven){this._media.pause()}}else{b._media.currentTime=b._currentTime}}},isMediaCurrentTimeInValidTimeRange:function(c){var a=(this._currentTime+VCVideoPlayMobile.CURR_TIME_GAP_TOLERANCE);var b=(this._currentTime-VCVideoPlayMobile.CURR_TIME_GAP_TOLERANCE);return(c<=a&&c>=b)},play:function(){if(!this.isVideoSet()){return}this._media.play();this._playCommandGiven=true},pause:function(){if(!this.isVideoSet()){return}this._media.pause();this._playCommandGiven=false},swapVideo:function(a){if(!this._contentInfo){return}if(!a){if(this._currentVideoType==VideoType.MAIN_MEDIA){this._currentVideoType=VideoType.SUB_MEDIA}else{this._currentVideoType=VideoType.MAIN_MEDIA}}else{this._currentVideoType=a}if(this._contentInfo.getProfile().isAudio){return}this._isSwapCommandGiven=true;var b=(this.isVideoSet())?this._media.currentTime:0;if(this._currentVideoType==VideoType.MAIN_MEDIA){this.initMedia(this._contentInfo.getCurrentMainMedia().mobileMediaUri,b)}else{if(this._currentVideoType==VideoType.SUB_MEDIA){this.initMedia(this._contentInfo.getCurrentSubMedia().mobileMediaUri,b)}else{if(this._currentVideoType==VideoType.EXTRA_MEDIA){this.initMedia(this._contentInfo.getCurrentExtraMedia(0).mobileMediaUri,b)}else{if(this._currentVideoType==VideoType.EXTRA_MEDIA2){this.initMedia(this._contentInfo.getCurrentExtraMedia(1).mobileMediaUri,b)}}}}this._seekBeforePlayingDone=false;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.SWAPING)}},setPlaybackRate:function(a){this._playbackRate=a;this.changePlaybackRate()},changePlaybackRate:function(){if(!(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate)){return}if(this._media){this._media.playbackRate=this._playbackRate}},swapProfile:function(a){if(!this.base(a)){return}this._isSwapCommandGiven=true;this._contentInfo.setProfile(a);var c=(this._media)?this._media.currentTime:0;var b=this._contentInfo.getProfile().isAudio;if(b){this.initMedia(this._contentInfo.getCurrentMainMedia().mobileMediaUri,c,true)}else{switch(this._currentVideoType){case VideoType.MAIN_MEDIA:this.initMedia(this._contentInfo.getCurrentMainMedia().mobileMediaUri,c,false);break;case VideoType.SUB_MEDIA:this.initMedia(this._contentInfo.getCurrentSubMedia().mobileMediaUri,c,false);break;case VideoType.EXTRA_MEDIA:this.initMedia(this._contentInfo.getCurrentExtraMedia(0).mobileMediaUri,c,false);break;case VideoType.EXTRA_MEDIA2:this.initMedia(this._contentInfo.getCurrentExtraMedia(1).mobileMediaUri,c,false);break}}this.setVisibilityForMediaPlayMode();this._seekBeforePlayingDone=false;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.SWAPING)}},seekTo:function(a){if(!this.isVideoSet()){return}if(skinManager.isAndroid()){this._media.play()}this._media.currentTime=a;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.WAITING)}},setStartTime:function(a){this._currentTime=a;this._seekBeforePlayingDone=false},setVolume:function(a){if(this._media&&isFinite(a)){this._media.volume=a}},getDuration:function(){if(!this._media){return 0}return this._contentInfo.contentDuration},getCurrentTime:function(){if(!this._media){return 0}return this._media.currentTime},getCurrentVideoType:function(){return this._currentVideoType},setIsAutoPlay:function(a){this._isAutoPlay=a;this.initControls()},setStartVideoType:function(a){this._startVideoType=a},isVideoSet:function(){return this._media},isWaiting:function(){return this._isWaiting},addHtml5DefaultControls:function(){$(".vc-vplay-video").attr("controls","true")},removeHtml5DefaultControls:function(){document.getElementsByClassName("vc-vplay-video")[0].removeAttribute("controls")},onStateChangePlay:function(){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PLAYING)}},onStateChangePause:function(){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PAUSED)}},onStateChangeWaiting:function(){},onPlaybackRateChanged:function(b){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.PLAYBACK_RATE_CHANGED,a._media.playbackRate)}}},{CURR_TIME_GAP_TOLERANCE:1});var VCVideoPlayDesktop=VCVideoPlay.extend({_stoplog:false,_isLoading:false,_mainMediaPrevTime:-1,_subMediaPrevTime:-1,_isWaiting:false,_startTimeOfWaitingBuffer:null,_mainMeiaOnSeeking:false,_subMediaOnSeeking:false,_playbackRate:1,_syncAndBufferTimer:null,_currentTime:0,_isSwapping:false,_mainVideoRatio:null,_subVideoRatio:null,_extraVideoRatio:null,_reserveResize:false,_mainMediaHls:null,_subMediaHls:null,_extraMediaHlsList:[],initialize:function(a){this.base(a);this.setPlayerHeight();this._syncAndBufferTimer=setInterval(this.checkSyncAndBuffer,1000);this.initControls()},initializeVideoTagNames:function(){if(this._totalMediaNumber==3){this.initializeVideoTagNamesFor3CH()}else{if(this._totalMediaNumber==4){this.initializeVideoTagNamesFor4CH()}}},initializeVideoTagNamesFor3CH:function(){var b=this.getEntireVideoContainer().find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).find("video");b.removeClass().addClass(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS.substring(1));var a=this.getEntireVideoContainer().find(VCVideoPlay.RIGHT_TOP_VIDEO_CONTAINER_CLASS).find("video");a.removeClass().addClass(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS.substring(1));var c=this.getEntireVideoContainer().find(VCVideoPlay.RIGHT_BOTTOM_VIDEO_CONTAINER_CLASS).find("video");c.removeClass().addClass(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS.substring(1))},initializeVideoTagNamesFor4CH:function(){var c=this.getEntireVideoContainer().find(VCVideoPlay.LEFT_VIDEO_CONTAINER_CLASS).find("video");c.removeClass().addClass(VCVideoPlay.SUB_VIDEO_CONTAINER_CLASS.substring(1));var b=this.getEntireVideoContainer().find(VCVideoPlay.RIGHT_TOP_VIDEO_CONTAINER_CLASS).find("video");b.removeClass().addClass(VCVideoPlay.MAIN_VIDEO_CONTAINER_CLASS.substring(1));var a=this.getEntireVideoContainer().find(VCVideoPlay.RIGHT_MIDDLE_VIDEO_CONTAINER_CLASS).find("video");a.removeClass().addClass(VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS.substring(1));var d=this.getEntireVideoContainer().find(VCVideoPlay.RIGHT_BOTTOM_VIDEO_CONTAINER_CLASS).find("video");d.removeClass().addClass(VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS.substring(1))},release:function(){this.base();clearInterval(this._syncAndBufferTimer);this.releaseMainMedia();this.releaseSubMedia();this.releaseExtraMedia();return},releaseMainMedia:function(){if(!this._mainMedia){return}this._mainMedia.pause();this._mainMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._mainMedia.removeEventListener("timeupdate",this.onTimeUpdate);this._mainMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._mainMedia.removeEventListener("seeked",this.onMainMediaSeeked);this._mainMedia.removeEventListener("ended",this.onEnded);this._mainMedia.removeEventListener("error",this.onMediaError);this._mainMedia.removeEventListener("play",this.onStateChangePlay);this._mainMedia.removeEventListener("pause",this.onStateChangePause);this._mainMedia.removeEventListener("waiting",this.onStateChangeWaiting);this._mainMedia.removeEventListener("ratechange",this.onPlaybackRateChanged);this._mainMedia.src="";this._mainMedia=null;if(this._mainMediaHls!=null){this._mainMediaHls.destroy();this._mainMediaHls=null}},releaseSubMedia:function(){if(!this._subMedia){return}this._subMedia.pause();this._subMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._subMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._subMedia.removeEventListener("seeked",this.onSubMediaSeeked);this._subMedia.src="";this._subMedia=null;if(this._subMediaHls!=null){this._subMediaHls.destroy();this._subMediaHls=null}},releaseExtraMedia:function(){if(this._extraMediaList.length==0){return}for(var a=0;a<this._extraMediaList.length;a++){if(!this._extraMediaList[a]){continue}this._extraMediaList[a].pause();this._extraMediaList[a].src="";this._extraMediaList[a].removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._extraMediaList[a].removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._extraMediaList[a]=null;if(this._extraMediaHlsList[a]!=null){this._extraMediaHlsList[a].destroy();this._extraMediaHlsList[a]=null}}this._extraMediaList=[];this._extraMediaHlsList=[]},transferMainMedia:function(b){if(!this._mainMedia){return}this._mainMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._mainMedia.removeEventListener("timeupdate",this.onTimeUpdate);this._mainMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._mainMedia.removeEventListener("seeked",this.onMainMediaSeeked);this._mainMedia.removeEventListener("ended",this.onEnded);this._mainMedia.removeEventListener("play",this.onStateChangePlay);this._mainMedia.removeEventListener("pause",this.onStateChangePause);this._mainMedia.removeEventListener("waiting",this.onStateChangeWaiting);this._mainMedia.removeEventListener("ratechange",this.onPlaybackRateChanged);var a=$(this._mainMedia).parent()[0];b.prepend(this._mainMedia);$(a).prepend($("<video>",{"class":"vc-vplay-video1"}));this._mainMedia=null;if(this._mainMediaHls!=null){this._mainMediaHls.destroy();this._mainMediaHls=null}},transferSubMedia:function(b){if(!this._subMedia){return}this._subMedia.pause();this._subMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._subMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._subMedia.removeEventListener("seeked",this.onSubMediaSeeked);var a=$(this._subMedia).parent()[0];b.prepend(this._subMedia);$(a).prepend($("<video>",{"class":"vc-vplay-video2"}));this._subMedia=null;if(this._subMediaHls!=null){this._subMediaHls.destroy();this._subMediaHls=null}},transferExtraMedia:function(c,a){if(this._extraMediaList.length-1<a){return}this._extraMediaList[a].pause();this._extraMediaList[a].removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._extraMediaList[a].removeEventListener("canplaythrough",this.onMediaReadyToPlay);var b=$(this._extraMediaList[a]).parent()[0];c.prepend(this._extraMediaList[a]);$(b).prepend($("<video>",{"class":"vc-vplay-video"+(a+3).toString()}));this._extraMediaList[a]=null;if(this._extraMediaHlsList[a]!=null){this._extraMediaHlsList[a].destroy();this._extraMediaHlsList[a]=null}},initControls:function(){if(!this._contentInfo){return}var a=this._contentInfo.getProfile().isAudio;switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:this.initMainMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia().desktopMediaUri,0,a);break;case ContentType.VIDEO2:this.initMainMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia().desktopMediaUri,0,a);this.initSubMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia().desktopMediaUri,0,a);break;case ContentType.VIDEO3:this.initMainMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia().desktopMediaUri,0,a);this.initSubMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia().desktopMediaUri,0,a);this.initExtraMediaList(0,a);break}this.setDesktopLayout();this.setVisibilityForMediaPlayMode()},setVisibilityForMediaPlayMode:function(){if(this._contentInfo.getProfile().isAudio){$(this.getVideoPlayerElem()).hide();$(VCVideoPlay.VIDEO_PLAYER_AUDIO_ID).show()}else{$(this.getVideoPlayerElem()).show();$(VCVideoPlay.VIDEO_PLAYER_AUDIO_ID).hide()}},setReadyToPlayStatusManually:function(){this._mediaReadyToPlayCount=uniPlayerConfig.getMediaChannelConfig().getCurrChannelCnt();this._isPlayable=true;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.READY_TO_PLAY)}},initMainMedia:function(c,d,e){this._currentTime=d;if(this._mainMedia){this._mainMedia.pause();this._mainMedia.src="";this._mainMedia=null}if(this._mainMediaHls){this._mainMediaHls.destroy();this._mainMediaHls=null}if(e){this._mainMedia=$(".vc-vplay-audio-mode-audio")[0]}else{$videoPlayer=this.getVideoPlayerElem();this._mainMedia=$videoPlayer.find(".vc-vplay-video1").get(0)}if(skinManager.isDesktop()&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var a=this;var b=true;this._mainMediaHls=new Hls();this._mainMediaHls.attachMedia(this._mainMedia);this._mainMediaHls.on(Hls.Events.MEDIA_ATTACHED,function(){a._mainMediaHls.loadSource(c);a._mainMediaHls.on(Hls.Events.FRAG_LOADED,function(f,g){if(b&&a._mainMedia.videoWidth!=0&&a._mainMedia.videoHeight!=0){a.resize();b=false}})})}else{if(this._mainMedia.getAttribute("src")!=c){this._mainMedia.setAttribute("src",c)}}this._mainMedia.addEventListener("error",this.onMediaError);this._mainMedia.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);this._mainMedia.addEventListener("timeupdate",this.onTimeUpdate,false);this._mainMedia.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);this._mainMedia.addEventListener("seeked",this.onMainMediaSeeked,false);this._mainMedia.addEventListener("ended",this.onEnded,false);this._mainMedia.addEventListener("play",this.onStateChangePlay,false);this._mainMedia.addEventListener("pause",this.onStateChangePause,false);this._mainMedia.addEventListener("waiting",this.onStateChangeWaiting,false);this._mainMedia.addEventListener("ratechange",this.onPlaybackRateChanged,false);$(this._mainMedia).bind("contextmenu",function(){return false})},onMediaError:function(b){var a=videoPlayer.getVideoPlay();if(a._mainMedia&&a._mainMedia.error){apiManager.getPlayerEvent().html5VideoError(a._mainMedia.error.code,uniPlayerData.getCurrentTime());if(a._mainMedia.error.code==3&&a._mainMedia.error.message.indexOf("PIPELINE_ERROR_DECODE")!=-1){a._eventTarget.fire(VCVideoPlayEvent.SKIP_AUDIO_ERROR)}else{a._eventTarget.fire(VCVideoPlayEvent.CHANGE_TO_FLASH)}}},initSubMedia:function(a,c,d){if(d){if(this._subMedia){this._subMedia.pause();this._subMedia.src="";this._subMedia=null}if(this._subMediaHls){this._subMediaHls.destroy();this._subMediaHls=null}return}$videoPlayer=this.getVideoPlayerElem();this._currentTime=c;this._subMedia=$videoPlayer.find(".vc-vplay-video2").get(0);if(skinManager.isDesktop()&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var b=this;this._subMediaHls=new Hls();this._subMediaHls.attachMedia(this._subMedia);this._subMediaHls.on(Hls.Events.MEDIA_ATTACHED,function(){b._subMediaHls.loadSource(a)})}else{if(this._subMedia.getAttribute("src")!=a){this._subMedia.setAttribute("src",a)}}this._subMedia.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);this._subMedia.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);this._subMedia.addEventListener("seeked",this.onSubMediaSeeked,false);$(this._subMedia).bind("contextmenu",function(){return false});this._subMedia.load();this._subMedia.volume=0},initExtraMedia:function(b,f,g,e){if(g){if(this._extraMediaList.length!=0){for(var d=0;d<this._extraMediaList.length;d++){this._extraMediaList[d].pause();this._extraMediaList[d].src="";this._extraMediaList[d]=null;if(this._extraMediaHlsList[d]!=null){this._extraMediaHlsList[d].destroy();this._extraMediaHlsList[d]=null}}this._extraMediaList=[];this._extraMediaHlsList=[]}return}$videoPlayer=this.getVideoPlayerElem();this._currentTime=f;var a=$videoPlayer.find(e).get(0);if(skinManager.isDesktop()&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var c=new Hls();c.attachMedia(a);c.on(Hls.Events.MEDIA_ATTACHED,function(){c.loadSource(b)});this._extraMediaHlsList.push(c)}else{if(a.getAttribute("src")!=b){a.setAttribute("src",b)}}a.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);a.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);$(a).bind("contextmenu",function(){return false});a.load();a.volume=0;this._extraMediaList.push(a)},initExtraMediaList:function(a,b){switch(this._extraMediaCount){case 1:this.initExtraMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(0).desktopMediaUri,a,b,VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS);break;case 2:this.initExtraMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(0).desktopMediaUri,a,b,VCVideoPlay.EXTRA_VIDEO_CONTAINER_CLASS);this.initExtraMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(1).desktopMediaUri,a,b,VCVideoPlay.EXTRA2_VIDEO_CONTAINER_CLASS);break}},showVideoPlayer:function(){this.base();$videoPlayer=this.getVideoPlayerElem();$videoPlayer.show();$videoPlayer.find(VCVideoPlayDesktop.VIDEO_CONTAINER_CLASS).show();this.setVisibilityForMediaPlayMode()},hideVideoPlayer:function(){this.base();$videoPlayer=this.getVideoPlayerElem();$videoPlayer.hide();$videoPlayer.find(VCVideoPlayDesktop.VIDEO_CONTAINER_CLASS).hide()},resizeVideoTags:function(){if(Util.isIE11embedFullScreen()){this.resizeVideoTagIE11Fullscreen()}else{if(this._mainMedia){this.resizeVideoTag(this._mainMedia)}if(this._subMedia){this.resizeVideoTag(this._subMedia)}if(this._extraMediaList.lenght!=0){for(var a=0;a<this._extraMediaList.length;a++){this.resizeVideoTag(this._extraMediaList[a])}}}},getVideoRatio:function(c){var a=c.videoHeight;var b=c.videoWidth;return b/a},resizeVideoTag:function(b){var a=$(b).parent();var d=$(a).width();var c=$(a).height();this.resizeVideoTagWithSize(b,d,c)},resizeVideoTagIE11Fullscreen:function(){switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:if(this._mainMedia){var e=$(window).innerWidth();var a=$(window).innerHeight();this.resizeVideoTagWithSize(this._mainMedia,e,a)}break;case ContentType.VIDEO2:if(this._mainMedia){var e=$(window).innerWidth()*this._mainMediaPercent/100;var a=$(window).innerHeight();this.resizeVideoTagWithSize(this._mainMedia,e,a)}if(this._subMedia){var c=$(window).innerWidth()*this._subMediaPercent/100;var f=$(window).innerHeight();this.resizeVideoTagWithSize(this._subMedia,c,f)}break;case ContentType.VIDEO3:if(this._mainMedia){var d=this.getVideo3ContainerSize(VideoType.MAIN_MEDIA);this.resizeVideoTagWithSize(this._mainMedia,d.width,d.height)}if(this._subMedia){var d=this.getVideo3ContainerSize(VideoType.SUB_MEDIA);this.resizeVideoTagWithSize(this._subMedia,d.width,d.height)}if(this._extraMediaList.length!=0){var d=this.getVideo3ContainerSize(VideoType.EXTRA_MEDIA);for(var b=0;b<this._extraMediaList.length;b++){this.resizeVideoTagWithSize(this._extraMediaList[b],d.width,d.height)}}break}},resizeVideoTagWithSize:function(c,j,k){var d=this.getVideoRatio(c);var e=j/k;if(!d){return}var g,a,f,b;if(e>d){g=k*d;a=k;f=(j-g)/2;b=0}else{g=j;a=j/d;f=0;b=(k-a)/2}if(parseInt(g)==0||parseInt(a)==0){var i=videoPlayer.getVideoPlay();i._reserveResize=true;return}$(c).width(g);$(c).height(a);$(c).css("margin-left",f+"px");$(c).css("margin-top",b+"px");var h=$(c).parent().find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS);if(h){$(h).css("margin-left",f+"px");if($(h).hasClass(VCVideoPlay.BTN_BELOW_TOP_BAR)){if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){b=(b>VCVideoPlay.METADATA_TOP_BAR_HEIGHT)?b:VCVideoPlay.METADATA_TOP_BAR_HEIGHT}}$(h).css("margin-top",b+"px");$(h).width(g)}},onMetaDataLoaded:function(c){var a=videoPlayer.getVideoPlay();var b=c.target;b.currentTime=a._currentTime;if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.METADATA_LOADED,a._mainMedia.duration)}if(skinManager.isDesktop()){a.resizeVideoTags()}a.setVerticalAlign()},onTimeUpdate:function(b){if(videoPlayer==null||typeof videoPlayer=="undefined"){return}var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.TIME_UPDATE,a._mainMedia.currentTime)}},onMediaReadyToPlay:function(b){if(videoPlayer==null||typeof videoPlayer=="undefined"){return}var a=videoPlayer.getVideoPlay();if((++a._mediaReadyToPlayCount)==a._totalMediaNumber||a._contentInfo.getProfile().isAudio){if(skinManager.isSafari()){a.seekTo(0.1)}a._isPlayable=true;if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.READY_TO_PLAY)}if(a._isSwapping){a.videoSwapped()}}if(a._reserveResize){a._reserveResize=false;a.resize()}},onMainMediaSeeked:function(){var a=videoPlayer.getVideoPlay();a._mainMediaOnSeeking=false;if(uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO1||a._contentInfo.getProfile().isAudio){a._isPlayable=true;if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.PLAYING)}}},onSubMediaSeeked:function(){var a=videoPlayer.getVideoPlay();a._subMediaOnSeeking=false},onEnded:function(){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.ENDED)}},onStateChangePlay:function(){if(videoPlayer==null||typeof videoPlayer=="undefined"){return}var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PLAYING)}},onStateChangePause:function(){if(videoPlayer==null||typeof videoPlayer=="undefined"){return}var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PAUSED)}},onStateChangeWaiting:function(){},onPlaybackRateChanged:function(b){var a=videoPlayer.getVideoPlay();if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.PLAYBACK_RATE_CHANGED,a._mainMedia.playbackRate)}},checkSyncAndBuffer:function(){var a=videoPlayer.getVideoPlay();a.notifyBuffered();if(a._subMedia){a.sync2Video();if(a._playCommandGiven){a.updatePrevTime()}}},notifyBuffered:function(){var d=videoPlayer.getVideoPlay();var a=d.getEndOfBuffered(d._mainMedia);var c=a;if(d._subMedia){c=d.getEndOfBuffered(d._subMedia)}var b=(a>c)?c:a;if(d._eventTarget){d._eventTarget.fire(VCVideoPlayEvent.BUFFERED,b)}},sync2Video:function(){var b=videoPlayer.getVideoPlay();if(b._isWaiting){if(b._subMediaOnSeeking||b._mainMediaOnSeeking){return}var a=new Date().getTime()-b._startTimeOfWaitingBuffer;if((b.isReadyToPlay(b._mainMedia)&&b.isReadyToPlay(b._subMedia))||(a>=VCVideoPlayDesktop.FORCE_STOP_WAITING_TIME)){b.releaseWaiting()}}else{if(b._playCommandGiven){if(b.isMainMediaWaiting()){b.pauseForWaiting()}else{if(b.isSubMediaWaiting()){b.pauseForWaiting()}else{if(b.isTimeSyncBroken()){b.pauseForWaiting()}}}}}},updatePrevTime:function(){var a=videoPlayer.getVideoPlay();if(!a._playCommandGiven){return}a._mainMediaPrevTime=a._mainMedia.currentTime;a._subMediaPrevTime=a._subMedia.currentTime},getEndOfBuffered:function(c){if(c==null){return -1}if(c.buffered==null){return -1}var a=c.buffered.length;for(var b=0;b<a;b++){var d=c.buffered.start(b)-VCVideoPlayDesktop.BUFFER_START_TOLERANCE;if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},isMainMediaWaiting:function(){var a=videoPlayer.getVideoPlay();if(a._mainMediaPrevTime==-1){return false}return((a._playbackRate==1&&a._mainMediaPrevTime==a._mainMedia.currentTime))||a._mainMedia.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA},isSubMediaWaiting:function(){var a=videoPlayer.getVideoPlay();if(a._subMediaPrevTime==-1){return false}return((a._playbackRate==1&&a._subMediaPrevTime==a._subMedia.currentTime))||a._subMedia.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA},isTimeSyncBroken:function(){var a=videoPlayer.getVideoPlay();return(Math.abs(a._mainMedia.currentTime-a._subMedia.currentTime)>=VCVideoPlayDesktop.SYNC_BROKEN_INTERVAL)},pauseForWaiting:function(){var b=videoPlayer.getVideoPlay();b._mainMedia.pause();b._subMedia.pause();b._subMedia.currentTime=b._mainMedia.currentTime;if(b._extraMediaList.lenght!=0){for(var a=0;a<b._extraMediaList.length;a++){b._extraMediaList[a].pause();b._extraMediaList[a].currentTime=b._mainMedia.currentTime}}b._isWaiting=true;b._startTimeOfWaitingBuffer=new Date().getTime();b._isPlayable=false;if(b._eventTarget){b._eventTarget.fire(VCVideoPlayEvent.WAITING)}},releaseWaiting:function(){var a=videoPlayer.getVideoPlay();a._isWaiting=false;a._isPlayable=true;if(a._eventTarget){a._eventTarget.fire(VCVideoPlayEvent.PLAYING)}if(a._playCommandGiven){a.playMedia()}},isReadyToPlay:function(d){var c=videoPlayer.getVideoPlay();var b=c.getEndOfBuffered(d);var a=((b-d.currentTime)>=VCVideoPlayDesktop.ENOUGH_PRE_LOAD_TIME||b==d.duration);return(d.readyState==HTMLMediaElement.HAVE_ENOUGH_DATA&&a)},videoSwapped:function(){if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.SWAPPED)}this._isPlayable=true;this._isSwapping=false;this._mainMedia.currentTime=this._currentTime;if(this._subMedia){this._subMedia.currentTime=this._currentTime}if(this._extraMediaList.lenght!=0){for(var a=0;a<this._extraMediaList.length;a++){this._extraMediaList[a].currentTime=this._currentTime}}if(this._playCommandGiven){this._mainMedia.play();if(this._subMedia){this._subMedia.play()}if(this._extraMediaList.lenght!=0){for(var a=0;a<this._extraMediaList.length;a++){this._extraMediaList[a].play()}}}this.changePlaybackRate()},play:function(){if(!this.isVideoSet()){return}if(!this._isWaiting){this.playMedia()}this._playCommandGiven=true},playMedia:function(){var b=videoPlayer.getVideoPlay();b._mainMedia.play();if(b._subMedia){b._subMedia.play()}if(b._extraMediaList.lenght!=0){for(var a=0;a<b._extraMediaList.length;a++){b._extraMediaList[a].play()}}b.changePlaybackRate()},pause:function(){if(!this.isVideoSet()){return}this._mainMedia.pause();if(this._subMedia){this._subMedia.pause()}if(this._extraMediaList.lenght!=0){for(var a=0;a<this._extraMediaList.length;a++){this._extraMediaList[a].pause()}}this._playCommandGiven=false},seekStart:function(){if(this._contentInfo.contentType==ContentType.VIDEO2){this._isWaiting=true}this._mainMediaOnSeeking=this._subMediaOnSeeking=true},seekTo:function(b){if(!this.isVideoSet()){return}this._mainMedia.currentTime=b;if(this._subMedia){this._subMedia.currentTime=b;if(this._extraMediaList.lenght!=0){for(var a=0;a<this._extraMediaList.length;a++){this._extraMediaList[a].currentTime=b}}this.pauseForWaiting()}else{this._isPlayable=false;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.WAITING)}}this._startTimeOfWaitingBuffer=new Date().getTime();this._subMediaPrevTime=this._mainMediaPrevTime=-1;this._mainMediaOnSeeking=this._subMediaOnSeeking=true},setPlaybackRate:function(a){this._playbackRate=a;this.changePlaybackRate()},changePlaybackRate:function(){if(!uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate){return}if(this._mainMedia){this._mainMedia.playbackRate=this._playbackRate}if(this._subMedia){this._subMedia.playbackRate=this._playbackRate}if(this._extraMediaList.length!=0){for(var a=0;a<this._extraMediaList.length;a++){this._extraMediaList[a].playbackRate=this._playbackRate}}},swapProfile:function(a){if(!this.base(a)){return}this._contentInfo.setProfile(a);var c=(this._mainMedia)?this._mainMedia.currentTime:0;var b=this._contentInfo.getProfile().isAudio;this.initMainMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia().desktopMediaUri,c,b);if(uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO2||uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO3){this.initSubMedia(uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia().desktopMediaUri,c,b)}if(uniPlayerConfig.getMediaChannelConfig().getContentType()==ContentType.VIDEO3){this.initExtraMediaList(c,b)}this.setVisibilityForMediaPlayMode();this._mediaReadyToPlayCount=0;this._isSwapping=true;this._isPlayable=false;if(this._eventTarget){this._eventTarget.fire(VCVideoPlayEvent.SWAPING)}},setVolume:function(a){if(this._mainMedia&&isFinite(a)){this._mainMedia.volume=a}},getDuration:function(){if(!this._mainMedia){return 0}return this._mainMedia.duration},getEntireVideoContainer:function(a){return this.getVideoPlayerElem(a).find(VCVideoPlayDesktop.VIDEO_CONTAINER_CLASS)},getCurrentTime:function(){if(!this._mainMedia){return 0}return this._mainMedia.currentTime},isVideoSet:function(){return(this._contentInfo.getProfile().isAudio&&this._mainMedia)||(this._totalMediaNumber==4&&this._mainMedia&&this._subMedia&&this._extraMediaList.length==2)||(this._totalMediaNumber==3&&this._mainMedia&&this._subMedia&&this._extraMediaList.length==1)||(this._totalMediaNumber==2&&this._mainMedia&&this._subMedia)||(this._totalMediaNumber==1&&this._mainMedia)},isWaiting:function(){return this._isWaiting}},{VIDEO_CONTAINER_CLASS:".vc-vplay-container",ENOUGH_PRE_LOAD_TIME:1,FORCE_STOP_WAITING_TIME:1000,SYNC_BROKEN_INTERVAL:1,BUFFER_START_TOLERANCE:0.99});var VCVideoPlayDesktopFlash=VCVideoPlay.extend({_flashLoadCount:0,_metadataLoadCount:0,_isFirstTime:true,_isWaiting:false,_isSeeking:false,_isSyncBroken:false,_isSwapping:false,_currentTime:0,_isMetadataLoaded:false,_mainMediaLoaded:false,_subMediaLoaded:false,_extraMediaLoaded:false,_extraMedia2Loaded:false,initialize:function(a){this.base(a);this._isFlash=true;this.setPlayerHeight();this.initControls()},release:function(){this.base();this._metadataLoadCount=0;this._flashLoadCount=0;$videoPlayer=this.getVideoPlayerElem();if(this._mainMedia){this.unloadMedia(this._mainMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia());this._mainMedia=null}if(this._subMedia){this.unloadMedia(this._subMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia());this._subMedia=null}if(this._extraMediaList.length!=0){for(var a=0;a<this._extraMediaList.length;a++){this.unloadMedia(this._extraMediaList[a],uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(a));this._extraMediaList[a]=null}}this.clearVideoContainer()},clearVideoContainer:function(){$videoPlayer=this.getVideoPlayerElem();switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).empty();$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO1_MAIN_VIDEO_ELEMENT_ID+'"></div>');break;case ContentType.VIDEO2:$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).empty();$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO2_MAIN_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.SUB_VIDEO_CONTAINER_CLASS).empty();$videoPlayer.find(VCVideoPlayDesktopFlash.SUB_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO2_SUB_VIDEO_ELEMENT_ID+'"></div>');break;case ContentType.VIDEO3:$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).empty();$videoPlayer.find(VCVideoPlayDesktopFlash.SUB_VIDEO_CONTAINER_CLASS).empty();$videoPlayer.find(VCVideoPlayDesktopFlash.EXTRA_VIDEO_CONTAINER_CLASS).empty();if(this._extraMediaCount==1){$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO3_MAIN_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.SUB_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO3_SUB_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.EXTRA1_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO3_EXTRA_VIDEO_ELEMENT_ID+'"></div>')}else{$videoPlayer.find(VCVideoPlayDesktopFlash.MAIN_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO4_MAIN_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.SUB_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO4_SUB_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.EXTRA1_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO4_EXTRA_VIDEO_ELEMENT_ID+'"></div>');$videoPlayer.find(VCVideoPlayDesktopFlash.EXTRA2_VIDEO_CONTAINER_CLASS).html('<div id="'+VCVideoPlayDesktopFlash.VIDEO4_EXTRA2_VIDEO_ELEMENT_ID+'"></div>')}break}},initControls:function(){if(!this._contentInfo){return}switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:this.initMainMediaFlash(VCVideoPlayDesktopFlash.VIDEO1_MAIN_VIDEO_ELEMENT_ID);break;case ContentType.VIDEO2:this.initMainMediaFlash(VCVideoPlayDesktopFlash.VIDEO2_MAIN_VIDEO_ELEMENT_ID);if(false==this._contentInfo.getProfile().isAudio){this.initSubMediaFlash(VCVideoPlayDesktopFlash.VIDEO2_SUB_VIDEO_ELEMENT_ID)}break;case ContentType.VIDEO3:switch(this._extraMediaCount){case 1:this.initMainMediaFlash(VCVideoPlayDesktopFlash.VIDEO3_MAIN_VIDEO_ELEMENT_ID);if(false==this._contentInfo.getProfile().isAudio){this.initSubMediaFlash(VCVideoPlayDesktopFlash.VIDEO3_SUB_VIDEO_ELEMENT_ID);this.initExtraMediaList()}break;case 2:this.initMainMediaFlash(VCVideoPlayDesktopFlash.VIDEO4_MAIN_VIDEO_ELEMENT_ID);if(false==this._contentInfo.getProfile().isAudio){this.initSubMediaFlash(VCVideoPlayDesktopFlash.VIDEO4_SUB_VIDEO_ELEMENT_ID);this.initExtraMediaList()}break}break}this.setDesktopLayout();this.setVisibilityForMediaPlayMode();if(this._contentInfo.getProfile().isAudio){this.hideLayoutSetBox();this.hideVideoSeparator()}},initExtraMediaList:function(){switch(this._extraMediaCount){case 1:this.initExtraMediaFlash(VCVideoPlayDesktopFlash.VIDEO3_EXTRA_VIDEO_ELEMENT_ID,0);break;case 2:this.initExtraMediaFlash(VCVideoPlayDesktopFlash.VIDEO4_EXTRA_VIDEO_ELEMENT_ID,0);this.initExtraMediaFlash(VCVideoPlayDesktopFlash.VIDEO4_EXTRA2_VIDEO_ELEMENT_ID,1);break}},setVisibilityForMediaPlayMode:function(){if(this._contentInfo.getProfile().isAudio){$(this.getVideoPlayerElem()).css("width","0%");$(this.getVideoPlayerElem()).css("height","0%");$(VCVideoPlay.VIDEO_PLAYER_AUDIO_ID).show()}else{$(this.getVideoPlayerElem()).css("width","100%");$(this.getVideoPlayerElem()).css("height","100%");$(VCVideoPlay.VIDEO_PLAYER_AUDIO_ID).hide()}},initMainMediaFlash:function(a){this.createFlashVideo(a,VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID);this._mainMedia=document.getElementById(VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID);if(this._contentInfo.getProfile().isAudio){$(this._mainMedia).css("width","0%");$(this._mainMedia).css("height","0%")}else{$(this._mainMedia).css("width","100%");$(this._mainMedia).css("height","100%")}},initSubMediaFlash:function(a){this.createFlashVideo(a,VCVideoPlayDesktopFlash.SUB_FLASH_ELEMENT_ID);this._subMedia=document.getElementById(VCVideoPlayDesktopFlash.SUB_FLASH_ELEMENT_ID)},initExtraMediaFlash:function(a,b){switch(b){case 0:this.createFlashVideo(a,VCVideoPlayDesktopFlash.EXTRA_FLASH_ELEMENT_ID);this._extraMediaList[b]=document.getElementById(VCVideoPlayDesktopFlash.EXTRA_FLASH_ELEMENT_ID);break;case 1:this.createFlashVideo(a,VCVideoPlayDesktopFlash.EXTRA2_FLASH_ELEMENT_ID);this._extraMediaList[b]=document.getElementById(VCVideoPlayDesktopFlash.EXTRA2_FLASH_ELEMENT_ID);break}},createFlashVideo:function(j,h){var a="11.4.0";var d={};var e={};var i=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var g=Util.urlMerge(i,"playerproductinstall.swf");e.quality="high";e.bgcolor="#000000";e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="transparent";var f={};f.id=h;f.name=h;f.align="middle";var b="100%";var k="100%";var c=Util.urlMerge(i,"flashvideofallback.swf");swfobject.embedSWF(c,j,b,k,a,g,d,e,f,this.callbackEmbedSWF);swfobject.createCSS(j,"display:block;text-align:left;")},callbackEmbedSWF:function(a){if(a.success==false){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;document.location=Util.urlMerge(b,"downloadflashplayer.html")}},loadMedia:function(b,a){if(a.desktopMethod==MediaMethod.RTMP){var c=this.getRTMPMediaInfo(a.desktopMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);return}switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,a.flashFallbackMediaUri);break;case MediaMethod.RTMP:var c=this.getRTMPMediaInfo(a.flashFallbackMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);break}},unloadMedia:function(b,a){switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,null);break;case MediaMethod.RTMP:b.fvLoad(MediaMethod.RTMP,null,null);break}},getRTMPMediaInfo:function(a){var c=a.indexOf("mp4:");var d=a.substring(0,c);var b=a.substring(c+4);return{serverUri:d,mediaUri:b}},showVideoPlayer:function(){this.base();$videoPlayer=this.getVideoPlayerElem();$videoPlayer.show();$videoPlayer.css("visibility","visible");$videoPlayer.find(VCVideoPlayDesktopFlash.VIDEO_CONTAINER_CLASS).show()},hideVideoPlayer:function(){this.base();$videoPlayer=this.getVideoPlayerElem();$videoPlayer.hide();$videoPlayer.css("visibility","hidden");$videoPlayer.find(VCVideoPlayDesktopFlash.VIDEO_CONTAINER_CLASS).hide()},resizeVideoTags:function(){if(Util.isIE11embedFullScreen()){this.resizeVideoTagIE11Fullscreen()}else{if(this._mainMediaLoaded){this.resizeVideoTag(this._mainMedia)}if(this._subMediaLoaded&&this._subMedia){this.resizeVideoTag(this._subMedia)}if(this._extraMediaLoaded&&this._extraMediaList[0]){this.resizeVideoTag(this._extraMediaList[0])}if(this._extraMedia2Loaded&&this._extraMediaList[1]){this.resizeVideoTag(this._extraMediaList[1])}}},isNumber:function(a){return typeof a=="number"&&!isNaN(a)&&isFinite(a)},resizeVideoTag:function(d){var c=$(d).parent();var a=$(c).parent();var f=$(a).width();var e=$(a).height();var b=$(a).find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS);this.resizeVideoTagWithSize(d,f,e)},resizeVideoTagIE11Fullscreen:function(){switch(uniPlayerConfig.getMediaChannelConfig().getContentType()){case ContentType.VIDEO1:if(this._mainMediaLoaded){var d=$(window).innerWidth();var a=$(window).innerHeight();this.resizeVideoTagWithSize(this._mainMedia,d,a)}break;case ContentType.VIDEO2:if(this._mainMediaLoaded){var d=$(window).innerWidth()*this._mainMediaPercent/100;var a=$(window).innerHeight();this.resizeVideoTagWithSize(this._mainMedia,d,a)}if(this._subMediaLoaded){var b=$(window).innerWidth()*this._subMediaPercent/100;var e=$(window).innerHeight();this.resizeVideoTagWithSize(this._subMedia,b,e)}break;case ContentType.VIDEO3:if(this._mainMediaLoaded){var c=this.getVideo3ContainerSize(VideoType.MAIN_MEDIA);this.resizeVideoTagWithSize(this._mainMedia,c.width,c.height)}if(this._subMediaLoaded){var c=this.getVideo3ContainerSize(VideoType.SUB_MEDIA);this.resizeVideoTagWithSize(this._subMedia,c.width,c.height)}if(this._extraMediaLoaded){var c=this.getVideo3ContainerSize(VideoType.EXTRA_MEDIA);this.resizeVideoTagWithSize(this._extraMediaList[0],c.width,c.height)}if(this._extraMedia2Loaded){var c=this.getVideo3ContainerSize(VideoType.EXTRA_MEDIA);this.resizeVideoTagWithSize(this._extraMediaList[1],c.width,c.height)}break}},resizeVideoTagWithSize:function(c,k,l){var e=this.getVideoRatio(c);var j=videoPlayer.getVideoPlay();if(!this.isNumber(e)){setTimeout(function(){j.resizeVideoTag(c)},200);return}var h=$(c).parent();var f=k/l;var g,a,d,b;if(f>e){g=l*e;a=l;d=(k-g)/2;b=0}else{g=k;a=k/e;d=0;b=(l-a)/2}$(h).width(g);$(h).height(a);$(h).css("margin-left",d+"px");$(h).css("margin-top",b+"px");var i=$(h).parent().find(VCVideoPlay.VIDEO_BTNS_WRAPPER_CLASS);if(i){$(i).css("margin-left",d+"px");if($(i).hasClass(VCVideoPlay.BTN_BELOW_TOP_BAR)){if(uniPlayerConfig.getUniPlayerSettingsData().useTitle){b=(b>VCVideoPlay.METADATA_TOP_BAR_HEIGHT)?b:VCVideoPlay.METADATA_TOP_BAR_HEIGHT}}$(i).css("margin-top",b+"px");$(i).width(g)}},getVideoRatio:function(c){var a=c.getHeight();var b=c.getWidth();return b/a},setPlayerHeight:function(){var a="35px";if(videoPlayer.isHidePlayControllerMode()){a="0px"}$(VCVideoPlay.VIDEO_PLAY_WRAPPER_ID).css("bottom",a)},onFallbackReady:function(a){this._flashLoadCount++;if(this._totalMediaNumber!=this._flashLoadCount&&false==this._contentInfo.getProfile().isAudio){return}this.loadMedia(this._mainMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia());if(this._contentInfo.getProfile().isAudio){return}if(this._contentInfo.storyType!=ContentType.VIDEO1){this.loadMedia(this._subMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia());if(this._contentInfo.storyType!=ContentType.VIDEO2){for(var b=0;b<this._extraMediaList.length;b++){this.loadMedia(this._extraMediaList[b],uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(b))}}}},onMetadataLoaded:function(b){var d=videoPlayer.getVideoPlay();switch(b){case VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID:d._mainMedia.setVolume(1);d._metadataLoadCount++;d._mainMediaLoaded=true;d._eventTarget.fire(VCVideoPlayEvent.METADATA_LOADED,d._mainMedia.getDuration());break;case VCVideoPlayDesktopFlash.SUB_FLASH_ELEMENT_ID:d._subMedia.setVolume(0);d._metadataLoadCount++;d._subMediaLoaded=true;break;case VCVideoPlayDesktopFlash.EXTRA_FLASH_ELEMENT_ID:d._extraMediaList[0].setVolume(0);d._metadataLoadCount++;d._extraMediaLoaded=true;break;case VCVideoPlayDesktopFlash.EXTRA2_FLASH_ELEMENT_ID:d._extraMediaList[1].setVolume(0);d._metadataLoadCount++;d._extraMedia2Loaded=true;break}if(d._totalMediaNumber==d._metadataLoadCount||this._contentInfo.getProfile().isAudio){d._isMetadataLoaded=true;if(d._currentTime!=0){if(this._contentInfo.getProfile().isAudio){setTimeout(function(){d.seekTo(d._currentTime);d._currentTime=0},100)}else{var c=uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia();var a=(c.desktopMethod==MediaMethod.RTMP)||(c.flashFallbackMethod==MediaMethod.RTMP);if(a){if(d._mainMedia){try{d._mainMedia.fvPlay()}catch(f){}}if(d._subMedia){try{d._subMedia.fvPlay()}catch(f){}}if(d._extraMediaList[0]){try{d._extraMediaList[0].fvPlay()}catch(f){}}if(d._extraMediaList[1]){try{d._extraMediaList[1].fvPlay()}catch(f){}}}d.seekTo(d._currentTime);d._currentTime=0}}}if(d._playCommandGiven){d.play()}else{d.pause()}d.resizeVideoTags();d.setVerticalAlign()},onStatusChange:function(a,b){var c=videoPlayer.getVideoPlay();if(b==VCVideoPlayDesktopFlash.NETSTREAM_BUFFER_FLUSH||b==VCVideoPlayDesktopFlash.NETSTREAM_BUFFER_FULL){c._isSeeking=false;if(c._isSyncBroken){c._isSyncBroken=false;c.releaseWaiting();return}if((++c._mediaReadyToPlayCount)==c._totalMediaNumber||c._contentInfo.getProfile().isAudio){if(c._isFirstTime){c._isPlayable=true;c._eventTarget.fire(VCVideoPlayEvent.READY_TO_PLAY);c._isFirstTime=false;if(c._isSwapping){if(c._playCommandGiven){try{c._mainMedia.fvPlay()}catch(d){}if(c._subMedia){try{c._subMedia.fvPlay()}catch(d){}}if(c._extraMediaList[0]){try{c._extraMediaList[0].fvPlay()}catch(d){}}if(c._extraMediaList[1]){try{c._extraMediaList[1].fvPlay()}catch(d){}}}c._isSwapping=false;c._eventTarget.fire(VCVideoPlayEvent.SWAPPED)}}if(c._isWaiting){c.releaseWaiting()}c._mediaReadyToPlayCount=0;c.setVisibilityForMediaPlayMode()}}else{if(b==VCVideoPlayDesktopFlash.NETSTREAM_BUFFER_EMPTY){if(a==VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID){if(c._mainMedia.getDuration()-c._mainMedia.getCurrentTime()<10){c.onEnded()}}else{if(a==VCVideoPlayDesktopFlash.SUB_FLASH_ELEMENT_ID){if(c._subMedia.getDuration()-c._subMedia.getCurrentTime()<10){c.onEnded()}}}}}if(a==VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID){switch(b){case VCVideoPlayDesktopFlash.NETSTREAM_UNPAUSE_NOTIFY:c._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PLAYING);break;case VCVideoPlayDesktopFlash.NETSTREAM_PAUSE_NOTIFY:c._eventTarget.fire(VCVideoPlayEvent.STATE_CHANGE,PlayState.PAUSED);break}}},onEnded:function(){var a=videoPlayer.getVideoPlay();a._eventTarget.fire(VCVideoPlayEvent.ENDED)},onTimeUpdate:function(a,c){if(a==VCVideoPlayDesktopFlash.MAIN_FLASH_ELEMENT_ID){var b=videoPlayer.getVideoPlay();if(false==b._isSeeking){b._eventTarget.fire(VCVideoPlayEvent.TIME_UPDATE,c)}if(this._subMedia){b.sync2Video()}}},sync2Video:function(){var a=videoPlayer.getVideoPlay();if(a.isTimeSyncBroken()){a._isSyncBroken=true;a.pauseForWaiting(false);a._subMedia.setCurrentTime(a._mainMedia.getCurrentTime())}},isTimeSyncBroken:function(){var a=videoPlayer.getVideoPlay();return(Math.abs(a._mainMedia.getCurrentTime()-a._subMedia.getCurrentTime())>=VCVideoPlayDesktopFlash.SYNC_BROKEN_INTERVAL)},play:function(){if(!this.isVideoSet()){return}if(!this._isWaiting){try{this._mainMedia.fvPlay()}catch(a){}if(this._subMedia){try{this._subMedia.fvPlay()}catch(a){}}if(this._extraMediaList[0]){try{this._extraMediaList[0].fvPlay()}catch(a){}}if(this._extraMediaList[1]){try{this._extraMediaList[1].fvPlay()}catch(a){}}}this._playCommandGiven=true},pause:function(){if(!this.isVideoSet()){return}try{this._mainMedia.fvPause()}catch(a){}if(this._subMedia){try{this._subMedia.fvPause()}catch(a){}}if(this._extraMediaList[0]){try{this._extraMediaList[0].fvPause()}catch(a){}}if(this._extraMediaList[1]){try{this._extraMediaList[1].fvPause()}catch(a){}}this._playCommandGiven=false},seekTo:function(a){if(!this.isVideoSet()){return}if(!this._isMetadataLoaded){this._currentTime=a;return}this._isSeeking=true;this._mainMedia.setCurrentTime(a);if(this._subMedia){this._subMedia.setCurrentTime(a)}if(this._extraMediaList[0]){this._extraMediaList[0].setCurrentTime(a)}if(this._extraMediaList[1]){this._extraMediaList[1].setCurrentTime(a)}this._eventTarget.fire(VCVideoPlayEvent.TIME_UPDATE,a);this.pauseForWaiting(true)},setPlaybackRate:function(a){},setVolume:function(a){if(this._mainMedia){this._mainMedia.setVolume(a)}},swapProfile:function(a){if(!this.base(a)){return}this._contentInfo.setProfile(a);this._currentTime=(this.isVideoSet())?this._mainMedia.getCurrentTime():0;this._isSwapping=true;this._metadataLoadCount=0;this._flashLoadCount=0;this._isMetadataLoaded=false;this._mainMediaLoaded=false;this._subMediaLoaded=false;this._extraMediaLoaded=false;this._extraMedia2Loaded=false;this.unloadMedia(this._mainMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentMainMedia());if(this._subMedia){this.unloadMedia(this._subMedia,uniPlayerConfig.getMediaChannelConfig().getCurrentSubMedia());this._subMedia=null}if(this._extraMediaList[0]){this.unloadMedia(this._extraMediaList[0],uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(0));this._extraMediaList[0]=null}if(this._extraMediaList[1]){this.unloadMedia(this._extraMediaList[1],uniPlayerConfig.getMediaChannelConfig().getCurrentExtraMedia(1));this._extraMediaList[1]=null}this.clearVideoContainer();this.initControls();this._isFirstTime=true;this._isPlayable=true;this._eventTarget.fire(VCVideoPlayEvent.SWAPING)},getDuration:function(){if(!this._mainMedia){return 0}var b=0;try{b=this._mainMedia.getDuration()}catch(a){b=0}return b},getCurrentTime:function(){if(!this._mainMedia){return 0}var a=0;try{a=this._mainMedia.getCurrentTime()}catch(b){a=0}return a},getEntireVideoContainer:function(a){return this.getVideoPlayerElem(a).find(VCVideoPlayDesktopFlash.VIDEO_CONTAINER_CLASS)},pauseForWaiting:function(a){var b=videoPlayer.getVideoPlay();try{b._mainMedia.fvPause()}catch(c){}if(b._subMedia){try{b._subMedia.fvPause()}catch(c){}}if(b._extraMediaList[0]){try{b._extraMediaList[0].fvPause()}catch(c){}}if(b._extraMediaList[1]){try{b._extraMediaList[1].fvPause()}catch(c){}}b._isWaiting=true;b._isPlayable=false;if(a){b._eventTarget.fire(VCVideoPlayEvent.WAITING)}},releaseWaiting:function(){var a=videoPlayer.getVideoPlay();a._isWaiting=false;a._isPlayable=true;a._eventTarget.fire(VCVideoPlayEvent.PLAYING);if(a._playCommandGiven){try{a._mainMedia.fvPlay()}catch(b){}if(a._subMedia){try{a._subMedia.fvPlay()}catch(b){}}if(a._extraMediaList[0]){try{a._extraMediaList[0].fvPlay()}catch(b){}}if(a._extraMediaList[1]){try{a._extraMediaList[1].fvPlay()}catch(b){}}}},isVideoSet:function(){return(this._contentInfo.getProfile().isAudio&&this._mainMedia)||(this._totalMediaNumber==4&&this._mainMedia&&this._subMedia&&this._extraMediaList[0]&&this._extraMediaList[1])||(this._totalMediaNumber==3&&this._mainMedia&&this._subMedia&&this._extraMediaList[0])||(this._totalMediaNumber==2&&this._mainMedia&&this._subMedia)||(this._totalMediaNumber==1&&this._mainMedia)},isWaiting:function(){return this._isWaiting}},{VIDEO_CONTAINER_CLASS:".vc-vplay-container-flash-fallback",MAIN_VIDEO_CONTAINER_CLASS:".vc-vplay-video1-flash-fallback",SUB_VIDEO_CONTAINER_CLASS:".vc-vplay-video2-flash-fallback",EXTRA_VIDEO_CONTAINER_CLASS:".vc-vplay-video3-flash-fallback",EXTRA1_VIDEO_CONTAINER_CLASS:".vc-vplay-video3.vc-vplay-video3-flash-fallback",EXTRA2_VIDEO_CONTAINER_CLASS:".vc-vplay-video4.vc-vplay-video3-flash-fallback",VIDEO1_MAIN_VIDEO_ELEMENT_ID:"video1-main-flash-fallback",VIDEO2_MAIN_VIDEO_ELEMENT_ID:"video2-main-flash-fallback",VIDEO2_SUB_VIDEO_ELEMENT_ID:"video2-sub-flash-fallback",VIDEO3_MAIN_VIDEO_ELEMENT_ID:"video3-main-flash-fallback",VIDEO3_SUB_VIDEO_ELEMENT_ID:"video3-sub-flash-fallback",VIDEO3_EXTRA_VIDEO_ELEMENT_ID:"video3-extra-flash-fallback",VIDEO4_MAIN_VIDEO_ELEMENT_ID:"video4-main-flash-fallback",VIDEO4_SUB_VIDEO_ELEMENT_ID:"video4-sub-flash-fallback",VIDEO4_EXTRA_VIDEO_ELEMENT_ID:"video4-extra-flash-fallback",VIDEO4_EXTRA2_VIDEO_ELEMENT_ID:"video4-extra2-flash-fallback",MAIN_FLASH_ELEMENT_ID:"Fallback-video1",SUB_FLASH_ELEMENT_ID:"Fallback-video2",EXTRA_FLASH_ELEMENT_ID:"Fallback-video3",EXTRA2_FLASH_ELEMENT_ID:"Fallback-video4",SYNC_BROKEN_INTERVAL:0.5,NETSTREAM_PLAY_START:"NetStream.Play.Start",NETSTREAM_UNPAUSE_NOTIFY:"NetStream.Unpause.Notify",NETSTREAM_PAUSE_NOTIFY:"NetStream.Pause.Notify",NETSTREAM_BUFFER_FULL:"NetStream.Buffer.Full",NETSTREAM_BUFFER_FLUSH:"NetStream.Buffer.Flush",NETSTREAM_BUFFER_EMPTY:"NetStream.Buffer.Empty"});var VCVideoPlayEvent={METADATA_LOADED:"vplay_metadata_loaded",TIME_UPDATE:"vplay_time_update",READY_TO_PLAY:"vplay_ready_to_play",BUFFERED:"vplay_buffered",WAITING:"vplay_wating",PLAYING:"vplay_playing",ENDED:"vplay_ended",STATE_CHANGE:"vplay_state_change",ERROR:"vplay_error",SWAPING:"vplay_swaping",SWAPPED:"vplay_swapped",PLAYER_MOUSEMOVE:"vplay_mousemove",PLAYER_MOUSELEAVE:"vplay_mouseleave",CLICK_ENTIRE_AREA:"vplay_click_entire_area",PLAYER_AREA_TOUCHED:"vplay_player_area_touched",AUTO_PLAY_STARTED:"auto_play_started",LAYOUT_CHANGED:"vplay_layout_changed",RELOAD_PLAYER:"vplay_reload_plyaer",REMOVE_VIDEO:"vplay_remove_video",CHANGE_TO_FLASH:"vplay_change_to_flash",SKIP_AUDIO_ERROR:"vplay_skip_audio_error",PLAYBACK_RATE_CHANGED:"vplay_playback_rate_changed"};var VCSyncDocPlay=VisualComponent.extend({_contentInfo:null,_slideListInfo:null,_eventList:null,_isFlash:false,_vcSyncDocSlide:null,_vcSyncDocSlideController:null,_playCommandGiven:false,_isLayoutAdjusting:false,_isMouseOverSeparator:false,_isMouseOverLayoutSetBox:false,_isSwapped:false,_swapTime:0,_layoutChangePoint:0,_mainMediaPercent:0,_mainMediaPercentForLayoutMove:0,_playbackRate:1,_eventTargetForVC:null,_layoutIndex:1,_isSyncMode:false,_contentsVerticalAlign:"center",initialize:function(a,c,b,d){this._contentInfo=a;this._slideListInfo=c;this._eventList=b;this._isSyncMode=d;this._contentsVerticalAlign=uniPlayerConfig.getUniPlayerSettingsData().contentsVerticalAlign;this._vcSyncDocSlide=new VCSlide();this._vcSyncDocSlideController=new VCSlideController();this.attachSyncDocPlayEvents();this.setPlayerHeight();if(skinManager.isDesktop()){this.initializeVideoSlidePosition()}},release:function(){this.getSlideVC().release();this.getSlideControllerVC().release();this.releaseSyncDocPlayEvents()},resetSlide:function(c){if(!this.getSlideVC()){return}this._isSyncMode=c;var a=this.getSlideVC()._currSlideId;var b=this.getSlideVC()._currImageIdx;this.getSlideVC().release();this._vcSyncDocSlide=new VCSlide();this.getSlideVC().addEventListener(this._eventTargetForVC);this.getSlideVC().initialize(this.getSyncDocPlayerElem(),this._slideListInfo,this._isSyncMode,a,b)},setSyncMode:function(a){this._isSyncMode=a;if(this.getSlideVC()){this.getSlideVC().setSyncMode(a)}if(this.getSlideControllerVC()){this.getSlideControllerVC().setSyncMode(a)}},attachSyncDocPlayEvents:function(){this._eventTargetForVC=new EventTargetArgs();this._eventTargetForVC.addListener(VCSlideEvent.INITIALIZED,this.onSlideInitialized);this._eventTargetForVC.addListener(VCSlideEvent.PAGE_CHANGED,this.onSlidePageChanged);this._eventTargetForVC.addListener(VCSlideControllerEvent.NEXT_PAGE,this.onSlideControllerNextPage);this._eventTargetForVC.addListener(VCSlideControllerEvent.PREV_PAGE,this.onSlideControllerPrevPage);this._eventTargetForVC.addListener(VCSlideControllerEvent.ZOOM_IN,this.onSlideControllerZoomIn);this._eventTargetForVC.addListener(VCSlideControllerEvent.ZOOM_OUT,this.onSlideControllerZoomOut);this._eventTargetForVC.addListener(VCSlideControllerEvent.FIT_TO_PAGE,this.onSlideControllerFitToPage);this._eventTargetForVC.addListener(VCSlideControllerEvent.FIT_TO_WIDTH,this.onSlideControllerFitToWidth);this._eventTargetForVC.addListener(VCSlideControllerEvent.SYNC_ON,this.onSlideControllerSyncOn);this._eventTargetForVC.addListener(VCSlideControllerEvent.SYNC_OFF,this.onSlideControllerSyncOff);if(skinManager.isMobile()){this.attachMobileEvents()}else{this.attachDesktopEvents()}},attachMobileEvents:function(){this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked,true);this.attachDownEvent(LayoutIdTable.SYNCDOC_PLAYER,this.onSyncDocAreaTouched)},attachDesktopEvents:function(){this.attachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.attachMouseEvents();switch(this._contentInfo.storyType){case ContentType.SYNCVIDEO:this.attachUserLayoutChangeEvent();this.attachLayoutButtonEvents();this.attachLayoutSwapButtonEvents();break;case ContentType.SYNCAUDIO:break}},attachMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).bind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).bind("mouseleave",this.onPlayerMouseLeave);$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).bind("mouseover",this.onSyncDocSeparatorOver);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).bind("mouseleave",this.onSyncDocSeparatorLeave);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).bind("mouseover",this.onSyncDocLayoutSetBoxOver);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).bind("mouseleave",this.onSyncDocLayoutSetBoxLeave)},attachUserLayoutChangeEvent:function(){this.attachDownEvent(LayoutIdTable.SYNCDOC_PLAYER,this.onSyncDocPlayDown)},attachLayoutButtonEvents:function(){for(var a=1;a<=VCSyncDocPlay.NUM_OF_LAYOUT;a++){var b=this.getLayoutBtnName(a);this.attachClickEvent("#"+b,this.onLayoutBtnClick)}},attachLayoutSwapButtonEvents:function(){this.attachClickEvent(VCSyncDocPlay.LAYOUT_SWAP_BTN_ID,this.swapVideoSlide)},releaseSyncDocPlayEvents:function(){if(skinManager.isMobile()){this.releaseMobileEvents()}else{this.releaseDesktopEvents()}},releaseMobileEvents:function(){this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.detachDownEvent(LayoutIdTable.SYNCDOC_PLAYER,this.onSyncDocAreaTouched)},releaseDesktopEvents:function(){this.detachClickEvent(LayoutIdTable.UNI_PLAYER,this.onEntireAreaClicked);this.releaseMouseEvents();switch(this._contentInfo.storyType){case ContentType.SYNCVIDEO:this.releaseUserLayoutChangeEvent();this.releaseLayoutButtonEvents();this.releaseLayoutSwapButtonEvents();break;case ContentType.SYNCAUDIO:break}},releaseMouseEvents:function(){$(LayoutIdTable.UNI_PLAYER).unbind("mousemove",this.onPlayerMouseMove);$(LayoutIdTable.UNI_PLAYER).unbind("mouseleave",this.onPlayerMouseLeave);$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).unbind("mouseover",this.onSyncDocSeparatorOver);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).unbind("mouseleave",this.onSyncDocSeparatorLeave);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).unbind("mouseover",this.onSyncDocLayoutSetBoxOver);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).unbind("mouseleave",this.onSyncDocLayoutSetBoxLeave)},releaseUserLayoutChangeEvent:function(){this.detachDownEvent(LayoutIdTable.SYNCDOC_PLAYER,this.onSyncDocPlayDown)},releaseLayoutButtonEvents:function(){for(var a=1;a<=VCSyncDocPlay.NUM_OF_LAYOUT;a++){var b=this.getLayoutBtnName(a);this.detachClickEvent("#"+b,this.onLayoutBtnClick)}},releaseLayoutSwapButtonEvents:function(){this.detachClickEvent(VCSyncDocPlay.LAYOUT_SWAP_BTN_ID,this.swapVideoSlide)},showSyncDocPlayer:function(){$(LayoutIdTable.SYNCDOC_PLAYER).show();$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.show();$syncDocPlayer.css("visibility","visible");this.getSlideVC().showSlide()},hideSyncDocPlayer:function(){$(LayoutIdTable.SYNCDOC_PLAYER).hide();$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.hide();$syncDocPlayer.css("visibility","hidden");this.getSlideVC().hideSlide()},resize:function(){var a=syncDocPlayer.getSyncDocPlay();a.setPlayerHeight();a.setSyncDocSeparator();var d=$(VCSyncDocPlay.SLIDE_CONTAINER_CLASS);if((100-a._mainMediaPercent)<0.1){d.hide()}else{d.show()}if(Util.isIE11embedFullScreen()){switch(a._contentInfo.storyType){case ContentType.SYNCVIDEO:var c;if(a._contentInfo.getProfile().isAudio){c=$(window).innerWidth()}else{c=$(window).innerWidth()*(100-a._mainMediaPercent)/100}var b=$(window).innerHeight();a.getSlideVC().resizeWithSize(c,b);break;case ContentType.SYNCAUDIO:var c=$(window).innerWidth();var b=$(window).innerHeight();a.getSlideVC().resizeWithSize(c,b);break}}else{a.getSlideVC().resize();a.getSlideControllerVC().resize()}},setPlayerHeight:function(){if(!skinManager.isMobile()){var b=35;if(syncDocPlayer.isHidePlayControllerMode()){b=0}$(VCSyncDocPlay.SYNCDOC_PLAY_WRAPPER_ID).css("bottom",b.toString()+"px");if(skinManager.isIE7()){var a=$(LayoutIdTable.SYNCDOC_PLAYER).height()-b;$(VCSyncDocPlay.SYNCDOC_PLAY_WRAPPER_ID).height(a)}}},setLayoutIndex:function(a){this._layoutIndex=a-1;this.setDesktopLayout()},setDesktopLayout:function(e){if(this._contentInfo.storyType!=ContentType.SYNCVIDEO){return}var d,b;if(e){d=e._mainMediaWidth;b=e._subMediaWidth;if(e._isSwapped&&!(this._isSwapped)){this.swapVideoSlide()}}else{var c=uniPlayerConfig.getLayoutList(ContentType.SYNCVIDEO)[this._layoutIndex];d=c.getMainMediaWidth();b=c.getSubMediaWidth();if(this._isSwapped){var a=b;b=d;d=a}}if(skinManager.isIE7()){d=d-0.01;b=b-0.01}this._mainMediaPercent=d;d="{0}%".format(d);b="{0}%".format(b);$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS).css("width",d);$syncDocPlayer.find(VCSyncDocPlay.SLIDE_CONTAINER_CLASS).css("width",b);if(this._isFlash){this.getVideoVC().setFlashVisible()}this.resize();this.fireLayoutChangeEvent(this._isSwapped,this._mainMediaPercent,100-this._mainMediaPercent)},swapVideoSlide:function(){var e=syncDocPlayer.getSyncDocPlay();var d,b,f,c,a;e._isSwapped=!e._isSwapped;if(e._isSwapped){d=VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS;b=VCSyncDocPlay.SLIDE_CONTAINER_CLASS;a="right";f=100-e._mainMediaPercent;c=e._mainMediaPercent}else{d=VCSyncDocPlay.SLIDE_CONTAINER_CLASS;b=VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS;a="left";f=e._mainMediaPercent;c=100-e._mainMediaPercent}e._mainMediaPercent=100-e._mainMediaPercent;$syncDocPlayer=e.getSyncDocPlayerElem();$syncDocPlayer.find(d).css("float",a);$syncDocPlayer.find(b).css("float",a);$syncDocPlayer.find(d).css("width","{0}%".format(f));$syncDocPlayer.find(b).css("width","{0}%".format(c));if(e._isFlash){e.getVideoVC().setFlashVisible()}e.resize();e.fireLayoutChangeEvent(e._isSwapped,e._mainMediaPercent,100-e._mainMediaPercent)},initializeVideoSlidePosition:function(){$syncDocPlayer=this.getSyncDocPlayerElem();var c=VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS;var b=VCSyncDocPlay.SLIDE_CONTAINER_CLASS;var a="left";$syncDocPlayer.find(c).css("float",a);$syncDocPlayer.find(b).css("float",a)},getLayoutBtnName:function(a){return VCSyncDocPlay.LAYOUT_BTN_ID+a.toString()},getIdxFromLayoutBtnId:function(a){return Number(a.replace(VCSyncDocPlay.LAYOUT_BTN_ID,""))},getVideoVC:function(){},getSlideVC:function(){return this._vcSyncDocSlide},getSlideControllerVC:function(){return this._vcSyncDocSlideController},getNotePanel:function(){$syncDocPlayer=this.getSyncDocPlayerElem();return $syncDocPlayer.find(VCSyncDocPlay.NOTE_PANEL_CLASS).get(0)},getSlideElement:function(){return syncDocPlayer.getSyncDocPlay().getSlideVC().getCurrentSlideElement()},getCurrentTime:function(){},getDocPlayerMode:function(){if(this.getSlideVC()){return this.getSlideVC().getDocPlayerMode()}},setSyncDocSeparator:function(){if(this.isSingleLayout()){this.hideSyncDocSeparator();return}var b;var c=$(LayoutIdTable.UNI_PLAYER_CONTENT_PLAYER).innerWidth();if(Util.isIE11embedFullScreen()){c=$(window).innerWidth()}if(this._isSwapped){b=(100-this._mainMediaPercent)/100*c}else{b=this._mainMediaPercent/100*c}var e;if(uniPlayer.getIsFullScreen()){e=$(window).innerHeight()}else{e=$(LayoutIdTable.SYNCDOC_PLAYER).height()}var a=52;var d=80;$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).css("left",b-a/2);$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).css("top",(e-d)/2)},gotoSlide:function(b,a){var c=syncDocPlayer.getSyncDocPlay();c.getSlideVC().gotoSlide(b,a);c.getSlideControllerVC(c.getSlideVC().getCurrPageNum())},swapProfile:function(a){if(!this._contentInfo){return false}var c=this._contentInfo.profileList;var b=this._contentInfo.getCurrentMainMedia();if(c[b.profileId].name==a){return false}return true},onEntireAreaClicked:function(){var a=syncDocPlayer.getSyncDocPlay();a._eventTarget.fire(VCSyncDocPlayEvent.CLICK_ENTIRE_AREA)},onSyncDocAreaTouched:function(){var a=syncDocPlayer.getSyncDocPlay();a._eventTarget.fire(VCSyncDocPlayEvent.PLAYER_AREA_TOUCHED)},onPlayerMouseMove:function(){var a=syncDocPlayer.getSyncDocPlay();a.showSyncDocLayoutSetElements();a._eventTarget.fire(VCSyncDocPlayEvent.PLAYER_MOUSEMOVE)},onPlayerMouseLeave:function(){var a=syncDocPlayer.getSyncDocPlay();a.hideSyncDocLayoutSetElements();a._eventTarget.fire(VCSyncDocPlayEvent.PLAYER_MOUSELEAVE)},onLayoutBtnClick:function(c){var b=syncDocPlayer.getSyncDocPlay();var a=b.getIdxFromLayoutBtnId($(this).attr("id"));b.setLayoutIndex(a)},onSyncDocSeparatorOver:function(){syncDocPlayer.getSyncDocPlay()._isMouseOverSeparator=true},onSyncDocSeparatorLeave:function(){syncDocPlayer.getSyncDocPlay()._isMouseOverSeparator=false},onSyncDocLayoutSetBoxOver:function(){syncDocPlayer.getSyncDocPlay()._isMouseOverLayoutSetBox=true},onSyncDocLayoutSetBoxLeave:function(){syncDocPlayer.getSyncDocPlay()._isMouseOverLayoutSetBox=false},showSyncDocLayoutSetElements:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._contentInfo.getProfile()){if(a._contentInfo.getProfile().isAudio){return}}a.showSyncBtn();a.showSyncDocSeparator();a.showLayoutSetBox()},hideSyncDocLayoutSetElements:function(){var a=syncDocPlayer.getSyncDocPlay();a.hideSyncBtn();a.hideSyncDocSeparator();a.hideLayoutSetBox()},showSyncBtn:function(){if(this.getSlideControllerVC()){this.getSlideControllerVC().showSyncBtn()}},hideSyncBtn:function(){if(this.getSlideControllerVC()){this.getSlideControllerVC().hideSyncBtn()}},showSyncDocSeparator:function(){if(this.isSingleLayout()){this.hideSyncDocSeparator();return}$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).show()},hideSyncDocSeparator:function(){$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_SEPARATOR_CLASS).hide()},showLayoutSetBox:function(){if(this._contentInfo==null){return}if(this._contentInfo.storyType==ContentType.SYNCVIDEO){$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).show()}},hideLayoutSetBox:function(){$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.SYNCDOC_LAYOUT_SETBOX_CLASS).hide()},showSyncDocTouchMask:function(){$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.TOUCH_MASK_WRAPPER_CLASS).show()},hideSyncDocTouchMask:function(){$syncDocPlayer=this.getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocPlay.TOUCH_MASK_WRAPPER_CLASS).hide()},isSingleLayout:function(){var a=syncDocPlayer.getSyncDocPlay();var b=false;if(a._contentInfo.getProfile()){var b=a._contentInfo.getProfile().isAudio}return(b||a._mainMediaPercent<0.1||a._mainMediaPercent>99.9)},onSyncDocPlayDown:function(b){if($(b.target).attr("class")==VCSyncDocPlay.LAYOUT_BTN_CLASS){return}var a=syncDocPlayer.getSyncDocPlay();if(a.isSingleLayout()){return}if(!a._isSyncMode&&!a.isPointInSideVideo(b)){return}a._layoutChangePoint=b.clientX;a._isLayoutAdjusting=true;a._mainMediaPercentForLayoutMove=a._mainMediaPercent;if(skinManager.isLowIE()){a.attachMoveEvent(window.document,a.onSyncDocPlayMove);a.attachEndEvent(window.document,a.onSyncDocPlayMoveEnd)}else{a.attachMoveEvent(window,a.onSyncDocPlayMove);a.attachEndEvent(window,a.onSyncDocPlayMoveEnd)}},isPointInSideVideo:function(g){var a=Util.getClientX(g);var i=Util.getClientY(g);var d=$(VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS);var f=d.offset().left;var h=f+d.width();var b=d.offset().top;var c=b+d.height();return(a>=f&&a<=h&&i>=b&&i<=c)},onSyncDocPlayMove:function(g){var c=syncDocPlayer.getSyncDocPlay();if(!c._isLayoutAdjusting){return}var f=$(window).innerWidth();var d=(g.clientX-c._layoutChangePoint)/f*100;var b,a;if(c._isSwapped){b=c._mainMediaPercentForLayoutMove-d;a=100-b}else{b=c._mainMediaPercentForLayoutMove+d;a=100-b}if(b>VCSyncDocPlay.MIN_SYNCDOC_WIDTH){b=VCSyncDocPlay.MIN_SYNCDOC_WIDTH;a=100-VCSyncDocPlay.MIN_SYNCDOC_WIDTH}else{if(a>VCSyncDocPlay.MIN_SYNCDOC_WIDTH){b=100-VCSyncDocPlay.MIN_SYNCDOC_WIDTH;a=VCSyncDocPlay.MIN_SYNCDOC_WIDTH}}c._mainMediaPercent=b;$(VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS).css("width",b+"%");$(VCSyncDocPlay.SLIDE_CONTAINER_CLASS).css("width",a+"%");c.setSyncDocSeparator();c.resize();c.fireLayoutChangeEvent(c._isSwapped,c._mainMediaPercent,100-c._mainMediaPercent)},onSyncDocPlayMoveEnd:function(b){var a=syncDocPlayer.getSyncDocPlay();a._mainMediaPercent=($(VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS).width()/$(LayoutIdTable.SYNCDOC_PLAYER).width())*100;a._isLayoutAdjusting=false;if(skinManager.isLowIE()){a.detachMoveEvent(window.document,a.onSyncDocPlayMove);a.detachEndEvent(window.document,a.onSyncDocPlayMoveEnd)}else{a.detachMoveEvent(window,a.onSyncDocPlayMove);a.detachEndEvent(window,a.onSyncDocPlayMoveEnd)}},onSlideInitialized:function(f,b){var d=syncDocPlayer.getSyncDocPlay();var c=b[0];var a=b[1];d.getSlideControllerVC().setTotalPage(c);d.getSlideControllerVC().setCurrPage(a);d._eventTarget.fire(VCSyncDocPlayEvent.SLIDE_READY)},onSlidePageChanged:function(c,b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideControllerVC().setCurrPage(b)},onSlideControllerSyncOn:function(b){var a=syncDocPlayer.getSyncDocPlay();a._eventTarget.fire(VCSyncDocPlayEvent.SLIDE_SYNC_ON)},onSlideControllerSyncOff:function(b){var a=syncDocPlayer.getSyncDocPlay();a._eventTarget.fire(VCSyncDocPlayEvent.SLIDE_SYNC_OFF)},onSlideControllerNextPage:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().nextPage();a.getSlideControllerVC().setCurrPage(a.getSlideVC().getCurrPageNum())},onSlideControllerPrevPage:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().prevPage();a.getSlideControllerVC().setCurrPage(a.getSlideVC().getCurrPageNum())},onSlideControllerZoomIn:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().zoomIn()},onSlideControllerZoomOut:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().zoomOut()},onSlideControllerFitToPage:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().setScale(DocScaleValue.FIT_TO_SCALE)},onSlideControllerFitToWidth:function(b){var a=syncDocPlayer.getSyncDocPlay();a.getSlideVC().setScale(DocScaleValue.FIT_TO_WIDTH)},getSyncDocPlayerElem:function(){var a=this._contentInfo.storyType;switch(a){case ContentType.SYNCVIDEO:return $(VCSyncDocPlay.SYNC_VIDEO_PLAYER_ID);case ContentType.SYNCAUDIO:return $(VCSyncDocPlay.SYNC_AUDIO_PLAYER_ID)}return null},isLayoutAdjusting:function(){return this._isLayoutAdjusting},isMouseOverSeparator:function(){return this._isMouseOverSeparator},isMouseOverLayoutSetBox:function(){return this._isMouseOverLayoutSetBox},isPlayCommandGiven:function(){return this._playCommandGiven},fireLayoutChangeEvent:function(a,c,b){if(this._eventTarget){this._eventTarget.fire(VCSyncDocPlayEvent.LAYOUT_CHANGED,new LayoutSettingData(a,c,b))}}},{SYNC_VIDEO_PLAYER_ID:"#syncvideo-play",SYNC_AUDIO_PLAYER_ID:"#syncaudio-play",SYNCDOC_PLAY_WRAPPER_ID:"#syncdoc-play-wrapper",NOTE_PANEL_CLASS:".vc-sdplay-note",MAIN_VIDEO_CONTAINER_CLASS:".vc-sdplay-video",SLIDE_CONTAINER_CLASS:".vc-sdplay-slide",SYNCDOC_SEPARATOR_CLASS:".vc-sdplay-separator",SYNCDOC_LAYOUT_SETBOX_CLASS:".vc-sdplay-layout-set-box",TOUCH_MASK_WRAPPER_CLASS:".vc-sdplay-video-touch-mask-wrapper",LAYOUT_BTN_ID:"vc-sdplay-layout-",LAYOUT_BTN_CLASS:"vc-sdplay-layout-btn",LAYOUT_SWAP_BTN_ID:"#vc-sdplay-layout-swap",NUM_OF_LAYOUT:4,MIN_SYNCDOC_WIDTH:80});var VCSyncDocPlayEvent={VIDEO_METADATA_LOADED:"vsdp_video_metadata_loaded",VIDEO_READY_TO_PLAY:"vsdp_video_ready_to_play",VIDEO_TIME_UPDATE:"vsdp_video_time_update",VIDEO_SEEKING:"vsdp_video_seeking",VIDEO_SEEKED:"vsdp_video_seeked",VIDEO_BUFFERED:"vsdp_video_buffered",VIDEO_STATE_CHANGE:"vsdp_video_state_changed",VIDEO_ENDED:"vsdp_video_ended",AUDIO_METADATA_LOADED:"vsdp_audio_metadata_loaded",AUDIO_READY_TO_PLAY:"vsdp_audio_ready_to_play",AUDIO_TIME_UPDATE:"vsdp_audio_time_update",AUDIO_SEEKING:"vsdp_audio_seeking",AUDIO_SEEKED:"vsdp_audio_seeked",AUDIO_BUFFERED:"vsdp_audio_buffered",AUDIO_STATE_CHANGE:"vsdp_audio_state_changed",AUDIO_ENDED:"vsdp_audio_ended",METADATA_LOADED:"vsdp_metadata_loaded",READY_TO_PLAY:"vsdp_ready_to_play",TIME_UPDATE:"vsdp_time_update",SEEKING:"vsdp_seeking",SEEKED:"vsdp_seeked",BUFFERED:"vsdp_buffered",SWAPPING:"swapping",SWAPPED:"swapped",ENDED:"ended",SLIDE_READY:"vsdp_slide_ready",SLIDE_SYNC_ON:"vsdp_slide_sync_on",SLIDE_SYNC_OFF:"vsdp_slide_sync_off",STATE_CHANGE:"vsdp_state_change",PLAYER_MOUSEMOVE:"vsdp_mousemove",PLAYER_MOUSELEAVE:"vsdp_mouseleave",CLICK_ENTIRE_AREA:"vsdp_click_entire_area",PLAYER_AREA_TOUCHED:"vsdp_player_area_touched",LAYOUT_CHANGED:"vsdp_layout_changed",CHANGE_TO_FLASH:"vsdp_change_to_flash",SKIP_AUDIO_ERROR:"vplay_skip_audio_error",PLAYBACK_RATE_CHANGED:"vsdp_playback_rate_changed"};var VCSyncDocVideoPlayDesktop=VCSyncDocPlay.extend({_vcSyncDocVideo:null,_vcSyncDocAudio:null,initialize:function(a,c,b,d){this.base(a,c,b,d);if(skinManager.isNeedFlashFallback()||uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming()||(uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()&&true!=skinManager.isHlsSupported())){this._isFlash=true;this._vcSyncDocVideo=new VCSyncDocVideoFlash();this._vcSyncDocAudio=this._vcSyncDocVideo}else{this._vcSyncDocVideo=new VCSyncDocVideo();this._vcSyncDocAudio=new VCSyncDocAudio()}this.attachEvents();this.initControls()},release:function(){this.base();this.getVideoVC().release();this.getAudioVC().release()},resize:function(){this.base();var a=syncDocPlayer.getSyncDocPlay();this.getVideoVC().resizeVideoTag();this.setVerticalAlign();noteManager.resize()},setVerticalAlign:function(){if(this._contentsVerticalAlign==ContentsVerticalAlign.TOP){var c=(skinManager.isNeedFlashFallback())?("#"+VCSyncDocVideoFlash.VIDEO_FLASH_ELEMENT_ID):VCSyncDocVideo.VIDEO_CLASS_NAME;var b=parseInt($(VCSlide.SLIDE_CONTAINER_CLASS).css("margin-top"));var a=parseInt($(c).css("margin-top"));if(a>b){$(c).css("margin-top",b+"px")}else{$(VCSlide.SLIDE_CONTAINER_CLASS).css("margin-top",a+"px")}}},attachEvents:function(){this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_METADATA_LOADED,this.onMediaMetadataLoaded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_READY_TO_PLAY,this.onMediaReadyToPlay);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,this.onStateChange);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_TIME_UPDATE,this.onMediaTimeUpdate);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_SEEKING,this.onSeeking);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_SEEKED,this.onSeeked);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_BUFFERED,this.onBuffered);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_ENDED,this.onEnded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.CHANGE_TO_FLASH,this.onChangeToFlash);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_METADATA_LOADED,this.onMediaMetadataLoaded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_READY_TO_PLAY,this.onMediaReadyToPlay);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,this.onStateChange);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,this.onMediaTimeUpdate);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKING,this.onSeeking);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKED,this.onSeeked);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_BUFFERED,this.onBuffered);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_ENDED,this.onEnded)},initControls:function(){this.getVideoVC().initialize(this._contentInfo);this.getVideoVC().addEventListener(this._eventTargetForVC);this.getAudioVC().initialize(this._contentInfo);this.getAudioVC().addEventListener(this._eventTargetForVC);this.getSlideVC().addEventListener(this._eventTargetForVC);this.getSlideVC().initialize(this.getSyncDocPlayerElem(),this._slideListInfo,this._isSyncMode);this.getSlideControllerVC().addEventListener(this._eventTargetForVC);this.getSlideControllerVC().initialize(this.getSyncDocPlayerElem(),this._isSyncMode);this.initMedia(0,true);this.setVisibilityForMediaPlayMode()},initMedia:function(c,b){var a=this._contentInfo.getProfile().isAudio;if(a){this.getVideoVC().releaseMedia();this.getAudioVC().initMedia(c,b)}else{this.getAudioVC().releaseMedia();this.getVideoVC().initMedia(c,b)}},setVisibilityForMediaPlayMode:function(){var a=this._contentInfo.getProfile().isAudio;if(a){this.hideSyncDocLayoutSetElements();$(VCSyncDocPlay.MAIN_VIDEO_CONTAINER_CLASS).css("width","0%");$(VCSyncDocPlay.SLIDE_CONTAINER_CLASS).css("width","100%")}else{this.setDesktopLayout(syncDocPlayer.getLayoutSettingData())}this.resize()},showSyncDocPlayer:function(){this.base();this.getVideoVC().showVideo()},hideSyncDocPlayer:function(){this.base();this.getVideoVC().hideVideo()},onMediaMetadataLoaded:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.METADATA_LOADED,b)}},onMediaReadyToPlay:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.READY_TO_PLAY)}if(a._isSwapping){a.videoSwapped()}},onStateChange:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.STATE_CHANGE,b)}},onSeeking:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKING)}},onSeeked:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKED)}},onBuffered:function(c,a){var b=syncDocPlayer.getSyncDocPlay();if(b._eventTarget){b._eventTarget.fire(VCSyncDocPlayEvent.BUFFERED,a)}},onEnded:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.ENDED)}},onChangeToFlash:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.CHANGE_TO_FLASH)}},onSkipAudioError:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR)}},onPlaybackRateChanged:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,b)}},onMediaTimeUpdate:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.TIME_UPDATE,b)}},videoSwapped:function(){this._eventTarget.fire(VCSyncDocPlayEvent.SWAPPED);this._isSwapping=false;if(this._playCommandGiven){this.getCurrentMedia().play()}if(this._contentInfo.getProfile().isAudio){this.getAudioVC().seekTo(this._swapTime)}else{this.getVideoVC().seekTo(this._swapTime)}},play:function(){this._playCommandGiven=true;this.getCurrentMedia().play()},pause:function(){this._playCommandGiven=false;this.getCurrentMedia().pause()},seekTo:function(a){this.getCurrentMedia().seekTo(a)},setPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!skinManager.isNeedFlashFallback()){this.changePlaybackRate()}},changePlaybackRate:function(){if(this._contentInfo.getProfile().isAudio){this.getAudioVC().setAudioPlaybackRate(this._playbackRate)}else{this.getVideoVC().setVideoPlaybackRate(this._playbackRate)}},swapProfile:function(a){if(!this.base(a)){return}var c=this.getCurrentMedia()?this.getCurrentMedia().getCurrentTime():0;this._swapTime=c;this._contentInfo.setProfile(a);if(this._isFlash){var b=this.getVideoVC();b._isFirstTime=true;b._isMetadataLoaded=false;b.releaseMedia();b.clearVideoContainer();b.initMedia(c,true)}else{this.initMedia(c,true)}this.setVisibilityForMediaPlayMode();this._mediaReadyToPlayCount=0;this._isSwapping=true;this._eventTarget.fire(VCSyncDocPlayEvent.SWAPPING)},setVolume:function(a){this.getCurrentMedia().setVolume(a)},getCurrentMedia:function(){if(this._contentInfo.getProfile().isAudio){return this._vcSyncDocAudio}else{return this._vcSyncDocVideo}},getAudioVC:function(){return this._vcSyncDocAudio},getVideoVC:function(){return this._vcSyncDocVideo},getCurrentTime:function(){if(this._contentInfo.getProfile().isAudio){if(this.getAudioVC().isAudioSet()){return this.getAudioVC().getCurrentTime()}}else{if(this.getVideoVC().isVideoSet()){return this.getVideoVC().getCurrentTime()}}return 0},onFallbackReady:function(a){syncDocPlayer.getSyncDocPlay().getVideoVC().onFallbackReady(a)},onMetadataLoaded:function(a){syncDocPlayer.getSyncDocPlay().getVideoVC().onMetadataLoaded(a)},onStatusChange:function(a,b){syncDocPlayer.getSyncDocPlay().getVideoVC().onStatusChange(a,b)},onTimeUpdate:function(a,b){syncDocPlayer.getSyncDocPlay().getVideoVC().onTimeUpdate(a,b)}});var VCSyncDocVideoPlayMobile=VCSyncDocPlay.extend({_contentInfo:null,_slideListInfo:null,_eventList:null,_isAudioPlayingMode:false,_playMode:null,_syncDocVideo:null,_syncDocAudio:null,_loadedCallback:null,_mainMediaPercent:0,_mainMediaPercentForLayoutMove:0,_isLayoutAdjusting:false,_layoutChangePoint:0,_isSwapping:false,_eventTargetForVC:null,constructor:function(){this.base();this._syncDocVideo=new VCSyncDocVideo();this._syncDocAudio=new VCSyncDocAudio()},initialize:function(a,c,b,d){this.base(a,c,b,d);this.initControls();this.attachEvents()},release:function(){this.base();this.getVideoVC().release();this.getAudioVC().release()},resize:function(){this.base();noteManager.resize()},unload:function(){this.base();this.getVideoVC().unload();this.getAudioVC().unload()},initControls:function(){if(skinManager.isIPhoneOrIPod()){$(".vc-sdvplay-video-touch-mask-wrapper").hide()}this.getVideoVC().addEventListener(this._eventTargetForVC);this.getVideoVC().initialize(this._contentInfo);this.getAudioVC().addEventListener(this._eventTargetForVC);this.getAudioVC().initialize(this._contentInfo);this.getSlideVC().addEventListener(this._eventTargetForVC);this.getSlideVC().initialize(this.getSyncDocPlayerElem(),this._slideListInfo,this._isSyncMode);this.getSlideControllerVC().addEventListener(this._eventTargetForVC);this.getSlideControllerVC().initialize(this.getSyncDocPlayerElem(),this._isSyncMode);this.setCurrentPlayingMode()},setCurrentPlayingMode:function(){if(!this._playMode){this._playMode=SyncVideoMobilePlayMode.SLIDE}this._isAudioPlayingMode=(this._playMode==SyncVideoMobilePlayMode.SLIDE||this._contentInfo.getProfile().isAudio);if(!this._isAudioPlayingMode){$(VCSyncDocVideoPlayMobile.SLIDE_AREA_CLASS).hide();$(VCSyncDocVideoPlayMobile.VIDEO_AREA_CLASS).show()}else{$(VCSyncDocVideoPlayMobile.SLIDE_AREA_CLASS).show();$(VCSyncDocVideoPlayMobile.VIDEO_AREA_CLASS).hide();this.resize()}},attachEvents:function(){this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_READY_TO_PLAY,this.onVideoReadyToPlay);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,this.onStateChange);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_TIME_UPDATE,this.onVideoTimeUpdate);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_SEEKING,this.onVideoSeeking);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_SEEKED,this.onVideoSeeked);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_BUFFERED,this.onVideoBuffered);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.VIDEO_ENDED,this.onVideoEnded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_METADATA_LOADED,this.onAudioMetadataLoaded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_READY_TO_PLAY,this.onAudioReadyToPlay);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,this.onStateChange);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,this.onAudioTimeUpdate);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKING,this.onAudioSeeking);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKED,this.onAudioSeeked);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_BUFFERED,this.onAudioBuffered);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_ENDED,this.onAudioEnded)},onVideoMetadataLoaded:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.METADATA_LOADED,b)}},onVideoReadyToPlay:function(b){var a=syncDocPlayer.getSyncDocPlay();a._eventTarget.fire(VCSyncDocPlayEvent.READY_TO_PLAY);if(!a._isAudioPlayingMode&&a._playCommandGiven){a.getVideoVC().play()}if(a._isSwapping){a.videoSwapped()}},onVideoSeeking:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKING)}},onVideoSeeked:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKED)}},onVideoTimeUpdate:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.TIME_UPDATE,b)}},videoSwapped:function(){this._eventTarget.fire(VCSyncDocPlayEvent.SWAPPED);this._isSwapping=false;if(this._playCommandGiven){this.getVideoVC().play()}},onVideoBuffered:function(c,a){var b=syncDocPlayer.getSyncDocPlay();if(b._eventTarget){b._eventTarget.fire(VCSyncDocPlayEvent.BUFFERED,a)}},onVideoEnded:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.ENDED)}},onSkipAudioError:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR)}},onPlaybackRateChanged:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,b)}},onAudioMetadataLoaded:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.METADATA_LOADED,b)}},onAudioReadyToPlay:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._isAudioPlayingMode&&a._playCommandGiven){a.getAudioVC().play()}if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.READY_TO_PLAY)}if(a._isSwapping){a.audioSwapped()}},onStateChange:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.STATE_CHANGE,b)}},audioSwapped:function(){this._eventTarget.fire(VCSyncDocPlayEvent.SWAPPED);this._isSwapping=false;if(this._playCommandGiven){this.getAudioVC().play()}},onAudioSeeking:function(){var a=syncDocPlayer.getSyncDocPlay()},onAudioSeeked:function(){var a=syncDocPlayer.getSyncDocPlay()},onAudioTimeUpdate:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.TIME_UPDATE,b)}},onAudioBuffered:function(c,a){var b=syncDocPlayer.getSyncDocPlay();if(b._eventTarget){b._eventTarget.fire(VCSyncDocPlayEvent.BUFFERED,a)}},onAudioEnded:function(b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.ENDED)}},initialLoad:function(a){this.setCurrentPlayingMode();if(!this._isAudioPlayingMode){this.getVideoVC().initMedia(a,true)}else{this.getAudioVC().initMedia(a,true)}},play:function(){this._playCommandGiven=true;if(!this._isAudioPlayingMode){this.getVideoVC().play()}else{this.getAudioVC().play()}},pause:function(){this._playCommandGiven=false;if(!this._isAudioPlayingMode){this.getVideoVC().pause()}else{this.getAudioVC().pause()}},seekTo:function(a){if(!this._isAudioPlayingMode){this.getVideoVC().seekTo(a)}else{this.getAudioVC().seekTo(a)}},setPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate){this.changePlaybackRate()}},changePlaybackRate:function(){if(!this._isAudioPlayingMode){this.getVideoVC().setVideoPlaybackRate(this._playbackRate)}else{this.getAudioVC().setAudioPlaybackRate(this._playbackRate)}},setVolume:function(a){if(!this._isAudioPlayingMode){this.getVideoVC().setVolume(a)}else{this.getAudioVC().setVolume(a)}},swapProfile:function(a){if(!this.base(a)){return}this._contentInfo.setProfile(a);if(this._playMode==SyncVideoMobilePlayMode.SLIDE){return}this._isSwapCommandGiven=true;var b=this.getCurrMedia()?this.getCurrMedia().getCurrentTime():0;this.setCurrentPlayingMode();this.initMedia(b);this.resize();this._seekBeforePlayingDone=false;this._eventTarget.fire(VCVideoPlayEvent.SWAPING)},swap:function(){this._isSwapping=true;this._eventTarget.fire(VCSyncDocPlayEvent.SWAPPING);if(this._playMode==SyncVideoMobilePlayMode.VIDEO){this._playMode=SyncVideoMobilePlayMode.SLIDE}else{this._playMode=SyncVideoMobilePlayMode.VIDEO}var a=this.getCurrMedia()?this.getCurrMedia().getCurrentTime():0;this.setCurrentPlayingMode();this.initMedia(a);this.resize()},initMedia:function(a){if(!this._isAudioPlayingMode){if(this.getAudioVC()){this.getAudioVC().releaseMedia()}this.getVideoVC().initMedia(a,true)}else{if(this.getVideoVC()){this.getVideoVC().releaseMedia()}this.getAudioVC().initMedia(a,true)}},setPlayMode:function(a){if(!a){return}this._playMode=a;this.setCurrentPlayingMode()},getPlayMode:function(){return this._playMode},getVideoVC:function(){return this._syncDocVideo},getAudioVC:function(){return this._syncDocAudio},getCurrentTime:function(){var a=this.getCurrMedia();if(a){return a.getCurrentTime()}return 0},getCurrMedia:function(){if(this._isAudioPlayingMode){return this.getAudioVC()}else{return this.getVideoVC()}}},{SYNCDOC_PLAY_ELEMENT_ID:"#syncdoc-play",VIDEO_ID:"#vc-sdvplay-video",AUDIO_ID:"#vc-sdvplay-audio",VIDEO_SLIDE:"#vc-sdvplay-slide",NOTE_PANEL_ID:"vc-sdvplay-note",MAIN_VIDEO_CONTAINER_CLASS:".vc-sdvplay-video",SLIDE_CONTAINER_CLASS:".vc-sdvplay-slide",VIDEO_AREA_CLASS:".vc-sdplay-video-area",SLIDE_AREA_CLASS:".vc-sdplay-slide-area",MIN_SYNCDOC_WIDTH:80});var SyncVideoMobilePlayMode={VIDEO:"video",SLIDE:"slide"};var VCSyncDocAudioPlay=VCSyncDocPlay.extend({_vcSyncDocAudio:null,initialize:function(a,c,b,d){this.base(a,c,b,d);if(!skinManager.isMobile()&&(skinManager.isNeedFlashFallback()||uniPlayerConfig.getMediaChannelConfig().useRTMPStreaming()||(uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()&&true!=skinManager.isHlsSupported()))){this._isFlash=true;this._vcSyncDocAudio=new VCSyncDocAudioFlash()}else{this._vcSyncDocAudio=new VCSyncDocAudio()}this.attachEvents();this.initControls()},release:function(){this.base();this.getAudioVC().release()},resize:function(){this.base();var a=syncDocPlayer.getSyncDocPlay();noteManager.resize()},attachEvents:function(){this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_METADATA_LOADED,this.onAudioMetadataLoaded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_READY_TO_PLAY,this.onAudioideoReadyToPlay);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,this.onAudioStateChange);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,this.onAudioTimeUpdate);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKING,this.onSeeking);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_SEEKED,this.onSeeked);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_BUFFERED,this.onBuffered);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.AUDIO_ENDED,this.onEnded);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.CHANGE_TO_FLASH,this.onChangeToFlash);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR,this.onSkipAudioError);this._eventTargetForVC.addListener(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,this.onPlaybackRateChanged)},initControls:function(){this.getAudioVC().initialize(this._contentInfo);this.getAudioVC().addEventListener(this._eventTargetForVC);this.getAudioVC().initMedia(0,true);this.getSlideVC().addEventListener(this._eventTargetForVC);this.getSlideVC().initialize(this.getSyncDocPlayerElem(),this._slideListInfo,this._isSyncMode);this.getSlideControllerVC().addEventListener(this._eventTargetForVC);this.getSlideControllerVC().initialize(this.getSyncDocPlayerElem(),this._isSyncMode);this.resize()},initialLoad:function(a){if(this.getAudioVC()){this.getAudioVC().initMedia(a)}},showSyncDocPlayer:function(){this.base()},hideSyncDocPlayer:function(){this.base()},play:function(){this._playCommandGiven=true;this.getAudioVC().play()},pause:function(){this._playCommandGiven=false;this.getAudioVC().pause()},seekTo:function(a){this.getAudioVC().seekTo(a)},setPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!skinManager.isNeedFlashFallback()){this.changePlaybackRate()}},changePlaybackRate:function(){if(this.getAudioVC()){this.getAudioVC().setAudioPlaybackRate(this._playbackRate)}},setVolume:function(a){this.getAudioVC().setVolume(a)},onAudioMetadataLoaded:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.METADATA_LOADED,b)}},onAudioideoReadyToPlay:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.READY_TO_PLAY)}},onAudioStateChange:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.STATE_CHANGE,b)}},onAudioTimeUpdate:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.TIME_UPDATE,b)}},onSeeking:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKING)}},onSeeked:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SEEKED)}},onBuffered:function(c,a){var b=syncDocPlayer.getSyncDocPlay();if(b._eventTarget){b._eventTarget.fire(VCSyncDocPlayEvent.BUFFERED,a)}},onEnded:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.ENDED)}},onChangeToFlash:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.CHANGE_TO_FLASH)}},onSkipAudioError:function(){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR)}},onPlaybackRateChanged:function(c,b){var a=syncDocPlayer.getSyncDocPlay();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,b)}},getCurrentTime:function(){if(this.getAudioVC()){return this.getAudioVC().getCurrentTime()}return 0},getAudioVC:function(){return this._vcSyncDocAudio},onFallbackReady:function(a){syncDocPlayer.getSyncDocPlay().getAudioVC().onFallbackReady(a)},onMetadataLoaded:function(a){syncDocPlayer.getSyncDocPlay().getAudioVC().onMetadataLoaded(a)},onStatusChange:function(a,b){syncDocPlayer.getSyncDocPlay().getAudioVC().onStatusChange(a,b)},onTimeUpdate:function(a,b){syncDocPlayer.getSyncDocPlay().getAudioVC().onTimeUpdate(a,b)}});var VCSyncDocVideo=VisualComponent.extend({_mainMedia:null,_mainMediaHls:null,_contentInfo:null,_playCommandGiven:false,_progressTimer:false,_playbackRate:1,_initialTime:0,_isInitialPlaying:true,_mediaReachedInitialTime:false,_mediaInitialPlayingFinished:false,_prevTime:-1,initialize:function(a){this._contentInfo=a;this._progressTimer=setInterval(this.checkProgress,200)},release:function(){this.releaseMedia();clearInterval(this._progressTimer)},releaseMedia:function(){if(this._mainMedia){this._mainMedia.pause();this._mainMedia.src="";this._mainMedia.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._mainMedia.removeEventListener("timeupdate",this.onTimeUpdate);this._mainMedia.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._mainMedia.removeEventListener("seeked",this.onMainMediaSeeked);this._mainMedia.removeEventListener("ended",this.onEnded);this._mainMedia.removeEventListener("error",this.onMediaError);this._mainMedia.removeEventListener("play",this.onStateChangePlay);this._mainMedia.removeEventListener("pause",this.onStateChangePause);this._mainMedia.removeEventListener("waiting",this.onStateChangeWaiting);this._mainMedia.removeEventListener("ratechange",this.onPlaybackRateChanged);this._mainMedia=null;if(this._mainMediaHls!=null){this._mainMediaHls.destroy();this._mainMediaHls=null}}},showVideo:function(){$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocVideo.VIDEO_CONTAINER_CLASS).show()},hideVideo:function(){$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocVideo.VIDEO_CONTAINER_CLASS).hide()},checkProgress:function(){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();if(!a._mainMedia){return}if(skinManager.isMobile()){a.checkMediaReachedInitialTime();a.checkBeforeInitialPlaying()}a.notifyBuffered()},checkBeforeInitialPlaying:function(){var b=syncDocPlayer.getSyncDocPlay().getVideoVC();if(b._mediaInitialPlayingFinished){return}if(b._mainMedia==null){return}if(syncDocPlayer.isMobileIntroShowing()){return}var a=b._mainMedia.currentTime;if(b._prevTime!=-1&&(a>b._prevTime)){b._mediaInitialPlayingFinished=true;if(!b._playCommandGiven){b._mainMedia.pause()}}else{b._mainMedia.play();b._prevTime=a}},checkMediaReachedInitialTime:function(){if(this._mediaReachedInitialTime){return}if(syncDocPlayer.isMobileIntroShowing()){return}var a=this.isMediaCurrentTimeInValidTimeRange(this._mainMedia.currentTime);if(a){this._mediaReachedInitialTime=true}else{this._mainMedia.currentTime=this._initialTime}},isMediaCurrentTimeInValidTimeRange:function(c){var a=(this._initialTime+1);var b=(this._initialTime-1);return(c<=a&&c>=b)},notifyBuffered:function(){var a=this.getEndOfBuffered(this._mainMedia);this._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_BUFFERED,a)},getEndOfBuffered:function(c){if(c==null){return}var a=c.buffered.length;for(var b=0;b<a;b++){var d=(b==0)?0:c.buffered.start(b);if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},initMedia:function(c,b){var a;if(skinManager.isMobile()){a=this._contentInfo.getCurrentMainMedia().mobileMediaUri;this._mediaInitialPlayingFinished=false;this._prevTime=-1}else{a=this._contentInfo.getCurrentMainMedia().desktopMediaUri}this.initMainMedia(a,c,b)},initMainMedia:function(a,e,b){if(e<0||e>this._contentInfo.contentDuration){e=0}this._isInitialPlaying=b;this._initialTime=e;this._mediaReachedInitialTime=(e==0);$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();this._mainMedia=$syncDocPlayer.find(VCSyncDocVideo.VIDEO_CLASS_NAME).get(0);if((skinManager.isDesktop()||(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate))&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var c=this;var d=true;this._mainMediaHls=new Hls();this._mainMediaHls.attachMedia(this._mainMedia);this._mainMediaHls.on(Hls.Events.MEDIA_ATTACHED,function(){c._mainMediaHls.loadSource(a);c._mainMediaHls.on(Hls.Events.FRAG_LOADED,function(f,g){if(d&&c._mainMedia.videoWidth!=0&&c._mainMedia.videoHeight!=0){c.getVideoRatio();contentPlayer.getSyncDocPlay().resize();d=false}})})}else{this._mainMedia.setAttribute("src",a)}this._mainMedia.addEventListener("error",this.onMediaError);this._mainMedia.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);this._mainMedia.addEventListener("timeupdate",this.onTimeUpdate,false);this._mainMedia.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);this._mainMedia.addEventListener("seeked",this.onMainMediaSeeked,false);this._mainMedia.addEventListener("ended",this.onEnded,false);this._mainMedia.addEventListener("play",this.onStateChangePlay,false);this._mainMedia.addEventListener("pause",this.onStateChangePause,false);this._mainMedia.addEventListener("waiting",this.onStateChangeWaiting,false);this._mainMedia.addEventListener("ratechange",this.onPlaybackRateChanged,false);this._mainMedia.volume=1;this._mainMedia.load();$(this._mainMedia).bind("contextmenu",function(){return false})},getCurrentTime:function(){if(this._mainMedia){return this._mainMedia.currentTime}return 0},play:function(){if(!this.isVideoSet()){return}this._mainMedia.play();this._playCommandGiven=true;this.changePlaybackRate()},pause:function(){if(!this.isVideoSet()){return}this._mainMedia.pause();this._playCommandGiven=false},seekTo:function(a){if(!this.isVideoSet()){return}this._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_SEEKING);this._mainMedia.currentTime=a},setVolume:function(a){if(this._mainMedia&&isFinite(a)){this._mainMedia.volume=a}},setVideoPlaybackRate:function(a){this._playbackRate=a;this.changePlaybackRate()},changePlaybackRate:function(){if(this._mainMedia){this._mainMedia.playbackRate=this._playbackRate}},getVideoRatio:function(){var a=this._mainMedia.videoHeight;var b=this._mainMedia.videoWidth;this._videoRatio=b/a},resizeVideoTag:function(){var b;var a;if(Util.isIE11embedFullScreen()){b=$(window).innerWidth()*syncDocPlayer.getSyncDocPlay()._mainMediaPercent/100;a=$(window).innerHeight()}else{b=$(VCSyncDocVideo.VIDEO_CONTAINER_CLASS).width();a=$(VCSyncDocVideo.VIDEO_CONTAINER_CLASS).height()}this.resizeVideoTagWithSize(b,a)},resizeVideoTagWithSize:function(g,f){var h=this._videoRatio;var e=g/f;if(!h){return}if(e>h){var b=f*h;var a=f;var d=(g-b)/2;var c=0;$(this._mainMedia).width(b);$(this._mainMedia).height(a);$(this._mainMedia).css("margin-left",d+"px");$(this._mainMedia).css("margin-top",c+"px")}else{var b=g;var a=g/h;var d=0;var c=(f-a)/2;$(this._mainMedia).width(b);$(this._mainMedia).height(a);$(this._mainMedia).css("margin-left",d+"px");$(this._mainMedia).css("margin-top",c+"px")}},onMetaDataLoaded:function(b){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_METADATA_LOADED,a._mainMedia.duration);a._mainMedia.currentTime=a._initialTime;a.getVideoRatio();contentPlayer.getSyncDocPlay().resize()},onTimeUpdate:function(b){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_TIME_UPDATE,a._mainMedia.currentTime)},onMediaReadyToPlay:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_READY_TO_PLAY)},onMainMediaSeeked:function(){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_SEEKED)},onEnded:function(){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_ENDED)},onMediaError:function(b){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();if(a._mainMedia&&a._mainMedia.error){apiManager.getPlayerEvent().html5VideoError(a._mainMedia.error.code,uniPlayerData.getCurrentTime());if(a._mainMedia.error.code==3&&a._mainMedia.error.message.indexOf("PIPELINE_ERROR_DECODE")!=-1){a._eventTarget.fire(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR)}else{a._eventTarget.fire(VCSyncDocPlayEvent.CHANGE_TO_FLASH)}}},isVideoSet:function(){return(this._mainMedia!=null)},onStateChangePlay:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,PlayState.PLAYING)},onStateChangePause:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,PlayState.PAUSED)},onPlaybackRateChanged:function(b){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,a._mainMedia.playbackRate)}}},{VIDEO_CONTAINER_CLASS:".vc-sdvideo-container",VIDEO_CLASS_NAME:".vc-sdvideo-video"});var VCSyncDocVideoFlash=VisualComponent.extend({_mainMedia:null,_contentInfo:null,_playCommandGiven:false,_progressTimer:false,_isSeeking:false,_initialTime:0,_isFirstTime:true,_mediaReachedInitialTime:false,_isMetadataLoaded:false,initialize:function(a){this._contentInfo=a},release:function(){this.releaseMedia();this.clearVideoContainer();clearInterval(this._progressTimer)},clearVideoContainer:function(){$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).empty();$syncDocPlayer.find(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).html('<div id="'+VCSyncDocVideoFlash.VIDEO_ELEMENT_ID+'"></div>')},releaseMedia:function(){if(this._mainMedia==null){return}var a=this._contentInfo.getCurrentMainMedia();switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:this._mainMedia.fvLoad(a.flashFallbackMethod,null,null);break;case MediaMethod.RTMP:this._mainMedia.fvLoad(MediaMethod.RTMP,null,null);break}this._mainMedia=null},showVideo:function(){$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).show()},hideVideo:function(){$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).hide()},setFlashVisible:function(){if(skinManager.isChrome()){return}$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$flashContainer=$syncDocPlayer.find(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS);if($flashContainer.width()==0){$flashContainer.hide()}else{$flashContainer.show()}},initMedia:function(c,b){var a;if(skinManager.isMobile()){a=this._contentInfo.getCurrentMainMedia().mobileMediaUri}else{a=this._contentInfo.getCurrentMainMedia().desktopMediaUri}this.initMainMedia(a,c,b)},initMainMedia:function(a,c,b){if(c<0||c>this._contentInfo.contentDuration){c=0}this._isInitialPlaying=b;this._initialTime=c;this._mediaReachedInitialTime=(c==0);this._currentTime=c;this.initMainMediaFlash()},initMainMediaFlash:function(){this.createFlashVideo(VCSyncDocVideoFlash.VIDEO_ELEMENT_ID,VCSyncDocVideoFlash.VIDEO_FLASH_ELEMENT_ID);this._mainMedia=document.getElementById(VCSyncDocVideoFlash.VIDEO_FLASH_ELEMENT_ID)},createFlashVideo:function(j,h){var a="11.4.0";var d={};var e={};var i=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var g=Util.urlMerge(i,"playerproductinstall.swf");e.quality="high";e.bgcolor="#000000";e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="transparent";var f={};f.id=h;f.name=h;f.align="middle";var b="100%";var l="100%";var k=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType;var c=Util.urlMerge(i,"flashvideofallback.swf");swfobject.embedSWF(c,j,b,l,a,g,d,e,f,this.callbackEmbedSWF);swfobject.createCSS(j,"display:block;text-align:left;")},callbackEmbedSWF:function(a){if(a.success==false){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;document.location=Util.urlMerge(b,"downloadflashplayer.html")}},loadMedia:function(b,a){if(a.desktopMethod==MediaMethod.RTMP){var c=this.getRTMPMediaInfo(a.desktopMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);return}switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,a.flashFallbackMediaUri);break;case MediaMethod.RTMP:var c=this.getRTMPMediaInfo(a.flashFallbackMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);break}},getRTMPMediaInfo:function(a){var c=a.indexOf("mp4:");var d=a.substring(0,c);var b=a.substring(c+4);return{serverUri:d,mediaUri:b}},getCurrentTime:function(){if(!this.isVideoSet()){return 0}var a=0;try{a=this._mainMedia.getCurrentTime()}catch(b){a=0}return a},play:function(){if(!this.isVideoSet()){return}try{this._mainMedia.fvPlay()}catch(a){}this._playCommandGiven=true},pause:function(){if(!this.isVideoSet()){return}try{this._mainMedia.fvPause()}catch(a){}this._playCommandGiven=false},seekTo:function(a){if(!this.isVideoSet()){return}if(!this._isMetadataLoaded){this._initialTime=a;return}this._isSeeking=true;this._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_SEEKING);this._mainMedia.setCurrentTime(a);this._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_TIME_UPDATE,a)},setVolume:function(a){if(this._mainMedia){this._mainMedia.setVolume(a)}},setAudioPlaybackRate:function(a){},setVideoPlaybackRate:function(a){},changePlaybackRate:function(){},getVideoRatio:function(){if(!this._isMetadataLoaded){return}var a=this._mainMedia.getHeight();var b=this._mainMedia.getWidth();this._videoRatio=b/a},isNumber:function(a){return typeof a=="number"&&!isNaN(a)&&isFinite(a)},resizeVideoTag:function(){var b;var a;if(Util.isIE11embedFullScreen()){b=$(window).innerWidth()*syncDocPlayer.getSyncDocPlay()._mainMediaPercent/100;a=$(window).innerHeight()}else{b=$(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).width();a=$(VCSyncDocVideoFlash.VIDEO_CONTAINER_CLASS).height()}this.resizeVideoTagWithSize(b,a)},resizeVideoTagWithSize:function(g,f){this.getVideoRatio();var h=this._videoRatio;if(!this.isNumber(h)){return}var e=g/f;if(e>h){var b=f*h;var a=f;var d=(g-b)/2;var c=0;$(this._mainMedia).width(b);$(this._mainMedia).height(a);$(this._mainMedia).css("margin-left",d+"px");$(this._mainMedia).css("margin-top",c+"px")}else{var b=g;var a=g/h;var d=0;var c=(f-a)/2;$(this._mainMedia).width(b);$(this._mainMedia).height(a);$(this._mainMedia).css("margin-left",d+"px");$(this._mainMedia).css("margin-top",c+"px")}},onFallbackReady:function(a){this.loadMedia(this._mainMedia,this._contentInfo.getCurrentMainMedia())},onMetadataLoaded:function(b){var d=syncDocPlayer.getSyncDocPlay().getVideoVC();d._isMetadataLoaded=true;d._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_METADATA_LOADED);if(d._initialTime!=0){if(this._contentInfo.getProfile().isAudio){setTimeout(function(){d.seekTo(d._initialTime);d._initialTime=0},100)}else{var c=this._contentInfo.getCurrentMainMedia();var a=(c.desktopMethod==MediaMethod.RTMP)||(c.flashFallbackMethod==MediaMethod.RTMP);if(a){if(d._mainMedia){try{d._mainMedia.fvPlay()}catch(f){}}}d.seekTo(d._initialTime);d._initialTime=0}}if(d._playCommandGiven){d.play()}else{d.pause()}setTimeout(function(){d.getVideoRatio();d.resizeVideoTag();contentPlayer.getSyncDocPlay().setVerticalAlign()},200)},onStatusChange:function(a,b){var c=syncDocPlayer.getSyncDocPlay().getVideoVC();if(b==VCSyncDocVideoFlash.NETSTREAM_BUFFER_FLUSH||b==VCSyncDocVideoFlash.NETSTREAM_BUFFER_FULL){if(c._isFirstTime){c._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_READY_TO_PLAY);c._isFirstTime=false}else{c._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_SEEKED);if(false==c._playCommandGiven){c.pause()}}c._isSeeking=false}else{if(b==VCSyncDocVideoFlash.NETSTREAM_BUFFER_EMPTY){if(c._mainMedia.getDuration()-c._mainMedia.getCurrentTime()<10){c.onEnded()}}}switch(b){case VCSyncDocVideoFlash.NETSTREAM_UNPAUSE_NOTIFY:c._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,PlayState.PLAYING);break;case VCSyncDocVideoFlash.NETSTREAM_PAUSE_NOTIFY:c._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_STATE_CHANGE,PlayState.PAUSED);break}},onTimeUpdate:function(a,c){if(a==VCSyncDocVideoFlash.VIDEO_FLASH_ELEMENT_ID){var b=syncDocPlayer.getSyncDocPlay().getVideoVC();if(false==b._isSeeking){b._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_TIME_UPDATE,c)}}},onEnded:function(){var a=syncDocPlayer.getSyncDocPlay().getVideoVC();a._eventTarget.fire(VCSyncDocPlayEvent.VIDEO_ENDED)},isVideoSet:function(){return(this._mainMedia!=null)},isAudioSet:function(){return(this._mainMedia!=null)}},{VIDEO_CONTAINER_CLASS:".vc-sdvideo-container-flash-fallback",VIDEO_ELEMENT_ID:"vc-sdvideo-video-flash-fallback",VIDEO_FLASH_ELEMENT_ID:"Fallback-vc-sdvideo-video",NETSTREAM_PLAY_START:"NetStream.Play.Start",NETSTREAM_UNPAUSE_NOTIFY:"NetStream.Unpause.Notify",NETSTREAM_PAUSE_NOTIFY:"NetStream.Pause.Notify",NETSTREAM_BUFFER_FULL:"NetStream.Buffer.Full",NETSTREAM_BUFFER_FLUSH:"NetStream.Buffer.Flush",NETSTREAM_BUFFER_EMPTY:"NetStream.Buffer.Empty"});var VCSyncDocAudio=VisualComponent.extend({_audio:null,_audioHls:null,_contentInfo:null,_progressTimer:false,_playbackRate:1,_initialTime:0,_isInitialPlaying:true,_mediaReachedInitialTime:false,initialize:function(a){this._contentInfo=a;this._progressTimer=setInterval(this.checkProgress,200)},release:function(){this.releaseMedia();clearInterval(this._progressTimer)},releaseMedia:function(){if(this._audio){this._audio.pause();this._audio.src="";this._audio.removeEventListener("loadedmetadata",this.onMetaDataLoaded);this._audio.removeEventListener("timeupdate",this.onTimeUpdate);this._audio.removeEventListener("canplaythrough",this.onMediaReadyToPlay);this._audio.removeEventListener("seeked",this.onMainMediaSeeked);this._audio.removeEventListener("ended",this.onEnded);this._audio.removeEventListener("error",this.onMediaError);this._audio.removeEventListener("play",this.onStateChangePlay);this._audio.removeEventListener("pause",this.onStateChangePause);this._audio.removeEventListener("waiting",this.onStateChangeWaiting);this._audio.removeEventListener("ratechange",this.onPlaybackRateChanged);this._audio=null;if(this._audioHls!=null){this._audioHls.destroy();this._audioHls=null}}},checkProgress:function(){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();if(!a._audio){return}if(skinManager.isMobile()){a.checkMediaReachedInitialTime()}a.notifyBuffered()},checkMediaReachedInitialTime:function(){if(this._mediaReachedInitialTime){return}if(syncDocPlayer.isMobileIntroShowing()){return}if(this._audio==null){return}var a=this.isMediaCurrentTimeInValidTimeRange(this._audio.currentTime);if(a){this._mediaReachedInitialTime=true}else{this._audio.currentTime=this._initialTime}},isMediaCurrentTimeInValidTimeRange:function(c){var a=(this._initialTime+1);var b=(this._initialTime-1);return(c<=a&&c>=b)},notifyBuffered:function(){var a=this.getEndOfBuffered(this._audio);this._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_BUFFERED,a)},getEndOfBuffered:function(c){if(c==null){return}var a=c.buffered.length;for(var b=0;b<a;b++){var d=(b==0)?0:c.buffered.start(b);if(d<=c.currentTime&&c.buffered.end(b)>=c.currentTime){return c.buffered.end(b)}}return -1},initMedia:function(c,b){var a;if(skinManager.isMobile()){a=this._contentInfo.getCurrentMainMedia().mobileMediaUri}else{a=this._contentInfo.getCurrentMainMedia().desktopMediaUri}this.initMainMedia(a,c,b)},initMainMedia:function(a,d,b){if(d<0||d>this._contentInfo.contentDuration){d=0}this._isInitialPlaying=b;this._initialTime=d;this._mediaReachedInitialTime=(d==0);this._currentTime=d;$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();this._audio=$syncDocPlayer.find(VCSyncDocAudio.AUDIO_CLASS_NAME).get(0);if((skinManager.isDesktop()||(skinManager.isAndroid()&&uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&uniPlayerConfig.getUniPlayerSettingsData().useMobilePlaybackRate))&&uniPlayerConfig.getMediaChannelConfig().useHLSStreaming()){var c=this;this._audioHls=new Hls();this._audioHls.attachMedia(this._audio);this._audioHls.on(Hls.Events.MEDIA_ATTACHED,function(){c._audioHls.loadSource(a)})}else{this._audio.setAttribute("src",a)}this._audio.addEventListener("error",this.onMediaError);this._audio.addEventListener("loadedmetadata",this.onMetaDataLoaded,false);this._audio.addEventListener("timeupdate",this.onTimeUpdate,false);this._audio.addEventListener("canplaythrough",this.onMediaReadyToPlay,false);this._audio.addEventListener("seeked",this.onMainMediaSeeked,false);this._audio.addEventListener("ended",this.onEnded,false);this._audio.addEventListener("play",this.onStateChangePlay,false);this._audio.addEventListener("pause",this.onStateChangePause,false);this._audio.addEventListener("waiting",this.onStateChangeWaiting,false);this._audio.addEventListener("ratechange",this.onPlaybackRateChanged,false);this._audio.volume=1;this._audio.load()},getCurrentTime:function(){if(this._audio){return this._audio.currentTime}return 0},play:function(){if(!this.isAudioSet()){return}this._audio.play();this._playCommandGiven=true},pause:function(){if(!this.isAudioSet()){return}this._audio.pause();this._playCommandGiven=false},seekTo:function(a){if(!this.isAudioSet()){return}this._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_SEEKING);this._audio.currentTime=a},setVolume:function(a){if(this._audio&&isFinite(a)){this._audio.volume=a}},setAudioPlaybackRate:function(a){this._playbackRate=a;if(uniPlayerConfig.getUniPlayerSettingsData().usePlaybackRate&&!skinManager.isNeedFlashFallback()){this.changePlaybackRate()}},changePlaybackRate:function(){if(this._audio){this._audio.playbackRate=this._playbackRate}},onMetaDataLoaded:function(b){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_METADATA_LOADED,a._audio.duration);a._audio.currentTime=a._initialTime},onTimeUpdate:function(b){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,a._audio.currentTime)},onMediaReadyToPlay:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_READY_TO_PLAY)},onMainMediaSeeked:function(){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_SEEKED)},onEnded:function(){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_ENDED)},onMediaError:function(b){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();if(a._audio&&a._audio.error){apiManager.getPlayerEvent().html5VideoError(a._audio.error.code,uniPlayerData.getCurrentTime());if(a._audio.error.code==3&&a._audio.error.message.indexOf("PIPELINE_ERROR_DECODE")!=-1){a._eventTarget.fire(VCSyncDocPlayEvent.SKIP_AUDIO_ERROR)}else{a._eventTarget.fire(VCSyncDocPlayEvent.CHANGE_TO_FLASH)}}},isAudioSet:function(){return(this._audio!=null)},onStateChangePlay:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,PlayState.PLAYING)},onStateChangePause:function(){if(syncDocPlayer==null||typeof syncDocPlayer=="undefined"){return}var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,PlayState.PAUSED)},onPlaybackRateChanged:function(b){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();if(a._eventTarget){a._eventTarget.fire(VCSyncDocPlayEvent.PLAYBACK_RATE_CHANGED,a._audio.playbackRate)}}},{AUDIO_CLASS_NAME:".vc-sdaudio-audio"});var VCSyncDocAudioFlash=VisualComponent.extend({_audio:null,_contentInfo:null,_progressTimer:false,_initialTime:0,_isFirstTime:true,_mediaReachedInitialTime:false,_isMetadataLoaded:false,initialize:function(a){this._contentInfo=a;this._progressTimer=setInterval(this.checkProgress,200)},release:function(){this.releaseMedia();clearInterval(this._progressTimer)},releaseMedia:function(){if(this._audio==null){return}var a=this._contentInfo.getCurrentMainMedia();switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:this._audio.fvLoad(a.flashFallbackMethod,null,null);break;case MediaMethod.RTMP:this._audio.fvLoad(MediaMethod.RTMP,null,null);break}this._audio=null;$syncDocPlayer=syncDocPlayer.getSyncDocPlay().getSyncDocPlayerElem();$syncDocPlayer.find(VCSyncDocAudioFlash.AUDIO_CONTAINER_CLASS).empty();$syncDocPlayer.find(VCSyncDocAudioFlash.AUDIO_CONTAINER_CLASS).html('<div id="'+VCSyncDocAudioFlash.AUDIO_ELEMENT_ID+'"></div>')},checkProgress:function(){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();if(!a._audio){return}if(skinManager.isMobile()){a.checkMediaReachedInitialTime()}},checkMediaReachedInitialTime:function(){if(this._mediaReachedInitialTime){return}if(syncDocPlayer.isMobileIntroShowing()){return}var a=this.isMediaCurrentTimeInValidTimeRange(this._audio.getCurrentTime());if(a){this._mediaReachedInitialTime=true}else{this._audio.setCurrentTime(this._initialTime)}},isMediaCurrentTimeInValidTimeRange:function(c){var a=(this._initialTime+1);var b=(this._initialTime-1);return(c<=a&&c>=b)},initMedia:function(c,b){var a;if(skinManager.isMobile()){a=this._contentInfo.getCurrentMainMedia().mobileMediaUri}else{a=this._contentInfo.getCurrentMainMedia().desktopMediaUri}this.initMainMedia(a,c,b)},initMainMedia:function(a,c,b){if(c<0||c>this._contentInfo.contentDuration){c=0}this._isInitialPlaying=b;this._initialTime=c;this._mediaReachedInitialTime=(c==0);this._currentTime=c;this.initMainMediaFlash()},initMainMediaFlash:function(){this.createFlashAudio(VCSyncDocAudioFlash.AUDIO_ELEMENT_ID,VCSyncDocAudioFlash.AUDIO_FLASH_ELEMENT_ID);this._audio=document.getElementById(VCSyncDocAudioFlash.AUDIO_FLASH_ELEMENT_ID)},createFlashAudio:function(j,h){var a="11.4.0";var d={};var e={};var i=uniPlayerConfig.getUniPlayerSettingsData().playerUri;var g=Util.urlMerge(i,"playerproductinstall.swf");e.quality="high";e.bgcolor="#000000";e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="transparent";var f={};f.id=h;f.name=h;f.align="middle";var b="100%";var l="100%";var k=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType;var c=Util.urlMerge(i,"flashvideofallback.swf");swfobject.embedSWF(c,j,b,l,a,g,d,e,f,this.callbackEmbedSWF);swfobject.createCSS(j,"display:block;text-align:left;")},callbackEmbedSWF:function(a){if(a.success==false){var b=uniPlayerConfig.getUniPlayerSettingsData().playerUri;document.location=Util.urlMerge(b,"downloadflashplayer.html")}},loadMedia:function(b,a){if(a.desktopMethod==MediaMethod.RTMP){var c=this.getRTMPMediaInfo(a.desktopMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);return}switch(a.flashFallbackMethod){case MediaMethod.PROGRESSIVE:case MediaMethod.PSEUDO:b.fvLoad(a.flashFallbackMethod,null,a.flashFallbackMediaUri);break;case MediaMethod.RTMP:var c=this.getRTMPMediaInfo(a.flashFallbackMediaUri);b.fvLoad(MediaMethod.RTMP,c.serverUri,c.mediaUri);break}},getRTMPMediaInfo:function(a){var c=a.indexOf("mp4:");var d=a.substring(0,c);var b=a.substring(c+4);return{serverUri:d,mediaUri:b}},getCurrentTime:function(){if(!this.isAudioSet()){return 0}var a=0;try{a=this._audio.getCurrentTime()}catch(b){a=0}return a},play:function(){if(!this.isAudioSet()){return}try{this._audio.fvPlay()}catch(a){}this._playCommandGiven=true},pause:function(){if(!this.isAudioSet()){return}try{this._audio.fvPause()}catch(a){}this._playCommandGiven=false},seekTo:function(a){if(!this.isAudioSet()){return}if(!this._isMetadataLoaded){this._initialTime=a;return}this._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_SEEKING);this._audio.setCurrentTime(a);this._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,a)},setVolume:function(a){if(this._audio){this._audio.setVolume(a)}},onFallbackReady:function(a){this.loadMedia(this._audio,this._contentInfo.getCurrentMainMedia())},onMetadataLoaded:function(b){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._isMetadataLoaded=true;a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_METADATA_LOADED);if(a._initialTime!=0){setTimeout(function(){a.seekTo(a._initialTime)},500)}if(a._playCommandGiven){a.play()}else{a.pause()}},onStatusChange:function(a,b){var c=syncDocPlayer.getSyncDocPlay().getAudioVC();if(b==VCSyncDocAudioFlash.NETSTREAM_BUFFER_FLUSH||b==VCSyncDocAudioFlash.NETSTREAM_BUFFER_FULL){if(c._isFirstTime){c._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_READY_TO_PLAY);c._isFirstTime=false}else{c._initialTime=0;c._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_SEEKED)}}else{if(b==VCSyncDocAudioFlash.NETSTREAM_BUFFER_EMPTY){if(c._audio.getDuration()-c._audio.getCurrentTime()<10){c.onEnded()}}}switch(b){case VCSyncDocAudioFlash.NETSTREAM_UNPAUSE_NOTIFY:c._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,PlayState.PLAYING);break;case VCSyncDocAudioFlash.NETSTREAM_PAUSE_NOTIFY:c._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_STATE_CHANGE,PlayState.PAUSED);break}},onTimeUpdate:function(b){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();if(a._initialTime!=0&&false==a.isMediaCurrentTimeInValidTimeRange(a.getCurrentTime())){return}a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_TIME_UPDATE,a.getCurrentTime())},onEnded:function(){var a=syncDocPlayer.getSyncDocPlay().getAudioVC();a._eventTarget.fire(VCSyncDocPlayEvent.AUDIO_ENDED)},isAudioSet:function(){return(this._audio!=null)},setAudioPlaybackRate:function(a){}},{AUDIO_CONTAINER_CLASS:".vc-sdaudio-container-flash-fallback",AUDIO_ELEMENT_ID:"vc-sdaudio-audio-flash-fallback",AUDIO_FLASH_ELEMENT_ID:"Fallback-vc-sdaudio-audio",NETSTREAM_PLAY_START:"NetStream.Play.Start",NETSTREAM_UNPAUSE_NOTIFY:"NetStream.Unpause.Notify",NETSTREAM_PAUSE_NOTIFY:"NetStream.Pause.Notify",NETSTREAM_BUFFER_FULL:"NetStream.Buffer.Full",NETSTREAM_BUFFER_FLUSH:"NetStream.Buffer.Flush",NETSTREAM_BUFFER_EMPTY:"NetStream.Buffer.Empty"});var VCSyncDocPlayFactory=new function(){this.createSyncDocPlay=function(){var b=uniPlayerConfig.getMediaChannelConfig()._playingInfo.storyType;var a=skinManager.isMobile();if(b==ContentType.SYNCVIDEO){if(a){return new VCSyncDocVideoPlayMobile()}else{return new VCSyncDocVideoPlayDesktop()}}else{if(b==ContentType.SYNCAUDIO){return new VCSyncDocAudioPlay()}}return null}};var ContentType={UNKNOWN:"unknown",UPF:"upf",AUDIO:"audio",VIDEO1:"video1",VIDEO2:"video2",VIDEO3:"video3",DOCUMENT:"document",SYNCVIDEO:"syncvideo",SYNCAUDIO:"syncaudio",SHAREDOCS:"sharedocs",MIXED:"mixed"};var MediaMethod={PROGRESSIVE:"progressive",PSEUDO:"pseudo",RTMP:"rtmp",HLS:"hls"};var MediaType={DEFAULT:"default",VIDEO:"video",AUDIO:"audio"};var IntroImageData=Base.extend({uri:null,duration:0,constructor:function(b){this.uri=b;var a=arguments.length>=2?arguments[1]:IntroImageData.DEFAULT_DURATION;this.duration=a}},{DEFAULT_DURATION:3000});var VideoType={MAIN_MEDIA:"camera1",SUB_MEDIA:"screen",EXTRA_MEDIA:"camera2",EXTRA_MEDIA2:"camera3",MIXED_MEDIA:"mixed"};var EventType={SLIDE:"slide",ANIMATION:"animation",NOTE:"note",HIDEALL:"hideall"};var NoteType={MOUSE_CURVE:"mouse_curve",SPEED_CURVE:"speed_curve",LINE:"line",RECTANGLE:"rectangle",HIDE:"hide"};var ChapterType={SLIDE:"slide",STORY:"story"};var ChapterDisplayType={THUMBNAIL:"thumbnail",THUMBNAIL_LAYER:"thumbnail_layer",TEXT:"text",TEXT_LAYER:"text_layer"};var KeyCode={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACEBAR:32,ENTER:13,F:70,M:77,Z:90,X:88,C:67,P:80,BACKSPACE:8,PAGEUP:33,N:78,PAGEDOWN:34,HOME:36,END:35,ENTER:13};var ContentsVerticalAlign={TOP:"top",CENTER:"center"};var UniPlayerSettingsData=Base.extend({playerUri:null,skinUri:null,viewStatistics:null,lang:null,autoPlay:false,useContentInfo:true,usePlaybackRate:false,useMobilePlaybackRate:false,maxPlaybackRate:2,playbackRateRange:[0.5,1,1.25,1.5,2],playbackRateRangeDefault:1,useShare:false,useContinueMsg:true,introVideoUri:null,introImage:null,seekLimited:false,useAndroidHtml5DefaultControls:false,useAndroidHLSDefaultPlayer:true,useTitle:false,useAndroidEnterFullScreen:false,chapterDisplayType:null,usePopupFullscreen:true,showDefaultCaption:false,contentsVerticalAlign:null,useEbookHardCover:true,useLocalContinue:true,captionBaseFontSize:null,docLayoutMode:null,useControllerAutoHide:true,flashErrorPageUri:null,getDocLayoutMode:function(){if(skinManager.isMobile()){switch(this.docLayoutMode){case"two_page":this.docLayoutMode="one_page";break;case"two_page_scroll":this.docLayoutMode="one_page_scroll";break}return this.docLayoutMode}else{return this.docLayoutMode}}});var UniPlayerSettingsParser=Base.extend({_uniPlayerSettingsData:null,getUniPlayerSettingsData:function(){return this._uniPlayerSettingsData},parseUniPlayerSettings:function(b,c){if(!b){return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a._uniPlayerSettingsData=a.parseUniPlayerSettingsData($(d));c()}})},parseUniPlayerSettingsData:function(b){var J=new UniPlayerSettingsData();var r=b.find(UniPlayerSettingsXmlTag.PLAYER_URI);if(r.length>0){J.playerUri=r.text()}else{uniPlayerApp.appAlert("uni-player-settings.xml parse fail: player_uri missing");return}var q=b.find(UniPlayerSettingsXmlTag.SKIN_URI);if(q.length>0){J.skinUri=q.text()}else{uniPlayerApp.appAlert("uni-player-settings.xml parse fail: skin_uri missing");return}var h=b.find(UniPlayerSettingsXmlTag.VIEW_STATISTICS);if(h.length>0){J.viewStatistics=h.text()}var j=b.find(UniPlayerSettingsXmlTag.LANG);if(j.length>0){var C=j.text();J.lang=localizeManager.getLanguageCode(C)}var e=b.find(UniPlayerSettingsXmlTag.AUTO_PLAY);if(e.length>0){J.autoPlay=Util.getBooleanValue(e.text())}else{J.autoPlay=UniPlayerSettingsDefault.AUTO_PLAY}var y=b.find(UniPlayerSettingsXmlTag.USE_CONTENT_INFO);if(y.length>0){J.useContentInfo=Util.getBooleanValue(y.text())}else{J.useContentInfo=UniPlayerSettingsDefault.USE_CONTENT_INFO}var H=b.find(UniPlayerSettingsXmlTag.USE_PLAYBACK_RATE);if(H.length>0){J.usePlaybackRate=Util.getBooleanValue(H.text())}else{J.usePlaybackRate=UniPlayerSettingsDefault.USE_PLAYBACK_RATE}var K=b.find(UniPlayerSettingsXmlTag.USE_MOBILE_PLAYBACK_RATE);if(K.length>0){J.useMobilePlaybackRate=Util.getBooleanValue(K.text())}else{J.useMobilePlaybackRate=UniPlayerSettingsDefault.USE_MOBILE_PLAYBACK_RATE}var m=b.find(UniPlayerSettingsXmlTag.MAX_PLAYBACK_RATE);if(m.length>0&&!isNaN(parseFloat(m.text()))){J.maxPlaybackRate=parseFloat(m.text())}else{J.maxPlaybackRate=UniPlayerSettingsDefault.MAX_PLAYBACK_RATE}var o=b.find(UniPlayerSettingsXmlTag.PLAYBACK_RATE_RANGE);if(o.length>0){var G=o.text().split(",");for(var I=0;I<G.length;I++){G[I]=parseFloat(G[I])}J.playbackRateRange=G;var p=o.attr(UniPlayerSettingsXmlTag.ATTR_PLAYBACK_RATE_RANGE_DEFAULT);if(p&&!isNaN(parseFloat(p))){J.playbackRateRangeDefault=parseFloat(p)}else{J.playbackRateRangeDefault=UniPlayerSettingsDefault.PLAYBACK_RATE_RANGE_DEFAULT}}else{J.playbackRateRange=UniPlayerSettingsDefault.PLAYBACK_RATE_RANGE;J.playbackRateRangeDefault=UniPlayerSettingsDefault.PLAYBACK_RATE_RANGE_DEFAULT}var c=b.find(UniPlayerSettingsXmlTag.USE_SHARE);if(c.length>0){J.useShare=Util.getBooleanValue(c.text())}else{J.useShare=UniPlayerSettingsDefault.USE_SHARE}var A=b.find(UniPlayerSettingsXmlTag.USE_CONTINUE_MSG);if(A.length>0){J.useContinueMsg=Util.getBooleanValue(A.text())}else{J.useContinueMsg=UniPlayerSettingsDefault.USE_CONTINUE_MSG}var E=b.find(UniPlayerSettingsXmlTag.INTRO_VIDEO_URI);if(E.length>0){J.introVideoUri=E.text()}var a=b.find(UniPlayerSettingsXmlTag.INTRO_IMAGE_URI);if(a.length>0){var f=a.text();J.introImage=new IntroImageData(f);var v=a.attr(UniPlayerSettingsXmlTag.ATTR_DURATION);if(v){J.introImage.duration=parseInt(v)}}var t=b.find(UniPlayerSettingsXmlTag.SEEK_LIMITED);if(t.length>0){J.seekLimited=Util.getBooleanValue(t.text())}else{J.seekLimited=UniPlayerSettingsDefault.SEEK_LIMITED}var D=b.find(UniPlayerSettingsXmlTag.USE_ANDROID_HTML5_DEFAULT_CONTROLS);if(D.length>0){J.useAndroidHtml5DefaultControls=Util.getBooleanValue(D.text())}else{J.useAndroidHtml5DefaultControls=UniPlayerSettingsDefault.USE_ANDROID_HTML5_DEFAULT_CONTROLS}var F=b.find(UniPlayerSettingsXmlTag.USE_ANDROID_HLS_DEFAULT_PLAYER);if(F.length>0){J.useAndroidHLSDefaultPlayer=Util.getBooleanValue(F.text())}else{J.useAndroidHLSDefaultPlayer=UniPlayerSettingsDefault.USE_ANDROID_HLS_DEFAULT_PLAYER}var g=b.find(UniPlayerSettingsXmlTag.USE_TITLE);if(g.length>0){J.useTitle=Util.getBooleanValue(g.text())}else{J.useTitle=UniPlayerSettingsDefault.USE_TITLE}var w=b.find(UniPlayerSettingsXmlTag.USE_ANDROID_ENTER_FULLSCREEN);if(w.length>0){J.useAndroidEnterFullScreen=Util.getBooleanValue(w.text())}else{J.useAndroidEnterFullScreen=UniPlayerSettingsDefault.USE_ANDROID_ENTER_FULLSCREEN}var u=b.find(UniPlayerSettingsXmlTag.CHAPTER_DISPLAY_TYPE);if(u.length>0){switch(u.text()){case ChapterDisplayType.THUMBNAIL:case ChapterDisplayType.THUMBNAIL_LAYER:case ChapterDisplayType.TEXT:case ChapterDisplayType.TEXT_LAYER:J.chapterDisplayType=u.text();break;default:J.chapterDisplayType=UniPlayerSettingsDefault.CHAPTER_DISPLAY_TYPE}}else{J.chapterDisplayType=UniPlayerSettingsDefault.CHAPTER_DISPLAY_TYPE}var s=b.find(UniPlayerSettingsXmlTag.USE_POPUP_FULLSCREEN);if(s.length>0){J.usePopupFullscreen=Util.getBooleanValue(s.text())}else{J.usePopupFullscreen=UniPlayerSettingsDefault.USE_POPUP_FULLSCREEN}var k=b.find(UniPlayerSettingsXmlTag.SHOW_DEFAULT_CAPTION);if(k.length>0){J.showDefaultCaption=Util.getBooleanValue(k.text())}else{J.showDefaultCaption=UniPlayerSettingsDefault.SHOW_DEFAULT_CAPTION}var x=b.find(UniPlayerSettingsXmlTag.CONTENTS_VERTICAL_ALIGN);if(x.length>0){J.contentsVerticalAlign=x.text()}else{J.contentsVerticalAlign=UniPlayerSettingsDefault.CONTENTS_VERTICAL_ALIGN}var n=b.find(UniPlayerSettingsXmlTag.USE_EBOOK_HARD_COVER);if(n.length>0){J.useEbookHardCover=Util.getBooleanValue(n.text())}else{J.useEbookHardCover=UniPlayerSettingsDefault.USE_EBOOK_HARD_COVER}var L=b.find(UniPlayerSettingsXmlTag.USE_LOCAL_CONTINUE);if(L.length>0){J.useLocalContinue=Util.getBooleanValue(L.text())}else{J.useLocalContinue=UniPlayerSettingsDefault.USE_LOCAL_CONTINUE}var l=b.find(UniPlayerSettingsXmlTag.CAPTION_BASE_FONT_SIZE);if(l.length>0&&!isNaN(parseFloat(l.text()))){J.captionBaseFontSize=parseFloat(l.text())}else{J.captionBaseFontSize=UniPlayerSettingsDefault.CAPTION_BASE_FONT_SIZE}var z=b.find(UniPlayerSettingsXmlTag.DOC_LAYOUT_MODE);if(z.length>0){switch(z.text().toLowerCase()){case"one_page":case"one_page_scroll":case"two_page":case"two_page_scroll":J.docLayoutMode=z.text().toLowerCase();break;default:J.docLayoutMode=UniPlayerSettingsDefault.DOC_LAYOUT_MODE}}else{J.docLayoutMode=UniPlayerSettingsDefault.DOC_LAYOUT_MODE}var d=b.find(UniPlayerSettingsXmlTag.USE_CONTROLLER_AUTO_HIDE);if(d.length>0){J.useControllerAutoHide=Util.getBooleanValue(d.text())}else{J.useControllerAutoHide=UniPlayerSettingsDefault.USE_CONTROLLER_AUTO_HIDE}var B=b.find(UniPlayerSettingsXmlTag.FLASH_ERROR_PAGE);if(B.length>0){J.flashErrorPageUri=Util.urlMerge(J.playerUri,B.text())}else{J.flashErrorPageUri=Util.urlMerge(J.playerUri,"flashErrorPage.html")}return J}});var UniPlayerSettingsXmlTag={PLAYER_URI:"player_uri",SKIN_URI:"skin_uri",VIEW_STATISTICS:"view_statistics",LANG:"lang",AUTO_PLAY:"auto_play",USE_CONTENT_INFO:"use_content_info",USE_PLAYBACK_RATE:"use_playback_rate",USE_MOBILE_PLAYBACK_RATE:"use_mobile_playback_rate",MAX_PLAYBACK_RATE:"max_playback_rate",PLAYBACK_RATE_RANGE:"playback_rate_range",ATTR_PLAYBACK_RATE_RANGE_DEFAULT:"default",USE_SHARE:"use_share",USE_CONTINUE_MSG:"use_continue_msg",INTRO_VIDEO_URI:"intro_video_uri",INTRO_IMAGE_URI:"intro_image_uri",ATTR_DURATION:"duration",SEEK_LIMITED:"seek_limited",USE_ANDROID_HTML5_DEFAULT_CONTROLS:"use_android_html5_default_controls",USE_ANDROID_HLS_DEFAULT_PLAYER:"use_android_hls_default_player",USE_TITLE:"use_title",USE_ANDROID_ENTER_FULLSCREEN:"use_android_enter_fullscreen",CHAPTER_DISPLAY_TYPE:"chapter_display_type",USE_POPUP_FULLSCREEN:"use_popup_fullscreen",SHOW_DEFAULT_CAPTION:"show_default_caption",CONTENTS_VERTICAL_ALIGN:"contents_vertical_align",USE_EBOOK_HARD_COVER:"use_ebook_hard_cover",USE_LOCAL_CONTINUE:"use_local_continue",CAPTION_BASE_FONT_SIZE:"caption_base_font_size",DOC_LAYOUT_MODE:"doc_layout_mode",USE_CONTROLLER_AUTO_HIDE:"use_controller_auto_hide",FLASH_ERROR_PAGE:"flash_error_page"};var UniPlayerSettingsQueryParser=Base.extend({updateSettingsByQueryString:function(k){var r=Util.getQueryVariable(UniPlayerSettingsQueryName.AUTO_PLAY);if(r!=undefined){k.autoPlay=Util.getBooleanValue(r)}var o=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_CONTENT_INFO);if(o!=undefined){k.useContentInfo=Util.getBooleanValue(o)}var i=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_PLAYBACK_RATE);if(i!=undefined){k.usePlaybackRate=Util.getBooleanValue(i)}var g=Util.getQueryVariable(UniPlayerSettingsQueryName.MAX_PLAYBACK_RATE);if(g!=undefined&&!isNaN(parseFloat(g))){k.maxPlaybackRate=parseFloat(g)}var u=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_SHARE);if(u!=undefined){k.useShare=Util.getBooleanValue(u)}var h=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_CONTINUE_MSG);if(h!=undefined){k.useContinueMsg=Util.getBooleanValue(h)}var m=Util.getQueryVariable(UniPlayerSettingsQueryName.INTRO_VIDEO_URI);if(m!=undefined){k.introVideoUri=m}var f=Util.getQueryVariable(UniPlayerSettingsQueryName.INTRO_IMAGE_URI);if(f!=undefined){k.introImage=new IntroImageData(f)}var d=Util.getQueryVariable(UniPlayerSettingsQueryName.SEEK_LIMITED);if(d!=undefined){k.seekLimited=Util.getBooleanValue(d)}var p=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_ANDROID_HTML5_DEFAULT_CONTROLS);if(p!=undefined){k.useAndroidHtml5DefaultControls=Util.getBooleanValue(p)}var b=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_ANDROID_HLS_DEFAULT_PLAYER);if(b!=undefined){k.useAndroidHLSDefaultPlayer=Util.getBooleanValue(b)}var e=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_TITLE);if(e!=undefined){k.useTitle=Util.getBooleanValue(e)}var c=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_ANDROID_ENTER_FULLSCREEN);if(c!=undefined){k.useAndroidEnterFullScreen=Util.getBooleanValue(c)}var v=Util.getQueryVariable(UniPlayerSettingsQueryName.CHAPTER_DISPLAY_TYPE);if(v!=undefined){switch(v){case ChapterDisplayType.THUMBNAIL:case ChapterDisplayType.THUMBNAIL_LAYER:case ChapterDisplayType.TEXT:case ChapterDisplayType.TEXT_LAYER:k.chapterDisplayType=v;break}}var s=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_POPUP_FULLSCREEN);if(s!=undefined){k.usePopupFullscreen=Util.getBooleanValue(s)}var t=Util.getQueryVariable(UniPlayerSettingsQueryName.SHOW_DEFAULT_CAPTION);if(t!=undefined){k.showDefaultCaption=Util.getBooleanValue(t)}var n=Util.getQueryVariable(UniPlayerSettingsQueryName.CONTENTS_VERTICAL_ALIGN);if(n!=undefined){switch(n){case ContentsVerticalAlign.TOP:case ContentsVerticalAlign.CENTER:k.contentsVerticalAlign=n;break}}var j=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_EBOOK_HARD_COVER);if(j!=undefined){k.useEbookHardCover=Util.getBooleanValue(j)}var a=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_LOCAL_CONTINUE);if(a!=undefined){k.useLocalContinue=Util.getBooleanValue(a)}var q=Util.getQueryVariable(UniPlayerSettingsQueryName.CAPTION_BASE_FONT_SIZE);if(q!=undefined&&!isNaN(parseFloat(q))){k.captionBaseFontSize=parseFloat(q)}var l=Util.getQueryVariable(UniPlayerSettingsQueryName.DOC_LAYOUT_MODE);if(l!=undefined){switch(l.toLowerCase()){case"one_page":case"one_page_scroll":case"two_page":case"two_page_scroll":k.docLayoutMode=l.toLowerCase();break}}var w=Util.getQueryVariable(UniPlayerSettingsQueryName.USE_CONTROLLER_AUTO_HIDE);if(w!=undefined){k.useControllerAutoHide=Util.getBooleanValue(w)}return k}});var UniPlayerSettingsQueryName={PLAYER_SETTINGS:"player_settings",PLAYING_INFO:"playing_info",CONTENT_METADATA:"content_metadata",CONTENT:"content",SERVICE_ROOT:"service_root",VIDEO_TYPE:"video_type",SYNC_VIDEO_MOBILE_PLAY_MODE:"sync_video_mobile_play_mode",LANG:"lg",AUTO_PLAY:"ap",USE_CONTENT_INFO:"uc",USE_PLAYBACK_RATE:"pr",MAX_PLAYBACK_RATE:"mxpr",USE_SHARE:"us",USE_CONTINUE_MSG:"ucm",VIEW_MODE:"vm",INTRO_VIDEO_URI:"ivu",INTRO_IMAGE_URI:"iiu",SEEK_LIMITED:"sl",START_TIME:"st",END_TIME:"et",USE_ANDROID_HTML5_DEFAULT_CONTROLS:"uadc",USE_ANDROID_HLS_DEFAULT_PLAYER:"uahdp",USE_TITLE:"ut",USE_ANDROID_ENTER_FULLSCREEN:"uaef",CHAPTER_DISPLAY_TYPE:"cdt",USE_POPUP_FULLSCREEN:"upfs",SYNC_VIDEO_INITIAL_LAYOUT:"svil",SHOW_DEFAULT_CAPTION:"sdc",CONTENTS_VERTICAL_ALIGN:"cva",USE_EBOOK_HARD_COVER:"uehc",USE_LOCAL_CONTINUE:"ulc",CAPTION_BASE_FONT_SIZE:"cbfs",DOC_LAYOUT_MODE:"dlm",USE_CONTROLLER_AUTO_HIDE:"ucah"};var UniPlayerSettingsDefault={LANG:"ko",AUTO_PLAY:false,USE_CONTENT_INFO:false,USE_PLAYBACK_RATE:true,USE_MOBILE_PLAYBACK_RATE:false,MAX_PLAYBACK_RATE:2,PLAYBACK_RATE_RANGE:[0.5,1,1.25,1.5,2],PLAYBACK_RATE_RANGE_DEFAULT:1,USE_SHARE:false,USE_CONTINUE_MSG:false,SEEK_LIMITED:false,USE_ANDROID_HTML5_DEFAULT_CONTROLS:false,USE_ANDROID_HLS_DEFAULT_PLAYER:false,USE_TITLE:true,USE_ANDROID_ENTER_FULLSCREEN:false,CHAPTER_DISPLAY_TYPE:ChapterDisplayType.THUMBNAIL,USE_POPUP_FULLSCREEN:true,SHOW_DEFAULT_CAPTION:false,CONTENTS_VERTICAL_ALIGN:"center",USE_EBOOK_HARD_COVER:true,USE_LOCAL_CONTINUE:true,CAPTION_BASE_FONT_SIZE:48,DOC_LAYOUT_MODE:"one_page_scroll",USE_CONTROLLER_AUTO_HIDE:true};var ContentParser=Base.extend({_serviceRootData:null,_contentPlayingInfoData:null,_contentMetadata:null,_contentData:null,getServiceRootData:function(){return this._serviceRootData},getContentPlayingInfoData:function(){return this._contentPlayingInfoData},getContentMetadata:function(){return this._contentMetadata},parseServiceRootComponent:function(a,c){if(!a){c();return}var b=this;$.ajax({url:a,dataType:"xml",async:true,success:function(d){b._contentData=d;var e=new ServiceRootParser();if(e.parseServiceRoot($(d).find(ServiceRootXMLTag.SERVICE_ROOT))){b._serviceRootData=e.getServiceRootData()}c()},error:function(d){c()}})},parseContent:function(a,c){if(!a){c();return}if(this._contentData){this.parseContentData(this._contentData,c);return}var b=this;$.ajax({url:a,dataType:"xml",async:true,success:function(d){b.parseContentData(d,c)},error:function(d){c()}})},parseContentData:function(b,d){var c=new ContentPlayingInfoParser();this._contentPlayingInfoData=c.parseContentPlayingInfoData($(b).find(ContentPlayingInfoXmlTag.CONTENT_PLAYING_INFO));var a=new ContentMetadataParser();this._contentMetadata=a.parseContentMetadataData($(b).find(ContentMetadataXmlTag.CONTENT_METADATA));d()}});var ContentPlayingInfoData=Base.extend({lang:null,contentId:null,contentType:null,contentUri:null,contentBackgroundImageUri:null,contentThumbnailUri:null,contentDownloadUri:null,originalContentDuration:null,contentDuration:null,contentStartTime:0,contentEndTime:0,syncVideoInitLayoutMobile:null,syncVideoInitLayoutDesktop:null,useSyncDocEvent:true,useSyncDocDocView:false,useCaption:true,captionUri:null,introVideoUri:null,isExistsProfileList:false,profileList:null,storyList:[],currStoryIdx:0,currStoryPlayingInfo:null,setStoryList:function(b){this.storyList=b;if(!(b instanceof Array)){return}var d=0;var c=0;for(var a=0;a<this.storyList.length;a++){if(!this.storyList[a].isIntro){this.storyList[a].profileList=this.profileList;this.storyList[a].isExistsProfile=this.isExistsProfileList;this.storyList[a].resetStoryDurationOfPlaySection();this.storyList[a].startTimeOnContent=c;this.storyList[a].originalStartTimeOnContent=d;c=Number((c+this.storyList[a].storyDuration).toFixed(5));d=Number((d+this.storyList[a].originalStoryDuration).toFixed(5));this.storyList[a].endTimeOnContent=c;this.storyList[a].originalEndTimeOnContent=d;this.storyList[a].initSectionList()}}this.originalContentDuration=this.contentDuration;this.contentDuration=c;this.setCurrentStoryPlayingInfo(0)},setCurrentStoryPlayingInfo:function(a){if(a<0||a>=this.storyList.length){return}this.currStoryIdx=a;this.currStoryPlayingInfo=this.storyList[a]},getCurrentStoryPlayingInfo:function(){return this.currStoryPlayingInfo},getContentId:function(){return this.contentId},getContentDuration:function(){return this.contentDuration},getStoryPlayingInfoById:function(a){if(!(this.storyList instanceof Array)){return}for(var b=0;b<this.storyList.length;b++){if(this.storyList[b].isIntro){continue}if(this.storyList[b].storyId==a){return this.storyList[b]}}return null},setContentStartTime:function(a){this.contentStartTime=a}});var StoryPlayingInfoData=Base.extend({storyId:null,storyType:null,originalStoryDuration:0,storyDuration:0,playSectionList:null,storyFileNameList:null,mainMediaList:null,subMediaList:null,extraMedias:null,mixedMediaList:null,isIntro:false,profileList:null,isExistsProfile:false,startTimeOnContent:0,endTimeOnContent:0,originalStartTimeOnContent:0,originalEndTimeOnContent:0,currentMainMedia:null,currentSubMedia:null,currentExtraMedias:null,currentMixedMedia:null,currentProfile:null,hasMixedMedia:false,initSectionList:function(){if(!this.playSectionList||this.playSectionList.length<1){return}this.playSectionList.sort(function(d,c){return d.seq-c.seq});for(var b in this.playSectionList){var a=this.playSectionList[b];if(b==0){a.storyStartTime=0}else{a.storyStartTime=this.playSectionList[b-1].storyEndTime}a.storyEndTime=a.storyStartTime+a.mediaEndTime-a.mediaStartTime}},resetStoryDurationOfPlaySection:function(){this.originalStoryDuration=this.storyDuration;if(!this.playSectionList||this.playSectionList.length==0){return}var a=0;for(var c in this.playSectionList){var b=this.playSectionList[c];a+=(b.mediaEndTime-b.mediaStartTime)}this.storyDuration=Number(a.toFixed(5))},convert2storyTime:function(c){if(!this.playSectionList||this.playSectionList.length==0){return c}for(var b in this.playSectionList){var a=this.playSectionList[b];if(a.mediaStartTime<=c&&c<a.mediaEndTime){var d=c-a.mediaStartTime;return a.storyStartTime+d}}return -1},convert2mediaTime:function(c){if(!this.playSectionList||this.playSectionList.length==0){return c}for(var b in this.playSectionList){var a=this.playSectionList[b];if(a.storyStartTime<=c&&c<a.storyEndTime){var d=c-a.storyStartTime;return a.mediaStartTime+d}}return this.playSectionList[this.playSectionList.length-1].mediaEndTime},getNextStoryTime:function(c){if(this.playSectionList.length==0){return}for(var b in this.playSectionList){var a=this.playSectionList[b];if(a.mediaStartTime>c){var d=this.playSectionList[b];return d.storyStartTime}}return -1},getStoryEndtime:function(){if(this.playSectionList.length==0){return}return this.playSectionList[this.playSectionList.length-1].storyEndTime},setProfile:function(b){if(this.storyType==ContentType.SYNCAUDIO||this.storyType==ContentType.AUDIO){return}for(var a in this.profileList){if(this.profileList[a].name==b){this.currentProfile=this.profileList[a];break}}this.setCurrentMainMedia(b);this.setCurrentSubMedia(b);this.setCurrentExtraMedia(0,b)},getProfile:function(){if(this.profileList==null){return}if(this.currentProfile==null){this.setDefaultMainMedia()}return this.currentProfile},getProfileFromName:function(c){if(this.profileList==null){return null}var b=null;for(var a in this.profileList){if(this.profileList[a].name==c){b=this.profileList[a];break}}return b},getCurrentMainMedia:function(){if(this.currentMainMedia==null){if(this.mainMediaList==null){return null}this.setDefaultMainMedia()}return this.currentMainMedia},setDefaultMainMedia:function(){for(var a=0;a<this.mainMediaList.list.length;a++){var c=this.mainMediaList.list[a];if(c.mediaId==this.mainMediaList.defaultMediaId){var b;if(this.storyType==ContentType.SYNCAUDIO||this.storyType==ContentType.AUDIO){b=true}else{b=this.isDefaultProfileId(c.profileId)}if(b){this.currentMainMedia=c;if(c.profileId){this.currentProfile=this.profileList[c.profileId]}break}}}},clearCurrentMedia:function(){this.currentMainMedia=null;this.currentSubMedia=null;this.currentExtraMedias=null},setCurrentMainMedia:function(c){if(!c||this.mainMediaList==null){return}var a=this.getCurrentMainMedia().mediaId;for(var b=0;b<this.mainMediaList.list.length;b++){if(this.profileList[this.mainMediaList.list[b].profileId].name==c&&this.mainMediaList.list[b].mediaId==a){this.currentMainMedia=this.mainMediaList.list[b];return}}},getCurrentSubMedia:function(){if(this.currentSubMedia==null){if(this.subMediaList==null){return null}for(var a=0;a<this.subMediaList.list.length;a++){var b=this.subMediaList.list[a];if(this.isDefaultProfileId(b.profileId)&&b.mediaId==this.subMediaList.defaultMediaId){this.currentSubMedia=b;break}}}return this.currentSubMedia},setCurrentSubMedia:function(c){if(!c||this.subMediaList==null){return}var a=this.getCurrentSubMedia().mediaId;for(var b=0;b<this.subMediaList.list.length;b++){if(this.profileList[this.subMediaList.list[b].profileId].name==c&&this.subMediaList.list[b].mediaId==a){this.currentSubMedia=this.subMediaList.list[b];return}}},getCurrentExtraMedia:function(a){if(this.extraMedias==null){return}if(this.currentExtraMedias==null){this.createEmptyCurrentExtraMedias()}var b=this.currentExtraMedias[a];if(b==null){var d=this.extraMedias[a];for(var c=0;c<d.list.length;c++){var e=d.list[c];if(this.isDefaultProfileId(e.profileId)&&e.mediaId==d.defaultMediaId){this.currentExtraMedias[a]=e;break}}}return this.currentExtraMedias[a]},setCurrentExtraMedia:function(a,d){if(!d||this.extraMedias==null){return}var b=this.getCurrentExtraMedia(a).mediaId;var e=this.extraMedias[a];for(var c=0;c<e.list.length;c++){if(this.profileList[e.list[c].profileId].name==d&&e.list[c].mediaId==b){this.currentExtraMedias[a]=e.list[c];return}}},getCurrentMixedMedia:function(){if(this.currentMixedMedia==null){if(this.mixedMediaList==null){return null}this.setDefaultMixedMedia()}return this.currentMixedMedia},setDefaultMixedMedia:function(){for(var a=0;a<this.mixedMediaList.list.length;a++){var c=this.mixedMediaList.list[a];if(c.mediaId==this.mixedMediaList.defaultMediaId){var b=this.isDefaultProfileId(c.profileId);if(b){this.currentMixedMedia=c;break}}}},isDefaultProfileId:function(a){if(false==this.isExistsProfile){return true}return(this.profileList[a].isMobileDefault&&skinManager.isMobile())||(this.profileList[a].isDesktopDefault&&!skinManager.isMobile())},getDefaultProfileName:function(){var c=Util.objectKeys(this.profileList);var b;for(var a=0;a<c.length;a++){if(this.isDefaultProfileId(c[a])){b=this.profileList[c[a]].name;break}}return b},createEmptyCurrentExtraMedias:function(){this.currentExtraMedias=[];for(var a=0;a<this.extraMedias.length;a++){this.currentExtraMedias.push(null)}}});var StoryFileNameList=Base.extend({caption:"",eventList:"",note:"",slideList:""});var PlaySection=Base.extend({seq:0,mediaStartTime:0,mediaEndTime:0,storyStartTime:0,storyEndTime:0});var MediaInfoData=Base.extend({profileId:null,mediaId:null,desktopMethod:null,desktopMediaUri:null,flashFallbackMethod:null,flashFallbackMediaUri:null,mobileMethod:null,mobileMediaUri:null});var ProfileInfoData=Base.extend({id:null,isDesktopDefault:false,isMobileDefault:false,isAudio:false,name:null});var ContentPlayingInfoParser=Base.extend({_contentPlayingInfoData:null,getContentPlayingInfoData:function(){return this._contentPlayingInfoData},parseContentPlayingInfo:function(b,c){if(!b){return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a._contentPlayingInfoData=a.parseContentPlayingInfoData($(d));c()}})},parseContentPlayingInfoData:function(h){var z=new ContentPlayingInfoData();this._contentPlayingInfoData=z;var t=h.find(ContentPlayingInfoXmlTag.LANG);if(t.length>0){var c=t.text();z.lang=localizeManager.getLanguageCode(c)}var A=h.find(ContentPlayingInfoXmlTag.CONTENT_ID);if(A.length>0){z.contentId=A.text()}var q=h.find(ContentPlayingInfoXmlTag.CONTENT_TYPE);if(q.length>0){z.contentType=q.text()}var r=h.find(ContentPlayingInfoXmlTag.CONTENT_URI);if(r.length>0){z.contentUri=r.text()}if(uniPlayerConfig.getServiceRoot()&&uniPlayerConfig.getServiceRoot().webUri){z.contentUri=uniPlayerConfig.getServiceRoot().webUri}var s=h.find(ContentPlayingInfoXmlTag.CONTENT_BACKGROUND_IMAGE_URI);if(s.length>0){z.contentBackgroundImageUri=s.text()}var v=h.find(ContentPlayingInfoXmlTag.CONTENT_DOWNLOAD_URI);if(v.length>0){z.contentDownloadUri=v.text()}var B=h.find(ContentPlayingInfoXmlTag.CONTENT_THUMBNAIL_URI);if(B.length>0){z.contentThumbnailUri=B.text()}var u=h.find(ContentPlayingInfoXmlTag.CONTENT_DURATION);if(u.length>0){if(u.text()==""){z.contentDuration=ContentPlayingInfoDefault.CONTENT_DURATION}else{z.contentDuration=parseFloat(u.text())}}else{z.contentDuration=ContentPlayingInfoDefault.CONTENT_DURATION}var E=h.find(ContentPlayingInfoXmlTag.CONTENT_START_TIME);if(E.length>0){z.contentStartTime=parseFloat(E.text())}else{z.contentStartTime=ContentPlayingInfoDefault.CONTENT_START_TIME}var o=h.find(ContentPlayingInfoXmlTag.CONTENT_END_TIME);if(o.length>0){z.contentEndTime=parseFloat(o.text())}else{z.contentEndTime=ContentPlayingInfoDefault.CONTENT_END_TIME}var n=h.find(ContentPlayingInfoXmlTag.SYNCVIDEO_INIT_LAYOUT);if(n.length>0){z.syncVideoInitLayoutMobile=n.text();z.syncVideoInitLayoutDesktop=n.text()}var g=h.find(ContentPlayingInfoXmlTag.USE_SYNCDOC_EVENT);if(g.length>0){z.useSyncDocEvent=Util.getBooleanValue(g.text())}else{z.useSyncDocEvent=ContentPlayingInfoDefault.USE_SYNCDOC_EVENT}var m=h.find(ContentPlayingInfoXmlTag.USE_SYNCDOC_DOCVIEW);if(m.length>0){z.useSyncDocDocView=Util.getBooleanValue(m.text())}else{z.useSyncDocDocView=ContentPlayingInfoDefault.USE_SYNCDOC_DOCVIEW}var l=h.find(ContentPlayingInfoXmlTag.PROFILE_LIST);if(l.length>0){var k=this.parseProfileList(l);z.profileList=this.checkAndSetDefaultProfile(k);z.isExistsProfileList=true}else{z.profileList={};var j=this.createDummyProfile();z.profileList[ContentPlayingInfoDefault.PROFILE_ID]=j;z.isExistsProfileList=false}var d=h.find(ContentPlayingInfoXmlTag.INTRO_VIDEO_URI);if(d.length>0){z.introVideoUri=d.text()}var D=Util.getQueryVariable(ContentPlayingInfoQueryName.INTRO_VIDEO_URI);if(D!=undefined){z.introVideoUri=D}var f=h.find(ContentPlayingInfoXmlTag.SHOW_CAPTION);if(f.length>0){var x=Util.getBooleanValue(f.text());uniPlayerConfig.getUniPlayerSettingsData().showDefaultCaption=x}var e=h.find(ContentPlayingInfoXmlTag.USE_CAPTION);if(e.length>0){var b=Util.getBooleanValue(e.text());z.useCaption=b}var F=h.find(ContentPlayingInfoXmlTag.CAPTION_URI);if(F.length>0){z.captionUri=F.text()}var a=h.find(ContentPlayingInfoXmlTag.STORY_LIST);var y=[];if(!skinManager.isMobile()&&uniPlayerConfig.getViewMode()!=UniPlayerApp.VIEW_MODE_POPUP&&z.contentType!=ContentType.SHAREDOCS){var p=null;if(z.introVideoUri!=null&&typeof(z.introVideoUri)!="undefined"){switch(z.introVideoUri.toLowerCase()){case"default":p=uniPlayerConfig._uniPlayerSettingsData.introVideoUri;break;case"no_intro":p=null;break;default:p=z.introVideoUri;break}}else{p=uniPlayerConfig._uniPlayerSettingsData.introVideoUri}if(p!=null&&typeof(p)!="undefined"&&p!=""){y.push(this.generateIntroStory(p))}}if(a.length>0){y=y.concat(this.parseStoryList(a));z.setStoryList(y)}else{var C=new StoryPlayingInfoData();C.storyId=ContentPlayingInfoDefault.STORY_ID;C.storyType=z.contentType;C.storyDuration=z.contentDuration;C.storyFileNameList=this.parseStoryFileNameList(h,C.storyId);C.mainMediaList=this.parseMainMediaList(h,C.storyType);C.subMediaList=this.parseSubMediaList(h,C.storyType);C.extraMedias=this.parseSetOfExtraMediaList(h,C.storyType);if(false==this.hasUserDefinedMediaUrl()){C.mixedMediaList=this.parseMixedMediaList(h,C.storyType);if(C.mixedMediaList!=null&&C.mixedMediaList.length!=0){C.hasMixedMedia=true}}y.push(C);z.setStoryList(y)}if(skinManager.isMobile()){for(var w=0;w<y.length;w++){if(y[w].hasMixedMedia){switch(y[w].storyType){case ContentType.VIDEO1:y[w].storyType=ContentType.VIDEO2;y[w].subMediaList=Util.clone(y[w].mainMediaList);y[w].mainMediaList=y[w].mixedMediaList;break;case ContentType.VIDEO2:y[w].storyType=ContentType.VIDEO3;y[w].extraMedias=[];y[w].extraMedias.push(y[w].mixedMediaList);break;case ContentType.VIDEO3:y[w].extraMedias.push(y[w].mixedMediaList);break}}}}return z},parseContentFileList:function(a){var f=a.find(ContentPlayingInfoXmlTag.CONTENT_FILE);var d=[];if(f.length>0){for(var b=0;b<f.length;b++){var e=$(f[b]);var c=new ContentFileData();c.type=e.attr(ContentPlayingInfoXmlTag.CONTENT_FILE_TYPE).toLowerCase();c.name=e.text();d.push(c)}}return d},generateIntroStory:function(a){var e=new StoryPlayingInfoData();e.profileList={};var c=this.createDummyProfile();e.profileList[ContentPlayingInfoDefault.PROFILE_ID]=c;var d=new MediaInfoData();d.mediaId=ContentPlayingInfoDefault.MEDIA_ID;d.profileId=ContentPlayingInfoDefault.PROFILE_ID;d.mobileMethod=MediaMethod.PROGRESSIVE;d.flashFallbackMethod=MediaMethod.PROGRESSIVE;d.desktopMethod=MediaMethod.PROGRESSIVE;d.mobileMediaUri=a;d.flashFallbackMediaUri=a;d.desktopMediaUri=a;var b={};b.defaultMediaId=ContentPlayingInfoDefault.MEDIA_ID;b.list=[];b.list.push(d);e.storyId=ContentPlayingInfoDefault.INTRO_STORY_ID;e.mainMediaList=b;e.storyType=ContentType.VIDEO1;e.storyDuration=0;e.isIntro=true;return e},parseProfileList:function(a){var d=a.find(ContentPlayingInfoXmlTag.PROFILE);var e=null;if(d.length>0){e={};for(var b=0;b<d.length;b++){var c=this.parseProfileInfo($(d[b]));e[c.id]=c}}return e},parseStoryList:function(c){var f=[];var h=c.find(ContentPlayingInfoXmlTag.STORY);if(h.length>0){for(var e=0;e<h.length;e++){var a=$(h[e]);var d=new StoryPlayingInfoData();d.storyId=a.attr(ContentPlayingInfoXmlTag.STORY_ID);var b=a.find(ContentPlayingInfoXmlTag.STORY_TYPE);d.storyType=b.text().toLowerCase();var g=a.find(ContentPlayingInfoXmlTag.STORY_DURATION);d.storyDuration=parseFloat(g.text());d.playSectionList=this.parsePlaySectionList(a);d.storyFileNameList=this.parseStoryFileNameList(a,d.storyId);d.mainMediaList=this.parseMainMediaList(a,d.storyType);d.subMediaList=this.parseSubMediaList(a,d.storyType);d.extraMedias=this.parseSetOfExtraMediaList(a,d.storyType);if(false==this.hasUserDefinedMediaUrl()){d.mixedMediaList=this.parseMixedMediaList(a,d.storyType);if(d.mixedMediaList!=null&&d.mixedMediaList.length!=0){d.hasMixedMedia=true}}f.push(d)}}return f},parsePlaySectionList:function(b){var d=[];var a=b.find(ContentPlayingInfoXmlTag.STORY_PLAY_SECTION_LIST);var c=b.find(ContentPlayingInfoXmlTag.PLAY_SECTION);if(c.length>0){c.each(function(){var e=new PlaySection();e.seq=Number($(this).attr(ContentPlayingInfoXmlTag.SECTION_SEQ));e.mediaStartTime=Number($(this).attr(ContentPlayingInfoXmlTag.SECTION_START_TIME));e.mediaEndTime=Number($(this).attr(ContentPlayingInfoXmlTag.SECTION_END_TIME));d.push(e)})}return d},parseStoryFileNameList:function(b,g){var f=new StoryFileNameList();var h=b.find(ContentPlayingInfoXmlTag.STORY_FILE_LIST);if(h.length>0){var a=$(h).find(ContentPlayingInfoXmlTag.STORY_CAPTION);if(a.length>0){f.caption=a.text()}var d=$(h).find(ContentPlayingInfoXmlTag.STORY_EVENTLIST);if(d.length>0){f.eventList=d.text()}var c=$(h).find(ContentPlayingInfoXmlTag.STORY_NOTE);if(c.length>0){f.note=c.text()}var e=$(h).find(ContentPlayingInfoXmlTag.STORY_SLIDELIST);if(e.length>0){f.slideList=e.text()}}else{f.caption=this.getStoryRelatedInfoXMLFileName(ClosedCaptionParser.XML_FILENAME,g);f.eventList=this.getStoryRelatedInfoXMLFileName(EventListParser.XML_FILENAME,g);f.note=this.getStoryRelatedInfoXMLFileName(NoteParser.XML_FILENAME,g);f.slideList=this.getStoryRelatedInfoXMLFileName(SlideListInfoParser.XML_FILENAME,g)}return f},getStoryRelatedInfoXMLFileName:function(a,b){if(a==null||b==null){return}if(b==ContentPlayingInfoDefault.STORY_ID){return a+".xml"}else{return"{0}_{1}.xml".format(a,b)}},parseMainMediaList:function(d,e){var b=null;var g=d.find(ContentPlayingInfoXmlTag.CONTENT_MAIN_MEDIA_LIST);if(g.length>0){b=this.parseMediaInfoList(g,ContentPlayingInfoXmlTag.CONTENT_MAIN_MEDIA,e)}else{var f=d.find(ContentPlayingInfoXmlTag.CONTENT_MAIN_MEDIA);if(f.length>0){b={};b.defaultMediaId=ContentPlayingInfoDefault.MEDIA_ID;b.list=[];var c=this.parseMediaInfo(f,e);c.mediaId=ContentPlayingInfoDefault.MEDIA_ID;c.profileId=ContentPlayingInfoDefault.PROFILE_ID;b.list.push(c);var a=Util.getQueryVariable(ContentPlayingInfoQueryName.MAIN_VIDEO_URI);if(a!=undefined){c.desktopMethod=MediaMethod.PROGRESSIVE;c.desktopMediaUri=a;c.flashFallbackMethod=MediaMethod.PROGRESSIVE;c.flashFallbackMediaUri=a;c.mobileMethod=MediaMethod.PROGRESSIVE;c.mobileMediaUri=a}}}return b},parseSubMediaList:function(e,f){var b=null;var a=e.find(ContentPlayingInfoXmlTag.CONTENT_SUB_MEDIA_LIST);if(a.length>0){b=this.parseMediaInfoList(a,ContentPlayingInfoXmlTag.CONTENT_SUB_MEDIA,f)}else{var d=e.find(ContentPlayingInfoXmlTag.CONTENT_SUB_MEDIA);if(d.length>0){b={};b.defaultMediaId=ContentPlayingInfoDefault.MEDIA_ID;b.list=[];var c=this.parseMediaInfo(d,f);c.mediaId=ContentPlayingInfoDefault.MEDIA_ID;c.profileId=ContentPlayingInfoDefault.PROFILE_ID;b.list.push(c);var g=Util.getQueryVariable(ContentPlayingInfoQueryName.SUB_VIDEO_URI);if(g!=undefined){c.desktopMethod=MediaMethod.PROGRESSIVE;c.desktopMediaUri=g;c.flashFallbackMethod=MediaMethod.PROGRESSIVE;c.flashFallbackMediaUri=g;c.mobileMethod=MediaMethod.PROGRESSIVE;c.mobileMediaUri=g}}}return b},parseSetOfExtraMediaList:function(d,f){var a=null;var b=d.find(ContentPlayingInfoXmlTag.CONTENT_EXTRA_MEDIA_LIST);if(b.length>0){a=[];for(var e=0;e<b.length;e++){$mediaList=$(b[e]);var c=$mediaList.attr(ContentPlayingInfoXmlTag.CONTENT_INDEX);var g=this.parseMediaInfoList($mediaList,ContentPlayingInfoXmlTag.CONTENT_EXTRA_MEDIA,f);a.push(g)}}return a},parseMixedMediaList:function(a,b){var c=null;var f=a.find(ContentPlayingInfoXmlTag.CONTENT_MIXED_MEDIA_LIST);if(f.length>0){c=this.parseMediaInfoList(f,ContentPlayingInfoXmlTag.CONTENT_MIXED_MEDIA,b)}else{var e=a.find(ContentPlayingInfoXmlTag.CONTENT_MIXED_MEDIA);if(e.length>0){c={};c.defaultMediaId=ContentPlayingInfoDefault.MEDIA_ID;c.list=[];var d=this.parseMediaInfo(e,b);d.mediaId=ContentPlayingInfoDefault.MEDIA_ID;d.profileId=ContentPlayingInfoDefault.PROFILE_ID;c.list.push(d)}}return c},checkAndSetDefaultProfile:function(e){var d=Util.objectKeys(e);var b=false;var c=false;for(var a=0;a<d.length;a++){b=b||e[d[a]].isDesktopDefault;c=c||e[d[a]].isMobileDefault}if(!b){e[d[0]].isDesktopDefault=true}if(!c){e[d[0]].isMobileDefault=true}return e},parseProfileInfo:function(a){var e=new ProfileInfoData();var g=a.attr(ContentPlayingInfoXmlTag.PROFILE_ID);e.id=g;var f=a.attr(ContentPlayingInfoXmlTag.DESKTOP_DEFAULT);if(!f){e.isDesktopDefault=false}else{e.isDesktopDefault=Util.getBooleanValue(f)}var c=a.attr(ContentPlayingInfoXmlTag.MOBILE_DEFAULT);if(!c){e.isMobileDefault=false}else{e.isMobileDefault=Util.getBooleanValue(c)}var d=a.attr(ContentPlayingInfoXmlTag.IS_AUDIO);if(d){e.isAudio=Util.getBooleanValue(d)}else{e.isAudio=ContentPlayingInfoDefault.PROFILE_IS_AUDIO}var b=a.find(ContentPlayingInfoXmlTag.PROFILE_NAME);e.name=(b.length>0)?b.text():ContentPlayingInfoDefault.PROFILE_NAME;return e},createDummyProfile:function(){var a=new ProfileInfoData();a.id=ContentPlayingInfoDefault.PROFILE_ID;a.profileName=ContentPlayingInfoDefault.PROFILE_NAME;a.isMobileDefault=true;a.isDesktopDefault=true;return a},parseMediaInfoList:function(d,j,g){var m={};var h=d.attr(ContentPlayingInfoXmlTag.CONTENT_DEFAULT_MEDIA_ID);if(!h){h=ContentPlayingInfoDefault.MEDIA_ID}m.defaultMediaId=h;var a=d.find(j);var k=null;if(a.length>0){k=[];for(var e=0;e<a.length;e++){var c=this.parseMediaInfo($(a[e]),g);k.push(c);switch(j){case ContentPlayingInfoXmlTag.CONTENT_MAIN_MEDIA:var f=Util.getQueryVariable(ContentPlayingInfoQueryName.MAIN_VIDEO_URI);if(f!=undefined){c.desktopMethod=MediaMethod.PROGRESSIVE;c.desktopMediaUri=f;c.flashFallbackMethod=MediaMethod.PROGRESSIVE;c.flashFallbackMediaUri=f;c.mobileMethod=MediaMethod.PROGRESSIVE;c.mobileMediaUri=f}break;case ContentPlayingInfoXmlTag.CONTENT_SUB_MEDIA:var b=Util.getQueryVariable(ContentPlayingInfoQueryName.SUB_VIDEO_URI);if(b!=undefined){c.desktopMethod=MediaMethod.PROGRESSIVE;c.desktopMediaUri=b;c.flashFallbackMethod=MediaMethod.PROGRESSIVE;c.flashFallbackMediaUri=b;c.mobileMethod=MediaMethod.PROGRESSIVE;c.mobileMediaUri=b}break;case ContentPlayingInfoXmlTag.CONTENT_MIXED_MEDIA:var l=Util.getQueryVariable(ContentPlayingInfoQueryName.EXTRA_VIDEO_URI);if(l!=undefined){c.desktopMethod=MediaMethod.PROGRESSIVE;c.desktopMediaUri=l;c.flashFallbackMethod=MediaMethod.PROGRESSIVE;c.flashFallbackMediaUri=l;c.mobileMethod=MediaMethod.PROGRESSIVE;c.mobileMediaUri=l}break}}}m.list=k;return m},parseMediaInfo:function(b,c){var a=new MediaInfoData();if(c!=ContentType.SYNCAUDIO&&c!=ContentType.AUDIO){var f=b.attr(ContentPlayingInfoXmlTag.CONTENT_PROFILE_ID);a.profileId=f;if(!f){a.profileId=ContentPlayingInfoDefault.PROFILE_ID}}var e=b.attr(ContentPlayingInfoXmlTag.CONTENT_MEDIA_ID);if(!e){e=ContentPlayingInfoDefault.MEDIA_ID}a.mediaId=e;var d=b.find(ContentPlayingInfoXmlTag.MEDIA_DESKTOP);if(d.length>0){this.generateMediaInfoUsingXML(a,b)}else{this.generateMediaInfoUsingRootData(a,b,c)}return a},generateMediaInfoUsingXML:function(k,d){var h=d.find(ContentPlayingInfoXmlTag.MEDIA_DESKTOP);var o=h.find(ContentPlayingInfoXmlTag.MEDIA_HTML5);var e=o.find(ContentPlayingInfoXmlTag.MEDIA_METHOD);k.desktopMethod=e.text().toLowerCase();var q=o.find(ContentPlayingInfoXmlTag.MEDIA_URI);k.desktopMediaUri=q.text();var g=h.find(ContentPlayingInfoXmlTag.MEDIA_FLASH_FALLBACK);var f=g.find(ContentPlayingInfoXmlTag.MEDIA_METHOD);k.flashFallbackMethod=f.text().toLowerCase();var p=g.find(ContentPlayingInfoXmlTag.MEDIA_URI);k.flashFallbackMediaUri=p.text();var j=d.find(ContentPlayingInfoXmlTag.MEDIA_MOBILE);var l=j.find(ContentPlayingInfoXmlTag.MEDIA_HTML5);var i=l.find(ContentPlayingInfoXmlTag.MEDIA_METHOD);k.mobileMethod=i.text().toLowerCase();var n=l.find(ContentPlayingInfoXmlTag.MEDIA_URI);k.mobileMediaUri=n.text();var c=q.attr(ContentPlayingInfoXmlTag.AUTH_KEY);var b=q.attr(ContentPlayingInfoXmlTag.AUTH_VALUE);if(c!=undefined&&b!=undefined){k.desktopMediaUri=Util.appendQueryVariable(k.desktopMediaUri,c,b)}var a=n.attr(ContentPlayingInfoXmlTag.AUTH_KEY);var m=n.attr(ContentPlayingInfoXmlTag.AUTH_VALUE);if(a!=undefined&&m!=undefined){k.mobileMediaUri=Util.appendQueryVariable(k.mobileMediaUri,a,m)}},generateMediaInfoUsingRootData:function(j,d,i){var f=d.text();var c=uniPlayerConfig.getServiceRoot();if(!c){return}this._contentPlayingInfoData.contentUri=c.webUri;var l;var e;switch(i){case ContentType.AUDIO:case ContentType.SYNCAUDIO:l=MediaType.AUDIO;e=ServiceTarget.FLASH_FALLBACK_AUDIO;break;case ContentType.SYNCVIDEO:case ContentType.VIDEO1:case ContentType.VIDEO2:case ContentType.VIDEO3:l=MediaType.VIDEO;e=ServiceTarget.FLASH_FALLBACK_VIDEO;break}if(typeof this._contentPlayingInfoData.profileList[j.profileId]!="undefined"&&this._contentPlayingInfoData.profileList[j.profileId].isAudio){l=MediaType.AUDIO;e=ServiceTarget.FLASH_FALLBACK_AUDIO}var a=c.getServiceUriInfo(l,ServiceTarget.DESKTOP);if(a){j.desktopMethod=a.method;j.desktopMediaUri=this.replaceServiceRootUriFormat(a.uri,f)}var g=c.getServiceUriInfo(l,ServiceTarget.MOBILE);if(g){j.mobileMethod=g.method;j.mobileMediaUri=this.replaceServiceRootUriFormat(g.uri,f)}var b=c.getServiceUriInfo(l,e);if(b){j.flashFallbackMethod=b.method;j.flashFallbackMediaUri=this.replaceServiceRootUriFormat(b.uri,f)}var k=d.attr(ContentPlayingInfoXmlTag.AUTH_KEY);var h=d.attr(ContentPlayingInfoXmlTag.AUTH_VALUE);if(k!=undefined&&h!=undefined){j.desktopMediaUri=Util.appendQueryVariable(j.desktopMediaUri,k,h);j.mobileMediaUri=Util.appendQueryVariable(j.mobileMediaUri,k,h)}},replaceServiceRootUriFormat:function(a,b){return a.replace(ServiceRootParser.CONTENT_ID_KEYWORD,this._contentPlayingInfoData.contentId).replace(ServiceRootParser.MEDIA_FILE_KEYWORD,b)},hasUserDefinedMediaUrl:function(){if(Util.getQueryVariable(ContentPlayingInfoQueryName.MAIN_VIDEO_URI)!=undefined||Util.getQueryVariable(ContentPlayingInfoQueryName.SUB_VIDEO_URI)!=undefined||Util.getQueryVariable(ContentPlayingInfoQueryName.EXTRA_VIDEO_URI)!=undefined){return true}return false}});var ContentPlayingInfoXmlTag={LANG:"lang",CONTENT_PLAYING_INFO:"content_playing_info",CONTENT_ID:"content_id",CONTENT_TYPE:"content_type",CONTENT_URI:"content_uri",CONTENT_FILE_LIST:"content_file_list",CONTENT_FILE:"content_file",CONTENT_FILE_TYPE:"type",CONTENT_FILE_NAME:"name",CONTENT_THUMBNAIL_URI:"content_thumbnail_uri",CONTENT_DOWNLOAD_URI:"content_download_uri",CONTENT_BACKGROUND_IMAGE_URI:"content_background_image_uri",CONTENT_DURATION:"content_duration",CONTENT_START_TIME:"start_time",CONTENT_END_TIME:"end_time",SYNCVIDEO_INIT_LAYOUT:"syncvideo_init_layout",USE_SYNCDOC_EVENT:"use_syncdoc_event",USE_SYNCDOC_DOCVIEW:"use_syncdoc_docview",MOBILE:"mobile",DESKTOP:"desktop",PROFILE_LIST:"profile_list",PROFILE:"profile",PROFILE_ID:"id",PROFILE_NAME:"name",IS_AUDIO:"is_audio",DESKTOP_DEFAULT:"desktop_default",MOBILE_DEFAULT:"mobile_default",STORY_LIST:"story_list",STORY:"story",STORY_ID:"id",STORY_TYPE:"story_type",STORY_DURATION:"story_duration",STORY_PLAY_SECTION_LIST:"story_play_section_list",PLAY_SECTION:"play_section",SECTION_SEQ:"seq",SECTION_START_TIME:"start_time",SECTION_END_TIME:"end_time",STORY_FILE_LIST:"story_file_list",STORY_CAPTION:"caption",STORY_EVENTLIST:"eventlist",STORY_NOTE:"note",STORY_SLIDELIST:"slidelist",CONTENT_MAIN_MEDIA_LIST:"main_media_list",CONTENT_SUB_MEDIA_LIST:"sub_media_list",CONTENT_EXTRA_MEDIA_LIST:"extra_media_list",CONTENT_MIXED_MEDIA_LIST:"mixed_media_list",CONTENT_MAIN_MEDIA:"main_media",CONTENT_SUB_MEDIA:"sub_media",CONTENT_EXTRA_MEDIA:"extra_media",CONTENT_MIXED_MEDIA:"mixed_media",CONTENT_PROFILE_ID:"profile_id",CONTENT_DEFAULT_MEDIA_ID:"default_media_id",CONTENT_MEDIA_ID:"media_id",CONTENT_INDEX:"index",MEDIA_DESKTOP:"desktop",MEDIA_MOBILE:"mobile",MEDIA_HTML5:"html5",MEDIA_FLASH_FALLBACK:"flash_fallback",MEDIA_METHOD:"method",MEDIA_URI:"media_uri",INTRO_VIDEO_URI:"intro_video_uri",SHOW_CAPTION:"show_caption",USE_CAPTION:"use_caption",CAPTION_URI:"caption_uri",AUTH_KEY:"auth_key",AUTH_VALUE:"auth_value"};var ContentPlayingInfoQueryParser=Base.extend({updateContentPlayingInfoByQueryString:function(k){var b=Util.getQueryVariable(ContentPlayingInfoQueryName.LANG);if(b!=undefined){var j=b.toLowerCase();k.lang=localizeManager.getLanguageCode(j)}var f=Util.getQueryVariable(ContentPlayingInfoQueryName.CONTENT_START_TIME_LEGACY);if(f!=undefined){k.contentStartTime=f}var c=Util.getQueryVariable(ContentPlayingInfoQueryName.CONTENT_START_TIME);if(c!=undefined){k.contentStartTime=c}var a=Util.getQueryVariable(ContentPlayingInfoQueryName.CONTENT_END_TIME_LEGACY);if(a!=undefined){k.contentEndTime=a}var g=Util.getQueryVariable(ContentPlayingInfoQueryName.CONTENT_END_TIME);if(g!=undefined){k.contentEndTime=g}var e=Util.getQueryVariable(ContentPlayingInfoQueryName.SYNCVIDEO_INIT_LAYOUT);if(e!=undefined){k.syncVideoInitLayoutMobile=e;k.syncVideoInitLayoutDesktop=e}var i=Util.getQueryVariable(ContentPlayingInfoQueryName.USE_SYNCDOC_EVENT);if(i!=undefined){k.useSyncDocEvent=Util.getBooleanValue(i)}var h=Util.getQueryVariable(ContentPlayingInfoQueryName.USE_SYNCDOC_DOCVIEW);if(h!=undefined){k.useSyncDocDocView=Util.getBooleanValue(h)}var d=Util.getQueryVariable(ContentPlayingInfoQueryName.USE_CAPTION);if(d!=undefined){k.useCaption=Util.getBooleanValue(d)}return k}});var ContentPlayingInfoQueryName={LANG:"lg",CONTENT_START_TIME_LEGACY:"startat",CONTENT_START_TIME:"st",CONTENT_END_TIME_LEGACY:"endat",CONTENT_END_TIME:"et",SYNCVIDEO_INIT_LAYOUT:"svil",USE_SYNCDOC_EVENT:"usde",USE_SYNCDOC_DOCVIEW:"usdv",INTRO_VIDEO_URI:"intro",MAIN_VIDEO_URI:"main_video",SUB_VIDEO_URI:"sub_video",EXTRA_VIDEO_URI:"extra_video",USE_CAPTION:"ucap"};var ContentPlayingInfoDefault={CONTENT_DURATION:0,CONTENT_START_TIME:-1,CONTENT_END_TIME:-1,PROFILE_ID:"dummy_profile_id",PROFILE_NAME:"default_profile_name",PROFILE_IS_AUDIO:false,STORY_ID:"default_story_id",INTRO_STORY_ID:"intro-story",LIST_ORDER:0,USE_SYNCDOC_EVENT:true,USE_SYNCDOC_DOCVIEW:false};var ContentMetadata=Base.extend({title:null,summary:null,tags:null,authorName:null,authorEmail:null,authorProfileImage:null,date:null});var ContentMetadataParser=Base.extend({_contentMetadata:null,getContentMetadata:function(){return this._contentMetadata},parseContentMetadata:function(a,c){if(!a){c();return}var b=this;$.ajax({url:a,dataType:"xml",async:true,success:function(d){b._contentMetadata=b.parseContentMetadataData($(d));c()},error:function(d){c()}})},parseContentMetadataData:function(d){var c=new ContentMetadata();var j=d.find(ContentMetadataXmlTag.TITLE);if(j.length>0){c.title=j.text()}var a=d.find(ContentMetadataXmlTag.SUMMARY);if(a.length>0){c.summary=a.text()}var g=d.find(ContentMetadataXmlTag.TAGS);if(g.length>0){c.tags=g.text()}var f=d.find(ContentMetadataXmlTag.AUTHOR);var i=f.find(ContentMetadataXmlTag.AUTHOR_NAME);if(i.length>0){c.authorName=i.text()}var b=f.find(ContentMetadataXmlTag.AUTHOR_EMAIL);if(b.length>0){c.authorEmail=b.text()}var e=f.find(ContentMetadataXmlTag.AUTHOR_PROFILE_IMAGE);if(e.length>0){c.authorProfileImage=e.text()}var h=d.find(ContentMetadataXmlTag.DATE);if(h.length>0){c.date=h.text()}return c}});var ContentMetadataXmlTag={CONTENT_METADATA:"content_metadata",TITLE:"title",SUMMARY:"summary",TAGS:"tags",AUTHOR:"author",AUTHOR_NAME:"name",AUTHOR_EMAIL:"email",AUTHOR_PROFILE_IMAGE:"profile_image",DATE:"date"};var LayoutData=Base.extend({_name:null,_mainMediaWidth:0,_subMediaWidth:0,constructor:function(b,c,a){this._name=b;this._mainMediaWidth=c;this._subMediaWidth=a},getMainMediaWidth:function(){return this._mainMediaWidth},getSubMediaWidth:function(){return this._subMediaWidth}});var LayoutSettingData=Base.extend({_isSwapped:false,_mainMediaWidth:0,_subMediaWidth:0,constructor:function(a,c,b){this._isSwapped=a;this._mainMediaWidth=c;this._subMediaWidth=b},getMainMediaWidth:function(){return this._mainMediaWidth},getSubMediaWidth:function(){return this._subMediaWidth}});var LayoutListParser=Base.extend({_layoutList:[],getLayoutList:function(){return this._layoutList},parseLayoutList:function(b,c){if(!b){return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parseLayout(d);c()}})},parseLayout:function(d){var c=$(d).find(LayoutListXmlTag.LAYOUT_DATA);for(var a=0;a<c.length;a++){var b=$(c[a]).attr(LayoutListXmlTag.TYPE);this._layoutList[b]=this.parseLayoutListData(c[a])}},parseLayoutListData:function(d){var c=[];var b=$(d).find(LayoutListXmlTag.LAYOUT);for(var a=0;a<b.length;a++){c.push(this.parseLayoutData(b[a]))}return c},parseLayoutData:function(d){var b=$(d).attr(LayoutListXmlTag.NAME);var c=this.parseMediaWidthElem(d,LayoutListXmlTag.MAIN_MEDIA_WIDTH);var a=this.parseMediaWidthElem(d,LayoutListXmlTag.SUB_MEDIA_WIDTH);return new LayoutData(b,c,a)},parseSubMediaLayout:function(a){},parseMediaWidthElem:function(c,b){var d=$(c).find(b)[0];var a=$(d).text();a=a.substring(0,a.length-1);return parseFloat(a)}});var LayoutListXmlTag={LAYOUT_LIST:"layout_list",LAYOUT_DATA:"layout_data",TYPE:"type",LAYOUT:"layout",NAME:"name",MAIN_MEDIA_WIDTH:"main_media_width",SUB_MEDIA_WIDTH:"sub_media_width"};var SyncVideoLayoutOption=Base.extend({_layoutIndex:0,_isSwapped:false});var SyncVideoLayoutNameTable={ZOOM_SLIDE:"zoomslide",ZOOM_SLIDE_SWAP:"zoomslideswap",ZOOM_VIDEO:"zoomvideo",ZOOM_VIDEO_SWAP:"zoomvideoswap",SAME:"same",SAME_SWAP:"sameswap",MAX_SLIDE:"maxslide",MAX_VIDEO:"maxvideo"};var SyncVideoLayoutOptionList={};SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE]._layoutIndex=1;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE]._isSwapped=false;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO]._layoutIndex=0;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO]._isSwapped=false;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME]._layoutIndex=2;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME]._isSwapped=false;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_SLIDE]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_SLIDE]._layoutIndex=3;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_SLIDE]._isSwapped=false;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_VIDEO]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_VIDEO]._layoutIndex=3;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.MAX_VIDEO]._isSwapped=true;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE_SWAP]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE_SWAP]._layoutIndex=0;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_SLIDE_SWAP]._isSwapped=true;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO_SWAP]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO_SWAP]._layoutIndex=1;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.ZOOM_VIDEO_SWAP]._isSwapped=true;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME_SWAP]=new SyncVideoLayoutOption();SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME_SWAP]._layoutIndex=2;SyncVideoLayoutOptionList[SyncVideoLayoutNameTable.SAME_SWAP]._isSwapped=true;var ChapterData=Base.extend({_id:null,_type:null,_storyIdref:null,_slideIdref:null,_visible:null,_time:null,_thumbnailUri:null,_description:null,constructor:function(h,d,c,b,g,f,a,e){this._id=h;this._type=d;this._storyIdref=c;this._slideIdref=b;this._visible=g;this._time=f;this._thumbnailUri=a;this._description=e}});var ChapterParser=Base.extend({_chapterList:null,getChapterList:function(){return this._chapterList},parseChapter:function(b,c){if(b==null||b==""){c();return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parseChapterList(d);c()},error:function(){c()}})},parseChapterList:function(g){this._chapterList=new Array();var h=$(g).find(ChapterXmlTag.CHAPTER);for(var i=0;i<h.length;i++){$chapterDataElem=$(h[i]);var b=$chapterDataElem.attr(ChapterXmlTag.CHAPTER_ID);var e=$chapterDataElem.attr(ChapterXmlTag.VISIBLE);if(typeof e=="undefined"){e=true}else{e=e.toLowerCase()==="true"?true:false}var j=$chapterDataElem.attr(ChapterXmlTag.TYPE);if(typeof j=="undefined"){j=ChapterType.SLIDE}var d=$chapterDataElem.attr(ChapterXmlTag.STORY_IDREF);if(typeof d=="undefined"){d=1}var c=$chapterDataElem.attr(ChapterXmlTag.SLIDE_IDREF);var m=$chapterDataElem.find(ChapterXmlTag.TIME);var a=parseFloat(m.attr(ChapterXmlTag.TIME_FROM));var l=parseFloat(m.attr(ChapterXmlTag.TIME_TO));var f=$chapterDataElem.find(ChapterXmlTag.THUMBNAIL_URI).text();var k=$chapterDataElem.find(ChapterXmlTag.DESCRIPTION).text();this._chapterList[b]=new ChapterData(b,j,d,c,e,new TimeIntervalData(a,l),f,k)}this._chapterList=this.adjustChapterUsingPlaySection(this._chapterList)},adjustChapterUsingPlaySection:function(h){if(!h){return}for(var e in h){var b=h[e];var c=this.getStoryOfTime(b._time._from);if(!c){continue}var d=Number((b._time._from-c.originalStartTimeOnContent).toFixed(5));var i=Number((b._time._to-c.originalStartTimeOnContent).toFixed(5));var a=c.convert2storyTime(d);var g=c.convert2storyTime(i);var f=this.getChapterStateFromStoryTime(a,g);switch(f){case ChapterState.INSIDE_PLAY_SECTION:b._time._from=c.startTimeOnContent+a;b._time._to=c.startTimeOnContent+g;break;case ChapterState.INTERSECT_PLAY_SECTION_START:b._time._from=c.startTimeOnContent+a;b._time._to=c.startTimeOnContent+this.getPlaySectionContainTime(c,d).storyEndTime;break;case ChapterState.INTERSECT_PLAY_SECTION_END:b._time._from=c.startTimeOnContent+this.getPlaySectionContainTime(c,i).storyStartTime;b._time._to=c.startTimeOnContent+g;break;case ChapterState.OUTSIDE_PLAY_SECTION:delete h[e];break}}return h},getStoryOfTime:function(c){var a=uniPlayerConfig.getContentPlayingInfoData();if(a==null){return null}if(c<0||c>a.originalContentDuration){return null}for(var b=0;b<a.storyList.length;b++){if(a.storyList[b].isIntro){continue}if(c<a.storyList[b].originalEndTimeOnContent&&c>=a.storyList[b].originalStartTimeOnContent){return a.storyList[b]}}return a.storyList[a.storyList.length-1]},getChapterStateFromStoryTime:function(b,a){if(b!=-1&&a!=-1){return ChapterState.INSIDE_PLAY_SECTION}else{if(b!=-1&&a==-1){return ChapterState.INTERSECT_PLAY_SECTION_START}else{if(b==-1&&a!=-1){return ChapterState.INTERSECT_PLAY_SECTION_END}else{return ChapterState.OUTSIDE_PLAY_SECTION}}}},getPlaySectionContainTime:function(d,e){var c=d.playSectionList;if(!c){return}for(var b in c){var a=c[b];if(e>=a.mediaStartTime&&e<a.mediaEndTime){return a}}}},{XML_FILENAME:"chapter.xml"});var ChapterState={INSIDE_PLAY_SECTION:"inside_play_section",OUTSIDE_PLAY_SECTION:"outside_play_section",INTERSECT_PLAY_SECTION_START:"intersect_play_section_start",INTERSECT_PLAY_SECTION_END:"intersect_play_section_end"};var ChapterXmlTag={CHAPTER_LIST:"chapter_list",CHAPTER:"chapter",CHAPTER_ID:"id",VISIBLE:"visible",TYPE:"type",STORY_IDREF:"story_idref",SLIDE_IDREF:"slide_idref",TIME:"time",TIME_FROM:"from",TIME_TO:"to",THUMBNAIL_URI:"thumbnail_uri",DESCRIPTION:"description"};var TimeIntervalData=Base.extend({constructor:function(b,a){this._from=b;this._to=a}});var ClosedCaptionData=Base.extend({id:null,lang:null,uri:null,caption:null});var ClosedCaptionParser=Base.extend({_captionList:[],_parseCompletedCallback:null,_numOfcaptionElem:0,parseCaptionList:function(b,c){this._parseCompletedCallback=c;this._captionList=[];if(b==null){c(0);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parse(d)},error:function(){if(c){c(0)}}})},parse:function(c){var a=$(c).find(ClosedCaptionXmlTag.CAPTION);this._numOfCaptionElem=a.length;if(this._numOfCaptionElem==0){this._parseCompletedCallback(0)}for(var b=0;b<this._numOfCaptionElem;b++){this.parseCaptionItem(a[b])}},parseCaptionItem:function(e){var g=new ClosedCaptionData();g.id=$(e).attr(ClosedCaptionXmlTag.ID);if(!g.id){this.onCaptionItemParsed(null);return}var c=$(e).find(ClosedCaptionXmlTag.LABEL);if(c.length==0){this.onCaptionItemParsed(null);return}g.label=c.text();var h=$(e).find(ClosedCaptionXmlTag.LANG);if(h.length==0){this.onCaptionItemParsed(null);return}g.lang=h.text();var d=$(e).find(ClosedCaptionXmlTag.URI);if(d.length==0){this.onCaptionItemParsed(null);return}var f;if(uniPlayerConfig.getContentPlayingInfoData().captionUri!=null){f=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().captionUri,d.text())}else{f=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,d.text())}g.uri=f;var a=new WebVTTParser();var b=this;$.get(f,function(i){try{g.caption=a.parse(i,null)}catch(j){}b.onCaptionItemParsed(g)},"text").fail(function(i){b.onCaptionItemParsed(null)})},onCaptionItemParsed:function(a){if(a!=null){this._captionList.push(a)}if((--this._numOfCaptionElem)==0){this._captionList.sort(function(d,c){if(d.id<c.id){return -1}if(d.id>c.id){return 1}return 0});this._parseCompletedCallback(this._captionList.length)}},getCaptionList:function(){return this._captionList}},{XML_FILENAME:"caption_list"});var ClosedCaptionXmlTag={CAPTION:"caption",ID:"id",LABEL:"label",LANG:"lang",URI:"uri"};var SlideListInfoData=Base.extend({_slideFileList:[],_slideList:[],_slideIdWithSlideDataMap:{},setSlideList:function(c){this._slideList=c;if(!this._slideList){return}this._slideIdWithSlideDataMap={};for(var a=0,b=this._slideList.length;a<b;a++){this._slideIdWithSlideDataMap[this._slideList[a]._id]=this._slideList[a]}},setSlideFileList:function(a){this._slideFileList=a},getSlideById:function(b){if(this._slideIdWithSlideDataMap){return this._slideIdWithSlideDataMap[b]}if(!this.slideList){return}for(var a=0;a<this._slideList.length;a++){if(this._slideList[a]._id==b){return this._slideList[a]}}}});var SlideFile=Base.extend({_id:null,_type:null,_filePath:null});var SlideData=Base.extend({_id:null,_seq:null,_type:null,_page:null,_fildIdRef:null,_formatList:[],_slideMetadata:null,_slideImageList:[],constructor:function(h,c,d,f,e,g,b,a){this._id=h;this._seq=c;this._type=d;this._page=f;this._fileIdRef=e;this._formatList=g;this._slideMetadata=b;this._slideImageList=a}});var FormatData=Base.extend({_name:null,_width:null,_height:null,_imageFormat:null,constructor:function(b,c,a,d){this._name=b;this._width=c;this._height=a;this._imageFormat=d}});var SlideMetadata=Base.extend({_slideTitle:null,_slideNote:null,_slideText:null,constructor:function(a,b,c){this._slideTitle=a;this._slideNote=b;this._slideText=c}});var SlideImageData=Base.extend({_id:null,_index:null,_type:null,_slideImageSrcList:[],constructor:function(d,a,b,c){this._id=d;this._index=a;this._type=b;this._slideImageSrcList=c}});var SlideImageSrcData=Base.extend({_formatName:null,_imageUri:null,constructor:function(a,b){this._formatName=a;this._imageUri=b}});var SlideType={PPT:"ppt",PDF:"pdf"};var SlideFileType={PDF:"pdf"};var SlideListInfoParser=Base.extend({_slideListInfo:null,getSlideListInfo:function(){return this._slideListInfo},parseSlideListInfo:function(b,c){if(b==null||b==""){c(false);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parseSlideListInfoData(d);c(true)},error:function(f,d,e){c(false)}})},parseSlideListInfoData:function(a){this._slideListInfo=new SlideListInfoData();this.parseSlideFileListData(a);this.parseSlideListData(a)},parseSlideFileListData:function(f){var b=new Array();var e=$(f).find(SlideListInfoXmlTag.SLIDE_FILE_LIST);if(e.length<1){return}var a=$(f).find(SlideListInfoXmlTag.SLIDE_FILE);for(var d=0;d<a.length;d++){$slideFileElem=$(a[d]);var c=new SlideFile();c._id=$slideFileElem.attr(SlideListInfoXmlTag.ID);c._type=$slideFileElem.attr(SlideListInfoXmlTag.TYPE).toLowerCase();c._filePath=$.trim($slideFileElem.text());b.push(c)}this._slideListInfo.setSlideFileList(b)},parseSlideListData:function(e){var b=new Array();var l=$(e).find(SlideListInfoXmlTag.SLIDE);for(var f=0;f<l.length;f++){$slideElem=$(l[f]);var a=$slideElem.attr(SlideListInfoXmlTag.ID);var m=$slideElem.attr(SlideListInfoXmlTag.SEQUENCE);var k=$slideElem.attr(SlideListInfoXmlTag.TYPE).toLowerCase();var h=Number($slideElem.attr(SlideListInfoXmlTag.PAGE));var j=$slideElem.attr(SlideListInfoXmlTag.FILE_IDREF);var c=this.parseFormatList($slideElem.find(SlideListInfoXmlTag.FORMAT_LIST));var d=this.parseSlideMetadata($slideElem.find(SlideListInfoXmlTag.SLIDE_METADATA));var g=this.parseSlideImageList(a,$slideElem.find(SlideListInfoXmlTag.SLIDE_IMAGE_LIST));b[f]=new SlideData(a,m,k,h,j,c,d,g)}this._slideListInfo.setSlideList(b)},parseFormatList:function(f){var h=new Array();var b=$(f).find(SlideListInfoXmlTag.FORMAT);for(var d=0;d<b.length;d++){$formatElem=$(b[d]);var c=$formatElem.attr(SlideListInfoXmlTag.NAME);var e=$formatElem.attr(SlideListInfoXmlTag.WIDTH);var a=$formatElem.attr(SlideListInfoXmlTag.HEIGHT);var g=$formatElem.attr(SlideListInfoXmlTag.IMAGE_FORMAT);if(typeof g=="undefined"){g=""}h[c]=new FormatData(c,e,a,g)}return h},parseSlideMetadata:function(b){if(b==null){return}var a=b.find(SlideListInfoXmlTag.SLIDE_TITLE).text();var c=b.find(SlideListInfoXmlTag.SLIDE_NOTE).text();var d=b.find(SlideListInfoXmlTag.SLIDE_TEXT).text();return new SlideMetadata(a,c,d)},parseSlideImageList:function(h,a){var b=new Array();var f=a.find(SlideListInfoXmlTag.SLIDE_IMAGE);for(var d=0;d<f.length;d++){$slideImageElem=$(f[d]);var c=$slideImageElem.attr(SlideListInfoXmlTag.INDEX);var e=$slideImageElem.attr(SlideListInfoXmlTag.TYPE);var g=this.parseSlideImageSrcList($slideImageElem);b[d]=new SlideImageData(h,c,e,g)}return b},parseSlideImageSrcList:function(a){var f=new Array();var e=a.find(SlideListInfoXmlTag.SLIDE_IMAGE_SRC);for(var b=0;b<e.length;b++){$slideImageSrcElem=$(e[b]);var c=$slideImageSrcElem.attr(SlideListInfoXmlTag.FORMAT_NAME);var d=$slideImageSrcElem.attr(SlideListInfoXmlTag.IMAGE_URI);f[c]=new SlideImageSrcData(c,d)}return f}},{XML_FILENAME:"slide_list"});var SlideListInfoXmlTag={SLIDE_FILE_LIST:"slide_file_list",SLIDE_FILE:"slide_file",FORMAT:"format",FORMAT_LIST:"format_list",NAME:"name",WIDTH:"width",HEIGHT:"height",IMAGE_FORMAT:"image_format",SLIDE:"slide",ID:"id",SEQUENCE:"seq",TYPE:"type",PAGE:"page",FILE_IDREF:"file_idref",INDEX:"index",SLIDE_METADATA:"slide_metadata",SLIDE_TITLE:"slide_title",SLIDE_NOTE:"slide_note",SLIDE_TEXT:"slide_text",SLIDE_IMAGE_LIST:"slide_image_list",SLIDE_IMAGE:"slide_image",SLIDE_IMAGE_SRC:"slide_image_src",FORMAT_NAME:"format_name",IMAGE_URI:"image_uri"};var SlideDocDataConverter=Base.extend({_testResultCallback:null,_media:null,convertSlideDataToDocData:function(c,b){var a=new DocData();a._pdfUrl=this.getPDFUrl(c);a._imageList=this.generateDocPlayerImageList(c,b);a._title=this.getTitle();a._author=this.getAuthor();return a},getTitle:function(){return uniPlayerConfig.getContentMetadata().title},getAuthor:function(){return uniPlayerConfig.getContentMetadata().authorName},getPDFUrl:function(c){if(!c||!c._slideFileList){return null}var d;var a=c._slideFileList;if(a&&a.length>0){for(var b=0;b<a.length;b++){if(a[b]._type==SlideFileType.PDF){d=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,a[b]._filePath);break}}}return d},generateDocPlayerImageList:function(p,f){if(!p||!p._slideList||p._slideList.length<1){return null}var c=new ImageList();var b=p._slideList[0]._formatList;var l=[];for(var o in b){var m=new ImageFormat();m._formatName=b[o]._name;m._width=Number(b[o]._width);m._height=Number(b[o]._height);l.push(m)}c._imageFormatList=l;var n=[];var a=p._slideList;for(var e=0;e<a.length;e++){var g=a[e]._slideImageList.length;var r=(f)?g-1:0;for(var d=r;d<g;d++){var q=[];var k=a[e]._slideImageList[d]._slideImageSrcList;for(var o in k){var h=new ImageSrc();h._formatName=k[o]._formatName;h._imageSrc=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,k[o]._imageUri);q.push(h)}n.push(q)}}c._imageSrcsList=n;return c}});var EventData=Base.extend({_time:null,_type:null,_ref:null,constructor:function(c,a,b){this._time=c;this._type=a;this._ref=b}});var SlideEventData=EventData.extend({_slideInnerEventList:[],constructor:function(d,a,c,b){this.base(d,a,c);this._slideInnerEventList=b}});var SlideInnerEventData=EventData.extend({});var EventSyncSlideData=Base.extend({_slideId:null,_slideTime:null,_ref:null,constructor:function(a,c,b){this._slideId=a;this._slideTime=c;this._ref=b}});var EventSyncNoteData=Base.extend({_time:null,_type:null,_ref:null,constructor:function(c,a,b){this._time=c;this._type=a;this._ref=b}});var EventListParser=Base.extend({_eventList:null,getEventList:function(){return this._eventList},parseEventList:function(b,c){if(b==null||b==""){c(false);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parseEventListData(d);c(true)},error:function(){c(false)}})},parseEventListData:function(f){this._eventList=new Array();var e=$(f).find(EventListXmlTag.EVENT);for(var a=0;a<e.length;a++){$eventElem=$(e[a]);var g=$eventElem.attr(EventListXmlTag.TIME);var b=$eventElem.attr(EventListXmlTag.TYPE);var d=$eventElem.attr(EventListXmlTag.REFERENCE);switch(b){case EventType.SLIDE:var c=this.parseSlideInnerEventList($eventElem.find(EventListXmlTag.SLIDE_INNER_EVENT_LIST));this._eventList[a]=new SlideEventData(g,b,d,c);break}}},parseSlideInnerEventList:function(f){var e=new Array();var a=f.find(EventListXmlTag.SLIDE_INNER_EVENT);for(var b=0;b<a.length;b++){$slideInnerEventElem=$(a[b]);var g=$slideInnerEventElem.attr(EventListXmlTag.TIME);var c=$slideInnerEventElem.attr(EventListXmlTag.TYPE);var d=$slideInnerEventElem.attr(EventListXmlTag.REFERENCE);e[b]=new SlideInnerEventData(g,c,d)}return e}},{XML_FILENAME:"event_list"});var EventListXmlTag={EVENT:"event",TIME:"time",TYPE:"type",REFERENCE:"ref",SLIDE_INNER_EVENT_LIST:"slide_inner_event_list",SLIDE_INNER_EVENT:"slide_inner_event"};var NoteData=Base.extend({_id:null,_type:null,_visible:true});var NoteDataMouseCurve=NoteData.extend({_thickness:null,_color:null,_points:null,_times:null});var NoteDataLine=NoteData.extend({_thickness:null,_color:null,_x1:null,_y1:null,_x2:null,_y2:null});var NoteDataRectangle=NoteData.extend({_thickness:null,_color:null,_isFill:null,_x1:null,_y1:null,_x2:null,_y2:null});var NoteDataHide=NoteData.extend({_hideId:null});var NoteParser=Base.extend({_noteData:null,getNoteData:function(){return this._noteData},parseNote:function(b,c){if(b==null||b==""){c(false);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parseNoteData(d);c(true)},error:function(){c(false)}})},parseNoteData:function(f){this._noteData=new Array();var e=$(f).find(NoteXmlTag.OBJECT);var b;for(b=0;b<e.length;b++){var a=e[b];var d=null;var g=Number($(a).attr(NoteXmlTag.OBJECT_ID));var c=$(a).attr(NoteXmlTag.OBJECT_TYPE);switch(c){case NoteType.MOUSE_CURVE:case NoteType.SPEED_CURVE:d=this.parseMouseCurve(NoteType.MOUSE_CURVE,a);break;case NoteType.LINE:d=this.parseLine(NoteType.LINE,a);break;case NoteType.RECTANGLE:d=this.parseRectangle(NoteType.RECTANGLE,a);break;case NoteType.HIDE:d=this.parseHide(NoteType.HIDE,a);break}if(d==null){continue}d._id=g;this._noteData[d._id]=d}},parseMouseCurve:function(c,a){var b=new NoteDataMouseCurve();b._type=c;b._thickness=this.parseThickness(a);b._color=this.parseColor(c,a);if(b._color==""){b._visible=false}b._points=this.parsePoint(a);b._times=this.parseTime(a);return b},parseLine:function(d,a){var c=new NoteDataLine();c._type=d;c._thickness=this.parseThickness(a);c._color=this.parseColor(d,a);var b=this.parsePoint(a);if(b.length!=2){return null}c._x1=b[0].x;c._y1=b[0].y;c._x2=b[1].x;c._y2=b[1].y;return c},parseRectangle:function(d,a){var c=new NoteDataRectangle();c._type=d;c._thickness=this.parseThickness(a);c._color=this.parseColor(d,a);c._isFill=this.parseIsFill(a);var b=this.parsePoint(a);if(b.length!=2){return null}c._x1=b[0].x<b[1].x?b[0].x:b[1].x;c._y1=b[0].y<b[1].y?b[0].y:b[1].y;c._x2=b[0].x>b[1].x?b[0].x:b[1].x;c._y2=b[0].y>b[1].y?b[0].y:b[1].y;return c},parseHide:function(c,a){var b=new NoteDataHide();b._type=c;var d=$(a).find(NoteXmlTag.HIDE_PROPERTY);b._hideId=Number(d.find(NoteXmlTag.HIDE_ID).text());return b},parsePoint:function(f){var b=[];var d=$(f).find(NoteXmlTag.POINT_DATA).text().split(" ");var e={x:Number(d[0]),y:Number(d[1])};b.push(e);var c;for(c=1;c<d.length/2;c++){var a=(d[c*2]==null)?"0":d[c*2];var g=(d[c*2+1]==null)?"0":d[c*2+1];e={x:e.x+Number(a),y:e.y+Number(g)};b.push(e)}return b},parseTime:function(d){var a=[];var e=$(d).find(NoteXmlTag.TIME_DATA).text().split(" ");var c=0;a.push(c);var b;for(b=1;b<e.length-1;b++){c=c+Number(e[b]);a.push(c)}return a},parseColor:function(c,e){var h;if(e.firstElementChild){h=e.firstElementChild}else{h=e.childNodes[0]}var b=$(h).attr(NoteXmlTag.COLOR);var g=b.substr(1,2);var f=b.substr(3,2);var d=b.substr(5,2);var a=b.substr(7,2);switch(c){case NoteType.MOUSE_CURVE:if(g=="00"){return""}g="FF";break}return"rgba("+parseInt(f,16)+","+parseInt(d,16)+","+parseInt(a,16)+","+parseInt(g,16)/255+")"},parseThickness:function(a){var b;if(a.firstElementChild){b=a.firstElementChild}else{b=a.childNodes[0]}return $(b).attr(NoteXmlTag.THICKNESS)},parseIsFill:function(b){var a;if(b.firstElementChild){a=b.firstElementChild}else{a=b.childNodes[0]}var c=$(a).attr(NoteXmlTag.IS_FILL);if(typeof c=="undefined"||c==null){return false}return c.toLowerCase()==="true"}},{XML_FILENAME:"note"});var NoteXmlTag={OBJECT:"object",OBJECT_ID:"id",OBJECT_TYPE:"type",POINT_DATA:"point_data",TIME_DATA:"time_data",COLOR:"color",THICKNESS:"thickness",IS_FILL:"is_fill",HIDE_PROPERTY:"hide_property",HIDE_ID:"hide_id"};var ServiceRootXMLTag={SERVICE_ROOT:"service_root",WEB:"web",MEDIA:"media",TYPE:"type",MEDIA_URI:"media_uri",METHOD:"method",TARGET:"target"};var ServiceRootData=Base.extend({webUri:null,defaultServiceUriSet:null,videoServiceUriSet:null,audioServiceUriSet:null,getServiceUriInfo:function(c,b){var d;if(c==MediaType.AUDIO){d=this.audioServiceUriSet}else{if(c==MediaType.VIDEO){d=this.videoServiceUriSet}}var a=this.findServiceUriInfo(d,b);if(a==null){a=this.findServiceUriInfo(this.defaultServiceUriSet,b)}return a},findServiceUriInfo:function(a,b){if(!a){return null}var e=TargetPrioirty[b];for(var c=0;c<e.length;c++){var d=a[e[c]];if(d){return d}}return null}});var ServiceUriInfo=Base.extend({uri:null,method:null,target:null});var ServiceTarget={ALL:"all",DESKTOP:"desktop",DESKTOP_AUDIO:"desktop-audio",DESKTOP_VIDEO:"desktop-video",FLASH_FALLBACK:"flash-fallback",FLASH_FALLBACK_VIDEO:"flash-fallback-video",FLASH_FALLBACK_AUDIO:"flash-fallback-audio",MOBILE:"mobile",MOBILE_VIDEO:"mobile_video",MOBILE_AUDIO:"mobile_audio"};var TargetPrioirty={all:["all"],desktop:["desktop","all"],"desktop-video":["desktop-video","desktop","all"],"desktop-audio":["desktop-audio","desktop","all"],"flash-fallback":["flash-fallback","desktop","all"],"flash-fallback-video":["flash-fallback-video","flash-fallback","desktop-video","desktop","all"],"flash-fallback-audio":["flash-fallback-audio","flash-fallback","desktop-audio","desktop","all"],mobile:["mobile","all"],"mobile-video":["mobile-video","mobile","all"],"mobile-audio":["mobile-audio","mobile","all"]};var ServiceRootParser=Base.extend({_serviceRootData:null,getServiceRootData:function(){return this._serviceRootData},parseServiceRootData:function(b,c){if(!b){c(false);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(e){var d=a.parseServiceRoot($(e));c(d)},error:function(d){c(false)}})},parseServiceRoot:function(e){var d=new ServiceRootData();var c=e.find(ServiceRootXMLTag.WEB);if(c.length!=1){return false}d.webUri=c.text();var b=e.find(ServiceRootXMLTag.MEDIA);if(b.length<1){this._serviceRootData=d;return true}for(var f=0;f<b.length;f++){var h=$(b[f]);var g=h.attr(ServiceRootXMLTag.TYPE);var a=this.parseServiceUriSet(h);switch(g){case MediaType.DEFAULT:d.defaultServiceUriSet=a;break;case MediaType.VIDEO:d.videoServiceUriSet=a;break;case MediaType.AUDIO:d.audioServiceUriSet=a;break}}this._serviceRootData=d;return true},parseServiceUriSet:function(b){var d=b.find(ServiceRootXMLTag.MEDIA_URI);if(d.length<1){return null}var a={};for(var c=0;c<d.length;c++){$mediaUriElem=$(d[c]);var e=new ServiceUriInfo();e.target=$mediaUriElem.attr(ServiceRootXMLTag.TARGET).toLowerCase();e.method=$mediaUriElem.attr(ServiceRootXMLTag.METHOD).toLowerCase();e.uri=$mediaUriElem.text();a[e.target]=e}return a}},{CONTENT_ID_KEYWORD:"[CONTENT_ID]",MEDIA_FILE_KEYWORD:"[MEDIA_FILE]"});var MediaScriptXmlTag={MEDIA_SCRIPT:"media_script",ID:"id",LABEL:"label",LANG:"lang",URI:"uri"};var MediaScriptData=Base.extend({id:null,label:null,lang:null,uri:null,script:null});var MediaScriptParser=Base.extend({_mediaScriptList:[],_parseCompletedCallback:null,_numOfmediaScriptElem:0,parseMediaScriptList:function(b,c){this._parseCompletedCallback=c;this._mediaScriptList=[];if(b==null){c(0);return}var a=this;$.ajax({url:b,dataType:"xml",async:true,success:function(d){a.parse(d)},error:function(){if(c){c(0)}}})},parse:function(b){var c=$(b).find(MediaScriptXmlTag.MEDIA_SCRIPT);this._numOfmediaScriptElem=c.length;if(this._numOfmediaScriptElem==0){this._parseCompletedCallback(0)}for(var a=0;a<this._numOfmediaScriptElem;a++){this.parseMediaScriptItem(c[a])}},parseMediaScriptItem:function(f){var e=new MediaScriptData();e.id=$(f).attr(MediaScriptXmlTag.ID);if(!e.id){this.onMediaScriptItemParsed(null);return}var b=$(f).find(MediaScriptXmlTag.LABEL);if(b.length==0){this.onMediaScriptItemParsed(null);return}e.label=b.text();var g=$(f).find(MediaScriptXmlTag.LANG);if(g.length==0){this.onMediaScriptItemParsed(null);return}e.lang=g.text();var c=$(f).find(MediaScriptXmlTag.URI);if(c.length==0){this.onMediaScriptItemParsed(null);return}var d=Util.urlMerge(uniPlayerConfig.getContentPlayingInfoData().contentUri,c.text());e.uri=d;var a=this;$.get(d,function(h){try{e.script=h}catch(i){}a.onMediaScriptItemParsed(e)},"text").fail(function(h){a.onMediaScriptItemParsed(null)})},onMediaScriptItemParsed:function(a){if(a!=null){this._mediaScriptList.push(a)}if((--this._numOfmediaScriptElem)==0){this._mediaScriptList.sort(function(d,c){return d.id>c.id});this._parseCompletedCallback(this._mediaScriptList.length)}},getMediaScriptList:function(){return this._mediaScriptList}},{XML_FILENAME:"media_script_list.xml"});var ApiManager=Base.extend({_playerApi:null,_playerEvent:null,_contentApi:null,constructor:function(){this._playerApi=new PlayerApi();this._playerEvent=new PlayerEvent();this._contentApi=new ContentApi()},getPlayerApi:function(){return this._playerApi},getPlayerEvent:function(){return this._playerEvent},getContentApi:function(){return this._contentApi}});var PlayerApi=Base.extend({play:function(){uniPlayer.play()},pause:function(){uniPlayer.pause()},seek:function(a){uniPlayer.seek(a)},seekWithUpdateCumulativeTime:function(a){uniPlayer.seekWithUpdateCumulativeTime(a)},getCancelDuplicateContentsConfirmMessage:function(){var a=localizeManager.getStringResource();return a.CancelDuplicateContentsConfirm},cancelDuplicateContents:function(){uniPlayer.cancelDuplicateContents()},warnDuplicateContents:function(){uniPlayer.warnDuplicateContents()},invalidPbrate:function(){uniPlayer.invalidPbrate()},hideCaptionScript:function(){uniPlayer.hideCaptionScript()}});function Play(){var a=new PlayerApi();return a.play()}function Pause(){var a=new PlayerApi();return a.pause()}function Seek(b){var a=new PlayerApi();return a.seek(b)}function SeekWithUpdateCumulativeTime(b){var a=new PlayerApi();return a.seekWithUpdateCumulativeTime(b)}function GetCancelDuplicateContentsConfirmMessage(){var a=new PlayerApi();return a.getCancelDuplicateContentsConfirmMessage()}function CancelDuplicateContents(){var a=new PlayerApi();a.cancelDuplicateContents()}function WarnDuplicateContents(){var a=new PlayerApi();a.warnDuplicateContents()}function InvalidPbrate(){var a=new PlayerApi();a.invalidPbrate()}function HideCaptionScript(){var a=new PlayerApi();a.hideCaptionScript()}var PlayerEvent=Base.extend({_eventTarget:null,_firstPlayerLoadedEvent:true,_firstDoStartEvent:true,constructor:function(){this._eventTarget=new EventTargetArgs()},getEventTarget:function(){return this._eventTarget},playerLoaded:function(){if(false==this._firstPlayerLoadedEvent){return}this._eventTarget.fire(PlayerEvent.PLAYER_LOADED);this._firstPlayerLoadedEvent=false},doStart:function(){if(false==this._firstDoStartEvent){return}this._eventTarget.fire(PlayerEvent.DO_START);this._firstDoStartEvent=false},playStateChange:function(a){this._eventTarget.fire(PlayerEvent.PLAY_STATE_CHANGE,a)},timeUpdate:function(){this._eventTarget.fire(PlayerEvent.TIME_UPDATE)},contentEnd:function(){this._eventTarget.fire(PlayerEvent.CONTENT_END)},goToSlide:function(){this._eventTarget.fire(PlayerEvent.GO_TO_SLIDE)},playerActivated:function(){this._eventTarget.fire(PlayerEvent.PLAYER_ACTIVATED)},playerDeactivated:function(){this._eventTarget.fire(PlayerEvent.PLAYER_DEACTIVATED)},html5VideoError:function(b,a){this._eventTarget.fire(PlayerEvent.HTML5_VIDEO_ERROR,{errorCode:b,currentTime:a})},showCaptionScript:function(){this._eventTarget.fire(PlayerEvent.SHOW_CAPTION_SCRIPT)},hideCaptionScript:function(){this._eventTarget.fire(PlayerEvent.HIDE_CAPTION_SCRIPT)},updateCaptionScriptSeekLimit:function(a){this._eventTarget.fire(PlayerEvent.UPDATE_CAPTION_SCRIPT_SEEK_LIMIT,a)}},{PLAYER_LOADED:"player_loaded",DO_START:"do_start",PLAY_STATE_CHANGE:"play_state_change",TIME_UPDATE:"time_update",CONTENT_END:"content_end",GO_TO_SLIDE:"go_to_slide",PLAYER_DEACTIVATED:"player_deactivated",PLAYER_ACTIVATED:"player_activated",HTML5_VIDEO_ERROR:"html5_video_error",SHOW_CAPTION_SCRIPT:"show_caption_script",HIDE_CAPTION_SCRIPT:"hide_caption_script",UPDATE_CAPTION_SCRIPT_SEEK_LIMIT:"update_caption_script_seek_limit"});var ContentApi=Base.extend({getContentId:function(){if(uniPlayerData==null){return null}return uniPlayerData.getContentId()},getDuration:function(){if(uniPlayerData==null){return 0}return uniPlayerData.getDuration()},getCurrentTime:function(){if(uniPlayerData==null){return 0}return uniPlayerData.getCurrentTime()},getCumulativePlayedTime:function(){if(uniPlayerData==null){return 0}return uniPlayerData.getCumulativePlayedTime()},getCurrentPage:function(){if(uniPlayerData==null){return 0}return uniPlayerData.getCurrentPage()},getTotalPage:function(){if(uniPlayerData==null){return 0}return uniPlayerData.getTotalPages()},getCumulativePage:function(){if(uniPlayerData==null){return""}return uniPlayerData.getCumulativePages()},setInitLimitTime:function(a){if(uniPlayerData==null){return}uniPlayerData.setInitLimitTime(a)},setContentStartTime:function(a){if(uniPlayerData==null){return}uniPlayerData.setContentStartTime(a)},getCaptionList:function(){if(uniPlayerConfig==null){return[]}return uniPlayerConfig.getClosedCaptionList()}});function GetContentId(){var a=new ContentApi();return a.getContentId()}function GetCurrentTime(){var a=new ContentApi();return a.getCurrentTime()}function GetTotalDuration(){var a=new ContentApi();return a.getDuration()}function GetCumulativePlayedTime(){var a=new ContentApi();return a.getCumulativePlayedTime()}function GetCurrentPage(){var a=new ContentApi();return a.getCurrentPage()}function GetTotalPage(){var a=new ContentApi();return a.getTotalPage()}function GetCumulativePage(){var a=new ContentApi();return a.getCumulativePage()}function SetInitLimitTime(b){var a=new ContentApi();return a.setInitLimitTime(b)}function SetContentStartTime(b){var a=new ContentApi();return a.setContentStartTime(b)}function GetCaptionList(){var a=new ContentApi();return a.getCaptionList()};