# 중앙대학교 eClass 강의 다운로더 (Windows 용)

**업데이트**: 2025-04-18

## 개요
중앙대학교 eClass에서 수강 중인 강의 모듈을 **선택적으로** 다운로드하기 위한 자동화 스크립트입니다.  
강의 목록을 수집하고, 사용자가 지정한 모드를 통해 원하는 강의를 `.mp4` 또는 HLS(`.m3u8`) 형태로 저장합니다.

## 주요 기능
- **선택 다운로드**: 전체, 번호 지정, 범위 지정, 제외 지정 모드 지원
- **인트로/프리로더 필터링**: intro.mp4, prelodaer.mp4 영상 자동 스킵
- **이어보기 팝업 자동 클릭**
- **진행 상태 표시**: 단계별 로그 및 비디오 탐지 대기 시간 안내
- **가상환경 자동화**: 실행 시 `venv` 생성, Selenium/Requests 설치, 자동 활성화
- **쿠키 캡처**: Canvas·eClass 세션 쿠키 자동 수집 및 주입

## 파일 구조
```
project-root/
├─ downloader.py             # 메인 실행 스크립트
├─ bin/
│   ├─ eclass-venv/          # 자동 생성 가상환경
│   ├─ selenium-profile/     # 크롬 프로필 폴더
│   ├─ cookies.json          # 세션 쿠키 파일
│   └─ save_cookies.py       # 쿠키 캡처 유틸리티
└─ README.md                 # 프로젝트 설명 문서
```

## 사전 준비
1. **Python 3.8+** 설치 (Homebrew, apt, etc.)  
2. 시스템에 **Google Chrome** 설치  
3. `chromedriver`가 `PATH`에 포함되어 있거나, `webdriver.Chrome()`이 자동으로 탐지 가능해야 합니다.

## 설치 및 실행
```bash
# 레포지토리 클론
$ git clone https://github.com/<your-username>/eclass-downloader.git
$ cd eclass-downloader

# 메인 스크립트 실행
# 최초 실행 시 자동으로 가상환경 생성 및 필수 패키지 설치, 이후 venv 내부에서 계속 실행됩니다
$ python downloader.py
```

## 사용법
1. 프로그램 정보를 확인하고, **강좌 ID**를 입력합니다.  
2. 다운로드 모드를(`A`/`N`/`R`/`E`) 선택하고, 필요한 경우 번호·범위·제외 대상을 지정합니다.  
3. 선택된 강의가 순차적으로 다운로드됩니다.  
4. 저장된 파일은 `./<강좌명>/` 폴더에 위치합니다.

### 다운로드 모드
| 모드 | 설명                          | 입력 예시      |
|:----:|:-----------------------------|:---------------|
| A    | 전체 강의 다운로드           | (입력) `A`     |
| N    | 특정 번호 지정               | (입력) `N`, `1,4,6` |
| R    | 범위 지정                    | (입력) `R`, `2-5`   |
| E    | 제외 번호 지정               | (입력) `E`, `3,7`   |

## 쿠키 캡처
`cookies.json`이 없거나 불완전하면, `save_cookies.py`가 자동 실행되어 다음 과정을 안내합니다:  
1. Canvas 로그인 페이지 열기 → 로그인 후 Enter  
2. eClass 모듈 페이지 열기 → Enter  
3. 캡처된 쿠키가 `bin/cookies.json`에 저장

## 예시
```bash
[쿠키 확인] 정상
[강좌 설정] 강좌 ID ▶ 122927
[브라우저] 준비 완료
[강좌 확인] 강좌명: 미적분학 오리엔테이션
[목록 수집] 총 10개 강의 발견
[설정] 다운로드 모드 선택: A=전체, N=번호, R=범위, E=제외
모드 ▶ R
범위 ▶ 1-3
[다운로드] 1강 미적분학 오리엔테이션
...
[완료] 저장: 1강_미적분_오리엔테이션.mp4
```

## 라이선스
MIT License  

---  
**문의**: https://chatgpt.com

